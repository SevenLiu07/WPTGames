function q_email(){var e=document.getElementById("email").value,t=document.getElementById("div_email");check_passport_core(e)?(show_error_msg(""),t.style.visibility="visible",t.className="rMainDecide ie6png rMainDecide_right"):(t.style.visibility="visible",t.className="rMainDecide ie6png rMainDecide_err")}function q_checkUPassword(){var e=document.getElementById("password"),t=document.getElementById("div_password");checkPassword(e.value,"password",6,16)?(show_error_msg(""),t.className="rMainDecide ie6png rMainDecide_right",t.style.visibility="visible"):(t.className="rMainDecide ie6png rMainDecide_err",t.style.visibility="visible")}function reloadCaptcha_reg(){var e={},t=baseUrl+"page/Captcha/GetToken";new Request(t,{method:"GET"}).on("complete",function(e){hasCaptchaImage_reg=!0;var t=e.text;captchaToken_reg.value=t,captchaImg_reg.src=baseUrl+"page/Captcha/GenerateCaptchaImg?time="+(new Date).getTime()+"&token="+t}).send(e)}function ShowCaptchaWhenRegister(){var e={},t=baseUrl+"page/Captcha/ShowCaptchaWhenRegister";new Request(t,{method:"POST",maxTime:8e3}).on("complete",function(e){var t=JSON.parse(e.text),r=t.Value;"1"==r?(yzm_reg.style.display="block",hasCaptchaImage_reg||reloadCaptcha_reg()):yzm_reg.style.display="none"}).send(e)}function setAttribute(e,t,r){"object"==typeof e&&"string"==typeof t&&("class"==t?e.className=r:e.setAttribute(t,r))}function close_regist(){var e=window.parent.document.getElementById("logina"),t=window.parent.document.getElementById("signa");$("#email").value="",$("#password").value="",$("#catpchaCode_reg").value="",show_error_msg(""),$("#div_email").style.visibility="hidden",$("#div_password").style.visibility="hidden",e.className=" ",t.className=" ",funPlaceholder(email),funPlaceholder(password),funPlaceholder(catpchaCode_reg)}function show_error_msg(e){document.getElementById("error_mess").innerText=e}function check_passport_core(e){if(null==e||""==e)return show_error_msg("Please input your email account"),$("#email").focus(),!1;if(e.length<6)return show_error_msg("Your email account is too short, please input the correct email"),!1;for(var t="abcdefghijklmnopqrstuvwxyz1234567890_ABCDEFGHIJKLMNOPQRSTUVWXYZ.-@",r=0;r<e.length;r++){if(" "==e.charAt(r))return show_error_msg("Sorry, emailbox cannot consist of space"),!1;if(t.indexOf(e.charAt(r))==-1)return show_error_msg("Sorry, email account cannot consist of symbols except _.-@"),!1;if(0==r){var a=e.charAt(r);if("_"==a||"."==a||"-"==a||"@"==a)return show_error_msg("Sorry，email account cannot start or end with marks like _ . - @"),!1}if(r==e.length-1){var s=e.charAt(r);if("_"==s||"."==s||"-"==s||"@"==s)return show_error_msg("Sorry，email account cannot start or end with marks like _ . - @"),!1}}var i=e.split("@");return i.length>2?(show_error_msg("Please input a correct email address"),!1):e.indexOf("@")==-1?(show_error_msg("Please input a correct email address"),!1):e.indexOf(".")!=-1||(show_error_msg("Please input a correct email address"),!1)}function checkPassword(e,t,r,a){var s=",'\"“”‘ ;";if(null==e||""==e)return show_error_msg("Please input 6-16 characters which can be letters, numbers, symbols excluding ,;'"),!1;if(e.length<r)return show_error_msg("Your password is too short. Please input 6-16 characters which can be letters, numbers, symbols excluding ,;'"),!1;if(hasFullshape(e))return show_error_msg("Please input 6-16 characters which can be letters, numbers, symbols excluding ,;'"),!1;for(var i=0;i<e.length;i++)if(s.indexOf(e.charAt(i))!=-1)return show_error_msg("Please input 6-16 characters which can be letters, numbers, symbols excluding ,;'"),!1;return!0}function hasFullshape(e){if(null==e||""==e)return!0;for(var t=/[^\x00-\xff]/g,r=0;r<e.length;r++)if(t.test(e.charAt(r)))return!0;return!1}function register_onsubmit_email(){var e="0",t=new Date,r=(t.getFullYear(),document.getElementById("div_email")),a=document.getElementById("div_password"),s=window.document.register.passport.value,i=window.document.register.password.value;return"1"==window.document.register.SubmitMark.value?(show_error_msg("Submitted. Please wait"),e="1",!1):(ShowCaptchaWhenRegister(),null==s||""==s||"Please input your email account"==s?(r.className="rMainDecide ie6png rMainDecide_err",r.style.visibility="visible",show_error_msg("Please input your email account"),$("#email").focus(),e="1",!1):check_passport_core(s)?null==i||""==i||"Please enter your password"==i?(a.className="rMainDecide ie6png rMainDecide_err",a.style.visibility="visible",show_error_msg("Please input 6-16 characters which can be letters, numbers, symbols excluding ,;' "),$("#password").focus(),e="1",!1):checkPassword(i,"password",6,17)?("block"==yzm_reg.style.display&&""==catpchaCode_reg.value?show_error_msg("Please input your catpchaCode"):(show_error_msg(""),a.className="rMainDecide ie6png rMainDecide_right",a.style.visibility="visible"),void("0"==e&&(window.document.register.SubmitMark.value=1,window.parent.regist()))):(q_checkUPassword(),$("#password").focus(),e="1",!1):(r.className="rMainDecide ie6png rMainDecide_err",r.style.visibility="visible",$("#email").focus(),e="1",!1))}function funPlaceholder(e){var t="";if(e&&!("placeholder"in document.createElement("input"))&&(t=e.getAttribute("placeholder"))){var r=e.id;r||(r="placeholder_"+(new Date).getTime(),e.id=r);var a=document.createElement("label");a.htmlFor=r,a.style.position="absolute",a.style.top="10px",a.style.left=0,a.style.margin="7px 0 7px 10px",a.style.color="gray",a.style.fontSize="12px",a.style.lineHeight="26px",a.style.cursor="text",e.parentNode.insertBefore(a,e),e.onkeydown=function(){a.innerHTML=""},e.addEventListener("input",function(){a.innerHTML=""},!1),e.onblur=function(){""===this.value&&(a.innerHTML=t)},""===e.value&&(a.innerHTML=t)}}var http_type=location.protocol+"//",lHost=window.location.host,getHost=lHost.substring(4),baseUrl=http_type+"napi."+getHost+"/WebAPI/",baseUrls=http_type+location.host+"/";subbutton=0;var yzm_reg=$("#yzm_reg"),catpchaCode_reg=$("#catpchaCode_reg"),captchaImg_reg=$("#captchaImg_reg"),captchaToken_reg=$("#captchaToken_reg");window.onload=function(){ShowCaptchaWhenRegister()};var hasCaptchaImage_reg=!1,fb_btns=document.getElementById("fb_btns");fb_btns.onclick=function(){if(window.localStorage){var e=window.localStorage;e.removeItem("newH5")}document.getElementById("fbBtn");top.location.href=baseUrl+"RedirectFacebookLoginEntrance.htm"};var login_close=window.parent.document.getElementById("close_pop");login_close.addEventListener?login_close.addEventListener("click",close_regist,!1):login_close.attachEvent&&login_close.attachEvent("onclick",close_regist);var email=document.getElementById("email"),password=document.getElementById("password");funPlaceholder(email),funPlaceholder(password),funPlaceholder(catpchaCode_reg);