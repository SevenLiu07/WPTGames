function q_email(){var e=document.getElementById("email").value,i=document.getElementById("div_email");check_passport_core(e)?(show_error_email(""),i.style.visibility="visible",i.className="rMainDecide ie6png rMainDecide_right"):(i.style.visibility="visible",i.className="rMainDecide ie6png rMainDecide_err")}function q_checkUPassword(){var e=document.getElementById("password"),i=document.getElementById("div_password"),t=document.getElementById("div_cpassword");if(checkPassword(e.value,"password",6,16)){var n=document.getElementById("cpassword").value;null==n||""==n?(show_error_msg(""),i.className="rMainDecide ie6png rMainDecide_right",i.style.visibility="visible"):e.value!=n?(i.className="rMainDecide ie6png rMainDecide_err",t.className="rMainDecide ie6png rMainDecide_err",t.style.visibility="visible",i.style.visibility="visible",show_error_msg("The password does not match. Please input again..")):(show_error_msg(""),i.className="rMainDecide ie6png rMainDecide_right",t.className="rMainDecide ie6png rMainDecide_right",t.style.visibility="visible",i.style.visibility="visible")}else i.className="rMainDecide ie6png rMainDecide_err",i.style.visibility="visible"}function q_checkCpassword(){var e=document.getElementById("cpassword"),i=document.getElementById("div_password"),t=document.getElementById("div_cpassword");if(checkPassword(e.value,"cpassword",6,16)){var n=document.getElementById("password").value;null==n||""==n?(show_error_msg("6-16 letter/digit/characters, without comma, semicolon or quotation mark"),t.className="rMainDecide ie6png rMainDecide_err",t.style.visibility="visible",document.getElementById("password").focus()):e.value!=n?(i.className="rMainDecide ie6png rMainDecide_err",t.className="rMainDecide ie6png rMainDecide_err",t.style.visibility="visible",i.style.visibility="visible",show_error_msg("The password does not match. Please input again..")):(show_error_msg(""),i.className="rMainDecide ie6png rMainDecide_right",t.className="rMainDecide ie6png rMainDecide_right",t.style.visibility="visible",i.style.visibility="visible")}else t.className="rMainDecide ie6png rMainDecide_err",t.style.visibility="visible"}function show_error_msg(e){var i=document.getElementById("error_mess_cg");return i.innerText=e,!1}function show_error_email(e){var i=document.getElementById("error_mess_email");return i.innerText=e,!1}function check_passport_core(e){if(null==e||""==e)return show_error_email("Please enter your Email"),!1;if(e.length<6)return show_error_email("Your email account is too short, please input the correct email"),!1;for(var i="abcdefghijklmnopqrstuvwxyz1234567890_ABCDEFGHIJKLMNOPQRSTUVWXYZ.-@",t=0;t<e.length;t++){if(" "==e.charAt(t))return show_error_email("Sorry, emailbox cannot consist of space"),!1;if(i.indexOf(e.charAt(t))==-1)return show_error_email("Sorry, email account cannot consist of symbols except _.-@"),!1;if(0==t){var n=e.charAt(t);if("_"==n||"."==n||"-"==n||"@"==n)return show_error_email("Sorry，email account cannot start or end with marks like _ . - @"),!1}if(t==e.length-1){var r=e.charAt(t);if("_"==r||"."==r||"-"==r||"@"==r)return show_error_email("Sorry，email account cannot start or end with marks like _ . - @"),!1}}var s=e.split("@");return s.length>2?(show_error_email("Please input a correct email address"),!1):e.indexOf("@")==-1?(show_error_email("Please input a correct email address"),!1):e.indexOf(".")!=-1||(show_error_email("Please input a correct email address"),!1)}function checkPassword(e,i,t,n){var r=",'\"“”‘ ;";if(null==e||""==e)return show_error_msg("Please input 6-16 characters which can be letters, numbers, symbols excluding ,;'"),!1;if(e.length<t)return show_error_msg("Your password is too short. Please input 6-16 characters which can be letters, numbers, symbols excluding ,;'"),!1;if(hasFullshape(e))return show_error_msg("Please input 6-16 characters which can be letters, numbers, symbols excluding ,;'"),!1;for(var s=0;s<e.length;s++)if(r.indexOf(e.charAt(s))!=-1)return show_error_msg("Please input 6-16 characters which can be letters, numbers, symbols excluding ,;'"),!1;return!0}function hasFullshape(e){if(null==e||""==e)return!0;for(var i=/[^\x00-\xff]/g,t=0;t<e.length;t++)if(i.test(e.charAt(t)))return!0;return!1}function sendEmail(){var e=window.parent.document.getElementById("dialog_em"),i=window.parent.document.getElementById("dialog_info"),t=window.parent.document.getElementById("info_tips"),n="";n=window.parent.location.parameters.step==-12?decodeURIComponent(window.parent.location.parameters.email):document.find(".email_send").value;var r={version:Math.random(),email:n},s=baseUrl+"Passport/ToForgetPassword";new Request(s,{method:"POST"}).on("complete",function(r){var s=JSON.parse(r.text);if(1==s.State){e.close(),window.document.send_email.sub_sd_mail.value=0,i.open();var a="";a=1==n.contains("@gmail.com")?'<a target="_blank" href="https://mail.google.com/">check your inbox</a>':1==n.contains("@outlook.com")?'<a target="_blank" href="https://www.outlook.com/">check your inbox</a>':1==n.contains("@hotmail.com")?'<a target="_blank" href="https://www.hotmail.com/">check your inbox</a>':1==n.contains("@yahoo.com")?'<a target="_blank" href="https://www.yahoo.com/">check your inbox</a>':"check your inbox";var o="";o+="We've sent a link to reset your password. Please "+a+" . The link will expire in one hour.",t.innerHTML=o,qd_btn.style.display="block",fg_pwd_btn.style.display="none",next_oldclub.style.display="none"}else 11==s.State?document.getElementById("error_mess_email").innerText=s.Message:document.getElementById("error_mess_email").innerText=s.Message}).send(r)}function resetPwd(){var e=window.parent.document.getElementById("dialog_em"),i=window.parent.document.getElementById("dialog_info"),t=window.parent.document.getElementById("info_tips"),n=document.getElementById("password"),r=document.getElementById("cpassword"),s=window.parent.rsaEncrypto(n.value),a=window.parent.rsaEncrypto(r.value),o={version:Math.random(),pwd:s,pwd2:a},l=baseUrl+"Passport/ResetPassword";new Request(l,{method:"POST"}).on("complete",function(n){var r=JSON.parse(n.text);if(1==r.State){var s="";e.close(),i.open(),1==r.Value?(titles.innerHTML="Congratulations!",t.innerHTML=r.Message,qd_btn.style.display="none",fg_pwd_btn.style.display="none",next_oldclub.style.display="block"):(titles.innerHTML="Change Password",s+="Password successfully updated",t.innerHTML=s,qd_btn.style.display="block",fg_pwd_btn.style.display="none",next_oldclub.style.display="none",setTimeout(function(){parent.window.location.href=baseUrls+"game-flash.html"},5e3))}else window.document.change_pwd.sub_cg_pwd.value=0,document.getElementById("error_mess_cg").innerHTML=r.Message}).send(o)}function change_onsubmit_email(){var e="0",i=new Date,t=(i.getFullYear(),document.getElementById("div_password")),n=(document.getElementById("div_cpassword"),window.document.change_pwd.password.value),r=window.document.change_pwd.cpassword.value;return"1"==window.document.change_pwd.sub_cg_pwd.value?(show_error_msg("Submitted. Please wait"),e="1",!1):null==n||""==n||"Please enter your Password"==n?(t.className="rMainDecide ie6png rMainDecide_err",t.style.visibility="visible",show_error_msg("Please enter your Password"),e="1",!1):null==n||""==n||""==n||"Please input your password"==n?(t.className="rMainDecide ie6png rMainDecide_err",t.style.visibility="visible",show_error_msg("6-15 letter/digit/characters, without comma, semicolon or quotation mark"),e="1",!1):checkPassword(n,"password",6,16)?checkPassword(r,"cpassword",6,16)?n!=r?(q_checkUPassword(),q_checkCpassword(),e="1",!1):void("0"==e&&(window.document.change_pwd.sub_cg_pwd.value=1,resetPwd())):(q_checkCpassword(),e="1",!1):(q_checkUPassword(),e="1",!1)}function onsubmit_email(){var e="0",i=new Date,t=(i.getFullYear(),document.getElementById("div_email")),n=window.document.send_email.passport.value;return"1"==window.document.send_email.sub_sd_mail.value?(show_error_email("Submitted. Please wait"),e="1",!1):null==n||""==n||"Please input your email account"==n?(t.className="rMainDecide ie6png rMainDecide_err",t.style.visibility="visible",show_error_email("Please input your email account"),e="1",!1):check_passport_core(n)?(show_error_email(""),t.className="rMainDecide ie6png rMainDecide_right",t.style.visibility="visible",void("0"==e&&(window.document.send_email.sub_sd_mail.value=1,setTimeout(function(){window.document.send_email.sub_sd_mail.value=0},2e3),sendEmail()))):(t.className="rMainDecide ie6png rMainDecide_err",t.style.visibility="visible",e="1",!1)}var http_type=location.protocol+"//",lHost=window.location.host,getHost=lHost.substring(4),baseUrl=http_type+"napi."+getHost+"/WebAPI/",baseUrls=http_type+location.host+"/",dialog_info=window.parent.document.getElementById("dialog_info"),forget_btn=window.parent.document.getElementById("forget_btn"),fg_pwd_btn=window.parent.document.getElementById("fg_pwd_btn"),next_oldclub=window.parent.document.getElementById("next_oldclub"),titles=window.parent.document.getElementById("titles");fg_pwd_btn.style.display="block",forget_btn.onclick=function(){sendEmail()};var users_mail=$("users_mail"),qd_btn=window.parent.document.getElementById("qd_btn");