function checkParamsWithoutCode(){ShowCaptchaWhenLogin();var e=userEmail.value,a=$("#div_password"),t=$("#div_email");return check_passport_core(e)?password.value?"block"!=yzm.style.display||""!=catpchaCode.value?(window.parent.login(),!0):void show_error_msg("Please input your catpchaCode"):(show_error_msg("Please input your password"),a.className="rMainDecide_err",a.style.visibility="visible",!1):(t.className="rMainDecide_err",t.style.visibility="visible",!1)}function reloadCaptcha(){var e={},a=baseUrl+"page/Captcha/GetToken";new Request(a,{method:"GET"}).on("complete",function(e){hasCaptchaImage=!0;var a=e.text;$("#captchaToken").value=a,$("#captchaImg").src=baseUrl+"page/Captcha/GenerateCaptchaImg?time="+(new Date).getTime()+"&token="+a}).send(e)}function ShowCaptchaWhenLogin(){var e=userEmail.value,a={email:e},t=baseUrl+"page/Captcha/ShowCaptchaWhenLogin";new Request(t,{method:"POST",maxTime:8e3}).on("complete",function(e){var a=JSON.parse(e.text),t=a.Value;"1"==t?(yzm.style.display="block",hasCaptchaImage||reloadCaptcha()):yzm.style.display="none"}).send(a)}function setAttribute(e,a,t){"object"==typeof e&&"string"==typeof a&&("class"==a?e.className=t:e.setAttribute(a,t))}function remeber_account(){var e=$("#userEmail"),a=localStorage.getItem("emial_user");""!=a&&null!=a&&(e.value=localStorage.getItem("emial_user"),funPlaceholder(e))}function close_login(){var e=window.parent.document.getElementById("logina"),a=window.parent.document.getElementById("signa"),t=$("#check_em");0==t.checked&&($("#userEmail").value=""),$("#pwd1").value="",$("#catpchaCode").value="",show_error_msg(""),$("#div_email").style.visibility="hidden",$("#div_password").style.visibility="hidden",e.className="",a.className="",funPlaceholder(userEmail),funPlaceholder(password),funPlaceholder(captchaToken),funPlaceholder(catpchaCode)}function show_error_msg(e){$("#error_msg").innerHTML=e}function check_passport_core(e){var a;if(null==e||""==e)return show_error_msg("Please input your email account"),!1;if(e.length<6)return show_error_msg("Your email account is too short, please input the correct email "),!1;for(var t="abcdefghijklmnopqrstuvwxyz1234567890_ABCDEFGHIJKLMNOPQRSTUVWXYZ.-@",o=0;o<e.length;o++){if(" "==e.charAt(o))return userEmail.value=e.replace(/[ ]/g,""),!0;if(t.indexOf(e.charAt(o))==-1)return show_error_msg("Sorry, email account cannot consist of symbols except _.-@"),!1;if(0==o){var r=e.charAt(o);if("_"==r||"."==r||"-"==r||"@"==r)return show_error_msg("Sorry，email account cannot start or end with marks like _ . - @"),!1}if(o==e.length-1){var n=e.charAt(o);if("_"==n||"."==n||"-"==n||"@"==n)return show_error_msg("Sorry，email account cannot start or end with marks like _ . - @"),!1}a=e.indexOf("@")!==-1?"EMAIL":"ACCOUNT"}return $("#logintype").value=a,parent.localStorage.setItem("userEmail",$("#userEmail").value),!0}function funPlaceholder(e){var a="";if(e&&!("placeholder"in document.createElement("input"))&&(a=e.getAttribute("placeholder"))){var t=e.id;t||(t="placeholder_"+(new Date).getTime(),e.id=t);var o=document.createElement("label");o.htmlFor=t,o.style.position="absolute",o.style.top="10px",o.style.left=0,o.style.margin="7px 0 7px 10px",o.style.color="gray",o.style.fontSize="12px",o.style.lineHeight="26px",o.style.cursor="text",e.parentNode.insertBefore(o,e),e.onkeydown=function(){o.innerHTML=""},e.addEventListener("input",function(){o.innerHTML=""},!1),e.onblur=function(){""===this.value&&(o.innerHTML=a)},""===e.value&&(o.innerHTML=a)}}var userEmail=$("#userEmail"),password=$("#pwd1"),catpchaCode=$("#catpchaCode"),captchaToken=$("#captchaToken"),http_type=location.protocol+"//",lHost=window.location.host,getHost=lHost.substring(4),baseUrl=http_type+"napi."+getHost+"/WebAPI/",baseUrls=http_type+location.host+"/";userEmail.on("blur",function(){var e=userEmail.value,a=$("#div_email");check_passport_core(e)?(show_error_msg(""),a.style.visibility="hidden"):(a.className="rMainDecide_err",a.style.visibility="visible"),ShowCaptchaWhenLogin()}),password.on("blur",function(){var e=$("#div_password"),a=userEmail.value,t=$("#div_email");password.value?check_passport_core(a)?(show_error_msg(""),e.style.visibility="hidden"):(t.className="rMainDecide_err",t.style.visibility="visible",e.style.visibility="hidden"):(show_error_msg("Please input your password"),e.className="rMainDecide_err",e.style.visibility="visible"),ShowCaptchaWhenLogin()}),catpchaCode.on("blur",function(){var e=($("#div_captcha"),catpchaCode.value);show_error_msg(e?"":"Please input your catpchaCode")});var ifrm=document.getElementById("xgmm"),dialog=window.parent.document.getElementById("dialog"),dialog_em=window.parent.document.getElementById("dialog_em"),logina=window.parent.document.getElementById("logina");ifrm.onclick=function(){dialog.close(),dialog_em.open(),logina.className=""};var yzm=$("#yzm"),hasCaptchaImage=!1;$("#fbBtn").on("click",function(){if(window.localStorage){var e=window.localStorage;e.removeItem("newH5")}document.getElementById("fbBtn");top.location.href=baseUrls+"RedirectFacebookLoginEntrance.htm"}),window.onload=function(){remeber_account()};var login_close=window.parent.document.getElementById("close_pop");login_close.addEventListener?login_close.addEventListener("click",close_login,!1):login_close.attachEvent&&login_close.attachEvent("onclick",close_login),funPlaceholder(userEmail),funPlaceholder(password),funPlaceholder(captchaToken),funPlaceholder(catpchaCode);