var tgmp_minor =  0.14121911558322608;
function googletag_go(){googletag.cmd=googletag.cmd||[],function(){var a=document.createElement("script");a.async=!0,a.type="text/javascript",a.src="//www.googletagservices.com/tag/js/gpt.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}(),googletag.cmd.push(function(){googletag.defineSlot("/1011860/listein_live_preroll",[300,250],"preroll_companion").addService(googletag.companionAds()).addService(googletag.pubads()),googletag.companionAds().setRefreshUnfilledSlots(!0),googletag.pubads().enableVideoAds(),googletag.enableServices()})}function onYouTubeIframeAPIReady(){tgmp.videoyoutube.onYTAPIReady()}var __tgmpcomm__=function(){"use strict";function isFunction(a){var b={};return a&&"[object Function]"===b.toString.call(a)}function TGMPCommResult(){this._success=null,this._error=null}function parseArgs(a){for(var b=[],c=0;c<a.length;++c)b.push(a[c]);return b}function TGMPCommSender(a,b,c){this._window=a,this._origin="*",this._obj=b,this._msgs={};var d=this;window.addEventListener("message",function(a){d._onMsg(a)},!1),c.forEach(function(a){d.__proto__[a]=function(){return d._invoke(a,parseArgs(arguments))}})}function TGMPCommReceiver(objectName){var callback_handler=function(a,b,c,d){return function(){var e={id:a,cbIdx:d,callback_data:JSON.stringify(parseArgs(arguments)),type:TGMPComm_RECEIVER};b.postMessage(e,c)}};window.addEventListener("message",function(e){if(e.data.type===TGMPComm_SENDER&&e.data.id&&e.data.send&&e.data.send.obj===objectName){var send=e.data.send,obj=eval(send.obj),method=eval(send.obj+"."+send.method),res=null,params=JSON.parse(send.params);send.cbIdxs.forEach(function(a){params[a]=callback_handler(e.data.id,e.source,e.origin,a)});try{res=method.apply(obj,params);var msg={id:e.data.id,result:JSON.stringify(res),type:TGMPComm_RECEIVER}}catch(a){console.error(a);var msg={id:e.data.id,error:JSON.stringify(a.toString()),type:TGMPComm_RECEIVER}}e.source.postMessage(msg,e.origin)}},!1)}var TGMPComm_SENDER="__TGSENDER__",TGMPComm_RECEIVER="__TGRECEIVER__";return TGMPCommResult.prototype.success=function(a){return this._success=a,this},TGMPCommResult.prototype.error=function(a){return this._error=a,this},TGMPCommSender.prototype._onMsg=function(a){if(a.data&&a.data.type&&a.data.type===TGMPComm_RECEIVER&&a.data.id&&a.data.id in this._msgs){var b=this._msgs[a.data.id];if(b.result_callback&&(a.data.result||a.data.error)){var c=b.result_callback;a.data.error?c._error&&c._error(JSON.parse(a.data.error)):c._success&&c._success(JSON.parse(a.data.result)),b.result_callback=null}else if("cbIdx"in a.data){var d=a.data.cbIdx,e=b.callbacks[d],f=JSON.parse(a.data.callback_data);try{e.apply(e,f)}catch(a){console.error(a)}}0===Object.keys(b.callbacks).length&&null===b.result&&delete this._msgs[a.data.id]}},TGMPCommSender.prototype._postMsg=function(a,b,c,d){"undefined"==typeof c&&(c=[]);var e={obj:this._obj,method:b,params:JSON.stringify(c),cbIdxs:d};return this._window.postMessage({type:TGMPComm_SENDER,id:a,send:e},"*")},TGMPCommSender.prototype._invoke=function(a,b){var c="X"+Math.random()+(new Date).getTime(),d=new TGMPCommResult,e={start:(new Date).getTime(),result_callback:d,callbacks:{}},f=[];return b.forEach(function(a,c){isFunction(a)&&(e.callbacks[c]=a,b[c]=void 0,f.push(c))}),this._msgs[c]=e,this._postMsg(c,a,b,f),d},{TGMPCommSender:TGMPCommSender,TGMPCommReceiver:TGMPCommReceiver}}(),TGMPCommSender=__tgmpcomm__.TGMPCommSender,TGMPCommReceiver=__tgmpcomm__.TGMPCommReceiver;!function(a,b,c){"use strict";if(!a.PushStream){var d={},e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=function(a){return(a<10?"0":"")+a};d.dateToUTCString=function(a){var b=g(a.getUTCHours())+":"+g(a.getUTCMinutes())+":"+g(a.getUTCSeconds());return e[a.getUTCDay()]+", "+g(a.getUTCDate())+" "+f[a.getUTCMonth()]+" "+a.getUTCFullYear()+" "+b+" GMT"};var h=function(){for(var a=arguments[0]||{},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty&&!c.hasOwnProperty(d)||(a[d]=c[d])}return a},i=/^[\],:{}\s]*$/,j=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,k=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,l=/(?:^|:|,)(?:\s*\[)+/g,m=function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")};d.parseJSON=function(b){if(!b||!t(b))return null;if(b=m(b),a.JSON&&a.JSON.parse)try{return a.JSON.parse(b)}catch(a){throw"Invalid JSON: "+b}if(i.test(b.replace(j,"@").replace(k,"]").replace(l,"")))return new Function("return "+b)();throw"Invalid JSON: "+b};var n=function(a){var b={};return b[a.tagArgument]="",b[a.timeArgument]="",b[a.eventIdArgument]="",a.messagesControlByArgument&&(b[a.tagArgument]=Number(a._etag),a._lastModified?b[a.timeArgument]=a._lastModified:a._lastEventId&&(b[a.eventIdArgument]=a._lastEventId)),b},o=function(){return(new Date).getTime()},p=function(){return{_:o()}},q=function(b){var c=b;if("object"==typeof b){c="";for(var d in b)b.hasOwnProperty&&!b.hasOwnProperty(d)||(c+="&"+d+"="+a.escape(b[d]));c=c.substring(1)}return c||""},r=function(a,b){return a+(a.indexOf("?")<0?"?":"&")+q(b)},s=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},t=function(a){return"[object String]"===Object.prototype.toString.call(a)},u=function(a){return"[object Date]"===Object.prototype.toString.call(a)},v={logger:null,debug:function(){"debug"===O.LOG_LEVEL&&v._log.apply(v._log,arguments)},info:function(){"info"!==O.LOG_LEVEL&&"debug"!==O.LOG_LEVEL||v._log.apply(v._log,arguments)},error:function(){v._log.apply(v._log,arguments)},_initLogger:function(){var b=a.console;b&&b.log&&(b.log.apply?v.logger=b.log:"object"==typeof b.log&&Function.prototype.bind?v.logger=Function.prototype.bind.call(b.log,b):"object"==typeof b.log&&Function.prototype.call&&(v.logger=function(){Function.prototype.call.call(b.log,b,Array.prototype.slice.call(arguments))}))},_log:function(){if(v.logger||v._initLogger(),v.logger)try{v.logger.apply(a.console,arguments)}catch(b){v._initLogger(),v.logger&&v.logger.apply(a.console,arguments)}var c=b.getElementById(O.LOG_OUTPUT_ELEMENT_ID);if(c){for(var d="",e=0;e<arguments.length;e++)d+=arguments[e]+" ";c.innerHTML+=d+"\n";var f=c.innerHTML.split("\n");f.length>100&&(c.innerHTML=f.slice(-100).join("\n"))}}},w={_getXHRObject:function(b){var c=!1;if(b){try{c=new a.XDomainRequest}catch(a){v.info(a)}if(c)return c}try{c=new a.XMLHttpRequest}catch(b){try{c=new a.ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{c=new a.ActiveXObject("Microsoft.XMLHTTP")}catch(a){c=!1}}}return c},_send:function(b,c){b=b||{},b.timeout=b.timeout||3e4;var d=w._getXHRObject(b.crossDomain);if(d&&b.url){w.clear(b),b.xhr=d,a.XDomainRequest&&d instanceof a.XDomainRequest?(d.onload=function(){b.afterReceive&&b.afterReceive(d),b.success&&b.success(d.responseText)},d.onerror=d.ontimeout=function(){b.afterReceive&&b.afterReceive(d),b.error&&b.error(d.status)}):d.onreadystatechange=function(){4===d.readyState&&(w.clear(b),b.afterReceive&&b.afterReceive(d),200===d.status?b.success&&b.success(d.responseText):b.error&&b.error(d.status))},b.beforeOpen&&b.beforeOpen(d);var e={},f=null,g="GET";c?(f=q(b.data),g="POST"):e=b.data||{},d.open(g,r(b.url,h({},e,p())),!0),b.beforeSend&&b.beforeSend(d);var i=function(){w.clear(b);try{d.abort()}catch(a){v.info(a)}b.error(304)};return c?d.setRequestHeader&&(d.setRequestHeader("Accept","application/json"),d.setRequestHeader("Content-type","application/x-www-form-urlencoded")):b.timeoutId=a.setTimeout(i,b.timeout+2e3),d.send(f),d}},_clear_xhr:function(a){a&&(a.onreadystatechange=null)},_clear_script:function(a){a&&(a.onerror=a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a))},_clear_timeout:function(a){a.timeoutId=F(a.timeoutId)},_clear_jsonp:function(b){var c=b.data.callback;c&&(a[c]=function(){a[c]=null})},clear:function(a){w._clear_timeout(a),w._clear_jsonp(a),w._clear_script(b.getElementById(a.scriptId)),w._clear_xhr(a.xhr)},jsonp:function(c){c.timeout=c.timeout||3e4,w.clear(c);var d=b.head||b.getElementsByTagName("head")[0],e=b.createElement("script"),f=o(),g=function(){w.clear(c);var a=o();c.error(a-f>c.timeout/2?304:403)},i=function(){w.clear(c),c.load()},j=function(){c.afterSuccess=!0,c.success.apply(null,arguments)};return e.onerror=g,e.onload=e.onreadystatechange=function(a){e.readyState&&!/loaded|complete/.test(e.readyState)||(c.afterSuccess?i():g())},c.beforeOpen&&c.beforeOpen({}),c.beforeSend&&c.beforeSend({}),c.timeoutId=a.setTimeout(g,c.timeout+2e3),c.scriptId=c.scriptId||o(),c.afterSuccess=null,c.data.callback=c.scriptId+"_onmessage_"+o(),a[c.data.callback]=j,e.setAttribute("src",r(c.url,h({},c.data,p()))),e.setAttribute("async","async"),e.setAttribute("id",c.scriptId),d.insertBefore(e,d.firstChild),c},load:function(a){return w._send(a,!1)},post:function(a){return w._send(a,!0)}},x=function(b){return b?a.escape(b):""},y=function(b){return b?a.unescape(b):""};d.parseMessage=function(a,b){var c=a;t(a)&&(c=d.parseJSON(a));var e={id:c[b.jsonIdKey],channel:c[b.jsonChannelKey],text:t(c[b.jsonTextKey])?y(c[b.jsonTextKey]):c[b.jsonTextKey],tag:c[b.jsonTagKey],time:c[b.jsonTimeKey],eventid:c[b.jsonEventIdKey]||""};return e};var z=function(a){return a.backtrack?".b"+Number(a.backtrack):""},A=function(a,b){var c="";for(var d in a)a.hasOwnProperty&&!a.hasOwnProperty(d)||(c+="/"+d+(b?z(a[d]):""));return c},B=function(a,b,c,d){var e=a.wrapper.type===J.TYPE,f=a.useSSL,g=D(f,a.port),i=e?f?"wss://":"ws://":f?"https://":"http://";i+=a.host,i+=g?":"+g:"",i+=b;var j=A(a.channels,d);if(a.channelsByArgument){var k={};k[a.channelsArgument]=j.substring(1),c=h({},c,k)}else i+=j;return r(i,c)},C=function(a){var b=D(a.useSSL,a.port),c=a.useSSL?"https://":"http://";return c+=a.host,c+=b?":"+b:"",c+=a.urlPrefixPublisher,c+="?id="+A(a.channels,!1)};d.extract_xss_domain=function(a){if(a.match(/^(\d{1,3}\.){3}\d{1,3}$/))return a;var b=a.split("."),c=Math.max(b.length-1,a.match(/(\w{4,}\.\w{2}|\.\w{3,})$/)?2:3);return b.slice(-1*c).join(".")};var D=function(a,b){return b=Number(b||(a?443:80)),!a&&80===b||a&&443===b?"":b};d.isCrossDomainUrl=function(c){if(!c)return!1;var d=b.createElement("a");d.href=c;var e=D("https:"===a.location.protocol,a.location.port),f=D("https:"===d.protocol,d.port);return a.location.protocol!==d.protocol||a.location.hostname!==d.hostname||e!==f};var E=function(a,b){return function(){return a.apply(b,arguments)}},F=function(b){return b&&a.clearTimeout(b),null},G=function(a){v.info("["+this.type+"] message received",arguments);var b=d.parseMessage(a.data,this.pushstream);b.tag&&(this.pushstream._etag=b.tag),b.time&&(this.pushstream._lastModified=b.time),b.eventid&&(this.pushstream._lastEventId=b.eventid),this.pushstream._onmessage(b.text,b.id,b.channel,b.eventid,!0,b.time)},H=function(){this.pushstream._onopen(),v.info("["+this.type+"] connection opened")},I=function(b){v.info("["+this.type+"] error (disconnected by server):",b),this.pushstream.readyState===O.OPEN&&this.type===K.TYPE&&"error"===b.type&&this.connection.readyState===a.EventSource.CONNECTING||(this._closeCurrentConnection(),v.error("errorCallback: type: "+b.type+", method: "+this.type),this.pushstream._onerror({type:b&&("load"===b.type||"close"===b.type&&1006===b.code)||this.pushstream.readyState===O.CONNECTING?"load":"timeout"}))},J=function(b){if(!a.WebSocket&&!a.MozWebSocket)throw"WebSocket not supported";this.type=J.TYPE,this.pushstream=b,this.connection=null};J.TYPE="WebSocket",J.prototype={connect:function(){this._closeCurrentConnection();var b=h({},this.pushstream.extraParams(),p(),n(this.pushstream)),c=B(this.pushstream,this.pushstream.urlPrefixWebsocket,b,!this.pushstream._useControlArguments());this.connection=a.WebSocket?new a.WebSocket(c):new a.MozWebSocket(c),this.connection.onerror=E(I,this),this.connection.onclose=E(I,this),this.connection.onopen=E(H,this),this.connection.onmessage=E(G,this),v.info("[WebSocket] connecting to:",c)},disconnect:function(){this.connection&&(v.debug("[WebSocket] closing connection to:",this.connection.url),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.connection){try{this.connection.close()}catch(a){}this.connection=null}},sendMessage:function(a){this.connection&&this.connection.send(a)}};var K=function(b){if(!a.EventSource)throw"EventSource not supported";this.type=K.TYPE,this.pushstream=b,this.connection=null};K.TYPE="EventSource",K.prototype={connect:function(){this._closeCurrentConnection();var b=h({},this.pushstream.extraParams(),p(),n(this.pushstream)),c=B(this.pushstream,this.pushstream.urlPrefixEventsource,b,!this.pushstream._useControlArguments());this.connection=new a.EventSource(c),this.connection.onerror=E(I,this),this.connection.onopen=E(H,this),this.connection.onmessage=E(G,this),v.info("[EventSource] connecting to:",c)},disconnect:function(){this.connection&&(v.debug("[EventSource] closing connection to:",this.connection.url),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.connection){try{this.connection.close()}catch(a){}this.connection=null}}};var L=function(a){this.type=L.TYPE,this.pushstream=a,this.connection=null,this.url=null,this.frameloadtimer=null,this.pingtimer=null,this.iframeId="PushStreamManager_"+a.id};L.TYPE="Stream",L.prototype={connect:function(){this._closeCurrentConnection();var a=d.extract_xss_domain(this.pushstream.host);try{b.domain=a}catch(b){v.error("[Stream] (warning) problem setting document.domain = "+a+" (OBS: IE8 does not support set IP numbers as domain)")}var c=h({},this.pushstream.extraParams(),p(),{streamid:this.pushstream.id},n(this.pushstream));this.url=B(this.pushstream,this.pushstream.urlPrefixStream,c,!this.pushstream._useControlArguments()),v.debug("[Stream] connecting to:",this.url),this.loadFrame(this.url)},disconnect:function(){this.connection&&(v.debug("[Stream] closing connection to:",this.url),this._closeCurrentConnection(),this.pushstream._onclose())},_clear_iframe:function(){var a=b.getElementById(this.iframeId);a&&(a.onload=null,a.src="about:blank",a.parentNode&&a.parentNode.removeChild(a))},_closeCurrentConnection:function(){this._clear_iframe(),this.connection&&(this.pingtimer=F(this.pingtimer),this.frameloadtimer=F(this.frameloadtimer),this.connection=null,this.transferDoc=null,"function"==typeof a.CollectGarbage&&a.CollectGarbage())},loadFrame:function(c){this._clear_iframe();var d=null;if("ActiveXObject"in a){var e=new a.ActiveXObject("htmlfile");e.open(),e.write("<html><script>document.domain='"+b.domain+"';</script>"),e.write("<body><iframe id='"+this.iframeId+"' src='"+c+"'></iframe></body></html>"),e.parentWindow.PushStream=O,e.close(),d=e.getElementById(this.iframeId),this.transferDoc=e}else d=b.createElement("IFRAME"),d.style.width="1px",d.style.height="1px",d.style.border="none",d.style.position="absolute",d.style.top="-10px",d.style.marginTop="-10px",d.style.zIndex="-20",d.PushStream=O,b.body.appendChild(d),d.setAttribute("src",c),d.setAttribute("id",this.iframeId);d.onload=E(I,this),this.connection=d,this.frameloadtimer=a.setTimeout(E(I,this),this.pushstream.timeout)},register:function(a){this.frameloadtimer=F(this.frameloadtimer),a.p=E(this.process,this),this.connection.onload=E(this._onframeloaded,this),this.pushstream._onopen(),this.setPingTimer(),v.info("[Stream] frame registered")},process:function(a,b,c,d,e,f){this.pingtimer=F(this.pingtimer),v.info("[Stream] message received",arguments),a!==-1&&(f&&(this.pushstream._etag=f),e&&(this.pushstream._lastModified=e),d&&(this.pushstream._lastEventId=d)),this.pushstream._onmessage(y(c),a,b,d||"",!0,e),this.setPingTimer()},_onframeloaded:function(){v.info("[Stream] frame loaded (disconnected by server)"),this.pushstream._onerror({type:"timeout"}),this.connection.onload=null,this.disconnect()},setPingTimer:function(){this.pingtimer&&F(this.pingtimer),this.pingtimer=a.setTimeout(E(I,this),this.pushstream.pingtimeout)}};var M=function(a){this.type=M.TYPE,this.pushstream=a,this.connection=null,this.opentimer=null,this.messagesQueue=[],this._linkedInternalListen=E(this._internalListen,this),this.xhrSettings={timeout:this.pushstream.timeout,data:{},url:null,success:E(this.onmessage,this),error:E(this.onerror,this),load:E(this.onload,this),beforeSend:E(this.beforeSend,this),afterReceive:E(this.afterReceive,this)}};M.TYPE="LongPolling",M.prototype={connect:function(){this.messagesQueue=[],this._closeCurrentConnection(),this.urlWithBacktrack=B(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!0),this.urlWithoutBacktrack=B(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!1),this.xhrSettings.url=this.urlWithBacktrack,this.useJSONP=this.pushstream._crossDomain||this.pushstream.useJSONP,this.xhrSettings.scriptId="PushStreamManager_"+this.pushstream.id,this.useJSONP&&(this.pushstream.messagesControlByArgument=!0),this._listen(),this.opentimer=a.setTimeout(E(H,this),150),v.info("[LongPolling] connecting to:",this.xhrSettings.url)},_listen:function(){this._internalListenTimeout&&F(this._internalListenTimeout),this._internalListenTimeout=a.setTimeout(this._linkedInternalListen,100)},_internalListen:function(){this.pushstream._keepConnected&&(this.xhrSettings.url=this.pushstream._useControlArguments()?this.urlWithoutBacktrack:this.urlWithBacktrack,this.xhrSettings.data=h({},this.pushstream.extraParams(),this.xhrSettings.data,n(this.pushstream)),this.useJSONP?this.connection=w.jsonp(this.xhrSettings):this.connection||(this.connection=w.load(this.xhrSettings)))},disconnect:function(){this.connection&&(v.debug("[LongPolling] closing connection to:",this.xhrSettings.url),this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.opentimer=F(this.opentimer),this.connection){try{this.connection.abort()}catch(a){try{w.clear(this.connection)}catch(a){}}this.connection=null,this.xhrSettings.url=null}},beforeSend:function(a){this.pushstream.messagesControlByArgument||(a.setRequestHeader("If-None-Match",this.pushstream._etag),a.setRequestHeader("If-Modified-Since",this.pushstream._lastModified))},afterReceive:function(a){this.pushstream.messagesControlByArgument||(this.pushstream._etag=a.getResponseHeader("Etag"),this.pushstream._lastModified=a.getResponseHeader("Last-Modified")),this.connection=null},onerror:function(a){this._closeCurrentConnection(),this.pushstream._keepConnected&&(304===a?this._listen():(v.info("[LongPolling] error (disconnected by server):",a),this.pushstream._onerror({type:403===a||this.pushstream.readyState===O.CONNECTING?"load":"timeout"})))},onload:function(){this._listen()},onmessage:function(a){this._internalListenTimeout&&F(this._internalListenTimeout),v.info("[LongPolling] message received",a);for(var b=null,c=s(a)?a:a.replace(/\}\{/g,"}\r\n{").split("\r\n"),e=0;e<c.length;e++)c[e]&&(b=d.parseMessage(c[e],this.pushstream),this.messagesQueue.push(b),this.pushstream.messagesControlByArgument&&b.time&&(this.pushstream._etag=b.tag,this.pushstream._lastModified=b.time));for(this._listen();this.messagesQueue.length>0;){var f=this.messagesQueue.shift();this.pushstream._onmessage(f.text,f.id,f.channel,f.eventid,0===this.messagesQueue.length,f.time)}}};var N=[],O=function(b){b=b||{},this.id=N.push(this)-1,this.useSSL=b.useSSL||!1,this.host=b.host||a.location.hostname,this.port=Number(b.port||(this.useSSL?443:80)),this.timeout=b.timeout||3e4,this.pingtimeout=b.pingtimeout||3e4,this.reconnectOnTimeoutInterval=b.reconnectOnTimeoutInterval||3e3,this.reconnectOnChannelUnavailableInterval=b.reconnectOnChannelUnavailableInterval||6e4,this.autoReconnect=b.autoReconnect!==!1,this.lastEventId=b.lastEventId||null,this.messagesPublishedAfter=b.messagesPublishedAfter,this.messagesControlByArgument=b.messagesControlByArgument||!1,this.tagArgument=b.tagArgument||"tag",this.timeArgument=b.timeArgument||"time",this.eventIdArgument=b.eventIdArgument||"eventid",this.useJSONP=b.useJSONP||!1,this._reconnecttimer=null,this._etag=0,this._lastModified=null,this._lastEventId=null,this.urlPrefixPublisher=b.urlPrefixPublisher||"/pub",this.urlPrefixStream=b.urlPrefixStream||"/sub",this.urlPrefixEventsource=b.urlPrefixEventsource||"/ev",this.urlPrefixLongpolling=b.urlPrefixLongpolling||"/lp",this.urlPrefixWebsocket=b.urlPrefixWebsocket||"/ws",this.jsonIdKey=b.jsonIdKey||"id",this.jsonChannelKey=b.jsonChannelKey||"channel",this.jsonTextKey=b.jsonTextKey||"text",this.jsonTagKey=b.jsonTagKey||"tag",this.jsonTimeKey=b.jsonTimeKey||"time",this.jsonEventIdKey=b.jsonEventIdKey||"eventid",this.modes=(b.modes||"eventsource|websocket|stream|longpolling").split("|"),this.wrappers=[],this.wrapper=null,this.onchanneldeleted=b.onchanneldeleted||null,this.onmessage=b.onmessage||null,this.onerror=b.onerror||null,this.onstatuschange=b.onstatuschange||null,this.extraParams=b.extraParams||function(){return{}},this.channels={},this.channelsCount=0,this.channelsByArgument=b.channelsByArgument||!1,this.channelsArgument=b.channelsArgument||"channels",this._crossDomain=d.isCrossDomainUrl(C(this));for(var c=0;c<this.modes.length;c++)try{var e=null;switch(this.modes[c]){case"websocket":e=new J(this);break;case"eventsource":e=new K(this);break;case"longpolling":e=new M(this);break;case"stream":e=new L(this)}this.wrappers[this.wrappers.length]=e}catch(a){v.info(a)}this.readyState=0};O.LOG_LEVEL="error",O.LOG_OUTPUT_ELEMENT_ID="Log4jsLogOutput",O.CLOSED=0,O.CONNECTING=1,O.OPEN=2,O.prototype={addChannel:function(a,b){if(x(a)!==a)throw"Invalid channel name! Channel has to be a set of [a-zA-Z0-9]";if(v.debug("entering addChannel"),"undefined"!=typeof this.channels[a])throw"Cannot add channel "+a+": already subscribed";b=b||{},v.info("adding channel",a,b),this.channels[a]=b,this.channelsCount++,this.readyState!==O.CLOSED&&this.connect(),v.debug("leaving addChannel")},removeChannel:function(a){this.channels[a]&&(v.info("removing channel",a),delete this.channels[a],this.channelsCount--)},removeAllChannels:function(){v.info("removing all channels"),this.channels={},this.channelsCount=0},_setState:function(a){this.readyState!==a&&(v.info("status changed",a),this.readyState=a,this.onstatuschange&&this.onstatuschange(this.readyState))},connect:function(){if(v.debug("entering connect"),!this.host)throw"PushStream host not specified";if(isNaN(this.port))throw"PushStream port not specified";if(!this.channelsCount)throw"No channels specified";if(0===this.wrappers.length)throw"No available support for this browser";this._keepConnected=!0,this._lastUsedMode=0,this._connect(),v.debug("leaving connect")},disconnect:function(){v.debug("entering disconnect"),this._keepConnected=!1,this._disconnect(),this._setState(O.CLOSED),v.info("disconnected"),v.debug("leaving disconnect")},_useControlArguments:function(){return this.messagesControlByArgument&&(null!==this._lastModified||null!==this._lastEventId)},_connect:function(){if(null===this._lastEventId&&(this._lastEventId=this.lastEventId),null===this._lastModified){var a=this.messagesPublishedAfter;if(!u(a)){var b=Number(this.messagesPublishedAfter);b>0?(a=new Date,a.setTime(a.getTime()-1e3*b)):b<0&&(a=new Date(0))}u(a)&&(this._lastModified=d.dateToUTCString(a))}this._disconnect(),this._setState(O.CONNECTING),this.wrapper=this.wrappers[this._lastUsedMode++%this.wrappers.length];try{this.wrapper.connect()}catch(a){this.wrapper&&this.wrapper.disconnect()}},_disconnect:function(){this._reconnecttimer=F(this._reconnecttimer),this.wrapper&&this.wrapper.disconnect()},_onopen:function(){this._reconnecttimer=F(this._reconnecttimer),this._setState(O.OPEN),this._lastUsedMode>0&&this._lastUsedMode--},_onclose:function(){this._reconnecttimer=F(this._reconnecttimer),this._setState(O.CLOSED),this._reconnect(this.reconnectOnTimeoutInterval)},_onmessage:function(a,b,c,d,e,f){v.debug("message",a,b,c,d,e,f),b===-2?this.onchanneldeleted&&this.onchanneldeleted(c):b>0&&this.onmessage&&this.onmessage(a,b,c,d,e,f)},_onerror:function(a){this._setState(O.CLOSED),this._reconnect("timeout"===a.type?this.reconnectOnTimeoutInterval:this.reconnectOnChannelUnavailableInterval),this.onerror&&this.onerror(a)},_reconnect:function(b){this.autoReconnect&&this._keepConnected&&!this._reconnecttimer&&this.readyState!==O.CONNECTING&&(v.info("trying to reconnect in",b),this._reconnecttimer=a.setTimeout(E(this._connect,this),b))},sendMessage:function(a,b,c){a=x(a),this.wrapper.type===J.TYPE?(this.wrapper.sendMessage(a),b&&b()):w.post({url:C(this),data:a,success:b,error:c,crossDomain:this._crossDomain})}},O.sendMessage=function(a,b,c,d){w.post({url:a,data:x(b),success:c,error:d})},O.register=function(a){var b=a.window.location.href.match(/streamid=([0-9]*)&?/);b[1]&&N[b[1]]&&N[b[1]].wrapper.register(a)},O.unload=function(){for(var a=0;a<N.length;a++)try{N[a].disconnect()}catch(a){v.info(a)}},a.PushStream=O,a.PushStreamManager=N,a.attachEvent&&a.attachEvent("onunload",O.unload),a.addEventListener&&a.addEventListener.call(a,"unload",O.unload,!1)}}(window,document);var tgmp={model:{mode:"off",playlists:[],userlikes:[],sm_ready:!1,is_preroll_playing:!1,preroll_played_recently:!1,volume:100,showVolume:!1,is_open:!1,autoRestartStream:!0,tray_states:{"#login-tray":!1,"#soundcloud-tray":!1,"#ad-tray":!1,"#syncad-tray":!1,"#vjs-tray":!1,"#media-tray":!1,"#content-tray":!1},tray_toggle_enabled:!1},api:{displaySyncAd:function(a){m2g.comm.sync_banner_display(a)}}},m2g={config:{CONTENT_URL:"",LOCAL_CONTENT_URL:"",REVISION_URI:"",endpoints:{},fb:{},fb_page_admin:!1,nielsen:{init:{apid:"P23D53C8D-9FF1-478C-AA42-666E866D9917",sfcode:"drm"},metadata:{dataSrc:"cms",type:"radio"}},listeners:{render:[],nowplaying:[],loading:[],streamplaying:[],mediastart:[],mediastop:[]}},model:{songs:[],onairsongs:[],ad_refresh_delay:18e4,last_synced_display_ad:!1,use_clickheat:!1,playlist_tips_rendered:!1,actions:[],playback_pending:!1,current_user:{is_logged_in:!1},login_prompted:!1},log:function(a,b){m2g_bar.options.debug&&(console.log(a),b&&console.log(b))}},googletag=googletag||{},tg_util={instantiateResponsiveVideoJS:function(a,b,c){var d={height:"auto",width:"auto"};return b&&(d.techOrder=["youtube","html5"],d.playsInline=!0,d.ytcontrols=!0),videojs(a,d).ready(function(){function a(){try{var a=document.getElementById(b.id()).parentElement.offsetWidth;b.width(a).height(a*d)}catch(a){}}var b=this,d=9/16;a(),window.onresize=a,c&&c()})},formatTime:function(a){var b=a/1e3,c=parseInt(b,10);c=c<0?0:c;var d=Math.floor(c/60),b=c%60;return b=b<10?"0"+b:b,d+":"+b},genId:function(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<5;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},endsWith:function(a,b){return a=String(a),a.indexOf(b,a.length-b.length)!==-1},findSongPlayedAt:function(a,b){var c=$.grep(a,function(a,c){if(a.played_at==b)return a});return 0!=c.length&&c},findSongBySlugs:function(a,b){var c=$.grep(a,function(a,c){return b.sid&&a.sid==b.sid?a:a.sslg==b.sslg&&a.aslg==b.aslg?a:void 0});return 0!=c.length&&c},slugify:function(a){return a.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()},get_context:function(a){var b={sslg:$(a).attr("data-sslg"),aslg:$(a).attr("data-aslg"),dslg:$(a).attr("data-dslg"),sid:$(a).attr("data-sid"),artist:$(a).attr("data-artist-name")},c={};for(var d in b)b[d]&&(c[d]=b[d]);return c}};!function(a){"undefined"!=typeof a.browser&&a.browser||a.extend(a,{browser:{}});var b={flash:{activex:"ShockwaveFlash.ShockwaveFlash",plugin:/flash/gim},sl:{activex:["AgControl.AgControl"],plugin:/silverlight/gim},pdf:{activex:"PDF.PdfCtrl",plugin:/adobe\s?acrobat/gim},qtime:{activex:"QuickTime.QuickTime",plugin:/quicktime/gim},wmp:{activex:"WMPlayer.OCX",plugin:/(windows\smedia)|(Microsoft)/gim},shk:{activex:"SWCtl.SWCtl",plugin:/shockwave/gim},rp:{activex:"RealPlayer",plugin:/realplayer/gim},java:{activex:navigator.javaEnabled(),plugin:/java/gim}},c=function(c){if(window.ActiveXObject)try{new ActiveXObject(b[c].activex),a.browser[c]=!0}catch(b){a.browser[c]=!1}else a.each(navigator.plugins,function(){return this.name.match(b[c].plugin)?(a.browser[c]=!0,!1):void(a.browser[c]=!1)})};a.each(b,function(a,b){c(a)})}(jQuery),tgmp.render={stack:[],closeIntTime:6,ad_num:0,init:function(){m2g_bar.options.customRendering||($(document.body).on("open.fndtn.clearing",function(a){$("#content-tray").css("z-index",510),$("#content-tray .close-container").css("z-index",1)}),$(document.body).on("close.fndtn.clearing",function(a){$("#content-tray").css("z-index",480),$("#content-tray .close-container").css("z-index",3)}),tgmp.render.nunjucks=new nunjucks.Environment,tgmp.render.nunjucks.addFilter("activeclass",function(a,b){return a==b?"active":""}),tgmp.render.nunjucks.addFilter("slugify",function(a){return tg_util.slugify(a)}),tgmp.render.nunjucks.addFilter("month",function(a){var b=new Date(a);return b.toString().split(" ")[1]}),tgmp.render.nunjucks.addFilter("day",function(a){var b=new Date(a);return b.getDate()}))},showContent:function(a,b,c){if(m2g_bar.options.customRendering||m2g_bar.options.disableTray)$.map(m2g.config.listeners.render,function(b,d){b(c,a)});else{$("#content-tray").html(a),tgmp.render.stack.push({content:a,pagename:b}),m2g_bar.open("#content-tray"),tgmp.render.stack.length>1?$("#content-tray .go-back").show():$("#content-tray .go-back").hide(),$("#content-tray .close-tray").bind("click",function(a){tgmp.render.closeContent(),a.preventDefault()}),$("#content-tray .go-back").bind("click",function(a){tgmp.render.popStack(),a.preventDefault()}),$("#content-tray .artist-nav").artistnav(),$("#content-tray .slot.open").linkvideo(),$("#content-tray .slot.open").lyricsnip(),$("#content-tray .slot.open").playclip(),$("#content-tray .moretrack").songclick(),$("#content-tray .albumlink").albumclick(),$("#content-tray form.search").submit(function(a){var b=$("#content-tray form.search input[name='q']").val();b?tgmp.render.runsearch(b):alert("search parameter required"),a.preventDefault()}),$("#content-tray a.listen-live-link").bind("click",function(a){m2g_bar.playStream(),a.preventDefault()}),$("#content-tray a.onair-link").bind("click",function(a){tgmp.render.onair({}),a.preventDefault()}),$("#content-tray a.artistmenu").bind("click",function(a){tgmp.render.artistmenu(tg_util.get_context(this)),a.preventDefault()}),$(".scroll-pane").slimScroll({color:"#413D3D",height:"225px",size:"10px"}),$(document).foundation("reflow");var d={};$(window).width()>640?(d.size="300x250",d.size_ar=[300,250]):(d.size="320x50",d.size_ar=[320,50]),d.slot_name="/1011860/v3_"+m2g.config.display_ad.prefix+"_"+d.size+"_"+b,d.div_id="ad"+d.size+"_"+b+"_"+tgmp.render.ad_num;var e=googletag.defineSlot(d.slot_name,d.size_ar,d.div_id);e?(e.setTargeting("callsign",m2g.config.callsign).setTargeting("callsign2",m2g.config.callsign).setTargeting("company_id",m2g.config.display_ad.company_id).setTargeting("format_id",m2g.config.display_ad.format_id).setTargeting("market_id",m2g.config.display_ad.market_id).setTargeting("artist_id",m2g.model.nowplaying.aslg).setTargeting("song_id",m2g.model.nowplaying.sslg).setTargeting("m2g_bar","true").addService(googletag.pubads()),googletag.display(d.div_id),googletag.pubads().refresh([e])):m2g.log("dfp ad fail! default itunes ad instead."),tgmp.render.ad_num++}},autoClose:function(){m2g_bar.options.customRendering||(tgmp.render.closeIntCount=0,clearInterval(tgmp.render.closeI),tgmp.render.closeI=setInterval(function(){tgmp.render.closeIntCount++,$("#content-tray .close-tray .close-txt").text("closing in "+(tgmp.render.closeIntTime-tgmp.render.closeIntCount)+"s"),tgmp.render.closeIntTime==tgmp.render.closeIntCount&&tgmp.render.closeContent()},1e3))},showLoadingMsg:function(a){a?$("#content-tray span.loading").show():$("#content-tray span.loading").hide(),$.map(m2g.config.listeners.loading,function(b,c){b(a)})},processTemplate:function(a,b){return $.extend(b,{root_template:"tray_content_base.html",callsign:m2g.config.callsign}),tgmp.render.nunjucks.render(a,b)},popStack:function(){tgmp.render.stack.pop();
var a=tgmp.render.stack.pop();tgmp.render.showContent(a.content,a.pagename)},closeContent:function(){for(clearInterval(tgmp.render.closeI),$("#content-tray .close-tray .close-txt").text("close"),m2g_bar.close("#content-tray",function(){$("#content-tray").empty()});tgmp.render.stack.length;)tgmp.render.stack.pop()},mmenu:function(a){tgmp.render.showContent(tgmp.render.processTemplate("mmenu.html",a),"mmenu","/mmenu/")},search:function(a){tgmp.render.showContent(tgmp.render.processTemplate("search.html",a),"search","/search/")},runsearch:function(a){m2g.comm.load_endpoint(m2g.config.endpoints.searchtracks,{q:a},function(a){tgmp.render.search(a)})},track:function(a){m2g.comm.load_song(a,function(b){b.pagename="tracks",b.ad_num=tgmp.render.ad_num,tgmp.render.showContent(tgmp.render.processTemplate("track_new.html",b),"tracks","/music/"+a.aslg+"/_/"+a.sslg+"/")},function(){m2g.log("track load error")})},lyrics:function(a){m2g.comm.load_endpoint_with_track(m2g.config.endpoints.lyric,a,function(b){b.pagename="lyrics",b.ad_num=tgmp.render.ad_num,tgmp.render.showContent(tgmp.render.processTemplate("lyric.html",b),"lyrics","/music/"+a.aslg+"/"+a.sslg+"/_lyric")})},artist:function(a){m2g.comm.load_endpoint(m2g.config.endpoints.artist_bio,a,function(b){b.active_tab="artist",b.pagename="bio",b.ad_num=tgmp.render.ad_num,tgmp.render.showContent(tgmp.render.processTemplate("artist_bio.html",b),"bio","/music/"+a.aslg+"/")})},artistmenu:function(a){a.pagename="artistmenu",a.ad_num=tgmp.render.ad_num,tgmp.render.showContent(tgmp.render.processTemplate("artist_content_base.html",a),"artistmenu","/music/"+a.aslg+"/_menu")},photos:function(a){m2g.comm.load_endpoint(m2g.config.endpoints.artist_photos,a,function(b){b.active_tab="photos",b.pagename="bio",b.ad_num=tgmp.render.ad_num,tgmp.render.showContent(tgmp.render.processTemplate("photos.html",b),"bio","/music/"+a.aslg+"/_photos/")})},social:function(a){a.active_tab="social",a.id_only=!0,m2g.comm.load_endpoint(m2g.config.endpoints.artist_social,a,function(b){b.active_tab="social",b.pagename="bio",b.ad_num=tgmp.render.ad_num,m2g.log("social",b),tgmp.render.showContent(tgmp.render.processTemplate("social.html",b),"bio","/music/"+a.aslg+"/_social/")})},albums:function(a){m2g.comm.load_endpoint(m2g.config.endpoints.artist_albums,a,function(b){b.active_tab="albums",b.pagename="disco",b.ad_num=tgmp.render.ad_num,tgmp.render.showContent(tgmp.render.processTemplate("albums.html",b),"disco","/music/"+a.aslg+"/_albums/")})},album:function(a){m2g.comm.load_endpoint(m2g.config.endpoints.artist_album_details,a,function(b){b.pagename="disco",b.ad_num=tgmp.render.ad_num,tgmp.render.showContent(tgmp.render.processTemplate("album_detail.html",b),"disco","/music/"+a.aslg+"/"+a.dslg+"/")})},toptracks:function(a){m2g.comm.load_endpoint(m2g.config.endpoints.artist_toptracks,a,function(b){b.active_tab="toptracks",b.pagename="tracks",b.ad_num=tgmp.render.ad_num,tgmp.render.showContent(tgmp.render.processTemplate("toptracks.html",b),"tracks","/music/"+a.aslg+"/_toptracks/")})},concerts:function(a){a.loc=m2g.config.location,m2g.comm.load_endpoint(m2g.config.endpoints.artist_localshows,a,function(b){b.active_tab="concerts",b.pagename="concerts",b.ad_num=tgmp.render.ad_num,m2g.log("CONCERTS LOADED: ",b),tgmp.render.showContent(tgmp.render.processTemplate("concerts.html",b),"concerts","/music/"+a.aslg+"/_concerts/")})},onair:function(a){m2g.model.onairsongs.length<12?m2g.comm.refresh_nowplaying(25,!0,tgmp.render.display_onair):tgmp.render.display_onair()},display_onair:function(){tgmp.render.showContent(tgmp.render.processTemplate("onair.html",{tracks:m2g.model.onairsongs}),"onair","/")}},m2g.comm={pushstreamInit:function(){var a=m2g.config.pushstream.hosts[Math.floor(Math.random()*m2g.config.pushstream.hosts.length)],b=new PushStream({host:a,port:m2g.config.pushstream.port,modes:m2g.config.pushstream.modes,useSSL:m2g.config.pushstream.useSSL});b.onmessage=function(a,b,c){c==m2g.config.pushstream.prefix+m2g.config.callsign+"_ad"?m2g_bar.options.useTritonPlayer||a&&m2g.comm.sync_banner_display(a):setTimeout(function(){m2g.comm.sync_banner_close(),m2g.comm.refresh_nowplaying(!1)},Math.floor(5e3*Math.random()))},b.onerror=function(a){m2g.log("pushstream error: "+a)},b.addChannel(m2g.config.pushstream.prefix+m2g.config.callsign),"wgn"!=m2g.config.callsign&&b.addChannel(m2g.config.pushstream.prefix+m2g.config.callsign+"_ad"),b.connect(),m2g.config._pushstream=b,m2g.log("pushstream listening to: "+a)},refresh_nowplaying:function(a,b,c){var d=1;a&&(d=a);var e={apiid:"m2g_bar",b:m2g.config.callsign,count:d};m2g.model.nowplaying&&!b&&(e.since=m2g.model.nowplaying.played_at),$.ajax({url:m2g.config.endpoints.nowplaying,data:e,dataType:"jsonp",success:function(a){m2g.config.np_error_count=0;var b=a.response;if(b.length>0){for(m2g.model.nowplaying=b[0],m2g.model.recentsongs=b.slice(0);b.length;){var d=b.pop(),a=tg_util.findSongPlayedAt(m2g.model.onairsongs,d.played_at);a||m2g.model.onairsongs.unshift(d)}m2g.model.onairsongs.sort(function(a,b){return new Date(b.played_at)-new Date(a.played_at)}),$.event.trigger("onNewRecentSong"),c&&c(m2g.model.recentsongs)}},error:function(){m2g.config.np_error_count++}})},load_song:function(a,b,c){a.apiid="m2g_bar",a.b=m2g.config.callsign;var d=tg_util.findSongBySlugs(m2g.model.songs,a);return d?void b(d[0]):(tgmp.render.showLoadingMsg(!0),void $.ajax({url:m2g.config.endpoints.track,data:a,dataType:"jsonp"}).done(function(a){tgmp.render.showLoadingMsg(!1);var c=a.response;if(c){c.artwork?0===c.artwork.indexOf("/static/")&&(c.artwork="//"+m2g.config.callsign+".tunegenie.com"+c.artwork):c.artwork="//"+m2g.config.callsign+".tunegenie.com/static/images/covers/defaultcover170.jpg";var d=tg_util.findSongBySlugs(m2g.model.onairsongs,c);for(var e in d[0])c[e]=d[0][e];m2g.model.songs.push(c),b&&b(c)}}).fail(function(){tgmp.render.showLoadingMsg(!1),c&&c()}))},load_endpoint:function(a,b,c,d){b.apiid="m2g_bar",b.b=m2g.config.callsign,tgmp.render.showLoadingMsg(!0),$.ajax({url:a,data:b,dataType:"jsonp"}).done(function(a){tgmp.render.showLoadingMsg(!1);var d=a.response;$.extend(b,d),c&&c(b)}).fail(function(){tgmp.render.showLoadingMsg(!1),d&&d(),m2g.log("endpoint ["+a+"] load error")})},load_endpoint_with_track:function(a,b,c,d){this.load_endpoint(a,b,function(a){m2g.comm.load_song(b,function(b){$.extend(a,b),c(a)},d)},d)},sync_banner_display:function(a){var b={apiid:"m2g_bar",b:m2g.config.callsign,format:"json"},c=m2g.config.endpoints.addetail.replace("/1/","/"+a+"/");$.ajax({url:c,data:b,dataType:"json"}).done(function(a){m2g.log("sync banner data: ",a),a&&a.banner_url&&"None"!=a.banner_url&&m2g.comm.sync_banner_render(a)}).fail(function(){m2g.log("failed to load sync ad info for "+a)})},sync_banner_render:function(a){$("#syncad-tray").html(nunjucks.render("m2g_syncad.html",a)),$("#syncad-tray .close-container").show(),$("#syncad-tray .close-tray").bind("click",function(a){m2g.comm.sync_banner_close(),a.preventDefault()}),m2g_bar.open("#syncad-tray");var b={song:a.big_title,artist:a.small_title,aslg:"n-a",sslg:"n-a",artwork:m2g.config.offair_message.album_artwork};m2g_bar.updateDisplay(b,m2g.config.brand_title)},sync_banner_close:function(){m2g.log("AD: close"),m2g_bar.close("#syncad-tray")}},TGMPCommReceiver("m2g.comm");var Modernizr={},m2g_bar={is_loaded:!1,init:function(a){m2g_bar.options=a,m2g_bar.options.disableTray=m2g.config.disable_tray;var b=/(ipad|iphone|ipod|safari)/g.test(navigator.userAgent.toLowerCase()),c=/(chrom)/g.test(navigator.userAgent.toLowerCase());tgmp.model.is_safari=b&&!c,tgmp.model.is_iOS_8_4=!1,b&&(tgmp.model.is_iOS_8_4=/8_4/g.test(navigator.userAgent.toLowerCase())),tgmp.model.html5audiosupport=!!document.createElement("audio").canPlayType;var d=window.navigator.msMaxTouchPoints,e="ontouchstart"in document.createElement("div");Modernizr.touch=d||e;var f="barfoundation.html";if(m2g_bar.options.invisible&&(f="barfoundation_invisible.html"),$("#contents").html(nunjucks.render(f,m2g_bar.options)),$("#tgmp").css(m2g_bar.options.position,0),m2g_bar.options.theme||(m2g_bar.options.theme=["#343A41"]),1==m2g_bar.options.theme.length)$("#tgmp").css("background-color",m2g_bar.options.theme[0]);else{var g=m2g_bar.options.theme.join(",");$("#tgmp").css("background","-webkit-linear-gradient("+g+")"),$("#tgmp").css("background","-o-linear-gradient("+g+")"),$("#tgmp").css("background","-moz-linear-gradient("+g+")"),$("#tgmp").css("background","linear-gradient("+g+")")}for(var h in m2g.config.endpoints)m2g.config.endpoints[h]=m2g.config.endpoints[h].replace("/api/",m2g_bar.options.api);if(tgmp.model.hasStream&&($(document).on("onNewRecentSong",m2g_bar.onNewOnairSong),m2g.comm.refresh_nowplaying(),m2g.comm.pushstreamInit()),m2g.config.is_mobile=!1,m2g.config.is_mobile="none"==$("#is_mobile").css("display"),m2g.config.use_abacast_preroll=0==m2g.config.brand_srouce.indexOf("Abacast"),m2g.config.has_preroll=m2g.config.use_abacast_preroll||m2g.config.use_google_preroll||m2g_bar.options.useTritonPlayer,m2g_bar.options.useTritonPlayer&&(m2g_bar.options.enablePrerollOnMobile=!0),!$.browser.flash&&m2g.config.has_preroll&&(m2g.config.has_preroll=m2g_bar.options.enablePrerollOnMobile),tgmp.audioplayer.init(),$("#tgmp .stream.modebtn a").bind("click",function(a){m2g_bar.playStream(),a.preventDefault()}),$("#tgmp a.onair-link").bind("click",function(a){tgmp.render.onair({}),a.preventDefault()}),$("#tgmp a.search").bind("click",function(a){tgmp.render.search({}),a.preventDefault()}),$("#tgmp a.mmenu-link").bind("click",function(a){tgmp.render.mmenu({}),a.preventDefault()}),$("#tgmp .playpausestop a").bind("click",function(a){m2g_bar.playPauseClicked(),a.preventDefault()}),$("#tgmp .volume").bind("click",function(a){m2g_bar.onVolClicked(),a.preventDefault()}),$("#tgmp .frame .song").songclick(),$("#tgmp .frame .artist").artistclick(),$("#tgmp .info").bind("click",function(a){$("#tgmp .frame .song").click(),a.preventDefault()}),Modernizr.touch){"top"===m2g_bar.options.position?(barSwipe="swipedown",traySwipe="swipeup"):(barSwipe="swipeup",traySwipe="swipedown");var i=new Hammer($("#tgmp").get(0));i.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),i.on(barSwipe,function(a){$("#tgmp .frame .song").click(),a.preventDefault()});var j=new Hammer($("#content-tray").get(0));j.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),j.on(traySwipe,function(a){for(var b=a.target;"scroll-pane"!==b.className&&"#content-tray"!==b.id&&b.parentNode;)b=b.parentNode;"scroll-pane"!==b.className&&(tgmp.render.closeContent(),a.preventDefault())})}m2g.config.nielsen.metadata.provider&&(m2g.config.nielsen.init.apn="TuneGenie-"+m2g.config.callsign,m2g.model.nielsenSDK=new NOLCMB.ggInitialize(m2g.config.nielsen.init)),m2g_bar.options.autostart&&(m2g.log("AutoStart Enabled"),m2g.config.is_mobile===!1||m2g_bar.options.isApp?m2g_bar.playStream():m2g.log("mobile env -- cancelling autostart")),tgmp.render.init(),m2g_bar.displayTimeoutMessage(),m2g_bar.is_loaded=!0,this.parentTGMP=new TGMPCommSender(parent,"TGMP_OBJ_CACHE.ref",["onBarInit","_setBarHeight"]),this.parentTGMP.onBarInit(),m2g_bar.options.promptZag&&(m2g_bar.options.login_frame_src="//"+m2g.config.callsign+".tunegenie.com/zag/form/",$("#login-tray").html(tgmp.render.nunjucks.render("login.html",m2g_bar.options)),"bottom"==m2g_bar.options.position?$("#login-tray").css({bottom:-1e3}):$("#login-tray").css({top:-1e3}),$("#login-tray .close-tray").bind("click",function(a){m2g_bar.cancelZag(),a.preventDefault()}))},displayTimeoutMessage:function(){if(clearTimeout(tgmp.model.timeoutDisplayMsgI),m2g.config.offair_message){var a={song:m2g.config.offair_message.title,artist:m2g.config.offair_message.artist,artwork:m2g.config.offair_message.album_artwork,album:"",dslg:"n-a",aslg:"n-a",sslg:"n-a"};m2g_bar.updateDisplay(a,m2g.config.brand_title),$("#tgmp .albumart").html(tgmp.render.processTemplate("albumlink.html",a)),$("#tgmp .albumart .albumlink").click(function(a){a.preventDefault()})}},onHashEvent:function(a){var b=JSON.parse(a.substring(1));m2g.log("onHashEvent::",b),"youtube"==b.action&&m2g_bar.youTubeClicked(b,b.yt_id),"sample"==b.action&&m2g_bar.playTrackSample(b),"stream"==b.action&&m2g_bar.playStream()},updateOption:function(a,b){m2g_bar.options[a]=b},open:function(a,b){"undefined"!=typeof b&&null!==b||(b=!0),tgmp.model.is_open||(tgmp.model.is_open=!0,m2g_bar.parentTGMP._setBarHeight("100%","100%")),tgmp.model.tray_states[a]||("bottom"==m2g_bar.options.position?(b&&$(a).css("bottom",-1e3),$(a).delay(250).animate({bottom:78},500)):(b&&$(a).css("top",-1e3),$(a).delay(250).animate({top:78},500)),tgmp.model.tray_states[a]=!0,$("#content-tray a.vote").bind("click",function(a){var b={aslg:$(this).attr("data-aslg"),sslg:$(this).attr("data-sslg")};m2g_bar.countVote(b),a.preventDefault()})),"#content-tray"==a&&tgmp.model.tray_states["#media-tray"]&&m2g_bar.close("#media-tray")},open_partial:function(a){tgmp.model.is_open||m2g_bar.parentTGMP._setBarHeight(190,"190px"),"bottom"==m2g_bar.options.position?($(a).css("bottom",-1e3),$(a).delay(250).animate({bottom:-150},500)):($(a).css("top",-1e3),$(a).delay(250).animate({top:-150},500))},close:function(a,b){tgmp.model.tray_states[a]=!1;var c=90;m2g_bar.options.invisible&&(c=2);var d={duration:500,complete:function(){b&&b();var a=!1;for(var d in tgmp.model.tray_states)tgmp.model.tray_states[d]&&(a=!0);a||tgmp.model.is_open&&(m2g_bar.parentTGMP._setBarHeight(c,c+"px"),tgmp.model.is_open=!1)}};"bottom"==m2g_bar.options.position?$(a).animate({bottom:-1e3},d):$(a).animate({top:-1e3},d),"#ad-tray"==a&&$("#ad-tray .close-container").show()},trayToggleClicked:function(){if(tgmp.model.tray_toggle_enabled){var a="#media-tray";"soundcloud"==tgmp.model.mode&&(a="#soundcloud-tray"),tgmp.model.tray_states[a]?m2g_bar.close(a):m2g_bar.open(a)}},trayToggleEnabled:function(a){tgmp.model.tray_toggle_enabled=a},addEventListener:function(a,b){m2g.config.listeners[a].push(b),"nowplaying"==a&&m2g.model.nowplaying&&m2g_bar.onNewOnairSong()},onNewOnairSong:function(){m2g.model.nowplaying?"off"!=tgmp.model.mode&&"stream"!=tgmp.model.mode||(m2g_bar.updateDisplay(m2g.model.nowplaying,m2g.config.brand_title),m2g.comm.load_song(m2g.model.nowplaying,function(a){a&&($("#tgmp .albumart").html(tgmp.render.processTemplate("albumlink.html",a)),$("#tgmp .albumart .albumlink").albumclick(),m2g.config.listeners.nowplaying.length&&$.map(m2g.config.listeners.nowplaying,function(b,c){b(a)}),m2g_bar.options.infoTrayOnLoad&&(m2g_bar.options.infoTrayOnLoad=!1,tgmp.render.track(a),tgmp.render.autoClose()),m2g.config.offair_timeout&&(clearTimeout(tgmp.model.timeoutDisplayMsgI),tgmp.model.timeoutDisplayMsgI=setTimeout(m2g_bar.displayTimeoutMessage,60*m2g.config.offair_timeout*1e3)))})):m2g_bar.displayTimeoutMessage()},popUpPlayer:function(a){var b=m2g_bar.options.popUpMediaPlayerUrl+"#"+JSON.stringify(a);m2g.model.popupWindow=window.open(b,"tgmp_pop","height=540,width=1000,resizable=no,scrollbars=no"),m2g.model.popupWindow.focus()},youTubeClicked:function(a,b){if(m2g_bar.options.usePopUpMediaPlayer){var c={action:"youtube",yt_id:b};return $.extend(c,a),void m2g_bar.popUpPlayer(c)}"video"!=tgmp.model.mode&&m2g_bar.stopCurrent(),tgmp.model.mode="video",m2g_bar.onMediaStart(),m2g.comm.load_song(a,function(a){a&&(m2g_bar.updateDisplay(a,"YouTube"),$("#tgmp .albumart").html(tgmp.render.processTemplate("albumlink.html",a)),$("#tgmp .albumart .albumlink").albumclick())}),tgmp.currentPlayer=tgmp.videoyoutube,tgmp.videoyoutube.renderAndPlay({src:"https://www.youtube.com/watch?v="+b,type:"video/youtube",yt_id:b},a),tgmp.model.autoRestartStream=!0,m2g_bar.trackBarEvent("play",a)},playYouTube:function(a){"video"!=tgmp.model.mode&&m2g_bar.stopCurrent(),tgmp.model.mode="video",m2g_bar.onMediaStart(),m2g_bar.updateDisplay({song:a,artist:a,sslg:"n-a",aslg:"n-a"},"YouTube"),m2g.config.endpoints.videoinfo&&m2g.comm.load_endpoint(m2g.config.endpoints.videoinfo,{id:a},function(b){b.result&&(m2g_bar.updateDisplay({song:b.result.title,artist:b.result.channel_name,sslg:"n-a",aslg:"n-a"},"YouTube"),$("#tgmp .albumart").html(tgmp.render.processTemplate("albumlink.html",{artwork:b.result.channel_avatar_url,sslg:b.result.channel_url})),$("#tgmp .albumart .albumlink").click(function(){var a=$(this).attr("data-sslg"),b=window.open(a,"_blank");b.focus()}),song_meta={aslg:"yt_id",sslg:a},m2g_bar.trackBarEvent("play",song_meta))}),tgmp.currentPlayer=tgmp.videoyoutube,tgmp.videoyoutube.renderAndPlay({src:"https://www.youtube.com/watch?v="+a,type:"video/youtube",yt_id:a},!1),tgmp.model.autoRestartStream=!0},playTrackSample:function(a){if(m2g_bar.options.usePopUpMediaPlayer){var b={action:"sample"};return $.extend(b,a),void m2g_bar.popUpPlayer(b)}m2g_bar.stopCurrent(),tgmp.model.mode="clip",m2g_bar.onMediaStart(),m2g.comm.load_song(a,function(b){b&&(m2g_bar.updateDisplay(b,"Sample"),$("#tgmp .albumart").html(tgmp.render.processTemplate("albumlink.html",b)),$("#tgmp .albumart .albumlink").albumclick(),tgmp.currentPlayer=tgmp.audioplayer,tgmp.currentPlayer.playAudioFile(b.preview_url)),m2g_bar.trackBarEvent("play",a)}),tgmp.model.autoRestartStream=!0},playExt:function(a,b){var c=new TGMPCommSender(top,a,["play","pause","setVolume","setEventListener"]);m2g_bar.stopCurrent(),tgmp.model.mode="video",m2g_bar.onMediaStart(),tgmp.currentPlayer=tgmp.extplayer,tgmp.extplayer.setPlayer(c,b),tgmp.model.autoRestartStream=!0},playSoundCloud:function(a){"soundcloud"!=tgmp.model.mode&&(m2g_bar.stopCurrent(),tgmp.model.mode="soundcloud"),m2g_bar.onMediaStart(),tgmp.currentPlayer=tgmp.soundcloudplayer,tgmp.currentPlayer.playUrl(a),tgmp.model.autoRestartStream=!0,song_meta={aslg:a,sslg:null},m2g_bar.trackBarEvent("play",song_meta)},playAudio:function(a,b,c){m2g_bar.stopCurrent(),tgmp.model.mode="clip",m2g_bar.onMediaStart(),m2g_bar.updateDisplay({song:b,artist:c},"On Demand"),tgmp.currentPlayer=tgmp.audioplayer,tgmp.currentPlayer.playAudioFile(a),tgmp.model.autoRestartStream=!0,song_meta={aslg:c,sslg:b},m2g_bar.trackBarEvent("play",song_meta)},onPrerollComplete:function(){m2g.log("onPrerollComplete"),"stream"==tgmp.model.nextMode&&m2g_bar.startStream()},updateDisplay:function(a,b){a&&(a.sid=a.sid?a.sid:"n-a",$("#tgmp .frame .song, #tgmp .frame .artist").attr("data-sslg",a.sslg),$("#tgmp .frame .song, #tgmp .frame .artist").attr("data-aslg",a.aslg),$("#tgmp .frame .song, #tgmp .frame .artist").attr("data-artist-name",a.artist),$("#tgmp .frame .song, #tgmp .frame .artist").attr("data-sid",a.sid),$("#tgmp .frame .song").html(a.song),$("#tgmp .frame .artist").html(a.artist)),$("#tgmp .source").html(b),$("#tgmp .source").unbind("click"),"YouTube"==b||"On Demand"==b?$("#tgmp .source").bind("click",function(a){m2g_bar.trayToggleClicked(),a.preventDefault()}):$("#tgmp .source").unbind("click")},timeUpdate:function(a,b){var c=b>0?a/b*100:0;$("#tgmp").find(".line-holder .currtime").text(tg_util.formatTime(Math.round(a))),$("#tgmp").find(".line-holder .timeleft").text(tg_util.formatTime(b)),$("#tgmp").find(".line-holder .line span").css("width",c+"%")},timeMessage:function(a){$("#tgmp").find(".line-holder .currtime").text(a),$("#tgmp").find(".line-holder .timeleft").text(""),$("#tgmp").find(".line-holder .line span").css("width","0%")},onPlaybackComplete:function(){m2g_bar.resetDisplay(),"stream"==tgmp.model.mode&&(tgmp.model.autoRestartStream=!1),tgmp.currentPlayer!==tgmp.extplayer&&(tgmp.model.mode="off",m2g_bar.onNewOnairSong()),tgmp.model.autoRestartStream&&m2g_bar.startStream()},stopCurrent:function(){clearTimeout(tgmp.model.haltStreamI),m2g.config.listeners.mediastop.length&&$.map(m2g.config.listeners.mediastop,function(a,b){a(!1)}),tgmp.model.autoRestartStream=!1,"off"!=tgmp.model.mode&&($("#tgmp").find(".modebtn.stream").removeClass("on").addClass("off"),tgmp.currentPlayer&&tgmp.currentPlayer.stop(),"stream"==tgmp.model.mode&&(m2g.config.listeners.streamplaying.length&&$.map(m2g.config.listeners.streamplaying,function(a,b){a(!1)}),m2g_bar.trackBarEvent("stop",null))),tgmp.model.mode="off",m2g_bar.resetDisplay()},resetDisplay:function(){m2g_bar.updatePlayPauseIcon("play"),m2g_bar.timeUpdate(0,0)},updateToggles:function(){$("#tgmp").find(".modebtn").removeClass("on").addClass("off"),"stream"==tgmp.model.mode||"preroll"==tgmp.model.mode?$("#tgmp").find(".modebtn.stream").removeClass("off").addClass("on"):"genie"==tgmp.model.mode&&$("#tgmp").find(".modebtn.genie").removeClass("off").addClass("on")},playPauseClicked:function(){if(m2g_bar.options.usePopUpMediaPlayer){var a={action:"stream"};return void m2g_bar.popUpPlayer(a)}"off"==tgmp.model.mode?m2g_bar.playStream():"video"==tgmp.model.mode||"clip"==tgmp.model.mode||"soundcloud"==tgmp.model.mode?tgmp.currentPlayer.togglePlayPause():m2g_bar.stopCurrent()},onVolClicked:function(){switch(tgmp.model.volume){case 100:tgmp.model.volume=50,$("#tgmp .volume").html('<i class="fa fa-volume-down"></i>');break;case 50:tgmp.model.volume=10,$("#tgmp .volume").html('<i class="fa fa-volume-off"></i>');break;case 10:tgmp.model.volume=100,$("#tgmp .volume").html('<i class="fa fa-volume-up"></i>')}$("#tgmp .volume").attr("title","Volume "+tgmp.model.volume+"%"),tgmp.currentPlayer&&tgmp.currentPlayer.volumeUpdated()},updatePlayPause:function(a){a?m2g_bar.updatePlayPauseIcon("play"):m2g_bar.updatePlayPauseIcon("pause")},updatePlayPauseIcon:function(a){tgmp.model.currentIcon!=a&&(tgmp.model.currentIcon=a,"stop"==a?$("#tgmp .playpausestop a.lgbtn").html('<i class="fa fa-stop"></i>'):"pause"==a?$("#tgmp .playpausestop a.lgbtn").html('<i class="fa fa-pause"></i>'):$("#tgmp .playpausestop a.lgbtn").html('<i class="fa fa-play"></i>'))},onUserInfo:function(a){m2g.model.current_user=a,m2g.model.playback_pending&&(m2g.model.playback_pending=!1,m2g_bar.close("#login-tray"),m2g_bar.playStream())},cancelZag:function(){m2g.model.playback_pending=!1,m2g.model.login_prompted=!1,m2g_bar.close("#login-tray")},playStream:function(){if(m2g_bar.onMediaStart(),m2g_bar.options.usePopUpMediaPlayer){var a={action:"stream"};return void m2g_bar.popUpPlayer(a)}if("stream"!=tgmp.model.mode&&"preroll"!=tgmp.model.mode){if("off"!=tgmp.model.mode&&m2g_bar.stopCurrent(),m2g_bar.options.promptZag&&!m2g.model.current_user.has_zag&&!m2g.model.login_prompted)return m2g.model.playback_pending=!0,m2g.model.login_prompted=!0,void m2g_bar.open("#login-tray");m2g.config.has_preroll=m2g.config.use_abacast_preroll||m2g.config.use_google_preroll||m2g_bar.options.useTritonPlayer,m2g.config.has_preroll&&!tgmp.model.preroll_played_recently?(tgmp.model.mode="preroll",tgmp.model.nextMode="stream",m2g_bar.updateDisplay({song:"Advertisement",artist:"-",aslg:"n-a",sslg:"n-a"},m2g.config.brand_title),m2g_bar.determineAndPlayPreroll(),tgmp.model.preroll_played_recently=!0,setTimeout(m2g_bar.expirePreroll,18e5)):m2g_bar.startStream(),m2g_bar.updateToggles()}},determineAndPlayPreroll:function(){if(!tgmp.audioplayer.is_ready)return m2g.log("audio player is not yet ready, delaying start"),void setTimeout(m2g_bar.determineAndPlayPreroll,500);var a,b=!1;m2g_bar.options.useTritonPlayer?(tgmp.currentPlayer=tgmp.audioplayer,tgmp.currentPlayer.renderPreroll()):m2g.config.use_google_preroll?(a="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/1011860/listein_live_preroll&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=[referrer_url]&correlator=[timestamp]&cust_params=callsign%3D"+m2g.config.callsign,b=!0):m2g.config.use_abacast_preroll&&(a="https://api.clarity.abacast.com/gateway/getmediavast.php?sc="+m2g.config.nielsen.metadata.assetid,b=!0),b?(tgmp.currentPlayer=tgmp.audioplayer,tgmp.currentPlayer.renderPrerollAndStream(a,tgmp.model.streams)):m2g_bar.options.useTritonPlayer||m2g_bar.startStream()},expirePreroll:function(){tgmp.model.preroll_played_recently=!1},startStream:function(){if(tgmp.audioplayer.is_ready){tgmp.model.mode="stream",m2g_bar.onMediaStart(),tgmp.model.nextMode=!1,m2g_bar.onNewOnairSong(),tgmp.currentPlayer=tgmp.audioplayer;var a="";tgmp.model.is_safari?(a=tgmp.model.safari_stream_url,tgmp.model.is_iOS_8_4&&(a=tgmp.model.android_stream_url)):a=tgmp.model.html5audiosupport&&tgmp.model.html5priority?tgmp.model.android_stream_url:$.browser.flash?tgmp.model.flash_stream_url:tgmp.model.android_stream_url,tgmp.currentPlayer.streamAudio(a),m2g_bar.onStartStream()}else m2g.log("audio player is not yet ready, delaying start"),setTimeout(m2g_bar.startStream,500)},onStartStream:function(){tgmp.model.mode="stream",m2g_bar.onMediaStart(),tgmp.model.nextMode=!1,m2g_bar.onNewOnairSong(),m2g.config.streamTimeOut?tgmp.model.haltStreamI=setTimeout(m2g_bar.stopCurrent,36e5*m2g.config.streamTimeOut):m2g.log("streamTimeOut: infinity"),m2g.log("onStartStream called"),m2g.config.listeners.streamplaying.length&&$.map(m2g.config.listeners.streamplaying,function(a,b){a(!0)}),m2g.model.nowplaying?m2g.comm.load_song(m2g.model.nowplaying,function(a){a&&(tgmp.render.track(a),tgmp.render.autoClose())}):m2g_bar.options.infoTrayOnLoad=!0,m2g_bar.trackBarEvent("play",null)},onMediaStart:function(){m2g.config.listeners.mediastart.length&&$.map(m2g.config.listeners.mediastart,function(a,b){a()})},trackInfo:function(a,b,c){c||(c="track"),song_meta={sslg:tg_util.slugify(b),aslg:tg_util.slugify(a)},m2g.comm.load_song(song_meta,function(a){var b={artist:a.artist,aslg:a.aslg,dslg:a.dslg,song:a.song,sslg:a.sslg};tgmp.render[c](b)},function(){m2g.log("track load error")})},trackAction:function(a,b,c){song_meta={sslg:tg_util.slugify(b),aslg:tg_util.slugify(a)},m2g.comm.load_song(song_meta,function(a){var b={artist:a.artist,aslg:a.aslg,dslg:a.dslg,song:a.song,sslg:a.sslg};"clip"==c&&m2g_bar.playTrackSample(b),"video"==c&&m2g.comm.load_endpoint(m2g.config.endpoints.videos,b,function(a){a.videos.length?m2g_bar.youTubeClicked(b,a.videos[0].yt_id):alert("video not found!")}),"save"==c&&m2g.log("save functionality coming soon"),"vote"==c&&m2g_bar.countVote(b)},function(){m2g.log("track load error")})},trackBarEvent:function(a,b){if(b)var c=m2g.config.callsign+"/"+b.aslg+"/"+b.sslg;else var c=m2g.config.callsign;console.log("analytics: "+tgmp.model.mode+", "+a+", "+c),ga("send","event",tgmp.model.mode,a,c)},countVote:function(a){m2g_bar.trackBarEvent("vote",a)}};TGMPCommReceiver("m2g_bar"),TGMPCommReceiver("tgmp.render");var m2g_widgets={tgmp:null,is_init:!1,played_at_list:[],isPostMessage:!1,options:{streamfooter:!0,searchbar:!0,single:!1,yt_id:null,debug:!1},initRecentSong:function(a){this.options.streamfooter=!1,this.options.searchbar=!1,this.init(!0)},initNowPlayingList:function(a){if(a)for(var b in a)this.options[b]=a[b];this.init(!1)},initNowPlayingListPM:function(a){if(a)for(var b in a)this.options[b]=a[b];this.isPostMessage=!0,this.init(!1)},initYouTube:function(a){if(a)for(var b in a)this.options[b]=a[b];m2g_widgets.nunjucks=new nunjucks.Environment;var c=m2g_widgets.nunjucks.render("youtube_embed.html",this.options);$("#contents").html(c),$("a.ytp").click(function(a){m2g_widgets.tgmp.playYouTube(m2g_widgets.options.yt_id),a.preventDefault()});var d=m2g.config.endpoints.videoinfo.replace("/api/","https://api.tunegenie.com/");m2g.comm.load_endpoint(d,{id:m2g_widgets.options.yt_id},function(a){a.result&&$(".ytp .ytp-title-text").text(a.result.title)})},barComm:function(a,b){if(this.isPostMessage){switch(a){case"recentSongs":m2g_widgets.onRecentSongsPM=b[0],b=[];break;case"loadSong":m2g_widgets.onSongPM=b[1],b=[b[0]]}top.postMessage({evt:a,args:b},"*")}else switch(a){case"playStream":m2g_widgets.tgmp.playStream();break;case"isReady":return m2g_widgets.tgmp.isReady();case"recentSongs":m2g_widgets.tgmp.recentSongs(b[0]);break;case"trackInfo":m2g_widgets.tgmp.trackInfo(b[0],b[1],b[2]);break;case"trackAction":m2g_widgets.tgmp.trackAction(b[0],b[1],b[2]);break;case"loadSong":m2g_widgets.tgmp.loadSong(b[0],b[1]);break;default:console.log("UNKNOWN COMMAND: "+a)}},init:function(a){this.is_single=a,this.options.single=a,m2g_widgets.nunjucks=new nunjucks.Environment;var b=m2g_widgets.nunjucks.render("widget_slotsbase.html",this.options);$("#contents").html(b),this.options.streamfooter&&$("#tgmpwidget a.play.btn").click(function(a){m2g_widgets.barComm("playStream",[]),a.preventDefault()}),this.isPostMessage&&(window.addEventListener("message",function(a){switch(a.data.handler){case"onRecentSongs":m2g_widgets.onRecentSongsPM(a.data.data);break;case"onSong":m2g_widgets.onSongPM(a.data.data);break;case"onNowPlaying":m2g_widgets.onNewSong(a.data.data)}},!1),setTimeout(function(){top.postMessage({evt:"initRCWidget"},"*"),m2g_widgets.initHours()},1e3)),a||m2g_widgets.renderHoursAd()},renderHoursAd:function(){if($(window).width()>300){var a=Math.round(($(window).width()-300)/2);$("#hours_ad").css("left",a)}var b="//"+m2g.config.callsign+".tunegenie.com/music/_framed_ad/_/_/_/?pagename=hours&size=300x250&b="+m2g.config.callsign;$("#hours_ad .adunit").html('<iframe name="300x250_adunit" src="'+b+'" width="300" height="250" frameborder="0" align="top,left" marginheight="0" marginwidth="0" scrolling="no"></iframe>'),$("#hours_ad").animate({bottom:50},1e3,"easeOutExpo"),$("#hours_ad .close").click(function(a){m2g_widgets.closeHoursAd(),a.preventDefault()}),m2g.model.ad_countdown=18,m2g.model.ad_timeout=setTimeout(m2g_widgets.checkHoursAd,1e3)},checkHoursAd:function(){clearTimeout(m2g.model.ad_timeout),m2g.model.ad_countdown--,$("#hours_ad .timeleft").text(m2g.model.ad_countdown),0==m2g.model.ad_countdown?m2g_widgets.closeHoursAd():m2g.model.ad_timeout=setTimeout(m2g_widgets.checkHoursAd,1e3)},closeHoursAd:function(){clearTimeout(m2g.model.ad_timeout),$("#hours_ad").animate({bottom:-350},1e3,"easeOutExpo",function(){$("#hours_ad .adunit").html("")})},setTgmpRef:function(a){this.tgmp=a,this.is_single||(m2g_widgets.hoursI=setTimeout(m2g_widgets.initHours,1e3))},initHours:function(){var a;m2g_widgets.isPostMessage?a=!0:(m2g_widgets.refReset=setTimeout(function(){m2g_widgets.tgmp=_parentFrame.TGMP_OBJ_CACHE.ref||top.TGMP_OBJ_CACHE.ref,m2g_widgets.initHours()},500),a=m2g_widgets.barComm("isReady"),clearTimeout(m2g_widgets.refReset)),a&&m2g_widgets.barComm("recentSongs",[function(a){clearTimeout(m2g_widgets.hoursI),$("#contents ul.recentwidget").html("");var b=$(window).height()-50;$(".widget-scroll").css("height",b),$("ul.slots").slimScroll({color:"#aaa",height:b+"px"}),m2g_widgets.played_at_list=[];for(var c=a.length-1;c>=0;c--){m2g_widgets.onNewSong(a[c])}$($(".slot")[0]).trigger("mouseover"),m2g_widgets.is_init=!0}]),m2g_widgets.isPostMessage||(clearTimeout(m2g_widgets.hoursI),m2g_widgets.hoursI=setTimeout(function(){m2g_widgets.tgmp=_parentFrame.TGMP_OBJ_CACHE.ref||top.TGMP_OBJ_CACHE.ref,m2g_widgets.initHours()},5e3))},onNewSong:function(a){if(!($.inArray(a.played_at,m2g_widgets.played_at_list)>-1)){m2g_widgets.played_at_list.push(a.played_at),m2g_widgets.is_single&&(console.log(a),console.log("INSPECT"));var b=m2g_widgets.nunjucks.render("widget_recent.html",a);m2g_widgets.is_single?$("#contents ul.recentwidget").html(b):$("#contents ul.recentwidget").prepend(b),$("ul.slots li.justadded").show(300,"easeOutExpo").removeClass("justadded"),$("ul.slots li.freshslot .albumlink, ul.slots li.freshslot .songlink").click(function(a){var b=tg_util.get_context(this);m2g_widgets.barComm("trackInfo",[b.aslg,b.sslg,"track"]),a.preventDefault()}),$("ul.slots li.freshslot .artistlink").click(function(a){var b=tg_util.get_context(this);m2g_widgets.barComm("trackInfo",[b.aslg,b.sslg,"artist"]),a.preventDefault()}),$("ul.slots li.freshslot .actions .play-clip").click(function(a){var b=tg_util.get_context(this);"false"==$(this).attr("data-issong")?console.log("THIS AINT A SONG"):m2g_widgets.barComm("trackAction",[b.aslg,b.sslg,"clip"]),a.preventDefault()}),$("ul.slots li.freshslot .actions .save").click(function(a){var b=tg_util.get_context(this);m2g_widgets.barComm("trackAction",[b.aslg,b.sslg,"save"]),a.preventDefault()}),$("ul.slots li.freshslot .actions .vote").click(function(a){var b=tg_util.get_context(this);m2g_widgets.barComm("trackAction",[b.aslg,b.sslg,"vote"]),a.preventDefault()}),$("ul.slots li.freshslot .actions .vidlink").click(function(a){var b=tg_util.get_context(this);
m2g_widgets.barComm("trackAction",[b.aslg,b.sslg,"video"]),a.preventDefault()}),m2g_widgets.is_single?$("ul.slots li.freshslot").toggleClass("open"):$("ul.slots li.freshslot").bind("mouseover touchstart",function(a){clearTimeout(m2g.model.slottimeout),m2g.model.slottimeout=setTimeout($.proxy(function(){if(!$(this).hasClass("open")){$(this).parents("ul").find("li").not(this).removeClass("open"),$(this).parents("ul").find("li").find(".slot-info").css("visibility","hidden").hide(300,"easeOutExpo"),$(this).find(".slot-info").show(300,"easeOutExpo",function(){$(this).css("visibility","visible")}),$(this).toggleClass("open");var a=Boolean(Number($(this).attr("data-hasopened")));if(!a){var b=$(this),c=tg_util.get_context(this);m2g_widgets.barComm("loadSong",[c,function(a){b.find(".slot-actions .play-clip").attr("data-issong",a.is_song),b.find(".slot-info .disc span").html('<img onload="$(this).fadeIn(1000)" style="display:none" src="'+a.artwork+'"/>'),a.is_song?b.find(".slot-info a.buy").attr("href",a.url):b.find(".slot-info a.buy").hide(),b.attr("data-hasopened","1")}])}}},this),400)});var c=$("ul.slots li.freshslot").removeClass("freshslot");return m2g_widgets.is_init&&!m2g_widgets.is_single&&c.trigger("mouseover"),c}}};!function(a){a.fn.albumclick=function(){return this.each(function(){a(this).bind("click",function(a){var b=tg_util.get_context(this);tgmp.render.album(b),a.preventDefault()})})},a.fn.songclick=function(){return this.each(function(){a(this).bind("click",function(a){var b=tg_util.get_context(this);"n-a"!=b.sslg&&tgmp.render.track(b),a.preventDefault()})})},a.fn.youtube_link=function(){return this.each(function(){a(this).bind("click",function(b){var c=tg_util.get_context(this),d=a(this).attr("data-ytid");m2g_bar.youTubeClicked(c,d),b.preventDefault()})})},a.fn.linkvideo=function(){return this.each(function(){var b=tg_util.get_context(this);b.count=1;var c=a(this);Boolean(Number(a(this).attr("data-vm")))||m2g.comm.load_endpoint(m2g.config.endpoints.videos,b,function(a){c.attr("data-vm","1"),a.videos.length&&(c.find(".vidblock").html(nunjucks.render("mqvidthumb.html",a.videos[0])),c.find(".vidlink").attr("data-ytid",a.videos[0].yt_id),c.find(".yt-link").addcontext(b),c.find(".yt-link").youtube_link())})})},a.fn.lyricsnip=function(){return this.each(function(){var b=tg_util.get_context(this),c=a(this);c.find(".lyriclink").addcontext(b).bind("click",function(a){tgmp.render.lyrics(tg_util.get_context(this)),a.preventDefault()}),Boolean(Number(a(this).attr("data-lm")))||m2g.comm.load_endpoint(m2g.config.endpoints.lyricsnip,b,function(a){c.attr("data-lm","1"),a.lyricsnip?c.find(".lyricsnip p").text(a.lyricsnip):c.find(".lyricsnip").hide()})})},a.fn.playclip=function(){return this.each(function(){var b=tg_util.get_context(this),c=a(this),d=c.find(".play-clip").attr("href");d?c.find(".play-clip").addcontext(b).bind("click",function(a){a.preventDefault(),m2g_bar.playTrackSample(tg_util.get_context(this))}):c.find(".play-clip").hide()})},a.fn.artistclick=function(){return this.each(function(){a(this).bind("click",function(a){var b=tg_util.get_context(this);"n-a"!=b.aslg&&tgmp.render.artist(b),a.preventDefault()})})},a.fn.addcontext=function(b){return this.each(function(){a(this).attr("data-sslg",b.sslg),a(this).attr("data-aslg",b.aslg),a(this).attr("data-sid",b.sid),a(this).attr("data-artist-name",b.artist)})},a.fn.artistnav=function(){var b=tg_util.get_context(this);a(this).find(".btn").addcontext(b),a(this).find(".info").artistclick(),a(this).find(".albums").bind("click",function(a){tgmp.render.albums(tg_util.get_context(this)),a.preventDefault()}),a(this).find(".photos").bind("click",function(a){tgmp.render.photos(tg_util.get_context(this)),a.preventDefault()}),a(this).find(".social").bind("click",function(a){tgmp.render.social(tg_util.get_context(this)),a.preventDefault()}),a(this).find(".toptracks").bind("click",function(a){tgmp.render.toptracks(tg_util.get_context(this)),a.preventDefault()}),a(this).find(".concerts").bind("click",function(a){tgmp.render.concerts(tg_util.get_context(this)),a.preventDefault()})}}(jQuery),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["album_detail.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate("artist_content_base.html",!0,"album_detail.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("artist_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+='\n\n\t<div class="large-12 columns">\n\t\t<div class="disc"><span><img src="',h+=d.suppressValue(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b,c,"tracks"),0),"artwork"),a.opts.autoescape),h+='"></span></div><h4>',h+=d.suppressValue(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b,c,"tracks"),0),"album"),a.opts.autoescape),h+='</h4><br/>\n\t</div>\n\n\t<div class="large-12 columns">\n\t\t<div class="scroll-pane">\n\t\t\t<div>\n\n\t\t\t\t<ul class="slots mini">\n\t\t\t\t',c=c.push();var i=d.contextOrFrameLookup(b,c,"tracks");if(i)for(var j=i.length,k=0;k<i.length;k++){var l=i[k];c.set("track",l),c.set("loop.index",k+1),c.set("loop.index0",k),c.set("loop.revindex",j-k),c.set("loop.revindex0",j-k-1),c.set("loop.first",0===k),c.set("loop.last",k===j-1),c.set("loop.length",j),h+="\n\t\t\t\t\t";var m=[];m.push(function(b){a.getTemplate("inline_track.html",!1,"album_detail.html",null,function(a,c){return a?void e(a):void b(null,c)})}),m.push(function(a,d){a.render(b.getVariables(),c,function(a,b){return a?void e(a):void d(null,b)})}),m.push(function(a,b){h+=a,b(null)}),a.waterfall(m,function(){h+="\n\t\t\t\t"})}c=c.pop(),h+="\n\t\t\t\t</ul>\t\t\t\t\n\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n",e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_artist_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["albumlink.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<a class="albumlink" data-artist-name="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" data-dslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"dslg"),a.opts.autoescape),h+='" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" href="#" title="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"album"),a.opts.autoescape),h+='"><span><img src="',h+=d.contextOrFrameLookup(b,c,"artwork")?d.suppressValue(d.contextOrFrameLookup(b,c,"artwork"),a.opts.autoescape):"//s3.amazonaws.com/static.tunegenie.com/img/defaultcover170.jpg",h+='"></span></a>\n',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["albums.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate("artist_content_base.html",!0,"albums.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("artist_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);if(h+="\n\t",d.memberLookup(d.contextOrFrameLookup(b,c,"albums"),"length")){h+='\n\t\t<div class="scroll-pane">\n\t\t\t<div>\n\t\t\t\t<ul class="small-block-grid-3 large-block-grid-5 albums">\n\t\t\t\t',c=c.push();var i=d.contextOrFrameLookup(b,c,"albums");if(i)for(var j=i.length,k=0;k<i.length;k++){var l=i[k];c.set("album",l),c.set("loop.index",k+1),c.set("loop.index0",k),c.set("loop.revindex",j-k),c.set("loop.revindex0",j-k-1),c.set("loop.first",0===k),c.set("loop.last",k===j-1),c.set("loop.length",j),h+='\n\t\t\t\t\t<li><a href="/',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+="/",h+=d.suppressValue(d.memberLookup(l,"dslg"),a.opts.autoescape),h+='/" class="th albumlink" data-artist-name="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" data-dslg="',h+=d.suppressValue(d.memberLookup(l,"dslg"),a.opts.autoescape),h+='" title="',h+=d.suppressValue(d.memberLookup(l,"album"),a.opts.autoescape),h+='">\n\t\t\t\t\t\t<img src="',h+=d.suppressValue(d.memberLookup(l,"artwork"),a.opts.autoescape),h+='" />\n\t\t\t\t\t\t<h6>',h+=d.suppressValue(d.memberLookup(l,"album"),a.opts.autoescape),h+=" <small>",h+=d.suppressValue(d.memberLookup(l,"release_year"),a.opts.autoescape),h+="</small></h6>\n\t\t\t\t\t</a></li>\n\t\t\t\t"}c=c.pop(),h+="\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t"}else h+="\n\t\t<p>\n\t\t\t<h4>No albums available for <i>",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+="</i> at the moment</h4>\n\t\t</p>\n\t";h+="\n\t\n",e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_artist_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["artist_bio.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate("artist_content_base.html",!0,"artist_bio.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("artist_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+='\n\n<div class="content-panel">\n\t<div class="scroll-pane">\n\t\t<div>\n\t\t',d.contextOrFrameLookup(b,c,"content")?(h+="\n\t\t\t",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"content"),a.opts.autoescape),h+="\n\t\t"):(h+="\n\t\t\t<p>\n\t\t\t\t<h4>No biography available for <i>",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+="</i> at the moment</h4>\n\t\t\t</p>\n\t\t"),h+="\t\n\t\t",d.contextOrFrameLookup(b,c,"website")&&(h+='\n\t\t\t<h5>\n\t\t\t\tOfficial Website: <a href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"website"),a.opts.autoescape),h+='" target="_blank">',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"website"),a.opts.autoescape),h+="</a>\n\t\t\t</h5>\n\t\t"),h+="\n\t\t</div>\n\t</div>\n</div>\n\n",e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_artist_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["artist_content_base.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate(d.contextOrFrameLookup(b,c,"root_template"),!0,"artist_content_base.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("tray_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+='\n\t<div class="row artist-content" data-hasopened="1" data-sm="1" data-vm="1" data-lm="1" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" ',d.contextOrFrameLookup(b,c,"sid")&&(h+='data-sid="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape),h+='"'),h+='>\n\t\t<div class="large-9 small-12 columns hidden-on-close">\n\t\t\t<div class="left">\n\t\t\t\t<h3>',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+='</h3>\n\t\t\t\t<div>\n\t\t\t\t\t<a href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"concertslink"),a.opts.autoescape),h+='" class="pjax loc-tour"></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="large-12 columns slot-info" style="visibility: visible;">\n\t\t\t<div class="large-8 small-12 columns">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="large-12 columns">\n\t\t\t\t\t\t';var i=[];i.push(function(b){a.getTemplate("artist_nav.html",!1,"artist_content_base.html",null,function(a,c){return a?void e(a):void b(null,c)})}),i.push(function(a,d){a.render(b.getVariables(),c,function(a,b){return a?void e(a):void d(null,b)})}),i.push(function(a,b){h+=a,b(null)}),a.waterfall(i,function(){h+='\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="large-12 columns">\n\t\t\t\t\t\t',b.getBlock("artist_content")(a,b,c,d,function(f,g){return f?void e(f):(h+=g,h+='\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="large-4 columns show-for-large-up">\n\t\t\t\t<div class="adunit adunit_300x250" id="ad300x250_',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"pagename"),a.opts.autoescape),h+="_",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"ad_num"),a.opts.autoescape),h+='" data-size="300x250" >\n\t\t\t\t\t<iframe src="//banners.itunes.apple.com/banner.html?partnerId=&aId=11l8Bd&bt=genre&t=genre_matrix_black&ft=topmovies&st=movie&s=33&p=15&c=us&l=en-US&w=300&h=250" frameborder=0 style="overflow-x:hidden;overflow-y:hidden;width:300px;height:250px;border:0px"></iframe>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\t\t\t\n\t</div>\n\n\n',void e(null,h))})})}catch(a){e(d.handleError(a,f,g))}}function c(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+="\n\t\t\t\t\t\t",e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_tray_content:b,b_artist_content:c,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["artist_nav.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<ul class="context-nav artist-nav" data-artist-name="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+='" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" ',d.contextOrFrameLookup(b,c,"sid")&&(h+='data-sid="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape),h+='"'),h+='>\n\t<li><a class="info btn ',h+=d.suppressValue(a.getFilter("activeclass").call(b,d.contextOrFrameLookup(b,c,"active_tab"),"artist"),a.opts.autoescape),h+='" href="/',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='">Artist Info</a></li>\n\t<li><a class="photos btn ',h+=d.suppressValue(a.getFilter("activeclass").call(b,d.contextOrFrameLookup(b,c,"active_tab"),"photos"),a.opts.autoescape),h+='" href="/',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='/_photos">Photos</a></li>\n\t<li><a class="social btn ',h+=d.suppressValue(a.getFilter("activeclass").call(b,d.contextOrFrameLookup(b,c,"active_tab"),"social"),a.opts.autoescape),h+='" href="/',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='/_social">Social</a></li>\n\t<li><a class="albums btn ',h+=d.suppressValue(a.getFilter("activeclass").call(b,d.contextOrFrameLookup(b,c,"active_tab"),"albums"),a.opts.autoescape),h+='" href="/',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='/_albums">Albums</a></li>\n\t<li><a class="toptracks btn ',h+=d.suppressValue(a.getFilter("activeclass").call(b,d.contextOrFrameLookup(b,c,"active_tab"),"toptracks"),a.opts.autoescape),h+='" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='/_toptracks">Top Tracks</a></li>\n\t<!--li><a class="videos btn" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"videolink"),a.opts.autoescape),h+='">Videos</a></li-->\n\t<li><a class="concerts btn ',h+=d.suppressValue(a.getFilter("activeclass").call(b,d.contextOrFrameLookup(b,c,"active_tab"),"concerts"),a.opts.autoescape),h+='" href="/',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='/_concerts">Concerts</a></li>\n</ul>\n',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["barfoundation.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div id="tgmp">\n\t<div class="row">\n\n\t\t<div class="bar-left columns">\n\t\t\t<ul class="inlinebar">\n\t\t\t\t<li class="playpausestop"><a href="#" class="play lgbtn"><i class="fa fa-play"></i></a></li>\n\t\t\t\t',d.contextOrFrameLookup(b,c,"enableGenieMode")&&(h+='\n\t\t\t\t<li><a href="#" class="next btn"><i class="fa fa-forward"></i></a></li>\n\t\t\t\t'),h+='\n\t\t\t</ul>\n\t\t\t<div id="is_mobile"></div>\n\t\t</div>\n\n\t\t<div class="bar-center columns frame">\n\t\t\t<div class="large-1 medium-2 columns hide-for-small-only">\n\t\t\t\t<div class="albumart"></div>\n\t\t\t</div>\n\t\t\t<div class="large-9 medium-7 columns">\n\t\t\t\t<div class="top">\n\t\t\t\t\t<span class="song" data-sslg="n-a" data-aslg="n-a">&nbsp;</span>\n\t\t\t\t\t',d.contextOrFrameLookup(b,c,"enableLiking")&&(h+='\n\t\t\t\t\t<a href="#" class="like" title="Like"><i class="fa fa-heart-o"></i></a>\n\t\t\t\t\t'),h+="\n\t\t\t\t</div>\n\t\t\t\t",d.contextOrFrameLookup(b,c,"usePopUpMediaPlayer")||(h+='\n\t\t\t\t<div class="line-holder hide-for-small-only">\n\t\t\t\t\t<div class="time"><span class="currtime">0:00</span>&nbsp;/&nbsp;<span class="timeleft">0:00</span></div>\n\t\t\t\t\t<div class="line"><span style="width:0%;">&nbsp;</span></div>\n\t\t\t\t</div>\n\t\t\t\t'),h+='\n\t\t\t\t<div class="bottom">\n\t\t\t\t\t<span class="artist" data-sslg="n-a" data-aslg="n-a">&nbsp;</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t',d.contextOrFrameLookup(b,c,"usePopUpMediaPlayer")||(h+='\n\t\t\t<div class="large-2 medium-3 columns actions hide-for-small-only">\n\t\t\t\t<ul class="inlinebar">\n\t\t\t\t\t',d.contextOrFrameLookup(b,c,"disableTray")||(h+='\n\t\t\t\t\t<li><a href="#" class="info" title="More Info on what is playing"><i class="fa fa-info-circle"></i></a></li>\n\t\t\t\t\t'),h+='\n\t\t\t\t\t<li><a href="#" class="volume" title="Volume: 100%"><i class="fa fa-volume-up"></i></a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t'),h+='\n\t\t</div>\n\n\t\t<div class="hide-for-small-only bar-right columns">\n\t\t\t<ul class="right inlinebar">\n\t\t\t\t',d.contextOrFrameLookup(b,c,"enableGenieMode")&&(h+='\n\t\t\t\t<li class="stream modebtn off"><a href="#" class="listen-live-link icnbtn" title="Listen Live"><span class="icon-tower"></span></a></li>\n\t\t\t\t<li class="genie modebtn off"><a href="#" class="genie icnbtn" title="Genie Mode"><span class="icon-genielamp"></span></a></li>\n\t\t\t\t'),h+='\n\n\t\t\t\t<li><div class="source">&nbsp;</div></li>\n\n\n\t\t\t\t<li class="stream modebtn off hide-for-medium-only"><a href="#" class="listen-live-link icnbtn" title="Listen Live"><span class="icon-tower"></span></a></li>\n\t\t\t\t',d.contextOrFrameLookup(b,c,"disableTray")||(h+='\n\t\t\t\t<li class="onair"><a href="#" class="onair-link icnbtn" title="On Air Playlist"><i class="fa fa-clock-o"></i></a></li>\n\t\t\t\t<li class="search"><a href="#" class="search icnbtn" title="Search"><i class="fa fa-search"></i></a></li>\n\t\t\t\t'),h+='\n\t\t\t\t<!--li class="history"><a href="#" class="history icnbtn" title="History"><i class="fa fa-clock-o"></i></a></li>\n\t\t\t\t<li class="mysaves"><a href="#" class="mysaves icnbtn" title="My Saves"><span class="icon-heartmark"></span></a></li-->\n\n\n\t\t\t\t',d.contextOrFrameLookup(b,c,"allowLogin")&&(h+='\n\t\t\t\t<li><a href="#" class="login">Login</a></li>\n\t\t\t\t'),h+='\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div class="show-for-small-only bar-right columns">\n\t\t\t<ul class="right inlinebar">\n\t\t\t\t<li class="mmenu"><a href="#" class="mmenu-link icnbtn" title="Menu"><i class="fa fa-bars"></i></a></li>\n\t\t\t</ul>\n\t\t</div>\n\n\t</div>\n</div>\n\n\n<div id="login-tray">\n</div>\n<div id="syncad-tray">\n</div>\n<div id="ad-tray">\n</div>\n<div id="vjs-tray">\n</div>\n<div id="soundcloud-tray">\n</div>\n<div id="media-tray">\n</div>\n<div id="content-tray">\n</div>\n',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["barfoundation_invisible.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div id="ad-tray">\n</div>\n<div id="media-tray">\n</div>\n<div id="content-tray">\n</div>',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["comingsoon.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate("artist_content_base.html",!0,"comingsoon.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("artist_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,h+="\n",void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+="\n\n<h2>Coming Soon!</h2>\n\n\t\n",e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_artist_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["concerts.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate("artist_content_base.html",!0,"concerts.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("artist_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,h+="\n",void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);if(h+='\n<div class="scroll-pane">\n\t<div>\t\n\n\t\t<div class="local-shows">\n\t',d.memberLookup(d.contextOrFrameLookup(b,c,"shows"),"length")){h+='\n\t<ul class="concerts slots mini">\n\t\t',c=c.push();var i=d.contextOrFrameLookup(b,c,"shows");if(i)for(var j=i.length,k=0;k<i.length;k++){var l=i[k];c.set("show",l),c.set("loop.index",k+1),c.set("loop.index0",k),c.set("loop.revindex",j-k),c.set("loop.revindex0",j-k-1),c.set("loop.first",0===k),c.set("loop.last",k===j-1),c.set("loop.length",j),h+='\n\t\t<li class="show slot">\n\t\t\t<div class="row cbox">\n\t\t\t\t<div class="large-6 columns">\n\t\t\t\t\t<div class="date">\n\t\t\t\t\t\t<span>',h+=d.suppressValue(a.getFilter("month").call(b,d.memberLookup(l,"datetime")),a.opts.autoescape),h+="</span>\n\t\t\t\t\t\t<em>",h+=d.suppressValue(a.getFilter("day").call(b,d.memberLookup(l,"datetime")),a.opts.autoescape),h+="</em>\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t<h6>",h+=d.suppressValue(d.memberLookup(d.memberLookup(l,"venue"),"name"),a.opts.autoescape),h+='</h6>\n\t\t\t\t\t<span class="more">',h+=d.suppressValue(d.memberLookup(d.memberLookup(l,"venue"),"city"),a.opts.autoescape),h+=", ",h+=d.suppressValue(d.memberLookup(d.memberLookup(l,"venue"),"region"),a.opts.autoescape),h+=", ",h+=d.suppressValue(d.memberLookup(d.memberLookup(l,"venue"),"country"),a.opts.autoescape),h+='</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="large-6 columns">\n\t\t\t\t\t<ul class="context-nav">\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href="',h+=d.suppressValue(d.memberLookup(l,"ticket_url"),a.opts.autoescape),h+='" target="_blank" class="btn"><i class="fa fa-ticket"></i> Buy Tickets</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href="',h+=d.suppressValue(d.memberLookup(l,"facebook_rsvp_url"),a.opts.autoescape),h+='" target="_blank" class="btn"><i class="fa fa-check"></i> RSVP</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href="http://maps.google.com/?q=',h+=d.suppressValue(a.getFilter("urlencode").call(b,d.memberLookup(d.memberLookup(l,"venue"),"name")),a.opts.autoescape),h+=",",h+=d.suppressValue(a.getFilter("urlencode").call(b,d.memberLookup(d.memberLookup(l,"venue"),"city")),a.opts.autoescape),h+=",",h+=d.suppressValue(a.getFilter("urlencode").call(b,d.memberLookup(d.memberLookup(l,"venue"),"region")),a.opts.autoescape),h+=",",h+=d.suppressValue(a.getFilter("urlencode").call(b,d.memberLookup(d.memberLookup(l,"venue"),"country")),a.opts.autoescape),h+="&ll=",h+=d.suppressValue(d.memberLookup(d.memberLookup(l,"venue"),"latitude"),a.opts.autoescape),h+=",",h+=d.suppressValue(d.memberLookup(d.memberLookup(l,"venue"),"longitude"),a.opts.autoescape),h+='" target="_blank" class="btn"><i class="fa fa-map-marker"></i> Map</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\n\t\t'}c=c.pop(),h+="\n\t</ul>\n\t"}else h+="\n\t\t<p>\n\t\t\t<h4>No upcoming shows for <i>",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+="</i> near <i>",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"loc"),a.opts.autoescape),h+="</i></h4>\n\t\t</p>\n\t";h+='\n\t\t</div>\n\n\t<p>\n\t\t<a class="gen-btn near-me" href="#" data-artist-name="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+='" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" ',d.contextOrFrameLookup(b,c,"sid")&&(h+='data-sid="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape),h+='"'),h+='><i class="fa fa-location-arrow"></i> Search For Shows Near Me</a>\n\t\t<a class="gen-btn full-tour" href="#" data-artist-name="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+='" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" ',d.contextOrFrameLookup(b,c,"sid")&&(h+='data-sid="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape),h+='"'),h+='><i class="fa fa-list"></i> Load Full Tour Schedule</a>\n\t</p>\n\n\t</div>\n</div>\n\n\n\t\n',e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_artist_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["google_preroll.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div class="rendered-content row',d.contextOrFrameLookup(b,c,"useTritonPlayer")&&(h+=" transparent"),h+='">\n\t<div class="large-12 columns close-container">\n\t\t<div class="large-6 medium-6 small-6 columns">\n\t\t\t&nbsp;\n\t\t</div>\n\t\t<div class="large-6 medium-6 small-6 columns right text-right">\n\t\t\t<a href="#" class="close-tray"><span class="close-txt">close</span> <i class="fa fa-times"></i></a>\n\t\t</div>\n\t</div>\t\n\t<div class="large-10 columns large-centered ad_screen" style="padding-top:20px;">\n\t\t<div class="preroll-left columns">\n\t\t\t<div id=\'preroll_companion\' style=\'width:300px; height:250px;\'>\n\t\t\t',d.contextOrFrameLookup(b,c,"useTritonPlayer")||(h+="\n\t\t\t  <script type='text/javascript'>\n\t\t\t  googletag.cmd.push(function() { googletag.display('preroll_companion'); });\n\t\t\t  </script>\t\n\t\t\t"),h+='\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="preroll-right columns">\n\t\t\t',d.contextOrFrameLookup(b,c,"useTritonPlayer")?h+='\n\t\t\t\t<div id="td_container" style="width:100%; height:250px"></div>\n\t\t\t':(h+='\n\t\t\t\t<div class="flex-video widescreen vimeo">\n\t\t\t\t\t<video id="content_video" class="video-js vjs-default-skin" poster="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"cdn"),a.opts.autoescape),h+='video/poster.png" controls preload="auto" width="auto" height="auto">\n\t\t\t\t\t\t<source src="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"cdn"),a.opts.autoescape),h+='video/tg_logo.mp4" type="video/mp4" />\n\t\t\t\t\t\t<source src="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"cdn"),a.opts.autoescape),h+='video/tg_logo.ogv" type="video/ogg" />\n\t\t\t\t\t\t<source src="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"cdn"),a.opts.autoescape),h+='video/tg_logo.webm" type="video/webm" />\n\t\t\t\t\t</video>\n\t\t\t\t</div>\n\t\t\t'),h+="\n\t\t</div>\n\t</div>\n</div>",i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["inline_track.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<li class="slot moretrack" data-artist-name="',h+=d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b,c,"track"),"artist"),a.opts.autoescape),h+='" data-sslg="',h+=d.suppressValue(a.getFilter("slugify").call(b,d.memberLookup(d.contextOrFrameLookup(b,c,"track"),"song")),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(a.getFilter("slugify").call(b,d.memberLookup(d.contextOrFrameLookup(b,c,"track"),"artist")),a.opts.autoescape),h+='" ',d.memberLookup(d.contextOrFrameLookup(b,c,"track"),"sid")&&(h+='data-sid="',h+=d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b,c,"track"),"sid"),a.opts.autoescape),h+='"'),h+='>\n\t<div class="row cbox">\n\n\t\t<div class="large-9 small-12 columns">\n\t\t\t<div class="left">\n\t\t\t\t<div class="song">',h+=d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b,c,"track"),"song"),a.opts.autoescape),h+="</div>\n\t\t\t\t<div>\n\t\t\t\t\t",h+=d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b,c,"track"),"artist"),a.opts.autoescape),h+='\n\t\t\t\t\t<a href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"concertslink"),a.opts.autoescape),h+='" class="pjax loc-tour"></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="large-3 hide-for-small columns text-right">\n\t\t\t<span class="timestamp">',h+=d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b,c,"track"),"played_at_display"),a.opts.autoescape),h+="</span>\n\t\t</div>\n\t</div>\n</li>",i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["login.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='\t<div class="rendered-content row loginmarkup">\n\t\t<div class="large-12 columns large-centered">\n\t\t\t<span class="right text-right"><a href="#" class="close-tray"><span class="close-txt hide-for-small">close</span> <i class="fa fa-times"></i></a></span>\n\t\t\t<div class="iframe-container">\n\t\t\t\t<iframe id="login-iframe" name="login-iframe" frameborder="0" align="top,left" marginheight="0" marginwidth="0" scrolling="no" width="100%" height="100%" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"src="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"login_frame_src"),a.opts.autoescape),h+='"></iframe>\n\t\t\t</div>\n\t\t</div>\n\t</div>',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["lyric.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate("artist_content_base.html",!0,"lyric.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("artist_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+='\n\n\t<div class="large-12 columns">\n\t\t<div class="disc">';var i=[];i.push(function(b){a.getTemplate("albumlink.html",!1,"lyric.html",null,function(a,c){return a?void e(a):void b(null,c)})}),i.push(function(a,d){a.render(b.getVariables(),c,function(a,b){return a?void e(a):void d(null,b)})}),i.push(function(a,b){h+=a,b(null)}),a.waterfall(i,function(){
h+="</div><h4>Lyrics for <i>",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"song"),a.opts.autoescape),h+='</i></h4><br/>\n\t</div>\n\n\t<div class="large-12 columns">\n\t\t<div class="content-panel">\n\t\t\t<div class="scroll-pane">\n\t\t\t\t<div>\n\t\t\t\t\t',h+=d.suppressValue(a.getFilter("safe").call(b,d.contextOrFrameLookup(b,c,"lyric")),a.opts.autoescape),h+='\n\n\t\t\t\t\t<div class="more">\n\t\t\t\t\t\t',d.contextOrFrameLookup(b,c,"songWriters")&&(h+="\n\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t<strong>Written by:</strong><br/>\n\t\t\t\t\t\t\t",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"songWriters"),a.opts.autoescape),h+="\n\t\t\t\t\t\t</small>\n\t\t\t\t\t\t"),h+="\n\t\t\t\t\t\t",d.contextOrFrameLookup(b,c,"publishers")&&(h+="\n\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t<strong>Published by:</strong><br/>\n\t\t\t\t\t\t\t",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"publishers"),a.opts.autoescape),h+="\n\t\t\t\t\t\t</small>\n\t\t\t\t\t\t"),h+="\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n",e(null,h)})}catch(a){e(d.handleError(a,f,g))}}return{b_artist_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["m2g_syncad.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div class="rendered-content row">\n\t<div class="large-12 columns close-container">\n\t\t<div class="large-6 medium-6 small-6 columns">\n\t\t\t&nbsp;\n\t\t</div>\n\t\t<div class="large-6 medium-6 small-6 columns right text-right">\n\t\t\t<a href="#" class="close-tray"><span class="close-txt">close</span> <i class="fa fa-times"></i></a>\n\t\t</div>\n\t</div>\t\n\t<div class="large-10 columns large-centered ad_screen" style="padding-top:20px;">\n\n\t\t',d.contextOrFrameLookup(b,c,"banner_url")&&(h+="\n\t\t<div class=\"large-4 medium-5 small-12 columns\">\n\t\t\t<div id='preroll_companion' style='width:300px; height:250px;'>\n\t\t\t\t<a href=\"",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"clickable_url"),a.opts.autoescape),h+='" target="_blank"><img src="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"banner_url"),a.opts.autoescape),h+='" alt="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"big_title"),a.opts.autoescape),h+='"/></a>\n\t\t\t</div>\n\t\t</div>\n\t\t'),h+="\n\t\t",d.contextOrFrameLookup(b,c,"google_place_id")&&(h+='\n\t\t<div class="large-4 medium-5 hide-for-small-only columns">\n\t\t\t<iframe width="250" height="250" \nframeborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/directions?\norigin=Current%20Location&destination=place_id:',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"google_place_id"),a.opts.autoescape),h+='&key=AIzaSyAFaaQ_QgoKxq7hLy-10JxoYDgnRu0MmCs"\nallowfullscreen></iframe>\n\t\t</div>\n\t\t'),h+='\n\t\t\n\t\t<div class="large-4 medium-2 small-12 columns" style="padding-top:10px;">\n\t\t\t<ul class="inline-list">\n\t\t\t  ',d.contextOrFrameLookup(b,c,"google_place_id")&&(h+='\n\t\t\t  <li class="show-for-small-only"><a href="https://www.google.com/maps/dir/?api=1&origin=Current%20Location&destination=',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"small_title"),a.opts.autoescape),h+="&destination_place_id=",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"google_place_id"),a.opts.autoescape),h+='&travelmode=driving" class="gen-btn" target="_blank"><i class="fa fa-location-arrow"></i> Driving Directions</a></li>\n\t\t\t  '),h+="\n\t\t\t  ",d.contextOrFrameLookup(b,c,"phone_number")&&(h+='\n\t\t\t  <li><a href="tel:',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"phone_number"),a.opts.autoescape),h+='" class="gen-btn" target="_blank"><i class="fa fa-phone"></i> Call Us</a></li>\n\t\t\t  '),h+="\n\t\t\t  ",d.contextOrFrameLookup(b,c,"company_url")&&(h+='\n\t\t\t  <li><a href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"company_url"),a.opts.autoescape),h+='" class="gen-btn" target="_blank"><i class="fa fa-external-link"></i> Visit Our Website</a></li>\n\t\t\t  '),h+="\n\t\t\t  ",d.contextOrFrameLookup(b,c,"clickable_url")&&(h+='\n\t\t\t  <li class="hide-for-small-only"><a href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"clickable_url"),a.opts.autoescape),h+='" class="gen-btn" target="_blank"><i class="fa fa-print"></i> Print Our Coupon</a></li>\n\t\t\t  '),h+="\n\t\t\t</ul>\t\t\t\n\t\t</div>\n\t\t\t\n\t</div>\n</div>",i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["mmenu.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate(d.contextOrFrameLookup(b,c,"root_template"),!0,"mmenu.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("tray_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+='\n\n\t<div class="large-8 columns large-centered ">\n\t\t<ul class="inline-list">\n\t\t\t<li><a href="#" class="listen-live-link button small" title="Listen Live"><span class="icon-tower"></span> &nbsp;Listen Live</a></li>\n\t\t\t<li><a href="#" class="onair-link button small" title="On Air Playlist"><i class="fa fa-clock-o"> &nbsp;On Air Playlist</i></a></li>\n\t\t</ul>\t\t\n\t  <form class="search">\n\t  <div class="row collapse">\n        <div class="small-10 columns">\n          <input type="text" name="q" ',d.contextOrFrameLookup(b,c,"q")&&(h+='value="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"q"),a.opts.autoescape),h+='"'),h+=' placeholder="Music Search">\n        </div>\n        <div class="small-2 columns">\n          <input type="submit" class="button postfix" value="Go">\n        </div>\n      </div>\n  \t  </form>\n\t</div>\n',e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_tray_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["mqvidthumb.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<a href="#" class="yt yt-link" data-ytid="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"yt_id"),a.opts.autoescape),h+='" title="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"title"),a.opts.autoescape),h+='">\n\t\t<img src="https://i.ytimg.com/vi/',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"yt_id"),a.opts.autoescape),h+='/mqdefault.jpg">\n\t\t<i class="fa fa-youtube-play"></i>\n</a>',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["onair.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+="\n",a.getTemplate(d.contextOrFrameLookup(b,c,"root_template"),!0,"onair.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("tray_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+='\n\t<div class="row artist-content" data-hasopened="1" data-sm="1" data-vm="1" data-lm="1">\n\t\t<div class="large-9 small-12 columns hidden-on-close">\n\t\t\t<div class="left">\n\t\t\t\t<h3>On Air Playlist</h3>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="large-12 columns slot-info" style="visibility: visible;">\n\t\t\t<div class="large-8 small-12 columns">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="large-12 columns">\n\t\t\t\t\t\t<div class="scroll-pane">\n\t\t\t\t\t\t\t<div>\n\n\t\t\t\t\t\t\t\t<ul class="slots mini">\n\t\t\t\t\t\t\t\t',c=c.push();var i=d.contextOrFrameLookup(b,c,"tracks");if(i)for(var j=i.length,k=0;k<i.length;k++){var l=i[k];c.set("track",l),c.set("loop.index",k+1),c.set("loop.index0",k),c.set("loop.revindex",j-k),c.set("loop.revindex0",j-k-1),c.set("loop.first",0===k),c.set("loop.last",k===j-1),c.set("loop.length",j),h+="\n\t\t\t\t\t\t\t\t\t";var m=[];m.push(function(b){a.getTemplate("inline_track.html",!1,"onair.html",null,function(a,c){return a?void e(a):void b(null,c)})}),m.push(function(a,d){a.render(b.getVariables(),c,function(a,b){return a?void e(a):void d(null,b)})}),m.push(function(a,b){h+=a,b(null)}),a.waterfall(m,function(){h+="\n\t\t\t\t\t\t\t\t"})}c=c.pop(),h+='\n\t\t\t\t\t\t\t\t</ul>\t\t\t\t\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="large-4 columns show-for-large-up">\n\t\t\t\t<div class="adunit adunit_300x250" id="ad300x250_onair_',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"ad_num"),a.opts.autoescape),h+='" data-size="300x250" >\n\t\t\t\t\t<iframe src="//banners.itunes.apple.com/banner.html?partnerId=&aId=11l8Bd&bt=genre&t=genre_matrix_black&ft=topmovies&st=movie&s=33&p=15&c=us&l=en-US&w=300&h=250" frameborder=0 style="overflow-x:hidden;overflow-y:hidden;width:300px;height:250px;border:0px"></iframe>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\t\t\t\n\t</div>\n\n',e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_tray_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["othervideos.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<h4>Other Videos for this Track</h4>\n<ul class="small-block-grid-3 other-videos">\n\t',c=c.push();var j=d.contextOrFrameLookup(b,c,"videos");if(j)for(var k=j.length,l=0;l<j.length;l++){var m=j[l];c.set("video",m),c.set("loop.index",l+1),c.set("loop.index0",l),c.set("loop.revindex",k-l),c.set("loop.revindex0",k-l-1),c.set("loop.first",0===l),c.set("loop.last",l===k-1),c.set("loop.length",k),h+='\n\t<li>\n\t\t<a class="yt yt-link" data-ytid="',h+=d.suppressValue(d.memberLookup(m,"yt_id"),a.opts.autoescape),h+='" href="#" title="',h+=d.suppressValue(d.memberLookup(m,"title"),a.opts.autoescape),h+='">\n\t\t\t<img src="',h+=d.suppressValue(d.memberLookup(m,"thumbnail"),a.opts.autoescape),h+='" />\n\t\t\t<i class="fa fa-youtube-play"></i>\n\t\t</a>\n\t</li>\n\t'}c=c.pop(),h+='\n</ul>\n<a href="#" class="close-listen-live small button">Close and Listen Live</a>',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["photos.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate("artist_content_base.html",!0,"photos.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("artist_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,h+="\n",void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);if(h+="\n\n\t",d.memberLookup(d.contextOrFrameLookup(b,c,"photos"),"length")){h+='\n\t<div class="scroll-pane">\n\t\t<div>\n\n\t\t\t<ul class="clearing-thumbs" data-clearing>\n\t\t\t\t\t',c=c.push();var i=d.contextOrFrameLookup(b,c,"photos");if(i)for(var j=i.length,k=0;k<i.length;k++){var l=i[k];c.set("photo",l),c.set("loop.index",k+1),c.set("loop.index0",k),c.set("loop.revindex",j-k),c.set("loop.revindex0",j-k-1),c.set("loop.first",0===k),c.set("loop.last",k===j-1),c.set("loop.length",j),h+='\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href="',h+=d.suppressValue(d.memberLookup(l,"url"),a.opts.autoescape),h+='" class="th"><img data-caption="',h+=d.suppressValue(d.memberLookup(l,"attribution"),a.opts.autoescape),h+='" src="',h+=d.suppressValue(d.memberLookup(l,"thumburl"),a.opts.autoescape),h+='"></a>\n\t\t\t\t\t</li>\n\t\t\t\t\t'}c=c.pop(),h+="\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t"}else h+="\n\t\t<p>\n\t\t\t<h4>No photos available for <i>",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+="</i> at the moment</h4>\n\t\t</p>\n\t";h+="\n\t\n",e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_artist_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["raw_preroll.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div class="rendered-content row">\n\t<div class="large-10 columns large-centered" style="padding-top:20px;">\n\t\t<div class="preroll-left columns">\n\t\t\t<div id=\'preroll_companion\' style=\'width:300px; height:250px;\'>\n\t\t\t  <iframe src="',h+=d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b,c,"currentPrerollAd"),"banner"),a.opts.autoescape),h+='" id="companion" name="companion" frameborder="0" align="top,left" marginheight="0" marginwidth="0" scrolling="no" width="300" height="250"></iframe>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="preroll-right columns">\n\t\t\t<div class="flex-video widescreen vimeo">\n\t\t\t\t<video id="content_video" class="video-js vjs-default-skin" poster="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"cdn"),a.opts.autoescape),h+='video/poster.png" controls preload="auto" width="auto" height="auto">\n\t\t\t\t\t<source src="',h+=d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b,c,"currentPrerollAd"),"media"),a.opts.autoescape),h+='" type="',h+=d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b,c,"currentPrerollAd"),"video_type"),a.opts.autoescape),h+='" />\n\t\t\t\t</video>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["search.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate(d.contextOrFrameLookup(b,c,"root_template"),!0,"search.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("tray_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);if(h+='\n\n\t<div class="large-8 columns large-centered ">\n\t  <form class="search">\n\t  <div class="row collapse">\n        <div class="small-10 columns">\n          <input type="text" name="q" ',d.contextOrFrameLookup(b,c,"q")&&(h+='value="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"q"),a.opts.autoescape),h+='"'),h+=' placeholder="Music Search">\n        </div>\n        <div class="small-2 columns">\n          <input type="submit" class="button postfix" value="Go">\n        </div>\n      </div>\n  \t  </form>\n\t</div>\n\t',d.contextOrFrameLookup(b,c,"result")){h+='\n\t\t<div class="large-12 columns">\n\t\t\t<div class="scroll-pane">\n\t\t\t\t<ul class="slots mini">\n\t\t\t\t',c=c.push();var i=d.contextOrFrameLookup(b,c,"result");if(i)for(var j=i.length,k=0;k<i.length;k++){var l=i[k];c.set("track",l),c.set("loop.index",k+1),c.set("loop.index0",k),c.set("loop.revindex",j-k),c.set("loop.revindex0",j-k-1),c.set("loop.first",0===k),c.set("loop.last",k===j-1),c.set("loop.length",j),h+='\n\t\t\t\t\t<li class="slot moretrack" data-artist-name="',h+=d.suppressValue(d.memberLookup(d.memberLookup(l,"artist"),"name"),a.opts.autoescape),h+='" data-sslg="',h+=d.suppressValue(a.getFilter("slugify").call(b,d.memberLookup(l,"name")),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(a.getFilter("slugify").call(b,d.memberLookup(d.memberLookup(l,"artist"),"name")),a.opts.autoescape),h+='" ',d.memberLookup(l,"id")&&(h+='data-sid="',h+=d.suppressValue(d.memberLookup(l,"id"),a.opts.autoescape),h+='"'),h+='>\n\t\t\t\t\t\t<div class="row cbox">\n\t\t\t\t\t\t\t<div class="large-9 small-12 columns">\n\t\t\t\t\t\t\t\t<div class="left">\n\t\t\t\t\t\t\t\t\t<div class="song">',h+=d.suppressValue(d.memberLookup(l,"name"),a.opts.autoescape),h+="</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t",h+=d.suppressValue(d.memberLookup(d.memberLookup(l,"artist"),"name"),a.opts.autoescape),h+="\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t"}c=c.pop(),h+="\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t"}h+="\n\n",e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_tray_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["site_content_base.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div class="rendered-content row">\n\t<div class="large-12 columns close-container">\n\t\t<div class="large-6 small-6 columns">\n\t\t\t<a href="#" class="go-back"><i class="fa fa-arrow-left"></i></a>\n\t\t</div>\n\t\t<div class="large-6 small-6 columns right text-right">\n\t\t\t<a href="#" class="close-tray"><i class="fa fa-times"></i></a>\n\t\t</div>\n\t</div>\n\t',(i?function(a,b,c,d,e){e("")}:b.getBlock("tray_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,h+="\n</div>",void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+="\n\t",e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_tray_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["social.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate("artist_content_base.html",!0,"social.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("artist_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,h+="\n",void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+='\n\n<div class="large-12 columns">\n  <div class="large-4 medium-4 columns">\n    <h6>Connect with ',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+=' on:</h6>\n  </div>\n  <div class="large-8 medium-8 columns">\n  ',d.memberLookup(d.contextOrFrameLookup(b,c,"feeds"),"instagram_id")&&(h+='\n    <a href="http://instagram.com/',h+=d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b,c,"feeds"),"instagram_id"),a.opts.autoescape),h+='" class="gen-btn" target="_blank"><i class="fa fa-instagram"></i> Instagram</a>\n  '),h+="\n  ",d.memberLookup(d.contextOrFrameLookup(b,c,"feeds"),"facebook_id")&&(h+='\n    <a href="http://facebook.com/',h+=d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b,c,"feeds"),"facebook_id"),a.opts.autoescape),h+='" class="gen-btn" target="_blank"><i class="fa fa-facebook"></i> Facebook</a>\n  '),h+="\n  ",d.memberLookup(d.contextOrFrameLookup(b,c,"feeds"),"twitter_id")&&(h+='\n    <a href="http://twitter.com/',h+=d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b,c,"feeds"),"twitter_id"),a.opts.autoescape),h+='" class="gen-btn" target="_blank"><i class="fa fa-twitter"></i> Twitter</a>\n  '),h+="\n  ",d.memberLookup(d.contextOrFrameLookup(b,c,"feeds"),"instagram_id")||d.memberLookup(d.contextOrFrameLookup(b,c,"feeds"),"facebook_id")||d.memberLookup(d.contextOrFrameLookup(b,c,"feeds"),"twitter_id")||(h+="\n    Hmmm, looks like we don't have social links for this artist. :(\n  "),h+="\n  </div>\n</div>\n\t\n",e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_artist_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["social_instagram.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;if(d.memberLookup(d.contextOrFrameLookup(b,c,"feeds"),"instagram")){h+='\n\t<ul class="clearing-thumbs" data-clearing>\n\t\t\t',c=c.push();var j=d.memberLookup(d.contextOrFrameLookup(b,c,"feeds"),"instagram");if(j)for(var k=j.length,l=0;l<j.length;l++){var m=j[l];c.set("photo",m),c.set("loop.index",l+1),c.set("loop.index0",l),c.set("loop.revindex",k-l),c.set("loop.revindex0",k-l-1),c.set("loop.first",0===l),c.set("loop.last",l===k-1),c.set("loop.length",k),h+='\n\t\t\t<li>\n\t\t\t\t<a href="',h+=d.suppressValue(d.memberLookup(d.memberLookup(d.memberLookup(m,"images"),"standard_resolution"),"url"),a.opts.autoescape),h+='" class="th"><img data-caption="',h+=d.suppressValue(d.memberLookup(d.memberLookup(m,"caption"),"text"),a.opts.autoescape),h+='" width="100px" src="',h+=d.suppressValue(d.memberLookup(d.memberLookup(d.memberLookup(m,"images"),"thumbnail"),"url"),a.opts.autoescape),h+='"></a>\n\t\t\t</li>\t\t\n\t\t\t'}c=c.pop(),h+="\n\t</ul>\n"}else h+="\n<p>We currently do not have Instagram content for this Artist</p>\n";i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["soundcloud.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div class="rendered-content row">\n\t<div class="large-12 columns close-container">\n\t\t<div class="large-12 columns right text-right">\n\t\t\t<a href="#" class="close-tray"><span class="close-txt">close</span> <i class="fa fa-times"></i></a>\n\t\t</div>\n\t</div>\t\n\t<div class="large-11 columns large-centered" style="padding-top:20px;">\n\t\t<iframe id="sc-widget" src="//w.soundcloud.com/player/?url=',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"soundcloud_url"),a.opts.autoescape),h+='" width="100%" height="300" scrolling="no" frameborder="no"></iframe>\n\t</div>\n</div>',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["toptracks.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate("artist_content_base.html",!0,"toptracks.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("artist_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+='\n\n<div class="scroll-pane">\n\t<div>\n\n\t\t<ul class="slots mini">\n\t\t',c=c.push();var i=d.contextOrFrameLookup(b,c,"toptracks");if(i)for(var j=i.length,k=0;k<i.length;k++){var l=i[k];c.set("track",l),c.set("loop.index",k+1),c.set("loop.index0",k),c.set("loop.revindex",j-k),c.set("loop.revindex0",j-k-1),c.set("loop.first",0===k),c.set("loop.last",k===j-1),c.set("loop.length",j),h+="\n\t\t\t";var m=[];m.push(function(b){a.getTemplate("inline_track.html",!1,"toptracks.html",null,function(a,c){return a?void e(a):void b(null,c)})}),m.push(function(a,d){a.render(b.getVariables(),c,function(a,b){return a?void e(a):void d(null,b)})}),m.push(function(a,b){h+=a,b(null)}),a.waterfall(m,function(){h+="\n\t\t"})}c=c.pop(),h+="\n\t\t</ul>\n\t\t\n\t</div>\n</div>\n\t\n",e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_artist_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["track.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div class="rendered-content row">\n\t<div class="large-12 columns right text-right">\n\t\t<a href="#" class="close-tray"><i class="fa fa-times"></i></a>\n\t</div>\n\t<div class="large-12 columns large-centered">\n\t\t<ul class="slots">\n\n\n\t\t\t<li class="slot lt open" data-hasopened="1" data-sm="1" data-vm="1" data-lm="1" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" ',d.contextOrFrameLookup(b,c,"sid")&&(h+='data-sid="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape),h+='"'),h+='>\n\t\t<div class="row">\n\t\t\t<div class="large-9 small-12 columns hidden-on-open">\n\t\t\t\t<div class="disc hide-for-small"><span><img src="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artwork"),a.opts.autoescape),h+='"></span></div>\n\t\t\t\t<div class="left">\n\t\t\t\t\t<div class="song">Higher Ground</div>\n\t\t\t\t\t<div>Stevie Wonder <span class="loc-tour"><i class="icon-location-arrow"></i></span></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="large-9 small-12 columns hidden-on-close">\n\t\t\t\t<div class="disc hide-for-small"><a class="pjax" href="#"><span><img src="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artwork"),a.opts.autoescape),h+='"></span></a></div>\n\t\t\t\t<div class="left">\n\t\t\t\t\t<div class="song"><a class="pjax" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"songlink"),a.opts.autoescape),d.contextOrFrameLookup(b,c,"sid")&&(h+="?sid=",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape)),h+='">',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"song"),a.opts.autoescape),h+='</a></div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<a class="pjax" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artistlink"),a.opts.autoescape),h+='">',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+='</a>\n\t\t\t\t\t\t<a href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"concertslink"),a.opts.autoescape),h+='" class="pjax loc-tour"></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="large-3 hide-for-small columns text-right">\n\t\t\t\t<span class="timestamp sm">',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"played_at_display"),a.opts.autoescape),h+='</span>\n\t\t\t\t<span class="helper">click to expand</span>\n\t\t\t</div>\n\t\t\t<div class="large-12 columns slot-info" style="visibility: visible;">\n\t\t\t\t<div class="small-4 columns show-for-small">\n\t\t\t\t\t<div class="disc"><a class="pjax" href="#"><span><img src="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artwork"),a.opts.autoescape),h+='"></span></a></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="large-8 small-8 columns slot-actions">\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="large-4 columns">\n\t\t\t\t\t\t\t<ul class="actions">\n\t\t\t\t\t\t\t\t<li><a class="save" href="#"><i class="fa fa-plus"></i> <span>save to playlist</span></a></li>\n\t\t\t\t\t\t\t\t<li><a class="play-clip" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"preview_url"),a.opts.autoescape),h+='"><i class="fa fa-play"></i> <span>play clips</span></a></li>\n\t\t\t\t\t\t\t\t<li><a class="buy" target="_blank" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"url"),a.opts.autoescape),h+='"><i class="fa fa-apple"></i> <span>buy on itunes</span></a></li>\n\t                            ',d.contextOrFrameLookup(b,c,"rdio_id")&&(h+='\n\t        \t\t\t\t\t\t<li><a class="playon-rdio" href="#"><i class="icon-rdio"></i> <span>play on rdio</span></a></li>\n\t                            '),h+='\n\t\t\t\t\t\t\t\t<li class="show-for-small"><a class="pjax" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"lyriclink"),a.opts.autoescape),d.contextOrFrameLookup(b,c,"sid")&&(h+="?sid=",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape)),h+='"><i class="fa fa-music"></i> <span>lyrics</span></a></li>\n\t\t\t\t\t\t\t\t<li class="show-for-small"><a class="pjax" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"videolink"),a.opts.autoescape),h+='"><i class="fa fa-youtube-play"></i> <span>play video</span></a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="large-8 columns hide-for-small vidblock">\n\t\t\t\t\t\t<ul class="large-block-grid-3">\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href="#" class="yt" data-ytid="4wZ3ZG_Wams" data-sslg="higher-ground" data-aslg="stevie-wonder" data-sid="4418271">\n\t\t\t\t\t\t\t\t\t<img src="https://i.ytimg.com/vi/4wZ3ZG_Wams/default.jpg">\n\t\t\t\t\t\t\t\t\t<i class="fa fa-youtube-play"></i>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href="#" class="yt" data-ytid="X00XdLhFLSg" data-sslg="higher-ground" data-aslg="stevie-wonder" data-sid="4418271">\n\t\t\t\t\t\t\t\t\t<img src="https://i.ytimg.com/vi/X00XdLhFLSg/default.jpg">\n\t\t\t\t\t\t\t\t\t<i class="fa fa-youtube-play"></i>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href="#" class="yt" data-ytid="QsaWoSq-OBo" data-sslg="higher-ground" data-aslg="stevie-wonder" data-sid="4418271">\n\t\t\t\t\t\t\t\t\t<img src="https://i.ytimg.com/vi/QsaWoSq-OBo/default.jpg">\n\t\t\t\t\t\t\t\t\t<i class="fa fa-youtube-play"></i>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</ul></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="row hide-for-small">\n\t\t\t\t\t\t<div class="large-12 columns">\n\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t<div class="row lyricsnip">\n\t\t\t\t\t\t\t\t<div class="large-10 columns">\n\t\t\t\t\t\t\t\t\t<p>People keep on learnin\' ; Soldiers keep on warrin\' ; World keep on turnin\' ; \'Cause it won\'t be too long ; ; Powers keep on lyin\' ; While your people ... </p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="large-2 columns">\n\t\t\t\t\t\t\t\t\t<a href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"lyriclink"),a.opts.autoescape),d.contextOrFrameLookup(b,c,"sid")&&(h+="?sid=",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape)),h+='" class="pjax gen-btn"><i class="icon-music"></i> <span>Lyrics</span></a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t<ul class="context-nav">\n\t\t\t\t\t\t\t\t\t<li><a class="pjax btn" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artistlink"),a.opts.autoescape),h+='">Artist Info</a></li>\n\t\t\t\t\t\t\t\t\t<li><a class="pjax btn" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"albumslink"),a.opts.autoescape),h+='">Albums</a></li>\n\t\t\t\t\t\t\t\t\t<li><a class="pjax btn" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"topttrackslink"),a.opts.autoescape),h+='">Top Tracks</a></li>\n\t\t\t\t\t\t\t\t\t<li><a class="pjax btn" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"videolink"),a.opts.autoescape),h+='">Videos</a></li>\n\t\t\t\t\t\t\t\t\t<li><a class="pjax btn" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"concertslink"),a.opts.autoescape),h+='">Concerts</a></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class="large-4 columns hide-for-small text-right right">\n\t\t\t\t\t<div class="adunit adunit_300x250" data-size="300x250" >\n\t\t\t\t\t\t<img src="//placehold.it/300x250"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t</div>\n\t\t<div class="row mobile-ad">\n\t\t\t<div class="adunit adunit_320x50" data-size="320x50" ></div>\n\t\t</div>\n\t</li>\n\n\n\t\t</ul>\n\n\n\t</div>\n</div>\n',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["track_new.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;a.getTemplate(d.contextOrFrameLookup(b,c,"root_template"),!0,"track_new.html",!1,function(f,g){if(f)return void e(f);i=g;for(var j in i.blocks)b.addBlock(j,i.blocks[j]);h+="\n\n",(i?function(a,b,c,d,e){e("")}:b.getBlock("tray_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,h+="\n",void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+='\n\n\t<ul class="slots">\n\n\n\t<li class="slot lt open" data-hasopened="1" data-sm="1" data-vm="0" data-lm="0" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" ',d.contextOrFrameLookup(b,c,"sid")&&(h+='data-sid="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape),h+='"'),h+='>\n\t\t<div class="row cbox">\n\t\t\t<div class="large-9 medium-9 small-12 columns hidden-on-close">\n\t\t\t\t<div class="disc hide-for-small">';var i=[];
i.push(function(b){a.getTemplate("albumlink.html",!1,"track_new.html",null,function(a,c){return a?void e(a):void b(null,c)})}),i.push(function(a,d){a.render(b.getVariables(),c,function(a,b){return a?void e(a):void d(null,b)})}),i.push(function(a,b){h+=a,b(null)}),a.waterfall(i,function(){h+='</div>\n\t\t\t\t<div class="left">\n\t\t\t\t\t<div class="song">',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"song"),a.opts.autoescape),h+='</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ul class="inline-list">\n\t\t\t\t\t\t\t<li>',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+='</li>\n\t\t\t\t\t\t\t<li><a href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"concertslink"),a.opts.autoescape),h+='" class="pjax loc-tour"></a></li>\n\t\t\t\t\t\t\t<li><a class="show-for-small-only artistmenu" data-artist-name="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+='" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" ',d.contextOrFrameLookup(b,c,"sid")&&(h+='data-sid="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape),h+='"'),h+='><i class="fa fa-ellipsis-h"></i></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="large-3 medium-3 hide-for-small columns text-right">\n\t\t\t\t<span class="timestamp">',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"played_at_display"),a.opts.autoescape),h+='</span>\n\t\t\t</div>\n\t\t\t<div class="large-12 columns slot-info" style="visibility: visible;">\n\t\t\t\t<div class="small-4 columns show-for-small">\n\t\t\t\t\t<div class="disc">';var f=[];f.push(function(b){a.getTemplate("albumlink.html",!1,"track_new.html",null,function(a,c){return a?void e(a):void b(null,c)})}),f.push(function(a,d){a.render(b.getVariables(),c,function(a,b){return a?void e(a):void d(null,b)})}),f.push(function(a,b){h+=a,b(null)}),a.waterfall(f,function(){if(h+='</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="large-8 medium-12 small-8 columns slot-actions">\n\t\t\t\t\t',d.contextOrFrameLookup(b,c,"is_song")){h+='\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="large-4 medium-3 columns">\n\t\t\t\t\t\t\t<ul class="actions">\n\t\t\t\t\t\t\t\t<li><a class="play-clip" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"preview_url"),a.opts.autoescape),h+='"><i class="fa fa-play"></i> <span>play clip</span></a></li>\n\t\t\t\t\t\t\t\t<li><a class="vote" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" href="#"><i class="fa fa-thumbs-o-up"></i> <span>vote</span></a></li>\n\t\t\t\t\t\t\t\t<li><a class="buy" target="_blank" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"url"),a.opts.autoescape),h+='"><i class="fa fa-apple"></i> <span>buy</span></a></li>\n\t\t\t\t\t\t\t\t<li><a class="save" href="#"><i class="fa fa-share-square-o"></i> <span>share</span></a></li>\n\t                            ',d.contextOrFrameLookup(b,c,"rdio_id")&&(h+='\n\t        \t\t\t\t\t\t<li><a class="playon-rdio" href="#"><i class="icon-rdio"></i> <span>play on rdio</span></a></li>\n\t                            '),h+='\n\t\t\t\t\t\t\t\t<li class="show-for-small"><a class="lyriclink" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"lyriclink"),a.opts.autoescape),d.contextOrFrameLookup(b,c,"sid")&&(h+="?sid=",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape)),h+='"><i class="fa fa-music"></i> <span>lyrics</span></a></li>\n\t\t\t\t\t\t\t\t<li class="show-for-small"><a class="pjax vidlink yt-link" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"videolink"),a.opts.autoescape),h+='"><i class="fa fa-youtube-play"></i> <span>play video</span></a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="large-8 medium-9 columns hide-for-small vidblock">\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="row hide-for-small">\n\t\t\t\t\t\t<div class="large-12 columns">\n\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t<div class="row lyricsnip">\n\t\t\t\t\t\t\t\t<div class="large-10 medium-9 columns">\n\t\t\t\t\t\t\t\t\t<p>&nbsp;</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="large-2 medium-3 columns">\n\t\t\t\t\t\t\t\t\t<a href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"lyriclink"),a.opts.autoescape),d.contextOrFrameLookup(b,c,"sid")&&(h+="?sid=",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape)),h+='" class="lyriclink gen-btn"><i class="icon-music"></i> <span>Lyrics</span></a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t';var f=[];f.push(function(b){a.getTemplate("artist_nav.html",!1,"track_new.html",null,function(a,c){return a?void e(a):void b(null,c)})}),f.push(function(a,d){a.render(b.getVariables(),c,function(a,b){return a?void e(a):void d(null,b)})}),f.push(function(a,b){h+=a,b(null)}),a.waterfall(f,function(){h+="\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t"})}else h+="\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t";h+='\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class="large-4 columns show-for-large-up">\n\t\t\t\t\t<div class="adunit adunit_300x250" id="ad300x250_tracks_',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"ad_num"),a.opts.autoescape),h+='" data-size="300x250" >\n\t\t\t\t\t\t<iframe src="//banners.itunes.apple.com/banner.html?partnerId=&aId=11l8Bd&bt=cms_promotional&cid=aWzWv97gDs&c=us&l=en-US&w=300&h=250" frameborder=0 style="overflow-x:hidden;overflow-y:hidden;width:300px;height:250px;border:0px"></iframe>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t</div>\n\t\t<div class="row mobile-ad">\n\t\t\t<div class="adunit adunit_320x50" id="ad320x50_tracks_',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"ad_num"),a.opts.autoescape),h+='" data-size="320x50" >\n\t\t\t\t<iframe src="//banners.itunes.apple.com/banner.html?partnerId=&aId=11l8Bd&bt=cms_promotional&cid=aWzWv97gDs&c=us&l=en-US&w=320&h=50" frameborder=0 style="overflow-x:hidden;overflow-y:hidden;width:320px;height:50px;border:0px"></iframe>\n\t\t\t</div>\n\t\t</div>\n\t</li>\n\n\n\t</ul>\n\n',e(null,h)})})}catch(a){e(d.handleError(a,f,g))}}return{b_tray_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["tray_content_base.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div class="rendered-content row">\n\t<div class="large-12 columns close-container">\n\t\t<div class="large-6 medium-6 small-6 columns">\n\t\t\t<a href="#" class="go-back"><i class="fa fa-arrow-left"></i></a>\n\t\t</div>\n\t\t<div class="large-6 medium-6 small-6 columns right text-right">\n\t\t\t<span class="loading">Loading...</span> &nbsp;&nbsp;\n\t\t\t<a href="#" class="close-tray"><span class="close-txt">close</span> <i class="fa fa-times"></i></a>\n\t\t</div>\n\t</div>\n\t<div class="large-12 columns large-centered slot-background">\n\t\t',(i?function(a,b,c,d,e){e("")}:b.getBlock("tray_content"))(a,b,c,d,function(f,g){return f?void e(f):(h+=g,h+="\n\t</div>\n</div>",void(i?i.rootRenderFunc(a,b,c,d,e):e(null,h)))})}catch(a){e(d.handleError(a,f,g))}}function b(a,b,c,d,e){var f=null,g=null,h="";try{var c=c.push(!0);h+="\n\t\t",e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{b_tray_content:b,root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["video_youtube.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div class="rendered-content row">\n\t<div class="large-12 columns close-container">\n\t\t<div class="large-12 columns right text-right">\n\t\t\t<a href="#" class="close-tray"><i class="fa fa-times"></i></a>\n\t\t</div>\n\t</div>\t\n\t<div class="large-11 columns large-centered" style="padding-top:20px;">\n\t\t<div class="hide-for-small large-4 medium-3 columns" id="video-left-column">\n\t\t\t<a href="#" class="close-listen-live button">Close and Listen Live</a>\n\t\t</div>\n\t\t<div class="large-8 medium-9 columns">\n\t\t\t<div class="flex-video widescreen vimeo">\n\t\t\t\t<video id="content_video_yt" src="" class="video-js vjs-default-skin" poster="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"cdn"),a.opts.autoescape),h+='video/poster.png" controls preload="auto" autoplay="autoplay" width="auto" height="auto">\n\t\t\t\t</video>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["video_youtube_raw.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div class="rendered-content row">\n\t<div class="large-12 columns close-container">\n\t\t<div class="large-12 columns right text-right">\n\t\t\t<a href="#" class="close-tray"><i class="fa fa-times"></i></a>\n\t\t</div>\n\t</div>\t\n\t<div class="large-11 columns large-centered" style="padding-top:20px;">\n\t\t<div class="hide-for-small large-4 medium-3 columns" id="video-left-column">\n\t\t\t<a href="#" class="close-listen-live button">Close and Listen Live</a>\n\t\t</div>\n\t\t<div class="large-8 medium-9 columns">\n\t\t\t<div class="flex-video widescreen vimeo">\n\t\t\t\t<div id="content_video_yt"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<script>\n\t\t\tvar tag = document.createElement(\'script\');\n\t\t\ttag.src = "https://www.youtube.com/iframe_api";\n\t\t\tvar firstScriptTag = document.getElementsByTagName(\'script\')[0];\n\t\t\tfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\t\t</script>\n\n\t</div>\n</div>',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["vjs.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div class="rendered-content row">\n\t<div class="large-10 columns large-centered" style="padding-top:20px;">\n\t\t<div class="preroll-left columns">\n\t\t\t<div id=\'preroll_companion\' style=\'width:300px; height:250px;\'>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="preroll-right columns">\n\t\t\t<div class="flex-video widescreen vimeo">\n\t\t\t\t<audio id="vjs-player" class="video-js vjs-fluid" controls preload="auto" webkit-playsinline>\n\t\t\t\t</audio>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["widget_recent.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='\n\t<li class="slot lt freshslot justadded" data-hasopened="',h+=d.contextOrFrameLookup(b,c,"artwork")?"1":"0",h+='" data-sm="',h+=d.contextOrFrameLookup(b,c,"artwork")?"1":"0",h+='" data-vm="0" data-lm="0" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" ',d.contextOrFrameLookup(b,c,"sid")&&(h+='data-sid="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sid"),a.opts.autoescape),h+='"'),h+='>\n\t\t<div class="row cbox">\n\t\t\t<div class="large-9 small-8 columns hidden-on-open">\n\t\t\t\t<div class="left">\n\t\t\t\t\t<div class="song">',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"song"),a.opts.autoescape),h+="</div>\n\t\t\t\t\t<div>",h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+=' <span class="loc-tour"></span><span class="campaign"></span></div>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t\t<div class="large-9 medium-9 small-8 columns hidden-on-close">\n\t\t\t\t<div class="left">\n\t\t\t\t\t<div class="song"><a class="songlink" href="#" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='">',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"song"),a.opts.autoescape),h+='</a></div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<a class="artistlink" href="#" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='">',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"artist"),a.opts.autoescape),h+='</a>\n\t\t\t\t\t\t<a href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"concertslink"),a.opts.autoescape),h+='" class="pjax loc-tour"></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="large-3 medium-3 small-4 columns text-right">\n\t\t\t\t<span class="timestamp">',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"played_at_display"),a.opts.autoescape),h+='</span>\n\t\t\t</div>\n\t\t\t<div class="large-12 columns slot-info hidden-on-close">\n\t\t\t\t<div class="small-4 columns show-for-small">\n\t\t\t\t\t<div class="disc">';var j=[];j.push(function(b){a.getTemplate("albumlink.html",!1,"widget_recent.html",null,function(a,c){return a?void e(a):void b(null,c)})}),j.push(function(a,d){a.render(b.getVariables(),c,function(a,b){return a?void e(a):void d(null,b)})}),j.push(function(a,b){h+=a,b(null)}),a.waterfall(j,function(){h+='</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="large-8 medium-12 small-8 columns slot-actions">\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="large-4 medium-3 columns">\n\t\t\t\t\t\t\t<ul class="actions">\n\t\t\t\t\t\t\t\t<li><a class="play-clip" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"preview_url"),a.opts.autoescape),h+='"><i class="fa fa-play"></i> <span>play clip</span></a></li>\n\t\t\t\t\t\t\t\t<li><a class="vote" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" href="#"><i class="fa fa-thumbs-o-up"></i> <span>vote</span></a></li>\n\t\t\t\t\t\t\t\t<li><a class="buy" target="_blank" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"url"),a.opts.autoescape),h+='"><i class="fa fa-apple"></i> <span>buy on iTunes</span></a></li>\n\t\t\t\t\t\t\t\t<li><a class="vidlink yt-link" data-sslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"sslg"),a.opts.autoescape),h+='" data-aslg="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"aslg"),a.opts.autoescape),h+='" href="',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"videolink"),a.opts.autoescape),h+='"><i class="fa fa-youtube-play"></i> <span>play video</span></a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t</div>\n\t</li>\n',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)})}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["widget_slotsbase.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<div class="rendered-content row">\n  <div class="large-12 widget columns large-centered slot-background">\n  \t<div class="widget-scroll ',d.contextOrFrameLookup(b,c,"single")&&(h+="single"),h+='">\n\t\t<ul class="slots recentwidget ',d.contextOrFrameLookup(b,c,"single")&&(h+="single"),h+='">\n\n\n\t\t</ul>\n\t</div>\n  </div>\n</div>\n\n',d.contextOrFrameLookup(b,c,"streamfooter")&&(h+='\n<div id="tgmpwidget">\n\t<div class="row">\n\t\t<a href="#" class="play btn"><i class="fa fa-play"></i></a>\n\t\t<div class="frame">\n\t\t\t<div class="top">\n\t\t\t\t<i>Click Play to Listen Live</i>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'),h+="\n\n",d.contextOrFrameLookup(b,c,"single")||(h+='\n<div id="hours_ad">\n\t<div class="info"><div class="part_left">sponsor message closing in <span class="timeleft">18</span>s</div> <div class="part_right"><a class="close" href="#"><i class="fa fa-times"></i> close</a></div></div>\n\t<div class="adunit">\n\t</div>\n</div>\n'),i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["youtube_embed.html"]=function(){function a(a,b,c,d,e){var f=null,g=null,h="";try{var i=null;h+='<a class="ytp" href="#">\n\t<div class="ytp-gradient-top" data-layer="1"></div>\n\t<div class="ytp-title-text">&nbsp;</div>\n\t<div class="ytp-thumbnail-overlay-image" style="background-image: url(https://i.ytimg.com/vi/',h+=d.suppressValue(d.contextOrFrameLookup(b,c,"yt_id"),a.opts.autoescape),h+='/maxresdefault.jpg);"></div>\n\t<span class="ply"><i class="fa fa-youtube-play"></i></span>\n</a>',i?i.rootRenderFunc(a,b,c,d,e):e(null,h)}catch(a){e(d.handleError(a,f,g))}}return{root:a}}()}(),tgmp.googleadplayer={useAbacastVast:!1,vast_ad_url:"",renderPreroll:function(a){"undefined"==typeof google?m2g_bar.onPrerollComplete():(tgmp.googleadplayer.is_adcomplete=!1,tgmp.googleadplayer.vast_ad_url=a,m2g_bar.open("#ad-tray"),$("#ad-tray").html(nunjucks.render("google_preroll.html",m2g_bar.options)),this.injectAd())},injectAd:function(){this.videojs=tg_util.instantiateResponsiveVideoJS("content_video"),this.videojs.on("adstart",function(){}),this.videojs.on("adend",function(){tgmp.googleadplayer.is_adcomplete=!0}),this.videojs.on("adtimeout",function(){tgmp.googleadplayer.is_adcomplete=!0,tgmp.googleadplayer.videojs.play()}),this.videojs.on("play",function(){}),this.videojs.on("pause",function(){}),this.videojs.on("ended",function(){tgmp.googleadplayer.is_adcomplete&&tgmp.googleadplayer.wrapUp()}),this.videojs.on("error",function(a){m2g.log("google ad video playback error"),m2g.log(a),tgmp.googleadplayer.is_adcomplete=!0,tgmp.googleadplayer.wrapUp()}),this.videojs.on("timeupdate",function(a){var b=1e3*tgmp.googleadplayer.videojs.currentTime(),c=1e3*tgmp.googleadplayer.videojs.duration();b&&c&&m2g_bar.timeUpdate(b,c)});var a={id:"content_video",adTagUrl:tgmp.googleadplayer.vast_ad_url,nonLinearWidth:445,nonLinearHeight:250};this.videojs.ima(a),this.videojs.ima.initializeAdDisplayContainer(),this.videojs.ima.requestAds(),this.videojs.play(),this.volumeUpdated()},wrapUp:function(){m2g_bar.close("#ad-tray",function(){m2g_bar.onPrerollComplete(),setTimeout(function(){tgmp.googleadplayer.videojs.dispose()},3e3),$("#ad-tray").empty()})},stop:function(){tgmp.googleadplayer.videojs.pause(),tgmp.googleadplayer.wrapUp()},volumeUpdated:function(){tgmp.googleadplayer.videojs.volume(tgmp.model.volume/100)}},tgmp.rawadplayer={renderPreroll:function(){return tgmp.rawadplayer.is_adcomplete=!1,tg_util.endsWith(m2g_bar.options.currentPrerollAd.media,".flv")?(m2g_bar.options.currentPrerollAd.video_type="video/flv",m2g.log("RAW Preroll Video FLV type, currently not supported"),void m2g_bar.onPrerollComplete()):(m2g_bar.options.currentPrerollAd.video_type="video/mp4",m2g_bar.open("#ad-tray"),$("#ad-tray").html(nunjucks.render("raw_preroll.html",m2g_bar.options)),void this.injectAd())},injectAd:function(){this.videojs=tg_util.instantiateResponsiveVideoJS("content_video"),this.videojs.on("play",function(){m2g.log("play")}),this.videojs.on("pause",function(){m2g.log("pause")}),this.videojs.on("ended",function(){m2g.log("ended"),tgmp.rawadplayer.is_adcomplete=!0,tgmp.rawadplayer.wrapUp()}),this.videojs.on("error",function(a){m2g.log("abacast ad video playback error"),m2g.log(a),tgmp.rawadplayer.is_adcomplete=!0,tgmp.rawadplayer.wrapUp()}),this.videojs.on("timeupdate",function(a){var b=1e3*tgmp.rawadplayer.videojs.currentTime(),c=1e3*tgmp.rawadplayer.videojs.duration();b&&c&&m2g_bar.timeUpdate(b,c)}),m2g.log("attempting to play video"),this.videojs.play(),this.volumeUpdated(),m2g.log(this.videojs)},wrapUp:function(){m2g_bar.close("#ad-tray",function(){m2g_bar.onPrerollComplete(),setTimeout(function(){tgmp.rawadplayer.videojs.dispose()},3e3),$("#ad-tray").empty()})},stop:function(){tgmp.rawadplayer.videojs.pause(),tgmp.rawadplayer.wrapUp()},volumeUpdated:function(){tgmp.rawadplayer.videojs.volume(tgmp.model.volume/100)}},tgmp.soundcloudplayer={widget:null,closeIntTime:9,isPaused:!0,playUrl:function(a){tgmp.soundcloudplayer.widget&&tgmp.soundcloudplayer.widget.pause(),$("#soundcloud-tray").empty(),m2g_bar.open("#soundcloud-tray"),m2g_bar.trayToggleEnabled(!0),$("#soundcloud-tray").html(nunjucks.render("soundcloud.html",{soundcloud_url:a}));var b=document.getElementById("sc-widget");tgmp.soundcloudplayer.widget=SC.Widget(b),tgmp.soundcloudplayer.listeners(),$("#soundcloud-tray .close-tray").bind("click",function(a){m2g_bar.trayToggleClicked(),a.preventDefault()}),tgmp.soundcloudplayer.autoClose()},listeners:function(){var a=tgmp.soundcloudplayer.widget;a.bind(SC.Widget.Events.READY,tgmp.soundcloudplayer.onScReady),a.bind(SC.Widget.Events.PLAY_PROGRESS,tgmp.soundcloudplayer.onScProgress),a.bind(SC.Widget.Events.PLAY,function(){m2g_bar.updatePlayPause(!1),tgmp.soundcloudplayer.isPaused=!1,tgmp.soundcloudplayer.setDisplay()}),a.bind(SC.Widget.Events.PAUSE,function(){m2g_bar.updatePlayPause(!0),tgmp.soundcloudplayer.isPaused=!0}),a.bind(SC.Widget.Events.FINISH,tgmp.soundcloudplayer.stop)},onScReady:function(){tgmp.soundcloudplayer.widget.getCurrentSoundIndex(function(a){a>-1?tgmp.soundcloudplayer.startSc():setTimeout(tgmp.soundcloudplayer.startSc,2e3)})},startSc:function(){tgmp.soundcloudplayer.widget.skip(0)},setDisplay:function(){tgmp.soundcloudplayer.widget.getCurrentSound(function(a){var b={artist:a.user.username,artwork:a.artwork_url?a.artwork_url:a.user.avatar_url,song:a.title};m2g_bar.updateDisplay(b,"On Demand"),$("#tgmp .albumart").html(tgmp.render.processTemplate("albumlink.html",b)),$("#tgmp .albumart .albumlink").unbind("click")})},onScProgress:function(a){var b=a.currentPosition/a.relativePosition;m2g_bar.timeUpdate(a.currentPosition,b)},stop:function(){m2g_bar.onPlaybackComplete(),tgmp.soundcloudplayer.widget.pause(),m2g_bar.close("#soundcloud-tray",function(){$("#soundcloud-tray").empty()}),m2g_bar.trayToggleEnabled(!1)},autoClose:function(){tgmp.soundcloudplayer.closeIntCount=0,clearInterval(tgmp.soundcloudplayer.closeI),tgmp.soundcloudplayer.closeI=setInterval(function(){tgmp.soundcloudplayer.closeIntCount++,$("#soundcloud-tray .close-tray .close-txt").text("closing in "+(tgmp.soundcloudplayer.closeIntTime-tgmp.soundcloudplayer.closeIntCount)+"s"),tgmp.soundcloudplayer.closeIntTime==tgmp.soundcloudplayer.closeIntCount&&tgmp.soundcloudplayer.closeContent()},1e3)},closeContent:function(){clearInterval(tgmp.soundcloudplayer.closeI),$("#soundcloud-tray .close-tray .close-txt").text("close"),m2g_bar.close("#soundcloud-tray")},togglePlayPause:function(){tgmp.soundcloudplayer.widget.toggle()},volumeUpdated:function(){tgmp.soundcloudplayer.widget.setVolume(tgmp.model.volume)}},tgmp.audioplayer={is_ready:!1,fe_ready:!1,in_preroll:!1,ad_clock:0,init:function(){tgmp.audioplayer.fe_ready=!0,tgmp.audioplayer.stream_id=m2g.config.callsign.toUpperCase()+"FM",tgmp.audioplayer.ad_url="//pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/1011860/listein_live_preroll&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=[referrer_url]&correlator=[timestamp]&cust_params=callsign%3D"+m2g.config.callsign,m2g.config.triton_config&&(m2g.config.triton_config.stream_id&&(tgmp.audioplayer.stream_id=m2g.config.triton_config.stream_id),m2g.config.triton_config.ad_url&&(tgmp.audioplayer.ad_url=m2g.config.triton_config.ad_url)),tgmp.audioplayer.renderPlayer()},onTDError:function(a){console.log("TRITON PLAYER ERROR:"),console.log(a)},renderPlayer:function(){if(tgmp.audioplayer.fe_ready){$("#ad-tray").html(nunjucks.render("google_preroll.html",m2g_bar.options));var a={coreModules:[{id:"MediaPlayer",playerId:"td_container",idSync:{station:tgmp.audioplayer.stream_id},techPriority:["Html5","Flash"],plugins:[{id:"vastAd"}]},{id:"SyncBanners",elements:[{id:"preroll_companion",width:300,height:250}],vastCompanionPriority:["static","iframe","html"]}],playerReady:tgmp.audioplayer.onPlayerReady,configurationError:tgmp.audioplayer.onTDError,moduleError:tgmp.audioplayer.onTDError,adBlockerDetected:tgmp.audioplayer.onAdComplete};tgmp.audioplayer.tdPlayer=new TDSdk(a)}},onPlayerReady:function(){tgmp.audioplayer.is_ready=!0,m2g_bar.close("#ad-tray"),tgmp.audioplayer.tdPlayer.addEventListener("stream-status",tgmp.audioplayer.onStreamStatus),tgmp.audioplayer.tdPlayer.addEventListener("media-playback-status",tgmp.audioplayer.onMediaPlaybackStatus),tgmp.audioplayer.tdPlayer.addEventListener("media-playback-timeupdate",function(a){m2g_bar.timeUpdate(1e3*a.data.playedTime,1e3*a.data.duration)}),tgmp.audioplayer.tdPlayer.addEventListener("ad-playback-error",tgmp.audioplayer.onAdComplete),tgmp.audioplayer.tdPlayer.addEventListener("ad-playback-complete",tgmp.audioplayer.onAdComplete),tgmp.audioplayer.tdPlayer.addEventListener("ad-countdown",function(a){0==tgmp.audioplayer.ad_clock&&(tgmp.audioplayer.ad_clock=1e3*a.data.countDown);var b=tgmp.audioplayer.ad_clock-1e3*a.data.countDown;m2g_bar.timeUpdate(b,tgmp.audioplayer.ad_clock)}),tgmp.audioplayer.tdPlayer.addEventListener("ad-break-synced-element",tgmp.audioplayer.onSyncAdStart),tgmp.audioplayer.tdPlayer.addEventListener("ad-break-cue-point-complete",tgmp.audioplayer.onSyncAdEnd)},onSyncAdStart:function(a){tgmp.audioplayer.in_preroll||($("#ad-tray #td_container").css("visibility","hidden"),$("#ad-tray .ad_screen").addClass("syncad"),$("#ad-tray .close-container").off("mouseover"),$("#ad-tray .close-container").show(),m2g.config.is_mobile?m2g_bar.open("#ad-tray"):(m2g_bar.open_partial("#ad-tray"),$("#ad-tray .close-container").on("mouseover",function(){m2g_bar.open("#ad-tray",!1),$("#ad-tray .close-container").off("mouseover")})),$("#ad-tray .close-tray").bind("click",function(a){tgmp.audioplayer.onSyncAdEnd(),a.preventDefault()}))},onSyncAdEnd:function(a){m2g_bar.close("#ad-tray"),$("#ad-tray .ad_screen").removeClass("syncad"),$("#ad-tray .close-tray").unbind("click"),$("#ad-tray .close-container").off("mouseover"),$("#ad-tray #td_container").css("visibility","visible")},onAdComplete:function(a){tgmp.audioplayer.in_preroll=!1,m2g_bar.close("#ad-tray"),m2g_bar.onPrerollComplete()},onStreamStatus:function(a){m2g_bar.timeMessage(a.data.status),"On Air"==a.data.status&&m2g_bar.updatePlayPauseIcon("stop"),"Disconnected"==a.data.status&&(m2g_bar.timeUpdate(0,0),tgmp.audioplayer.onSyncAdEnd())},onMediaPlaybackStatus:function(a){tgmp.audioplayer.isPaused="Paused"==a.data.status,m2g_bar.timeMessage(a.data.status),m2g_bar.updatePlayPause(tgmp.audioplayer.isPaused),"Stopped"==a.data.status&&m2g_bar.onPlaybackComplete()},renderPreroll:function(){tgmp.audioplayer.in_preroll=!0,tgmp.audioplayer.ad_clock=0,$("#ad-tray .rendered-content").removeClass("transparent"),m2g_bar.open("#ad-tray");var a=!0;m2g.config.triton_config&&m2g.config.triton_config.use_tap&&(a=!1,tgmp.audioplayer.tdPlayer.playAd("tap",{host:"cmod.live.streamtheworld.com",type:"preroll",format:"vast",stationId:m2g.config.triton_config.tap_station_id})),a&&tgmp.audioplayer.tdPlayer.playAd("vastAd",{url:tgmp.audioplayer.ad_url})},streamAudio:function(a){m2g_bar.options.promptZag&&m2g.model.current_user.has_zag?tgmp.audioplayer.tdPlayer.play({station:tgmp.audioplayer.stream_id,trackingParameters:{postalcode:Number(m2g.model.current_user.postalcode),yob:Number(m2g.model.current_user.yob),gender:m2g.model.current_user.gender,dist:"tg"}}):tgmp.audioplayer.tdPlayer.play({station:tgmp.audioplayer.stream_id,trackingParameters:{dist:"tg"}}),m2g.model.nielsenSDK&&m2g.model.nielsenSDK.ggPM("15",m2g.config.nielsen.metadata)},playAudioFile:function(a){tgmp.audioplayer.tdPlayer.play({file:a}),m2g.model.nielsenSDK&&m2g.model.nielsenSDK.ggPM("15",m2g.config.nielsen.metadata)},stop:function(){tgmp.audioplayer.tdPlayer&&(tgmp.audioplayer.tdPlayer.stop(),m2g.model.nielsenSDK&&m2g.model.nielsenSDK.ggPM("7",Math.floor(Date.now()/1e3)))},togglePlayPause:function(){tgmp.audioplayer.isPaused?tgmp.audioplayer.tdPlayer.resume():tgmp.audioplayer.tdPlayer.pause()},volumeUpdated:function(){tgmp.audioplayer.tdPlayer&&tgmp.audioplayer.tdPlayer.setVolume(tgmp.model.volume/100)}},tgmp.videoyoutube={videoPlayerRendered:!1,isPlaying:!1,is_yt_ready:!1,scrubI:0,renderAndPlay:function(a,b){m2g_bar.open("#media-tray"),m2g_bar.trayToggleEnabled(!0),tgmp.videoyoutube.videoPlayerRendered?(tgmp.videoyoutube.yt_player.loadVideoById(a.yt_id),$("#video-left-column").html('<a href="#" class="close-listen-live button">Close and Listen Live</a>')):(tgmp.videoyoutube.initialVideo=a,$("#media-tray").html(nunjucks.render("video_youtube_raw.html",{cdn:m2g_bar.options.cdn})),$("#media-tray .close-tray").bind("click",function(a){m2g_bar.trayToggleClicked(),a.preventDefault()}),tgmp.videoyoutube.is_yt_ready&&tgmp.videoyoutube.initPlayer()),b?(b.count=9,m2g.comm.load_endpoint(m2g.config.endpoints.videos,b,function(b){$("#video-left-column").html(nunjucks.render("othervideos.html",b)),m2g.log("#video-left-column ul.other-videos a[data-ytid='"+a.yt_id+"']"),$("#video-left-column ul.other-videos a[data-ytid='"+a.yt_id+"']").addClass("active"),$("#video-left-column ul.other-videos a").bind("click",function(b){var c=$(this).attr("data-ytid");c!=a.yt_id&&($("#video-left-column ul.other-videos a").removeClass("active"),$(this).addClass("active"),a={src:"https://www.youtube.com/watch?v="+c,type:"video/youtube",yt_id:c},tgmp.videoyoutube.yt_player.loadVideoById(a.yt_id)),b.preventDefault()}),$("#media-tray a.close-listen-live").bind("click",function(a){m2g_bar.playStream(),a.preventDefault()})})):$("#media-tray a.close-listen-live").bind("click",function(a){m2g_bar.playStream(),a.preventDefault()})},onYTAPIReady:function(){tgmp.videoyoutube.is_yt_ready=!0},initPlayer:function(){tgmp.videoyoutube.yt_player=new YT.Player("content_video_yt",{height:"100%",width:"100%",videoId:tgmp.videoyoutube.initialVideo.yt_id,events:{onReady:tgmp.videoyoutube.onYTPlayerReady,onStateChange:tgmp.videoyoutube.onYTPlayerStateChange}})},onYTPlayerReady:function(a){m2g.log("YT Player Ready"),a.target.playVideo(),clearInterval(tgmp.videoyoutube.scrubI),tgmp.videoyoutube.scrubI=setInterval(tgmp.videoyoutube.updateScrub,500),tgmp.videoyoutube.updateScrub()},onYTPlayerStateChange:function(a){switch(a.data){case-1:break;case 0:tgmp.videoyoutube.wrapUp();break;case 1:tgmp.videoyoutube.isPlaying=!0,m2g_bar.updatePlayPauseIcon("pause");break;case 2:tgmp.videoyoutube.isPlaying=!1,m2g_bar.updatePlayPauseIcon("play");break;case 3:break;case 5:break;default:m2g.log("unknown yt event case: "+a.data)}},updateScrub:function(){var a=1e3*tgmp.videoyoutube.yt_player.getCurrentTime(),b=1e3*tgmp.videoyoutube.yt_player.getDuration();a&&b&&m2g_bar.timeUpdate(a,b)},wrapUp:function(){clearInterval(tgmp.videoyoutube.scrubI),m2g_bar.onPlaybackComplete(),m2g_bar.close("#media-tray"),m2g_bar.trayToggleEnabled(!1)},togglePlayPause:function(){tgmp.videoyoutube.isPlaying?tgmp.videoyoutube.yt_player.pauseVideo():tgmp.videoyoutube.yt_player.playVideo()},stop:function(){tgmp.videoyoutube.yt_player.stopVideo(),tgmp.videoyoutube.wrapUp()},volumeUpdated:function(){tgmp.videoyoutube.yt_player.setVolume(tgmp.model.volume)}},tgmp.extplayer={player:null,setPlayer:function(a,b){this.player=a,this.player.setEventListener(tgmp.extplayer._handleEvent),m2g_bar.trayToggleEnabled(!1),b&&this._handleEvent(b)},_handleEvent:function(a){switch(a.event){case 1:tgmp.extplayer.playing=!0,m2g_bar.updatePlayPauseIcon("pause");break;case 2:tgmp.extplayer.playing=!1,m2g_bar.updatePlayPauseIcon("play");break;case 3:tgmp.extplayer.playing=!1,tgmp.extplayer._cleanUp();break;case 4:break;default:console.log("Unhandled event: "+a)}if(a.meta&&m2g_bar.updateDisplay({artist:a.meta.author,song:a.meta.title,artwork:a.meta.thumb_url},a.meta.mode),a.progress){var b=1e3*a.progress.current,c=1e3*a.progress.duration;m2g_bar.timeUpdate(b,c)}},
_cleanUp:function(){this.player.setEventListener(null),m2g_bar.onPlaybackComplete(),m2g_bar.trayToggleEnabled(!1)},stop:function(){this.player.pause(),this._cleanUp()},togglePlayPause:function(){this.playing?this.player.pause():this.player.play()},volumeUpdated:function(){this.player.setVolume(tgmp.model.volume)}},function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.nunjucks=b():a.nunjucks=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(1),e=c(2),f=c(15),g=c(14),h=c(3);a.exports={},a.exports.Environment=e.Environment,a.exports.Template=e.Template,a.exports.Loader=f,a.exports.FileSystemLoader=g.FileSystemLoader,a.exports.PrecompiledLoader=g.PrecompiledLoader,a.exports.WebLoader=g.WebLoader,a.exports.compiler=c(7),a.exports.parser=c(8),a.exports.lexer=c(9),a.exports.runtime=c(12),a.exports.lib=d,a.exports.nodes=c(10),a.exports.installJinjaCompat=c(21);var i;a.exports.configure=function(a,b){b=b||{},d.isObject(a)&&(b=a,a=null);var c;return g.FileSystemLoader?c=new g.FileSystemLoader(a,{watch:b.watch,noCache:b.noCache}):g.WebLoader&&(c=new g.WebLoader(a,{useCache:b.web&&b.web.useCache,async:b.web&&b.web.async})),i=new e.Environment(c,b),b&&b.express&&i.express(b.express),i},a.exports.compile=function(b,c,d,e){return i||a.exports.configure(),new a.exports.Template(b,c,d,e)},a.exports.render=function(b,c,d){return i||a.exports.configure(),i.render(b,c,d)},a.exports.renderString=function(b,c,d){return i||a.exports.configure(),i.renderString(b,c,d)},h&&(a.exports.precompile=h.precompile,a.exports.precompileString=h.precompileString)},function(a,b){"use strict";var c=Array.prototype,d=Object.prototype,e={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},f=/[&"'<>]/g,g=function(a){return e[a]},b=a.exports={};b.prettifyError=function(a,c,d){if(d.Update||(d=new b.TemplateError(d)),d.Update(a),!c){var e=d;d=new Error(e.message),d.name=e.name}return d},b.TemplateError=function(a,b,c){var d=this;if(a instanceof Error){d=a,a=a.name+": "+a.message;try{d.name=""}catch(a){d=this}}else Error.captureStackTrace&&Error.captureStackTrace(d);return d.name="Template render error",d.message=a,d.lineno=b,d.colno=c,d.firstUpdate=!0,d.Update=function(a){var b="("+(a||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?b+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(b+=" [Line "+this.lineno+"]")),b+="\n ",this.firstUpdate&&(b+=" "),this.message=b+(this.message||""),this.firstUpdate=!1,this},d},b.TemplateError.prototype=Error.prototype,b.escape=function(a){return a.replace(f,g)},b.isFunction=function(a){return"[object Function]"===d.toString.call(a)},b.isArray=Array.isArray||function(a){return"[object Array]"===d.toString.call(a)},b.isString=function(a){return"[object String]"===d.toString.call(a)},b.isObject=function(a){return"[object Object]"===d.toString.call(a)},b.groupBy=function(a,c){for(var d={},e=b.isFunction(c)?c:function(a){return a[c]},f=0;f<a.length;f++){var g=a[f],h=e(g,f);(d[h]||(d[h]=[])).push(g)}return d},b.toArray=function(a){return Array.prototype.slice.call(a)},b.without=function(a){var c=[];if(!a)return c;for(var d=-1,e=a.length,f=b.toArray(arguments).slice(1);++d<e;)b.indexOf(f,a[d])===-1&&c.push(a[d]);return c},b.extend=function(a,b){for(var c in b)a[c]=b[c];return a},b.repeat=function(a,b){for(var c="",d=0;d<b;d++)c+=a;return c},b.each=function(a,b,d){if(null!=a)if(c.each&&a.each===c.each)a.forEach(b,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++)b.call(d,a[e],e,a)},b.map=function(a,b){var d=[];if(null==a)return d;if(c.map&&a.map===c.map)return a.map(b);for(var e=0;e<a.length;e++)d[d.length]=b(a[e],e);return a.length===+a.length&&(d.length=a.length),d},b.asyncIter=function(a,b,c){function d(){e++,e<a.length?b(a[e],e,d,c):c()}var e=-1;d()},b.asyncFor=function(a,c,d){function e(){h++;var b=f[h];h<g?c(b,a[b],h,g,e):d()}var f=b.keys(a),g=f.length,h=-1;e()},b.indexOf=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){var d=this.length>>>0;for(c=+c||0,Math.abs(c)===1/0&&(c=0),c<0&&(c+=d,c<0&&(c=0));c<d;c++)if(a[c]===b)return c;return-1},Array.prototype.map||(Array.prototype.map=function(){throw new Error("map is unimplemented for this js engine")}),b.keys=function(a){if(Object.prototype.keys)return a.keys();var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},b.inOperator=function(a,c){if(b.isArray(c))return b.indexOf(c,a)!==-1;if(b.isObject(c))return a in c;if(b.isString(c))return c.indexOf(a)!==-1;throw new Error('Cannot use "in" operator to search for "'+a+'" in unexpected types.')}},function(a,b,c){"use strict";function d(a,b,c){g(function(){a(b,c)})}var e,f=c(3),g=c(4),h=c(1),i=c(6),j=c(7),k=c(13),l=c(14),m=c(12),n=c(17),o=c(18),p=m.Frame;l.PrecompiledLoader=c(16);var q=i.extend({init:function(a,b){b=this.opts=b||{},this.opts.dev=!!b.dev,this.opts.autoescape=null==b.autoescape||b.autoescape,this.opts.throwOnUndefined=!!b.throwOnUndefined,this.opts.trimBlocks=!!b.trimBlocks,this.opts.lstripBlocks=!!b.lstripBlocks,this.loaders=[],a?this.loaders=h.isArray(a)?a:[a]:l.FileSystemLoader?this.loaders=[new l.FileSystemLoader("views")]:l.WebLoader&&(this.loaders=[new l.WebLoader("/views")]),window.nunjucksPrecompiled&&this.loaders.unshift(new l.PrecompiledLoader(window.nunjucksPrecompiled)),this.initCache(),this.globals=n(),this.filters={},this.asyncFilters=[],this.extensions={},this.extensionsList=[];for(var c in k)this.addFilter(c,k[c])},initCache:function(){h.each(this.loaders,function(a){a.cache={},"function"==typeof a.on&&a.on("update",function(b){a.cache[b]=null})})},addExtension:function(a,b){return b._name=a,this.extensions[a]=b,this.extensionsList.push(b),this},removeExtension:function(a){var b=this.getExtension(a);b&&(this.extensionsList=h.without(this.extensionsList,b),delete this.extensions[a])},getExtension:function(a){return this.extensions[a]},hasExtension:function(a){return!!this.extensions[a]},addGlobal:function(a,b){return this.globals[a]=b,this},getGlobal:function(a){if("undefined"==typeof this.globals[a])throw new Error("global not found: "+a);return this.globals[a]},addFilter:function(a,b,c){var d=b;return c&&this.asyncFilters.push(a),this.filters[a]=d,this},getFilter:function(a){if(!this.filters[a])throw new Error("filter not found: "+a);return this.filters[a]},resolveTemplate:function(a,b,c){var d=!(!a.isRelative||!b)&&a.isRelative(c);return d&&a.resolve?a.resolve(b,c):c},getTemplate:function(a,b,c,d,f){var g=this,i=null;if(a&&a.raw&&(a=a.raw),h.isFunction(c)&&(f=c,c=null,b=b||!1),h.isFunction(b)&&(f=b,b=!1),a instanceof e)i=a;else{if("string"!=typeof a)throw new Error("template names must be a string: "+a);for(var j=0;j<this.loaders.length;j++){var k=this.resolveTemplate(this.loaders[j],c,a);if(i=this.loaders[j].cache[k])break}}if(!i){var l,m=this,n=function(c,g){if(g||c||d||(c=new Error("template not found: "+a)),c){if(!f)throw c;f(c)}else{var h;g?(h=new e(g.src,m,g.path,b),g.noCache||(g.loader.cache[a]=h)):h=new e("",m,"",b),f?f(null,h):l=h}};return h.asyncIter(this.loaders,function(b,d,e,f){function h(a,c){a?f(a):c?(c.loader=b,f(null,c)):e()}a=g.resolveTemplate(b,c,a),b.async?b.getSource(a,h):h(null,b.getSource(a))},n),l}return b&&i.compile(),f?void f(null,i):i},express:function(a){function b(a,b){if(this.name=a,this.path=a,this.defaultEngine=b.defaultEngine,this.ext=f.extname(a),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}var c=this;return b.prototype.render=function(a,b){c.render(this.name,a,b)},a.set("view",b),a.set("nunjucksEnv",this),this},render:function(a,b,c){h.isFunction(b)&&(c=b,b=null);var e=null;return this.getTemplate(a,function(a,f){if(a&&c)d(c,a);else{if(a)throw a;e=f.render(b,c)}}),e},renderString:function(a,b,c,d){h.isFunction(c)&&(d=c,c={}),c=c||{};var f=new e(a,this,c.path);return f.render(b,d)},waterfall:o}),r=i.extend({init:function(a,b,c){this.env=c||new q,this.ctx={};for(var d in a)a.hasOwnProperty(d)&&(this.ctx[d]=a[d]);this.blocks={},this.exported=[];for(var e in b)this.addBlock(e,b[e])},lookup:function(a){return a in this.env.globals&&!(a in this.ctx)?this.env.globals[a]:this.ctx[a]},setVariable:function(a,b){this.ctx[a]=b},getVariables:function(){return this.ctx},addBlock:function(a,b){return this.blocks[a]=this.blocks[a]||[],this.blocks[a].push(b),this},getBlock:function(a){if(!this.blocks[a])throw new Error('unknown block "'+a+'"');return this.blocks[a][0]},getSuper:function(a,b,c,d,e,f){var g=h.indexOf(this.blocks[b]||[],c),i=this.blocks[b][g+1],j=this;if(g===-1||!i)throw new Error('no super block available for "'+b+'"');i(a,j,d,e,f)},addExport:function(a){this.exported.push(a)},getExported:function(){for(var a={},b=0;b<this.exported.length;b++){var c=this.exported[b];a[c]=this.ctx[c]}return a}});e=i.extend({init:function(a,b,c,d){if(this.env=b||new q,h.isObject(a))switch(a.type){case"code":this.tmplProps=a.obj;break;case"string":this.tmplStr=a.obj}else{if(!h.isString(a))throw new Error("src must be a string or an object describing the source");this.tmplStr=a}if(this.path=c,d){var e=this;try{e._compile()}catch(a){throw h.prettifyError(this.path,this.env.opts.dev,a)}}else this.compiled=!1},render:function(a,b,c){"function"==typeof a?(c=a,a={}):"function"==typeof b&&(c=b,b=null);var e=!0;b&&(e=!1);var f=this;try{f.compile()}catch(a){var g=h.prettifyError(this.path,this.env.opts.dev,a);if(c)return d(c,g);throw g}var i=new r(a||{},f.blocks,f.env),j=b?b.push(!0):new p;j.topLevel=!0;var k=null;return f.rootRenderFunc(f.env,i,j||new p,m,function(a,b){if(a&&(a=h.prettifyError(f.path,f.env.opts.dev,a)),c)e?d(c,a,b):c(a,b);else{if(a)throw a;k=b}}),k},getExported:function(a,b,c){"function"==typeof a&&(c=a,a={}),"function"==typeof b&&(c=b,b=null);try{this.compile()}catch(a){if(c)return c(a);throw a}var d=b?b.push():new p;d.topLevel=!0;var e=new r(a||{},this.blocks,this.env);this.rootRenderFunc(this.env,e,d,m,function(a){a?c(a,null):c(null,e.getExported())})},compile:function(){this.compiled||this._compile()},_compile:function(){var a;if(this.tmplProps)a=this.tmplProps;else{var b=j.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts),c=new Function(b);a=c()}this.blocks=this._getBlocks(a),this.rootRenderFunc=a.root,this.compiled=!0},_getBlocks:function(a){var b={};for(var c in a)"b_"===c.slice(0,2)&&(b[c.slice(2)]=a[c]);return b}}),a.exports={Environment:q,Template:e}},function(a,b){},function(a,b,c){"use strict";function d(){if(i.length)throw i.shift()}function e(a){var b;b=h.length?h.pop():new f,b.task=a,g(b)}function f(){this.task=null}var g=c(5),h=[],i=[],j=g.makeRequestCallFromTimer(d);a.exports=e,f.prototype.call=function(){try{this.task.call()}catch(a){e.onerror?e.onerror(a):(i.push(a),j())}finally{this.task=null,h[h.length]=this}}},function(a,b){(function(b){"use strict";function c(a){h.length||(g(),i=!0),h[h.length]=a}function d(){for(;j<h.length;){var a=j;if(j+=1,h[a].call(),j>k){for(var b=0,c=h.length-j;b<c;b++)h[b]=h[b+j];h.length-=j,j=0}}h.length=0,j=0,i=!1}function e(a){var b=1,c=new l(a),d=document.createTextNode("");return c.observe(d,{characterData:!0}),function(){b=-b,d.data=b}}function f(a){return function(){function b(){clearTimeout(c),clearInterval(d),a()}var c=setTimeout(b,0),d=setInterval(b,50)}}a.exports=c;var g,h=[],i=!1,j=0,k=1024,l=b.MutationObserver||b.WebKitMutationObserver;g="function"==typeof l?e(d):f(d),c.requestFlush=g,c.makeRequestCallFromTimer=f}).call(b,function(){return this}())},function(a,b){"use strict";function c(a,b,d){var e=function(){};e.prototype=a.prototype;var f=new e,g=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/;d=d||{};for(var h in d){var i=d[h],j=f[h];"function"==typeof j&&"function"==typeof i&&g.test(i)?f[h]=function(a,b){return function(){var c=this.parent;this.parent=b;var d=a.apply(this,arguments);return this.parent=c,d}}(i,j):f[h]=i}f.typename=b;var k=function(){f.init&&f.init.apply(this,arguments)};return k.prototype=f,k.prototype.constructor=k,k.extend=function(a,b){return"object"==typeof a&&(b=a,a="anonymous"),c(k,a,b)},k}a.exports=c(Object,"Object",{})},function(a,b,c){"use strict";function d(a){return function(b,c){this.compile(b.left,c),this.emit(a),this.compile(b.right,c)}}var e=c(1),f=c(8),g=c(11),h=c(10),i=c(6),j=c(12).Frame,k={"==":"==","===":"===","!=":"!=","!==":"!==","<":"<",">":">","<=":"<=",">=":">="},l=i.extend({init:function(a,b){this.templateName=a,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this.scopeClosers="",this.inBlock=!1,this.throwOnUndefined=b},fail:function(a,b,c){throw void 0!==b&&(b+=1),void 0!==c&&(c+=1),new e.TemplateError(a,b,c)},pushBufferId:function(a){this.bufferStack.push(this.buffer),this.buffer=a,this.emit("var "+this.buffer+' = "";')},popBufferId:function(){this.buffer=this.bufferStack.pop()},emit:function(a){this.codebuf.push(a)},emitLine:function(a){this.emit(a+"\n")},emitLines:function(){e.each(e.toArray(arguments),function(a){this.emitLine(a)},this)},emitFuncBegin:function(a){this.buffer="output",this.scopeClosers="",this.emitLine("function "+a+"(env, context, frame, runtime, cb) {"),this.emitLine("var lineno = null;"),this.emitLine("var colno = null;"),this.emitLine("var "+this.buffer+' = "";'),this.emitLine("try {")},emitFuncEnd:function(a){a||this.emitLine("cb(null, "+this.buffer+");"),this.closeScopeLevels(),this.emitLine("} catch (e) {"),this.emitLine("  cb(runtime.handleError(e, lineno, colno));"),this.emitLine("}"),this.emitLine("}"),this.buffer=null},addScopeLevel:function(){this.scopeClosers+="})"},closeScopeLevels:function(){this.emitLine(this.scopeClosers+";"),this.scopeClosers=""},withScopedSyntax:function(a){var b=this.scopeClosers;this.scopeClosers="",a.call(this),this.closeScopeLevels(),this.scopeClosers=b},makeCallback:function(a){var b=this.tmpid();return"function("+b+(a?","+a:"")+") {\nif("+b+") { cb("+b+"); return; }"},tmpid:function(){return this.lastId++,"t_"+this.lastId},_templateName:function(){return null==this.templateName?"undefined":JSON.stringify(this.templateName)},_compileChildren:function(a,b){for(var c=a.children,d=0,e=c.length;d<e;d++)this.compile(c[d],b)},_compileAggregate:function(a,b,c,d){c&&this.emit(c);for(var e=0;e<a.children.length;e++)e>0&&this.emit(","),this.compile(a.children[e],b);d&&this.emit(d)},_compileExpression:function(a,b){this.assertType(a,h.Literal,h.Symbol,h.Group,h.Array,h.Dict,h.FunCall,h.Caller,h.Filter,h.LookupVal,h.Compare,h.InlineIf,h.In,h.And,h.Or,h.Not,h.Add,h.Concat,h.Sub,h.Mul,h.Div,h.FloorDiv,h.Mod,h.Pow,h.Neg,h.Pos,h.Compare,h.NodeList),this.compile(a,b)},assertType:function(a){for(var b=e.toArray(arguments).slice(1),c=!1,d=0;d<b.length;d++)a instanceof b[d]&&(c=!0);c||this.fail("assertType: invalid type: "+a.typename,a.lineno,a.colno)},compileCallExtension:function(a,b,c){var d=a.args,f=a.contentArgs,g="boolean"!=typeof a.autoescape||a.autoescape;if(c||this.emit(this.buffer+" += runtime.suppressValue("),this.emit('env.getExtension("'+a.extName+'")["'+a.prop+'"]('),this.emit("context"),(d||f)&&this.emit(","),d&&(d instanceof h.NodeList||this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"),e.each(d.children,function(a,c){this._compileExpression(a,b),(c!==d.children.length-1||f.length)&&this.emit(",")},this)),f.length&&e.each(f,function(a,c){if(c>0&&this.emit(","),a){var d=this.tmpid();this.emitLine("function(cb) {"),this.emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}"),this.pushBufferId(d),this.withScopedSyntax(function(){this.compile(a,b),this.emitLine("cb(null, "+d+");")}),this.popBufferId(),this.emitLine("return "+d+";"),this.emitLine("}")}else this.emit("null")},this),c){var i=this.tmpid();this.emitLine(", "+this.makeCallback(i)),this.emitLine(this.buffer+" += runtime.suppressValue("+i+", "+g+" && env.opts.autoescape);"),this.addScopeLevel()}else this.emit(")"),this.emit(", "+g+" && env.opts.autoescape);\n")},compileCallExtensionAsync:function(a,b){this.compileCallExtension(a,b,!0)},compileNodeList:function(a,b){this._compileChildren(a,b)},compileLiteral:function(a){if("string"==typeof a.value){var b=a.value.replace(/\\/g,"\\\\");b=b.replace(/"/g,'\\"'),b=b.replace(/\n/g,"\\n"),b=b.replace(/\r/g,"\\r"),b=b.replace(/\t/g,"\\t"),this.emit('"'+b+'"')}else null===a.value?this.emit("null"):this.emit(a.value.toString())},compileSymbol:function(a,b){var c,d=a.value;(c=b.lookup(d))?this.emit(c):this.emit('runtime.contextOrFrameLookup(context, frame, "'+d+'")')},compileGroup:function(a,b){this._compileAggregate(a,b,"(",")")},compileArray:function(a,b){this._compileAggregate(a,b,"[","]")},compileDict:function(a,b){this._compileAggregate(a,b,"{","}")},compilePair:function(a,b){var c=a.key,d=a.value;c instanceof h.Symbol?c=new h.Literal(c.lineno,c.colno,c.value):c instanceof h.Literal&&"string"==typeof c.value||this.fail("compilePair: Dict keys must be strings or names",c.lineno,c.colno),this.compile(c,b),this.emit(": "),this._compileExpression(d,b)},compileInlineIf:function(a,b){this.emit("("),this.compile(a.cond,b),this.emit("?"),this.compile(a.body,b),this.emit(":"),null!==a.else_?this.compile(a.else_,b):this.emit('""'),this.emit(")")},compileIn:function(a,b){this.emit("runtime.inOperator("),this.compile(a.left,b),this.emit(","),this.compile(a.right,b),this.emit(")")},compileOr:d(" || "),compileAnd:d(" && "),compileAdd:d(" + "),compileConcat:d(' + "" + '),compileSub:d(" - "),compileMul:d(" * "),compileDiv:d(" / "),compileMod:d(" % "),compileNot:function(a,b){this.emit("!"),this.compile(a.target,b)},compileFloorDiv:function(a,b){this.emit("Math.floor("),this.compile(a.left,b),this.emit(" / "),this.compile(a.right,b),this.emit(")")},compilePow:function(a,b){this.emit("Math.pow("),this.compile(a.left,b),this.emit(", "),this.compile(a.right,b),this.emit(")")},compileNeg:function(a,b){this.emit("-"),this.compile(a.target,b)},compilePos:function(a,b){this.emit("+"),this.compile(a.target,b)},compileCompare:function(a,b){this.compile(a.expr,b);for(var c=0;c<a.ops.length;c++){var d=a.ops[c];this.emit(" "+k[d.type]+" "),this.compile(d.expr,b)}},compileLookupVal:function(a,b){this.emit("runtime.memberLookup(("),this._compileExpression(a.target,b),this.emit("),"),this._compileExpression(a.val,b),this.emit(")")},_getNodeName:function(a){switch(a.typename){case"Symbol":return a.value;case"FunCall":return"the return value of ("+this._getNodeName(a.name)+")";case"LookupVal":return this._getNodeName(a.target)+'["'+this._getNodeName(a.val)+'"]';case"Literal":return a.value.toString();default:return"--expression--"}},compileFunCall:function(a,b){this.emit("(lineno = "+a.lineno+", colno = "+a.colno+", "),this.emit("runtime.callWrap("),this._compileExpression(a.name,b),this.emit(', "'+this._getNodeName(a.name).replace(/"/g,'\\"')+'", context, '),this._compileAggregate(a.args,b,"[","])"),this.emit(")")},compileFilter:function(a,b){var c=a.name;this.assertType(c,h.Symbol),this.emit('env.getFilter("'+c.value+'").call(context, '),this._compileAggregate(a.args,b),this.emit(")")},compileFilterAsync:function(a,b){var c=a.name;this.assertType(c,h.Symbol);var d=a.symbol.value;b.set(d,d),this.emit('env.getFilter("'+c.value+'").call(context, '),this._compileAggregate(a.args,b),this.emitLine(", "+this.makeCallback(d)),this.addScopeLevel()},compileKeywordArgs:function(a,b){var c=[];e.each(a.children,function(a){c.push(a.key.value)}),this.emit("runtime.makeKeywordArgs("),this.compileDict(a,b),this.emit(")")},compileSet:function(a,b){var c=[];e.each(a.targets,function(a){var d=a.value,e=b.lookup(d);null!==e&&void 0!==e||(e=this.tmpid(),this.emitLine("var "+e+";")),c.push(e)},this),a.value?(this.emit(c.join(" = ")+" = "),this._compileExpression(a.value,b),this.emitLine(";")):(this.emit(c.join(" = ")+" = "),this.compile(a.body,b),this.emitLine(";")),e.each(a.targets,function(a,b){var d=c[b],e=a.value;this.emitLine('frame.set("'+e+'", '+d+", true);"),this.emitLine("if(frame.topLevel) {"),this.emitLine('context.setVariable("'+e+'", '+d+");"),this.emitLine("}"),"_"!==e.charAt(0)&&(this.emitLine("if(frame.topLevel) {"),this.emitLine('context.addExport("'+e+'", '+d+");"),this.emitLine("}"))},this)},compileIf:function(a,b,c){this.emit("if("),this._compileExpression(a.cond,b),this.emitLine(") {"),this.withScopedSyntax(function(){this.compile(a.body,b),c&&this.emit("cb()")}),a.else_?(this.emitLine("}\nelse {"),this.withScopedSyntax(function(){this.compile(a.else_,b),c&&this.emit("cb()")})):c&&(this.emitLine("}\nelse {"),this.emit("cb()")),this.emitLine("}")},compileIfAsync:function(a,b){this.emit("(function(cb) {"),this.compileIf(a,b,!0),this.emit("})("+this.makeCallback()),this.addScopeLevel()},emitLoopBindings:function(a,b,c,d){var e={index:c+" + 1",index0:c,revindex:d+" - "+c,revindex0:d+" - "+c+" - 1",first:c+" === 0",last:c+" === "+d+" - 1",length:d};for(var f in e)this.emitLine('frame.set("loop.'+f+'", '+e[f]+");")},compileFor:function(a,b){var c,d=this.tmpid(),e=this.tmpid(),f=this.tmpid();if(b=b.push(),this.emitLine("frame = frame.push();"),this.emit("var "+f+" = "),this._compileExpression(a.arr,b),this.emitLine(";"),this.emit("if("+f+") {"),a.name instanceof h.Array){this.emitLine("var "+d+";"),this.emitLine("if(runtime.isArray("+f+")) {"),this.emitLine("var "+e+" = "+f+".length;"),this.emitLine("for("+d+"=0; "+d+" < "+f+".length; "+d+"++) {");for(var g=0;g<a.name.children.length;g++){var i=this.tmpid();this.emitLine("var "+i+" = "+f+"["+d+"]["+g+"]"),this.emitLine('frame.set("'+a.name.children[g].value+'", '+f+"["+d+"]["+g+"]);"),b.set(a.name.children[g].value,i)}this.emitLoopBindings(a,f,d,e),this.withScopedSyntax(function(){this.compile(a.body,b)}),this.emitLine("}"),this.emitLine("} else {");var j=a.name.children[0],k=a.name.children[1],l=this.tmpid();c=this.tmpid(),b.set(j.value,l),b.set(k.value,c),this.emitLine(d+" = -1;"),this.emitLine("var "+e+" = runtime.keys("+f+").length;"),this.emitLine("for(var "+l+" in "+f+") {"),this.emitLine(d+"++;"),this.emitLine("var "+c+" = "+f+"["+l+"];"),this.emitLine('frame.set("'+j.value+'", '+l+");"),this.emitLine('frame.set("'+k.value+'", '+c+");"),this.emitLoopBindings(a,f,d,e),this.withScopedSyntax(function(){this.compile(a.body,b)}),this.emitLine("}"),this.emitLine("}")}else c=this.tmpid(),b.set(a.name.value,c),this.emitLine("var "+e+" = "+f+".length;"),this.emitLine("for(var "+d+"=0; "+d+" < "+f+".length; "+d+"++) {"),this.emitLine("var "+c+" = "+f+"["+d+"];"),this.emitLine('frame.set("'+a.name.value+'", '+c+");"),this.emitLoopBindings(a,f,d,e),this.withScopedSyntax(function(){this.compile(a.body,b)}),this.emitLine("}");this.emitLine("}"),a.else_&&(this.emitLine("if (!"+e+") {"),this.compile(a.else_,b),this.emitLine("}")),this.emitLine("frame = frame.pop();")},_compileAsyncLoop:function(a,b,c){var d=this.tmpid(),f=this.tmpid(),g=this.tmpid(),i=c?"asyncAll":"asyncEach";if(b=b.push(),this.emitLine("frame = frame.push();"),this.emit("var "+g+" = "),this._compileExpression(a.arr,b),this.emitLine(";"),a.name instanceof h.Array)this.emit("runtime."+i+"("+g+", "+a.name.children.length+", function("),e.each(a.name.children,function(a){this.emit(a.value+",")},this),this.emit(d+","+f+",next) {"),e.each(a.name.children,function(a){var c=a.value;b.set(c,c),this.emitLine('frame.set("'+c+'", '+c+");")},this);else{var j=a.name.value;this.emitLine("runtime."+i+"("+g+", 1, function("+j+", "+d+", "+f+",next) {"),this.emitLine('frame.set("'+j+'", '+j+");"),b.set(j,j)}this.emitLoopBindings(a,g,d,f),this.withScopedSyntax(function(){var e;c&&(e=this.tmpid(),this.pushBufferId(e)),this.compile(a.body,b),this.emitLine("next("+d+(e?","+e:"")+");"),c&&this.popBufferId()});var k=this.tmpid();this.emitLine("}, "+this.makeCallback(k)),this.addScopeLevel(),c&&this.emitLine(this.buffer+" += "+k+";"),a.else_&&(this.emitLine("if (!"+g+".length) {"),this.compile(a.else_,b),this.emitLine("}")),this.emitLine("frame = frame.pop();")},compileAsyncEach:function(a,b){this._compileAsyncLoop(a,b)},compileAsyncAll:function(a,b){this._compileAsyncLoop(a,b,!0)},_compileMacro:function(a){var b=[],c=null,d="macro_"+this.tmpid();e.each(a.args.children,function(d,e){e===a.args.children.length-1&&d instanceof h.Dict?c=d:(this.assertType(d,h.Symbol),b.push(d))},this);var f=e.map(b,function(a){return"l_"+a.value});f.push("kwargs");var g=e.map(b,function(a){return'"'+a.value+'"'}),i=e.map(c&&c.children||[],function(a){return'"'+a.key.value+'"'}),k=new j;this.emitLines("var "+d+" = runtime.makeMacro(","["+g.join(", ")+"], ","["+i.join(", ")+"], ","function ("+f.join(", ")+") {","var callerFrame = frame;","frame = new runtime.Frame();","kwargs = kwargs || {};",'if (kwargs.hasOwnProperty("caller")) {','frame.set("caller", kwargs.caller); }'),e.each(b,function(a){this.emitLine('frame.set("'+a.value+'", l_'+a.value+");"),k.set(a.value,"l_"+a.value)},this),c&&e.each(c.children,function(a){var b=a.key.value;this.emit('frame.set("'+b+'", kwargs.hasOwnProperty("'+b+'") ? kwargs["'+b+'"] : '),this._compileExpression(a.value,k),this.emitLine(");")},this);var l=this.tmpid();return this.pushBufferId(l),this.withScopedSyntax(function(){this.compile(a.body,k)}),this.emitLine("frame = callerFrame;"),this.emitLine("return new runtime.SafeString("+l+");"),this.emitLine("});"),this.popBufferId(),d},compileMacro:function(a,b){var c=this._compileMacro(a,b),d=a.name.value;b.set(d,c),b.parent?this.emitLine('frame.set("'+d+'", '+c+");"):("_"!==a.name.value.charAt(0)&&this.emitLine('context.addExport("'+d+'");'),this.emitLine('context.setVariable("'+d+'", '+c+");"))},compileCaller:function(a,b){this.emit("(function (){");var c=this._compileMacro(a,b);this.emit("return "+c+";})()")},compileImport:function(a,b){var c=this.tmpid(),d=a.target.value;this.emit("env.getTemplate("),this._compileExpression(a.template,b),this.emitLine(", false, "+this._templateName()+", false, "+this.makeCallback(c)),this.addScopeLevel(),this.emitLine(c+".getExported("+(a.withContext?"context.getVariables(), frame, ":"")+this.makeCallback(c)),this.addScopeLevel(),b.set(d,c),b.parent?this.emitLine('frame.set("'+d+'", '+c+");"):this.emitLine('context.setVariable("'+d+'", '+c+");")},compileFromImport:function(a,b){var c=this.tmpid();this.emit("env.getTemplate("),this._compileExpression(a.template,b),this.emitLine(", false, "+this._templateName()+", false, "+this.makeCallback(c)),this.addScopeLevel(),this.emitLine(c+".getExported("+(a.withContext?"context.getVariables(), frame, ":"")+this.makeCallback(c)),this.addScopeLevel(),e.each(a.names.children,function(a){var d,e,f=this.tmpid();a instanceof h.Pair?(d=a.key.value,e=a.value.value):(d=a.value,e=d),this.emitLine("if("+c+'.hasOwnProperty("'+d+'")) {'),this.emitLine("var "+f+" = "+c+"."+d+";"),this.emitLine("} else {"),this.emitLine("cb(new Error(\"cannot import '"+d+"'\")); return;"),this.emitLine("}"),b.set(e,f),b.parent?this.emitLine('frame.set("'+e+'", '+f+");"):this.emitLine('context.setVariable("'+e+'", '+f+");")},this)},compileBlock:function(a){var b=this.tmpid();this.inBlock||this.emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '),this.emit('context.getBlock("'+a.name.value+'")'),this.inBlock||this.emit(")"),this.emitLine("(env, context, frame, runtime, "+this.makeCallback(b)),this.emitLine(this.buffer+" += "+b+";"),this.addScopeLevel()},compileSuper:function(a,b){var c=a.blockName.value,d=a.symbol.value;this.emitLine('context.getSuper(env, "'+c+'", b_'+c+", frame, runtime, "+this.makeCallback(d)),this.emitLine(d+" = runtime.markSafe("+d+");"),this.addScopeLevel(),b.set(d,d)},compileExtends:function(a,b){var c=this.tmpid();this.emit("env.getTemplate("),this._compileExpression(a.template,b),this.emitLine(", true, "+this._templateName()+", false, "+this.makeCallback("_parentTemplate")),this.emitLine("parentTemplate = _parentTemplate"),this.emitLine("for(var "+c+" in parentTemplate.blocks) {"),this.emitLine("context.addBlock("+c+", parentTemplate.blocks["+c+"]);"),this.emitLine("}"),this.addScopeLevel()},compileInclude:function(a,b){var c=this.tmpid(),d=this.tmpid();this.emitLine("var tasks = [];"),this.emitLine("tasks.push("),this.emitLine("function(callback) {"),this.emit("env.getTemplate("),this._compileExpression(a.template,b),this.emitLine(", false, "+this._templateName()+", "+a.ignoreMissing+", "+this.makeCallback(c)),this.emitLine("callback(null,"+c+");});"),this.emitLine("});"),this.emitLine("tasks.push("),this.emitLine("function(template, callback){"),this.emitLine("template.render(context.getVariables(), frame, "+this.makeCallback(d)),this.emitLine("callback(null,"+d+");});"),this.emitLine("});"),this.emitLine("tasks.push("),this.emitLine("function(result, callback){"),this.emitLine(this.buffer+" += result;"),this.emitLine("callback(null);"),this.emitLine("});"),this.emitLine("env.waterfall(tasks, function(){"),this.addScopeLevel()},compileTemplateData:function(a,b){this.compileLiteral(a,b)},compileCapture:function(a,b){this.emitLine("(function() {"),this.emitLine('var output = "";'),this.withScopedSyntax(function(){this.compile(a.body,b)}),this.emitLine("return output;"),this.emitLine("})()")},compileOutput:function(a,b){for(var c=a.children,d=0,e=c.length;d<e;d++)c[d]instanceof h.TemplateData?c[d].value&&(this.emit(this.buffer+" += "),this.compileLiteral(c[d],b),this.emitLine(";")):(this.emit(this.buffer+" += runtime.suppressValue("),this.throwOnUndefined&&this.emit("runtime.ensureDefined("),this.compile(c[d],b),this.throwOnUndefined&&this.emit(","+a.lineno+","+a.colno+")"),this.emit(", env.opts.autoescape);\n"))},compileRoot:function(a,b){b&&this.fail("compileRoot: root node can't have frame"),b=new j,this.emitFuncBegin("root"),this.emitLine("var parentTemplate = null;"),this._compileChildren(a,b),this.emitLine("if(parentTemplate) {"),this.emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"),this.emitLine("} else {"),this.emitLine("cb(null, "+this.buffer+");"),this.emitLine("}"),this.emitFuncEnd(!0),this.inBlock=!0;var c,d,e,f=[],g=a.findAll(h.Block);for(c=0;c<g.length;c++){if(e=g[c],d=e.name.value,f.indexOf(d)!==-1)throw new Error('Block "'+d+'" defined more than once.');f.push(d),this.emitFuncBegin("b_"+d);var i=new j;this.emitLine("var frame = frame.push(true);"),this.compile(e.body,i),this.emitFuncEnd()}for(this.emitLine("return {"),c=0;c<g.length;c++)e=g[c],d="b_"+e.name.value,this.emitLine(d+": "+d+",");this.emitLine("root: root\n};")},compile:function(a,b){var c=this["compile"+a.typename];c?c.call(this,a,b):this.fail("compile: Cannot compile node: "+a.typename,a.lineno,a.colno)},getCode:function(){return this.codebuf.join("")}});a.exports={compile:function(a,b,c,d,e){var h=new l(d,e.throwOnUndefined);if(c&&c.length)for(var i=0;i<c.length;i++)"preprocess"in c[i]&&(a=c[i].preprocess(a,d));return h.compile(g.transform(f.parse(a,c,e),b,d)),h.getCode()},Compiler:l}},function(a,b,c){"use strict";var d=c(9),e=c(10),f=c(6),g=c(1),h=f.extend({init:function(a){this.tokens=a,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},nextToken:function(a){var b;if(this.peeked){if(a||this.peeked.type!==d.TOKEN_WHITESPACE)return b=this.peeked,this.peeked=null,b;this.peeked=null}if(b=this.tokens.nextToken(),!a)for(;b&&b.type===d.TOKEN_WHITESPACE;)b=this.tokens.nextToken();return b},peekToken:function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},pushToken:function(a){if(this.peeked)throw new Error("pushToken: can only push one token on between reads");this.peeked=a},fail:function(a,b,c){if((void 0===b||void 0===c)&&this.peekToken()){var d=this.peekToken();b=d.lineno,c=d.colno}throw void 0!==b&&(b+=1),void 0!==c&&(c+=1),new g.TemplateError(a,b,c);
},skip:function(a){var b=this.nextToken();return!(!b||b.type!==a)||(this.pushToken(b),!1)},expect:function(a){var b=this.nextToken();return b.type!==a&&this.fail("expected "+a+", got "+b.type,b.lineno,b.colno),b},skipValue:function(a,b){var c=this.nextToken();return!(!c||c.type!==a||c.value!==b)||(this.pushToken(c),!1)},skipSymbol:function(a){return this.skipValue(d.TOKEN_SYMBOL,a)},advanceAfterBlockEnd:function(a){var b;return a||(b=this.peekToken(),b||this.fail("unexpected end of file"),b.type!==d.TOKEN_SYMBOL&&this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"),a=this.nextToken().value),b=this.nextToken(),b&&b.type===d.TOKEN_BLOCK_END?"-"===b.value.charAt(0)&&(this.dropLeadingWhitespace=!0):this.fail("expected block end in "+a+" statement"),b},advanceAfterVariableEnd:function(){var a=this.nextToken();a&&a.type===d.TOKEN_VARIABLE_END?this.dropLeadingWhitespace="-"===a.value.charAt(a.value.length-this.tokens.tags.VARIABLE_END.length-1):(this.pushToken(a),this.fail("expected variable end"))},parseFor:function(){var a,b,c=this.peekToken();this.skipSymbol("for")?(a=new e.For(c.lineno,c.colno),b="endfor"):this.skipSymbol("asyncEach")?(a=new e.AsyncEach(c.lineno,c.colno),b="endeach"):this.skipSymbol("asyncAll")?(a=new e.AsyncAll(c.lineno,c.colno),b="endall"):this.fail("parseFor: expected for{Async}",c.lineno,c.colno),a.name=this.parsePrimary(),a.name instanceof e.Symbol||this.fail("parseFor: variable name expected for loop");var f=this.peekToken().type;if(f===d.TOKEN_COMMA){var g=a.name;for(a.name=new e.Array(g.lineno,g.colno),a.name.addChild(g);this.skip(d.TOKEN_COMMA);){var h=this.parsePrimary();a.name.addChild(h)}}return this.skipSymbol("in")||this.fail('parseFor: expected "in" keyword for loop',c.lineno,c.colno),a.arr=this.parseExpression(),this.advanceAfterBlockEnd(c.value),a.body=this.parseUntilBlocks(b,"else"),this.skipSymbol("else")&&(this.advanceAfterBlockEnd("else"),a.else_=this.parseUntilBlocks(b)),this.advanceAfterBlockEnd(),a},parseMacro:function(){var a=this.peekToken();this.skipSymbol("macro")||this.fail("expected macro");var b=this.parsePrimary(!0),c=this.parseSignature(),d=new e.Macro(a.lineno,a.colno,b,c);return this.advanceAfterBlockEnd(a.value),d.body=this.parseUntilBlocks("endmacro"),this.advanceAfterBlockEnd(),d},parseCall:function(){var a=this.peekToken();this.skipSymbol("call")||this.fail("expected call");var b=this.parseSignature(!0)||new e.NodeList,c=this.parsePrimary();this.advanceAfterBlockEnd(a.value);var d=this.parseUntilBlocks("endcall");this.advanceAfterBlockEnd();var f=new e.Symbol(a.lineno,a.colno,"caller"),g=new e.Caller(a.lineno,a.colno,f,b,d),h=c.args.children;h[h.length-1]instanceof e.KeywordArgs||h.push(new e.KeywordArgs);var i=h[h.length-1];return i.addChild(new e.Pair(a.lineno,a.colno,f,g)),new e.Output(a.lineno,a.colno,[c])},parseWithContext:function(){var a=this.peekToken(),b=null;return this.skipSymbol("with")?b=!0:this.skipSymbol("without")&&(b=!1),null!==b&&(this.skipSymbol("context")||this.fail("parseFrom: expected context after with/without",a.lineno,a.colno)),b},parseImport:function(){var a=this.peekToken();this.skipSymbol("import")||this.fail("parseImport: expected import",a.lineno,a.colno);var b=this.parseExpression();this.skipSymbol("as")||this.fail('parseImport: expected "as" keyword',a.lineno,a.colno);var c=this.parseExpression(),d=this.parseWithContext(),f=new e.Import(a.lineno,a.colno,b,c,d);return this.advanceAfterBlockEnd(a.value),f},parseFrom:function(){var a=this.peekToken();this.skipSymbol("from")||this.fail("parseFrom: expected from");var b=this.parseExpression();this.skipSymbol("import")||this.fail("parseFrom: expected import",a.lineno,a.colno);for(var c,f=new e.NodeList;;){var g=this.peekToken();if(g.type===d.TOKEN_BLOCK_END){f.children.length||this.fail("parseFrom: Expected at least one import name",a.lineno,a.colno),"-"===g.value.charAt(0)&&(this.dropLeadingWhitespace=!0),this.nextToken();break}f.children.length>0&&!this.skip(d.TOKEN_COMMA)&&this.fail("parseFrom: expected comma",a.lineno,a.colno);var h=this.parsePrimary();if("_"===h.value.charAt(0)&&this.fail("parseFrom: names starting with an underscore cannot be imported",h.lineno,h.colno),this.skipSymbol("as")){var i=this.parsePrimary();f.addChild(new e.Pair(h.lineno,h.colno,h,i))}else f.addChild(h);c=this.parseWithContext()}return new e.FromImport(a.lineno,a.colno,b,f,c)},parseBlock:function(){var a=this.peekToken();this.skipSymbol("block")||this.fail("parseBlock: expected block",a.lineno,a.colno);var b=new e.Block(a.lineno,a.colno);b.name=this.parsePrimary(),b.name instanceof e.Symbol||this.fail("parseBlock: variable name expected",a.lineno,a.colno),this.advanceAfterBlockEnd(a.value),b.body=this.parseUntilBlocks("endblock"),this.skipSymbol("endblock"),this.skipSymbol(b.name.value);var c=this.peekToken();return c||this.fail("parseBlock: expected endblock, got end of file"),this.advanceAfterBlockEnd(c.value),b},parseExtends:function(){var a="extends",b=this.peekToken();this.skipSymbol(a)||this.fail("parseTemplateRef: expected "+a);var c=new e.Extends(b.lineno,b.colno);return c.template=this.parseExpression(),this.advanceAfterBlockEnd(b.value),c},parseInclude:function(){var a="include",b=this.peekToken();this.skipSymbol(a)||this.fail("parseInclude: expected "+a);var c=new e.Include(b.lineno,b.colno);return c.template=this.parseExpression(),this.skipSymbol("ignore")&&this.skipSymbol("missing")&&(c.ignoreMissing=!0),this.advanceAfterBlockEnd(b.value),c},parseIf:function(){var a,b=this.peekToken();this.skipSymbol("if")||this.skipSymbol("elif")||this.skipSymbol("elseif")?a=new e.If(b.lineno,b.colno):this.skipSymbol("ifAsync")?a=new e.IfAsync(b.lineno,b.colno):this.fail("parseIf: expected if, elif, or elseif",b.lineno,b.colno),a.cond=this.parseExpression(),this.advanceAfterBlockEnd(b.value),a.body=this.parseUntilBlocks("elif","elseif","else","endif");var c=this.peekToken();switch(c&&c.value){case"elseif":case"elif":a.else_=this.parseIf();break;case"else":this.advanceAfterBlockEnd(),a.else_=this.parseUntilBlocks("endif"),this.advanceAfterBlockEnd();break;case"endif":a.else_=null,this.advanceAfterBlockEnd();break;default:this.fail("parseIf: expected elif, else, or endif, got end of file")}return a},parseSet:function(){var a=this.peekToken();this.skipSymbol("set")||this.fail("parseSet: expected set",a.lineno,a.colno);for(var b,c=new e.Set(a.lineno,a.colno,[]);(b=this.parsePrimary())&&(c.targets.push(b),this.skip(d.TOKEN_COMMA)););return this.skipValue(d.TOKEN_OPERATOR,"=")?(c.value=this.parseExpression(),this.advanceAfterBlockEnd(a.value)):this.skip(d.TOKEN_BLOCK_END)?(c.body=new e.Capture(a.lineno,a.colno,this.parseUntilBlocks("endset")),c.value=null,this.advanceAfterBlockEnd()):this.fail("parseSet: expected = or block end in set tag",a.lineno,a.colno),c},parseStatement:function(){var a,b=this.peekToken();if(b.type!==d.TOKEN_SYMBOL&&this.fail("tag name expected",b.lineno,b.colno),this.breakOnBlocks&&g.indexOf(this.breakOnBlocks,b.value)!==-1)return null;switch(b.value){case"raw":return this.parseRaw();case"verbatim":return this.parseRaw("verbatim");case"if":case"ifAsync":return this.parseIf();case"for":case"asyncEach":case"asyncAll":return this.parseFor();case"block":return this.parseBlock();case"extends":return this.parseExtends();case"include":return this.parseInclude();case"set":return this.parseSet();case"macro":return this.parseMacro();case"call":return this.parseCall();case"import":return this.parseImport();case"from":return this.parseFrom();case"filter":return this.parseFilterStatement();default:if(this.extensions.length)for(var c=0;c<this.extensions.length;c++){var f=this.extensions[c];if(g.indexOf(f.tags||[],b.value)!==-1)return f.parse(this,e,d)}this.fail("unknown block tag: "+b.value,b.lineno,b.colno)}return a},parseRaw:function(a){a=a||"raw";for(var b="end"+a,c=new RegExp("([\\s\\S]*?){%\\s*("+a+"|"+b+")\\s*(?=%})%}"),d=1,f="",g=null,h=this.advanceAfterBlockEnd();(g=this.tokens._extractRegex(c))&&d>0;){var i=g[0],j=g[1],k=g[2];k===a?d+=1:k===b&&(d-=1),0===d?(f+=j,this.tokens.backN(i.length-j.length)):f+=i}return new e.Output(h.lineno,h.colno,[new e.TemplateData(h.lineno,h.colno,f)])},parsePostfix:function(a){for(var b,c=this.peekToken();c;){if(c.type===d.TOKEN_LEFT_PAREN)a=new e.FunCall(c.lineno,c.colno,a,this.parseSignature());else if(c.type===d.TOKEN_LEFT_BRACKET)b=this.parseAggregate(),b.children.length>1&&this.fail("invalid index"),a=new e.LookupVal(c.lineno,c.colno,a,b.children[0]);else{if(c.type!==d.TOKEN_OPERATOR||"."!==c.value)break;this.nextToken();var f=this.nextToken();f.type!==d.TOKEN_SYMBOL&&this.fail("expected name as lookup value, got "+f.value,f.lineno,f.colno),b=new e.Literal(f.lineno,f.colno,f.value),a=new e.LookupVal(c.lineno,c.colno,a,b)}c=this.peekToken()}return a},parseExpression:function(){var a=this.parseInlineIf();return a},parseInlineIf:function(){var a=this.parseOr();if(this.skipSymbol("if")){var b=this.parseOr(),c=a;a=new e.InlineIf(a.lineno,a.colno),a.body=c,a.cond=b,this.skipSymbol("else")?a.else_=this.parseOr():a.else_=null}return a},parseOr:function(){for(var a=this.parseAnd();this.skipSymbol("or");){var b=this.parseAnd();a=new e.Or(a.lineno,a.colno,a,b)}return a},parseAnd:function(){for(var a=this.parseNot();this.skipSymbol("and");){var b=this.parseNot();a=new e.And(a.lineno,a.colno,a,b)}return a},parseNot:function(){var a=this.peekToken();return this.skipSymbol("not")?new e.Not(a.lineno,a.colno,this.parseNot()):this.parseIn()},parseIn:function(){for(var a=this.parseCompare();;){var b=this.nextToken();if(!b)break;var c=b.type===d.TOKEN_SYMBOL&&"not"===b.value;if(c||this.pushToken(b),!this.skipSymbol("in")){c&&this.pushToken(b);break}var f=this.parseCompare();a=new e.In(a.lineno,a.colno,a,f),c&&(a=new e.Not(a.lineno,a.colno,a))}return a},parseCompare:function(){for(var a=["==","===","!=","!==","<",">","<=",">="],b=this.parseConcat(),c=[];;){var d=this.nextToken();if(!d)break;if(g.indexOf(a,d.value)===-1){this.pushToken(d);break}c.push(new e.CompareOperand(d.lineno,d.colno,this.parseConcat(),d.value))}return c.length?new e.Compare(c[0].lineno,c[0].colno,b,c):b},parseConcat:function(){for(var a=this.parseAdd();this.skipValue(d.TOKEN_TILDE,"~");){var b=this.parseAdd();a=new e.Concat(a.lineno,a.colno,a,b)}return a},parseAdd:function(){for(var a=this.parseSub();this.skipValue(d.TOKEN_OPERATOR,"+");){var b=this.parseSub();a=new e.Add(a.lineno,a.colno,a,b)}return a},parseSub:function(){for(var a=this.parseMul();this.skipValue(d.TOKEN_OPERATOR,"-");){var b=this.parseMul();a=new e.Sub(a.lineno,a.colno,a,b)}return a},parseMul:function(){for(var a=this.parseDiv();this.skipValue(d.TOKEN_OPERATOR,"*");){var b=this.parseDiv();a=new e.Mul(a.lineno,a.colno,a,b)}return a},parseDiv:function(){for(var a=this.parseFloorDiv();this.skipValue(d.TOKEN_OPERATOR,"/");){var b=this.parseFloorDiv();a=new e.Div(a.lineno,a.colno,a,b)}return a},parseFloorDiv:function(){for(var a=this.parseMod();this.skipValue(d.TOKEN_OPERATOR,"//");){var b=this.parseMod();a=new e.FloorDiv(a.lineno,a.colno,a,b)}return a},parseMod:function(){for(var a=this.parsePow();this.skipValue(d.TOKEN_OPERATOR,"%");){var b=this.parsePow();a=new e.Mod(a.lineno,a.colno,a,b)}return a},parsePow:function(){for(var a=this.parseUnary();this.skipValue(d.TOKEN_OPERATOR,"**");){var b=this.parseUnary();a=new e.Pow(a.lineno,a.colno,a,b)}return a},parseUnary:function(a){var b,c=this.peekToken();return b=this.skipValue(d.TOKEN_OPERATOR,"-")?new e.Neg(c.lineno,c.colno,this.parseUnary(!0)):this.skipValue(d.TOKEN_OPERATOR,"+")?new e.Pos(c.lineno,c.colno,this.parseUnary(!0)):this.parsePrimary(),a||(b=this.parseFilter(b)),b},parsePrimary:function(a){var b,c=this.nextToken(),f=null;return c?c.type===d.TOKEN_STRING?b=c.value:c.type===d.TOKEN_INT?b=parseInt(c.value,10):c.type===d.TOKEN_FLOAT?b=parseFloat(c.value):c.type===d.TOKEN_BOOLEAN?"true"===c.value?b=!0:"false"===c.value?b=!1:this.fail("invalid boolean: "+c.value,c.lineno,c.colno):c.type===d.TOKEN_NONE?b=null:c.type===d.TOKEN_REGEX&&(b=new RegExp(c.value.body,c.value.flags)):this.fail("expected expression, got end of file"),void 0!==b?f=new e.Literal(c.lineno,c.colno,b):c.type===d.TOKEN_SYMBOL?(f=new e.Symbol(c.lineno,c.colno,c.value),a||(f=this.parsePostfix(f))):(this.pushToken(c),f=this.parseAggregate()),f?f:void this.fail("unexpected token: "+c.value,c.lineno,c.colno)},parseFilterName:function(){for(var a=this.expect(d.TOKEN_SYMBOL),b=a.value;this.skipValue(d.TOKEN_OPERATOR,".");)b+="."+this.expect(d.TOKEN_SYMBOL).value;return new e.Symbol(a.lineno,a.colno,b)},parseFilterArgs:function(a){if(this.peekToken().type===d.TOKEN_LEFT_PAREN){var b=this.parsePostfix(a);return b.args.children}return[]},parseFilter:function(a){for(;this.skip(d.TOKEN_PIPE);){var b=this.parseFilterName();a=new e.Filter(b.lineno,b.colno,b,new e.NodeList(b.lineno,b.colno,[a].concat(this.parseFilterArgs(a))))}return a},parseFilterStatement:function(){var a=this.peekToken();this.skipSymbol("filter")||this.fail("parseFilterStatement: expected filter");var b=this.parseFilterName(),c=this.parseFilterArgs(b);this.advanceAfterBlockEnd(a.value);var d=new e.Capture(b.lineno,b.colno,this.parseUntilBlocks("endfilter"));this.advanceAfterBlockEnd();var f=new e.Filter(b.lineno,b.colno,b,new e.NodeList(b.lineno,b.colno,[d].concat(c)));return new e.Output(b.lineno,b.colno,[f])},parseAggregate:function(){var a,b=this.nextToken();switch(b.type){case d.TOKEN_LEFT_PAREN:a=new e.Group(b.lineno,b.colno);break;case d.TOKEN_LEFT_BRACKET:a=new e.Array(b.lineno,b.colno);break;case d.TOKEN_LEFT_CURLY:a=new e.Dict(b.lineno,b.colno);break;default:return null}for(;;){var c=this.peekToken().type;if(c===d.TOKEN_RIGHT_PAREN||c===d.TOKEN_RIGHT_BRACKET||c===d.TOKEN_RIGHT_CURLY){this.nextToken();break}if(a.children.length>0&&(this.skip(d.TOKEN_COMMA)||this.fail("parseAggregate: expected comma after expression",b.lineno,b.colno)),a instanceof e.Dict){var f=this.parsePrimary();this.skip(d.TOKEN_COLON)||this.fail("parseAggregate: expected colon after dict key",b.lineno,b.colno);var g=this.parseExpression();a.addChild(new e.Pair(f.lineno,f.colno,f,g))}else{var h=this.parseExpression();a.addChild(h)}}return a},parseSignature:function(a,b){var c=this.peekToken();if(!b&&c.type!==d.TOKEN_LEFT_PAREN){if(a)return null;this.fail("expected arguments",c.lineno,c.colno)}c.type===d.TOKEN_LEFT_PAREN&&(c=this.nextToken());for(var f=new e.NodeList(c.lineno,c.colno),g=new e.KeywordArgs(c.lineno,c.colno),h=!1;;){if(c=this.peekToken(),!b&&c.type===d.TOKEN_RIGHT_PAREN){this.nextToken();break}if(b&&c.type===d.TOKEN_BLOCK_END)break;if(h&&!this.skip(d.TOKEN_COMMA))this.fail("parseSignature: expected comma after expression",c.lineno,c.colno);else{var i=this.parseExpression();this.skipValue(d.TOKEN_OPERATOR,"=")?g.addChild(new e.Pair(i.lineno,i.colno,i,this.parseExpression())):f.addChild(i)}h=!0}return g.children.length&&f.addChild(g),f},parseUntilBlocks:function(){var a=this.breakOnBlocks;this.breakOnBlocks=g.toArray(arguments);var b=this.parse();return this.breakOnBlocks=a,b},parseNodes:function(){for(var a,b=[];a=this.nextToken();)if(a.type===d.TOKEN_DATA){var c=a.value,f=this.peekToken(),g=f&&f.value;this.dropLeadingWhitespace&&(c=c.replace(/^\s*/,""),this.dropLeadingWhitespace=!1),f&&(f.type===d.TOKEN_BLOCK_START&&"-"===g.charAt(g.length-1)||f.type===d.TOKEN_VARIABLE_START&&"-"===g.charAt(this.tokens.tags.VARIABLE_START.length)||f.type===d.TOKEN_COMMENT&&"-"===g.charAt(this.tokens.tags.COMMENT_START.length))&&(c=c.replace(/\s*$/,"")),b.push(new e.Output(a.lineno,a.colno,[new e.TemplateData(a.lineno,a.colno,c)]))}else if(a.type===d.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var h=this.parseStatement();if(!h)break;b.push(h)}else if(a.type===d.TOKEN_VARIABLE_START){var i=this.parseExpression();this.dropLeadingWhitespace=!1,this.advanceAfterVariableEnd(),b.push(new e.Output(a.lineno,a.colno,[i]))}else a.type===d.TOKEN_COMMENT?this.dropLeadingWhitespace="-"===a.value.charAt(a.value.length-this.tokens.tags.COMMENT_END.length-1):this.fail("Unexpected token at top-level: "+a.type,a.lineno,a.colno);return b},parse:function(){return new e.NodeList(0,0,this.parseNodes())},parseAsRoot:function(){return new e.Root(0,0,this.parseNodes())}});a.exports={parse:function(a,b,c){var e=new h(d.lex(a,c));return void 0!==b&&(e.extensions=b),e.parseAsRoot()}}},function(a,b,c){"use strict";function d(a,b,c,d){return{type:a,value:b,lineno:c,colno:d}}function e(a,b){this.str=a,this.index=0,this.len=a.length,this.lineno=0,this.colno=0,this.in_code=!1,b=b||{};var c=b.tags||{};this.tags={BLOCK_START:c.blockStart||j,BLOCK_END:c.blockEnd||k,VARIABLE_START:c.variableStart||l,VARIABLE_END:c.variableEnd||m,COMMENT_START:c.commentStart||n,COMMENT_END:c.commentEnd||o},this.trimBlocks=!!b.trimBlocks,this.lstripBlocks=!!b.lstripBlocks}var f=c(1),g=" \n\t\r ",h="()[]{}%*-+~/#,:|.<>=!",i="0123456789",j="{%",k="%}",l="{{",m="}}",n="{#",o="#}",p="string",q="whitespace",r="data",s="block-start",t="block-end",u="variable-start",v="variable-end",w="comment",x="left-paren",y="right-paren",z="left-bracket",A="right-bracket",B="left-curly",C="right-curly",D="operator",E="comma",F="colon",G="tilde",H="pipe",I="int",J="float",K="boolean",L="none",M="symbol",N="special",O="regex";e.prototype.nextToken=function(){var a,b=this.lineno,c=this.colno;if(this.in_code){var e=this.current();if(this.is_finished())return null;if('"'===e||"'"===e)return d(p,this.parseString(e),b,c);if(a=this._extract(g))return d(q,a,b,c);if((a=this._extractString(this.tags.BLOCK_END))||(a=this._extractString("-"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&(e=this.current(),"\n"===e?this.forward():"\r"===e&&(this.forward(),e=this.current(),"\n"===e?this.forward():this.back())),d(t,a,b,c);if((a=this._extractString(this.tags.VARIABLE_END))||(a=this._extractString("-"+this.tags.VARIABLE_END)))return this.in_code=!1,d(v,a,b,c);if("r"===e&&"/"===this.str.charAt(this.index+1)){this.forwardN(2);for(var j="";!this.is_finished();){if("/"===this.current()&&"\\"!==this.previous()){this.forward();break}j+=this.current(),this.forward()}for(var k=["g","i","m","y"],l="";!this.is_finished();){var m=k.indexOf(this.current())!==-1;if(!m)break;l+=this.current(),this.forward()}return d(O,{body:j,flags:l},b,c)}if(h.indexOf(e)!==-1){this.forward();var n,o=["==","===","!=","!==","<=",">=","//","**"],N=e+this.current();switch(f.indexOf(o,N)!==-1&&(this.forward(),e=N,f.indexOf(o,N+this.current())!==-1&&(e=N+this.current(),this.forward())),e){case"(":n=x;break;case")":n=y;break;case"[":n=z;break;case"]":n=A;break;case"{":n=B;break;case"}":n=C;break;case",":n=E;break;case":":n=F;break;case"~":n=G;break;case"|":n=H;break;default:n=D}return d(n,e,b,c)}if(a=this._extractUntil(g+h),a.match(/^[-+]?[0-9]+$/)){if("."===this.current()){this.forward();var P=this._extract(i);return d(J,a+"."+P,b,c)}return d(I,a,b,c)}if(a.match(/^(true|false)$/))return d(K,a,b,c);if("none"===a)return d(L,a,b,c);if(a)return d(M,a,b,c);throw new Error("Unexpected value while parsing: "+a)}var Q=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.is_finished())return null;if((a=this._extractString(this.tags.BLOCK_START+"-"))||(a=this._extractString(this.tags.BLOCK_START)))return this.in_code=!0,d(s,a,b,c);if((a=this._extractString(this.tags.VARIABLE_START+"-"))||(a=this._extractString(this.tags.VARIABLE_START)))return this.in_code=!0,d(u,a,b,c);a="";var R,S=!1;for(this._matches(this.tags.COMMENT_START)&&(S=!0,a=this._extractString(this.tags.COMMENT_START));null!==(R=this._extractUntil(Q));){if(a+=R,(this._matches(this.tags.BLOCK_START)||this._matches(this.tags.VARIABLE_START)||this._matches(this.tags.COMMENT_START))&&!S){if(this.lstripBlocks&&this._matches(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=a.length){var T=a.slice(-this.colno);if(/^\s+$/.test(T)&&(a=a.slice(0,-this.colno),!a.length))return this.nextToken()}break}if(this._matches(this.tags.COMMENT_END)){if(!S)throw new Error("unexpected end of comment");a+=this._extractString(this.tags.COMMENT_END);break}a+=this.current(),this.forward()}if(null===R&&S)throw new Error("expected end of comment, got end of file");return d(S?w:r,a,b,c)},e.prototype.parseString=function(a){this.forward();for(var b="";!this.is_finished()&&this.current()!==a;){var c=this.current();if("\\"===c){switch(this.forward(),this.current()){case"n":b+="\n";break;case"t":b+="\t";break;case"r":b+="\r";break;default:b+=this.current()}this.forward()}else b+=c,this.forward()}return this.forward(),b},e.prototype._matches=function(a){if(this.index+a.length>this.len)return null;var b=this.str.slice(this.index,this.index+a.length);return b===a},e.prototype._extractString=function(a){return this._matches(a)?(this.index+=a.length,a):null},e.prototype._extractUntil=function(a){return this._extractMatching(!0,a||"")},e.prototype._extract=function(a){return this._extractMatching(!1,a)},e.prototype._extractMatching=function(a,b){if(this.is_finished())return null;var c=b.indexOf(this.current());if(a&&c===-1||!a&&c!==-1){var d=this.current();this.forward();for(var e=b.indexOf(this.current());(a&&e===-1||!a&&e!==-1)&&!this.is_finished();)d+=this.current(),this.forward(),e=b.indexOf(this.current());return d}return""},e.prototype._extractRegex=function(a){var b=this.currentStr().match(a);return b?(this.forwardN(b[0].length),b):null},e.prototype.is_finished=function(){return this.index>=this.len},e.prototype.forwardN=function(a){for(var b=0;b<a;b++)this.forward()},e.prototype.forward=function(){this.index++,"\n"===this.previous()?(this.lineno++,this.colno=0):this.colno++},e.prototype.backN=function(a){for(var b=0;b<a;b++)this.back()},e.prototype.back=function(){if(this.index--,"\n"===this.current()){this.lineno--;var a=this.src.lastIndexOf("\n",this.index-1);a===-1?this.colno=this.index:this.colno=this.index-a}else this.colno--},e.prototype.current=function(){return this.is_finished()?"":this.str.charAt(this.index)},e.prototype.currentStr=function(){return this.is_finished()?"":this.str.substr(this.index)},e.prototype.previous=function(){return this.str.charAt(this.index-1)},a.exports={lex:function(a,b){return new e(a,b)},TOKEN_STRING:p,TOKEN_WHITESPACE:q,TOKEN_DATA:r,TOKEN_BLOCK_START:s,TOKEN_BLOCK_END:t,TOKEN_VARIABLE_START:u,TOKEN_VARIABLE_END:v,TOKEN_COMMENT:w,TOKEN_LEFT_PAREN:x,TOKEN_RIGHT_PAREN:y,TOKEN_LEFT_BRACKET:z,TOKEN_RIGHT_BRACKET:A,TOKEN_LEFT_CURLY:B,TOKEN_RIGHT_CURLY:C,TOKEN_OPERATOR:D,TOKEN_COMMA:E,TOKEN_COLON:F,TOKEN_TILDE:G,TOKEN_PIPE:H,TOKEN_INT:I,TOKEN_FLOAT:J,TOKEN_BOOLEAN:K,TOKEN_NONE:L,TOKEN_SYMBOL:M,TOKEN_SPECIAL:N,TOKEN_REGEX:O}},function(a,b,c){(function(b){"use strict";function d(a,b,c){a instanceof b&&c.push(a),a instanceof h&&a.findAll(b,c)}function e(a,c){function d(a,c,d){for(var e=a.split("\n"),f=0;f<e.length;f++){if(e[f]&&(d&&f>0||!d))for(var g=0;g<c;g++)b.stdout.write(" ");f===e.length-1?b.stdout.write(e[f]):b.stdout.write(e[f]+"\n")}}if(c=c||0,d(a.typename+": ",c),a instanceof j)d("\n"),f.each(a.children,function(a){e(a,c+2)});else if(a instanceof fa)d(a.extName+"."+a.prop),d("\n"),a.args&&e(a.args,c+2),a.contentArgs&&f.each(a.contentArgs,function(a){e(a,c+2)});else{var g=null,i=null;if(a.iterFields(function(a,b){a instanceof h?(g=g||{},g[b]=a):(i=i||{},i[b]=a)}),i?d(JSON.stringify(i,null,2)+"\n",null,!0):d("\n"),g)for(var k in g)e(g[k],c+2)}}var f=c(1),g=c(6),h=g.extend("Node",{init:function(a,b){this.lineno=a,this.colno=b;for(var c=this.fields,d=0,e=c.length;d<e;d++){var f=c[d],g=arguments[d+2];void 0===g&&(g=null),this[f]=g}},findAll:function(a,b){b=b||[];var c,e;if(this instanceof j){var f=this.children;for(c=0,e=f.length;c<e;c++)d(f[c],a,b)}else{var g=this.fields;for(c=0,e=g.length;c<e;c++)d(this[g[c]],a,b)}return b},iterFields:function(a){f.each(this.fields,function(b){a(this[b],b)},this)}}),i=h.extend("Value",{fields:["value"]}),j=h.extend("NodeList",{fields:["children"],init:function(a,b,c){this.parent(a,b,c||[])},addChild:function(a){this.children.push(a)}}),k=j.extend("Root"),l=i.extend("Literal"),m=i.extend("Symbol"),n=j.extend("Group"),o=j.extend("Array"),p=h.extend("Pair",{fields:["key","value"]}),q=j.extend("Dict"),r=h.extend("LookupVal",{fields:["target","val"]}),s=h.extend("If",{fields:["cond","body","else_"]}),t=s.extend("IfAsync"),u=h.extend("InlineIf",{fields:["cond","body","else_"]}),v=h.extend("For",{fields:["arr","name","body","else_"]}),w=v.extend("AsyncEach"),x=v.extend("AsyncAll"),y=h.extend("Macro",{fields:["name","args","body"]}),z=y.extend("Caller"),A=h.extend("Import",{fields:["template","target","withContext"]}),B=h.extend("FromImport",{fields:["template","names","withContext"],init:function(a,b,c,d,e){this.parent(a,b,c,d||new j,e)}}),C=h.extend("FunCall",{fields:["name","args"]}),D=C.extend("Filter"),E=D.extend("FilterAsync",{fields:["name","args","symbol"]}),F=q.extend("KeywordArgs"),G=h.extend("Block",{fields:["name","body"]}),H=h.extend("Super",{fields:["blockName","symbol"]}),I=h.extend("TemplateRef",{fields:["template"]}),J=I.extend("Extends"),K=h.extend("Include",{fields:["template","ignoreMissing"]}),L=h.extend("Set",{fields:["targets","value"]}),M=j.extend("Output"),N=h.extend("Capture",{fields:["body"]}),O=l.extend("TemplateData"),P=h.extend("UnaryOp",{fields:["target"]}),Q=h.extend("BinOp",{fields:["left","right"]}),R=Q.extend("In"),S=Q.extend("Or"),T=Q.extend("And"),U=P.extend("Not"),V=Q.extend("Add"),W=Q.extend("Concat"),X=Q.extend("Sub"),Y=Q.extend("Mul"),Z=Q.extend("Div"),$=Q.extend("FloorDiv"),_=Q.extend("Mod"),aa=Q.extend("Pow"),ba=P.extend("Neg"),ca=P.extend("Pos"),da=h.extend("Compare",{fields:["expr","ops"]}),ea=h.extend("CompareOperand",{fields:["expr","type"]}),fa=h.extend("CallExtension",{fields:["extName","prop","args","contentArgs"],init:function(a,b,c,d){this.extName=a._name||a,this.prop=b,this.args=c||new j,this.contentArgs=d||[],this.autoescape=a.autoescape}}),ga=fa.extend("CallExtensionAsync");a.exports={Node:h,Root:k,NodeList:j,Value:i,Literal:l,Symbol:m,Group:n,Array:o,Pair:p,Dict:q,Output:M,Capture:N,TemplateData:O,If:s,IfAsync:t,InlineIf:u,For:v,AsyncEach:w,AsyncAll:x,Macro:y,Caller:z,Import:A,FromImport:B,FunCall:C,Filter:D,FilterAsync:E,KeywordArgs:F,Block:G,Super:H,Extends:J,Include:K,Set:L,LookupVal:r,BinOp:Q,In:R,Or:S,And:T,Not:U,Add:V,Concat:W,Sub:X,Mul:Y,Div:Z,FloorDiv:$,Mod:_,Pow:aa,Neg:ba,Pos:ca,Compare:da,CompareOperand:ea,CallExtension:fa,CallExtensionAsync:ga,printNodes:e}}).call(b,c(3))},function(a,b,c){"use strict";function d(){return"hole_"+p++}function e(a,b){for(var c=null,d=0;d<a.length;d++){var e=b(a[d]);e!==a[d]&&(c||(c=a.slice()),c[d]=e)}return c||a}function f(a,b,c){if(!(a instanceof n.Node))return a;if(!c){var d=b(a);if(d&&d!==a)return d}if(a instanceof n.NodeList){var g=e(a.children,function(a){return f(a,b,c)});g!==a.children&&(a=new n[a.typename](a.lineno,a.colno,g))}else if(a instanceof n.CallExtension){var h=f(a.args,b,c),i=e(a.contentArgs,function(a){return f(a,b,c)});h===a.args&&i===a.contentArgs||(a=new n[a.typename](a.extName,a.prop,h,i))}else{var j=a.fields.map(function(b){return a[b]}),k=e(j,function(a){return f(a,b,c)});k!==j&&(a=new n[a.typename](a.lineno,a.colno),k.forEach(function(b,c){a[a.fields[c]]=b}))}return c?b(a)||a:a}function g(a,b){return f(a,b,!0)}function h(a,b,c){var e=[],f=g(c?a[c]:a,function(a){if(a instanceof n.Block)return a;if(a instanceof n.Filter&&o.indexOf(b,a.name.value)!==-1||a instanceof n.CallExtensionAsync){var c=new n.Symbol(a.lineno,a.colno,d());return e.push(new n.FilterAsync(a.lineno,a.colno,a.name,a.args,c)),c}});return c?a[c]=f:a=f,e.length?(e.push(a),new n.NodeList(a.lineno,a.colno,e)):a}function i(a,b){return g(a,function(a){return a instanceof n.Output?h(a,b):a instanceof n.Set?h(a,b,"value"):a instanceof n.For?h(a,b,"arr"):a instanceof n.If?h(a,b,"cond"):a instanceof n.CallExtension?h(a,b,"args"):void 0})}function j(a){return f(a,function(a){if(a instanceof n.Block){var b=!1,c=d();a.body=f(a.body,function(a){if(a instanceof n.FunCall&&"super"===a.name.value)return b=!0,new n.Symbol(a.lineno,a.colno,c)}),b&&a.body.children.unshift(new n.Super(0,0,a.name,new n.Symbol(0,0,c)))}})}function k(a){return g(a,function(a){if(a instanceof n.If||a instanceof n.For){var b=!1;if(f(a,function(a){if(a instanceof n.FilterAsync||a instanceof n.IfAsync||a instanceof n.AsyncEach||a instanceof n.AsyncAll||a instanceof n.CallExtensionAsync)return b=!0,a}),b){if(a instanceof n.If)return new n.IfAsync(a.lineno,a.colno,a.cond,a.body,a.else_);if(a instanceof n.For)return new n.AsyncEach(a.lineno,a.colno,a.arr,a.name,a.body,a.else_)}}})}function l(a,b){return k(j(i(a,b)))}function m(a,b){return l(a,b||[])}var n=c(10),o=c(1),p=0;a.exports={transform:m}},function(a,b,c){"use strict";function d(a,b,c){return function(){var d,e,h=g(arguments),i=f(arguments);if(h>a.length){d=Array.prototype.slice.call(arguments,0,a.length);var j=Array.prototype.slice.call(arguments,d.length,h);for(e=0;e<j.length;e++)e<b.length&&(i[b[e]]=j[e]);d.push(i)}else if(h<a.length){for(d=Array.prototype.slice.call(arguments,0,h),e=h;e<a.length;e++){var k=a[e];d.push(i[k]),delete i[k]}d.push(i)}else d=arguments;return c.apply(this,d)}}function e(a){return a.__keywords=!0,a}function f(a){var b=a.length;if(b){var c=a[b-1];if(c&&c.hasOwnProperty("__keywords"))return c}return{}}function g(a){var b=a.length;if(0===b)return 0;var c=a[b-1];return c&&c.hasOwnProperty("__keywords")?b-1:b}function h(a){return"string"!=typeof a?a:(this.val=a,void(this.length=a.length))}function i(a,b){return a instanceof h?new h(b):b.toString()}function j(a){var b=typeof a;return"string"===b?new h(a):"function"!==b?a:function(){var b=a.apply(this,arguments);return"string"==typeof b?new h(b):b}}function k(a,b){return a=void 0!==a&&null!==a?a:"",!b||a instanceof h||(a=s.escape(a.toString())),a}function l(a,b,c){if(null===a||void 0===a)throw new s.TemplateError("attempted to output null or undefined value",b+1,c+1);return a}function m(a,b){return a=a||{},"function"==typeof a[b]?function(){return a[b].apply(a,arguments)}:a[b]}function n(a,b,c,d){if(!a)throw new Error("Unable to call `"+b+"`, which is undefined or falsey");if("function"!=typeof a)throw new Error("Unable to call `"+b+"`, which is not a function");return a.apply(c,d)}function o(a,b,c){var d=b.lookup(c);return void 0!==d?d:a.lookup(c)}function p(a,b,c){return a.lineno?a:new s.TemplateError(a,b,c)}function q(a,b,c,d){if(s.isArray(a)){var e=a.length;s.asyncIter(a,function(a,d,f){switch(b){case 1:c(a,d,e,f);break;case 2:c(a[0],a[1],d,e,f);break;case 3:c(a[0],a[1],a[2],d,e,f);break;default:a.push(d,f),c.apply(this,a)}},d)}else s.asyncFor(a,function(a,b,d,e,f){c(a,b,d,e,f)},d)}function r(a,b,c,d){function e(a,b){i++,h[a]=b,i===f&&d(null,h.join(""))}var f,g,h,i=0;if(s.isArray(a))if(f=a.length,h=new Array(f),0===f)d(null,"");else for(g=0;g<a.length;g++){var j=a[g];switch(b){case 1:c(j,g,f,e);break;case 2:c(j[0],j[1],g,f,e);break;case 3:c(j[0],j[1],j[2],g,f,e);break;default:j.push(g,e),c.apply(this,j)}}else{var k=s.keys(a);if(f=k.length,h=new Array(f),0===f)d(null,"");else for(g=0;g<k.length;g++){var l=k[g];c(l,a[l],g,f,e)}}}var s=c(1),t=c(6),u=t.extend({init:function(a,b){this.variables={},this.parent=a,this.topLevel=!1,this.isolateWrites=b},set:function(a,b,c){var d=a.split("."),e=this.variables,f=this;if(c&&(f=this.resolve(d[0],!0)))return void f.set(a,b);for(var g=0;g<d.length-1;g++){var h=d[g];e[h]||(e[h]={}),e=e[h]}e[d[d.length-1]]=b},get:function(a){var b=this.variables[a];return void 0!==b?b:null},lookup:function(a){var b=this.parent,c=this.variables[a];return void 0!==c?c:b&&b.lookup(a)},resolve:function(a,b){var c=b&&this.isolateWrites?void 0:this.parent,d=this.variables[a];return void 0!==d?this:c&&c.resolve(a)},push:function(a){return new u(this,a)},pop:function(){return this.parent}});h.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),h.prototype.valueOf=function(){return this.val},h.prototype.toString=function(){return this.val},a.exports={
Frame:u,makeMacro:d,makeKeywordArgs:e,numArgs:g,suppressValue:k,ensureDefined:l,memberLookup:m,contextOrFrameLookup:o,callWrap:n,handleError:p,isArray:s.isArray,keys:s.keys,SafeString:h,copySafeness:i,markSafe:j,asyncEach:q,asyncAll:r,inOperator:s.inOperator}},function(a,b,c){"use strict";function d(a,b){return null===a||void 0===a||a===!1?b:a}var e=c(1),f=c(12),g={abs:function(a){return Math.abs(a)},batch:function(a,b,c){var d,e=[],f=[];for(d=0;d<a.length;d++)d%b===0&&f.length&&(e.push(f),f=[]),f.push(a[d]);if(f.length){if(c)for(d=f.length;d<b;d++)f.push(c);e.push(f)}return e},capitalize:function(a){a=d(a,"");var b=a.toLowerCase();return f.copySafeness(a,b.charAt(0).toUpperCase()+b.slice(1))},center:function(a,b){if(a=d(a,""),b=b||80,a.length>=b)return a;var c=b-a.length,g=e.repeat(" ",c/2-c%2),h=e.repeat(" ",c/2);return f.copySafeness(a,g+a+h)},default:function(a,b,c){return c?a?a:b:void 0!==a?a:b},dictsort:function(a,b,c){if(!e.isObject(a))throw new e.TemplateError("dictsort filter: val must be an object");var d=[];for(var f in a)d.push([f,a[f]]);var g;if(void 0===c||"key"===c)g=0;else{if("value"!==c)throw new e.TemplateError("dictsort filter: You can only sort by either key or value");g=1}return d.sort(function(a,c){var d=a[g],f=c[g];return b||(e.isString(d)&&(d=d.toUpperCase()),e.isString(f)&&(f=f.toUpperCase())),d>f?1:d===f?0:-1}),d},dump:function(a,b){return JSON.stringify(a,null,b)},escape:function(a){return a instanceof f.SafeString?a:(a=null===a||void 0===a?"":a,f.markSafe(e.escape(a.toString())))},safe:function(a){return a instanceof f.SafeString?a:(a=null===a||void 0===a?"":a,f.markSafe(a.toString()))},first:function(a){return a[0]},groupby:function(a,b){return e.groupBy(a,b)},indent:function(a,b,c){if(a=d(a,""),""===a)return"";b=b||4;for(var g="",h=a.split("\n"),i=e.repeat(" ",b),j=0;j<h.length;j++)g+=0!==j||c?i+h[j]+"\n":h[j]+"\n";return f.copySafeness(a,g)},join:function(a,b,c){return b=b||"",c&&(a=e.map(a,function(a){return a[c]})),a.join(b)},last:function(a){return a[a.length-1]},length:function(a){var b=d(a,"");return void 0!==b?"function"==typeof Map&&b instanceof Map||"function"==typeof Set&&b instanceof Set?b.size:!e.isObject(b)||b instanceof f.SafeString?b.length:Object.keys(b).length:0},list:function(a){if(e.isString(a))return a.split("");if(e.isObject(a)){var b=[];if(Object.keys)b=Object.keys(a);else for(var c in a)b.push(c);return e.map(b,function(b){return{key:b,value:a[b]}})}if(e.isArray(a))return a;throw new e.TemplateError("list filter: type not iterable")},lower:function(a){return a=d(a,""),a.toLowerCase()},nl2br:function(a){return null===a||void 0===a?"":f.copySafeness(a,a.replace(/\r\n|\n/g,"<br />\n"))},random:function(a){return a[Math.floor(Math.random()*a.length)]},rejectattr:function(a,b){return a.filter(function(a){return!a[b]})},selectattr:function(a,b){return a.filter(function(a){return!!a[b]})},replace:function(a,b,c,d){var e=a;if(b instanceof RegExp)return a.replace(b,c);"undefined"==typeof d&&(d=-1);var g="";if("number"==typeof b)b+="";else if("string"!=typeof b)return a;if("number"==typeof a&&(a+=""),"string"!=typeof a&&!(a instanceof f.SafeString))return a;if(""===b)return g=c+a.split("").join(c)+c,f.copySafeness(a,g);var h=a.indexOf(b);if(0===d||h===-1)return a;for(var i=0,j=0;h>-1&&(d===-1||j<d);)g+=a.substring(i,h)+c,i=h+b.length,j++,h=a.indexOf(b,i);return i<a.length&&(g+=a.substring(i)),f.copySafeness(e,g)},reverse:function(a){var b;return b=e.isString(a)?g.list(a):e.map(a,function(a){return a}),b.reverse(),e.isString(a)?f.copySafeness(a,b.join("")):b},round:function(a,b,c){b=b||0;var d,e=Math.pow(10,b);return d="ceil"===c?Math.ceil:"floor"===c?Math.floor:Math.round,d(a*e)/e},slice:function(a,b,c){for(var d=Math.floor(a.length/b),e=a.length%b,f=0,g=[],h=0;h<b;h++){var i=f+h*d;h<e&&f++;var j=f+(h+1)*d,k=a.slice(i,j);c&&h>=e&&k.push(c),g.push(k)}return g},sum:function(a,b,c){var d=0;"number"==typeof c&&(d+=c),b&&(a=e.map(a,function(a){return a[b]}));for(var f=0;f<a.length;f++)d+=a[f];return d},sort:f.makeMacro(["value","reverse","case_sensitive","attribute"],[],function(a,b,c,d){return a=e.map(a,function(a){return a}),a.sort(function(a,f){var g,h;return d?(g=a[d],h=f[d]):(g=a,h=f),!c&&e.isString(g)&&e.isString(h)&&(g=g.toLowerCase(),h=h.toLowerCase()),g<h?b?1:-1:g>h?b?-1:1:0}),a}),string:function(a){return f.copySafeness(a,a)},striptags:function(a,b){a=d(a,""),b=b||!1;var c=/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,e=g.trim(a.replace(c,"")),h="";return h=b?e.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):e.replace(/\s+/gi," "),f.copySafeness(a,h)},title:function(a){a=d(a,"");for(var b=a.split(" "),c=0;c<b.length;c++)b[c]=g.capitalize(b[c]);return f.copySafeness(a,b.join(" "))},trim:function(a){return f.copySafeness(a,a.replace(/^\s*|\s*$/g,""))},truncate:function(a,b,c,e){var g=a;if(a=d(a,""),b=b||255,a.length<=b)return a;if(c)a=a.substring(0,b);else{var h=a.lastIndexOf(" ",b);h===-1&&(h=b),a=a.substring(0,h)}return a+=void 0!==e&&null!==e?e:"...",f.copySafeness(g,a)},upper:function(a){return a=d(a,""),a.toUpperCase()},urlencode:function(a){var b=encodeURIComponent;if(e.isString(a))return b(a);var c;if(e.isArray(a))c=a.map(function(a){return b(a[0])+"="+b(a[1])});else{c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(b(d)+"="+b(a[d]))}return c.join("&")},urlize:function(a,b,c){isNaN(b)&&(b=1/0);var d=c===!0?' rel="nofollow"':"",e=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,f=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,g=/^https?:\/\/.*$/,h=/^www\./,i=/\.(?:org|net|com)(?:\:|\/|$)/,j=a.split(/(\s+)/).filter(function(a){return a&&a.length}).map(function(a){var c=a.match(e),j=c&&c[1]||a;return g.test(j)?'<a href="'+j+'"'+d+">"+j.substr(0,b)+"</a>":h.test(j)?'<a href="http://'+j+'"'+d+">"+j.substr(0,b)+"</a>":f.test(j)?'<a href="mailto:'+j+'">'+j+"</a>":i.test(j)?'<a href="http://'+j+'"'+d+">"+j.substr(0,b)+"</a>":a});return j.join("")},wordcount:function(a){a=d(a,"");var b=a?a.match(/\w+/g):null;return b?b.length:null},float:function(a,b){var c=parseFloat(a);return isNaN(c)?b:c},int:function(a,b){var c=parseInt(a,10);return isNaN(c)?b:c}};g.d=g.default,g.e=g.escape,a.exports=g},function(a,b,c){"use strict";var d=c(15),e=c(16),f=d.extend({init:function(a,b){this.baseURL=a||".",b=b||{},this.useCache=!!b.useCache,this.async=!!b.async},resolve:function(a,b){throw new Error("relative templates not support in the browser yet")},getSource:function(a,b){var c,d=this.useCache;return this.fetch(this.baseURL+"/"+a,function(e,f){if(e)if(b)b(e.content);else{if(404!==e.status)throw e.content;c=null}else c={src:f,path:a,noCache:!d},b&&b(null,c)}),c},fetch:function(a,b){var c,d=!0;window.XMLHttpRequest?c=new XMLHttpRequest:window.ActiveXObject&&(c=new ActiveXObject("Microsoft.XMLHTTP")),c.onreadystatechange=function(){4===c.readyState&&d&&(d=!1,0===c.status||200===c.status?b(null,c.responseText):b({status:c.status,content:c.responseText}))},a+=(a.indexOf("?")===-1?"?":"&")+"s="+(new Date).getTime(),c.open("GET",a,this.async),c.send()}});a.exports={WebLoader:f,PrecompiledLoader:e}},function(a,b,c){"use strict";var d=c(3),e=c(6),f=c(1),g=e.extend({on:function(a,b){this.listeners=this.listeners||{},this.listeners[a]=this.listeners[a]||[],this.listeners[a].push(b)},emit:function(a){var b=Array.prototype.slice.call(arguments,1);this.listeners&&this.listeners[a]&&f.each(this.listeners[a],function(a){a.apply(null,b)})},resolve:function(a,b){return d.resolve(d.dirname(a),b)},isRelative:function(a){return 0===a.indexOf("./")||0===a.indexOf("../")}});a.exports=g},function(a,b,c){"use strict";var d=c(15),e=d.extend({init:function(a){this.precompiled=a||{}},getSource:function(a){return this.precompiled[a]?{src:{type:"code",obj:this.precompiled[a]},path:a}:null}});a.exports=e},function(a,b){"use strict";function c(a){var b=-1;return{current:null,reset:function(){b=-1,this.current=null},next:function(){return b++,b>=a.length&&(b=0),this.current=a[b],this.current}}}function d(a){a=a||",";var b=!0;return function(){var c=b?"":a;return b=!1,c}}function e(){return{range:function(a,b,c){"undefined"==typeof b?(b=a,a=0,c=1):c||(c=1);var d,e=[];if(c>0)for(d=a;d<b;d+=c)e.push(d);else for(d=a;d>b;d+=c)e.push(d);return e},cycler:function(){return c(Array.prototype.slice.call(arguments))},joiner:function(a){return d(a)}}}a.exports=e},function(a,b,c){var d,e;(function(c,f){!function(g){"use strict";var h=function(){var a=Array.prototype.slice.call(arguments);"function"==typeof a[0]&&a[0].apply(null,a.splice(1))},i=function(a){"function"==typeof c?c(a):"undefined"!=typeof f&&f.nextTick?f.nextTick(a):setTimeout(a,0)},j=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},k=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},l=function(a,b,c){var d=c?i:h;if(b=b||function(){},!k(a)){var e=new Error("First argument to waterfall must be an array of functions");return b(e)}if(!a.length)return b();var f=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();g?e.push(f(g)):e.push(b),d(function(){a.apply(null,e)})}}};f(j(a))()};d=[],e=function(){return l}.apply(b,d),!(void 0!==e&&(a.exports=e))}(this)}).call(b,c(19).setImmediate,c(3))},function(a,b,c){(function(a,d){function e(a,b){this._id=a,this._clearFn=b}var f=c(20).nextTick,g=Function.prototype.apply,h=Array.prototype.slice,i={},j=0;b.setTimeout=function(){return new e(g.call(setTimeout,window,arguments),clearTimeout)},b.setInterval=function(){return new e(g.call(setInterval,window,arguments),clearInterval)},b.clearTimeout=b.clearInterval=function(a){a.close()},e.prototype.unref=e.prototype.ref=function(){},e.prototype.close=function(){this._clearFn.call(window,this._id)},b.enroll=function(a,b){clearTimeout(a._idleTimeoutId),a._idleTimeout=b},b.unenroll=function(a){clearTimeout(a._idleTimeoutId),a._idleTimeout=-1},b._unrefActive=b.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;b>=0&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},b))},b.setImmediate="function"==typeof a?a:function(a){var c=j++,d=!(arguments.length<2)&&h.call(arguments,1);return i[c]=!0,f(function(){i[c]&&(d?a.apply(null,d):a.call(null),b.clearImmediate(c))}),c},b.clearImmediate="function"==typeof d?d:function(a){delete i[a]}}).call(b,c(19).setImmediate,c(19).clearImmediate)},function(a,b){function c(){j=!1,g.length?i=g.concat(i):k=-1,i.length&&d()}function d(){if(!j){var a=setTimeout(c);j=!0;for(var b=i.length;b;){for(g=i,i=[];++k<b;)g&&g[k].run();k=-1,b=i.length}g=null,j=!1,clearTimeout(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h=a.exports={},i=[],j=!1,k=-1;h.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];i.push(new e(a,b)),1!==i.length||j||setTimeout(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(a){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(a){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(a,b){function c(){"use strict";var a=this.runtime,b=this.lib,c=a.contextOrFrameLookup;a.contextOrFrameLookup=function(a,b,d){var e=c.apply(this,arguments);if(void 0===e)switch(d){case"True":return!0;case"False":return!1;case"None":return null}return e};var d=a.memberLookup,e={pop:function(a){if(void 0===a)return this.pop();if(a>=this.length||a<0)throw new Error("KeyError");return this.splice(a,1)},append:function(a){return this.push(a)},remove:function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return this.splice(b,1);throw new Error("ValueError")},count:function(a){for(var b=0,c=0;c<this.length;c++)this[c]===a&&b++;return b},index:function(a){var b;if((b=this.indexOf(a))===-1)throw new Error("ValueError");return b},find:function(a){return this.indexOf(a)},insert:function(a,b){return this.splice(a,0,b)}},f={items:function(){var a=[];for(var b in this)a.push([b,this[b]]);return a},values:function(){var a=[];for(var b in this)a.push(this[b]);return a},keys:function(){var a=[];for(var b in this)a.push(b);return a},get:function(a,b){var c=this[a];return void 0===c&&(c=b),c},has_key:function(a){return this.hasOwnProperty(a)},pop:function(a,b){var c=this[a];if(void 0===c&&void 0!==b)c=b;else{if(void 0===c)throw new Error("KeyError");delete this[a]}return c},popitem:function(){for(var a in this){var b=this[a];return delete this[a],[a,b]}throw new Error("KeyError")},setdefault:function(a,b){return a in this?this[a]:(void 0===b&&(b=null),this[a]=b)},update:function(a){for(var b in a)this[b]=a[b];return null}};f.iteritems=f.items,f.itervalues=f.values,f.iterkeys=f.keys,a.memberLookup=function(a,c,g){return a=a||{},b.isArray(a)&&e.hasOwnProperty(c)?function(){return e[c].apply(a,arguments)}:b.isObject(a)&&f.hasOwnProperty(c)?function(){return f[c].apply(a,arguments)}:d.apply(this,arguments)}}a.exports=c}])}),function(a,b,c,d){"use strict";function e(a){return("string"==typeof a||a instanceof String)&&(a=a.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),a}var f=function(b){for(var c=b.length,d=a("head");c--;)0===d.has("."+b[c]).length&&d.append('<meta class="'+b[c]+'" />')};f(["foundation-mq-small","foundation-mq-medium","foundation-mq-large","foundation-mq-xlarge","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),a(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof c.body&&FastClick.attach(c.body)});var g=function(b,d){if("string"==typeof b){if(d){var e;if(d.jquery){if(e=d[0],!e)return d}else e=d;return a(e.querySelectorAll(b))}return a(c.querySelectorAll(b))}return a(b,d)},h=function(a){var b=[];return a||b.push("data"),this.namespace.length>0&&b.push(this.namespace),b.push(this.name),b.join("-")},i=function(a){for(var b=a.split("-"),c=b.length,d=[];c--;)0!==c?d.push(b[c]):this.namespace.length>0?d.push(this.namespace,b[c]):d.push(b[c]);return d.reverse().join("-")},j=function(b,c){var d=this,e=!g(this).data(this.attr_name(!0));if(g(this.scope).is("["+this.attr_name()+"]")?(g(this.scope).data(this.attr_name(!0)+"-init",a.extend({},this.settings,c||b,this.data_options(g(this.scope)))),e&&this.events(this.scope)):g("["+this.attr_name()+"]",this.scope).each(function(){var e=!g(this).data(d.attr_name(!0)+"-init");g(this).data(d.attr_name(!0)+"-init",a.extend({},d.settings,c||b,d.data_options(g(this)))),e&&d.events(this)}),"string"==typeof b)return this[b].call(this,c)},k=function(a,b){function c(){b(a[0])}function d(){if(this.one("load",c),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var a=this.attr("src"),b=a.match(/\?/)?"&":"?";b+="random="+(new Date).getTime(),this.attr("src",a+b)}}return a.attr("src")?void(a[0].complete||4===a[0].readyState?c():d.call(a)):void c()};b.matchMedia=b.matchMedia||function(a){var b,c=a.documentElement,d=c.firstElementChild||c.firstChild,e=a.createElement("body"),f=a.createElement("div");return f.id="mq-test-1",f.style.cssText="position:absolute;top:-100em",e.style.background="none",e.appendChild(f),function(a){return f.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',c.insertBefore(e,d),b=42===f.offsetWidth,c.removeChild(e),{matches:b,media:a}}}(c),function(a){function c(){d&&(g(c),i&&jQuery.fx.tick())}for(var d,e=0,f=["webkit","moz"],g=b.requestAnimationFrame,h=b.cancelAnimationFrame,i="undefined"!=typeof jQuery.fx;e<f.length&&!g;e++)g=b[f[e]+"RequestAnimationFrame"],h=h||b[f[e]+"CancelAnimationFrame"]||b[f[e]+"CancelRequestAnimationFrame"];g?(b.requestAnimationFrame=g,b.cancelAnimationFrame=h,i&&(jQuery.fx.timer=function(a){a()&&jQuery.timers.push(a)&&!d&&(d=!0,c())},jQuery.fx.stop=function(){d=!1})):(b.requestAnimationFrame=function(a){var c=(new Date).getTime(),d=Math.max(0,16-(c-e)),f=b.setTimeout(function(){a(c+d)},d);return e=c+d,f},b.cancelAnimationFrame=function(a){clearTimeout(a)})}(jQuery),b.Foundation={name:"Foundation",version:"5.4.7",media_queries:{small:g(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:g(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:g(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:g(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:g(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:a("<style></style>").appendTo("head")[0].sheet,global:{namespace:d},init:function(a,c,d,e,f){var h=[a,d,e,f],i=[];if(this.rtl=/rtl/i.test(g("html").attr("dir")),this.scope=a||this.scope,this.set_namespace(),c&&"string"==typeof c&&!/reflow/i.test(c))this.libs.hasOwnProperty(c)&&i.push(this.init_lib(c,h));else for(var j in this.libs)i.push(this.init_lib(j,c));return g(b).load(function(){g(b).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),a},init_lib:function(b,c){return this.libs.hasOwnProperty(b)?(this.patch(this.libs[b]),c&&c.hasOwnProperty(b)?("undefined"!=typeof this.libs[b].settings?a.extend(!0,this.libs[b].settings,c[b]):"undefined"!=typeof this.libs[b].defaults&&a.extend(!0,this.libs[b].defaults,c[b]),this.libs[b].init.apply(this.libs[b],[this.scope,c[b]])):(c=c instanceof Array?c:new Array(c),this.libs[b].init.apply(this.libs[b],c))):function(){}},patch:function(a){a.scope=this.scope,a.namespace=this.global.namespace,a.rtl=this.rtl,a.data_options=this.utils.data_options,a.attr_name=h,a.add_namespace=i,a.bindings=j,a.S=this.utils.S},inherit:function(a,b){for(var c=b.split(" "),d=c.length;d--;)this.utils.hasOwnProperty(c[d])&&(a[c[d]]=this.utils[c[d]])},set_namespace:function(){var b=this.global.namespace===d?a(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=b===d||/false/i.test(b)?"":b},libs:{},utils:{S:g,throttle:function(a,b){var c=null;return function(){var d=this,e=arguments;null==c&&(c=setTimeout(function(){a.apply(d,e),c=null},b))}},debounce:function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},data_options:function(b,c){function d(a){return!isNaN(a-0)&&null!==a&&""!==a&&a!==!1&&a!==!0}function e(b){return"string"==typeof b?a.trim(b):b}c=c||"options";var f,g,h,i={},j=function(a){var b=Foundation.global.namespace;return b.length>0?a.data(b+"-"+c):a.data(c)},k=j(b);if("object"==typeof k)return k;for(h=(k||":").split(";"),f=h.length;f--;)g=h[f].split(":"),g=[g[0],g.slice(1).join(":")],/true/i.test(g[1])&&(g[1]=!0),/false/i.test(g[1])&&(g[1]=!1),d(g[1])&&(g[1].indexOf(".")===-1?g[1]=parseInt(g[1],10):g[1]=parseFloat(g[1])),2===g.length&&g[0].length>0&&(i[e(g[0])]=e(g[1]));return i},register_media:function(b,c){Foundation.media_queries[b]===d&&(a("head").append('<meta class="'+c+'"/>'),Foundation.media_queries[b]=e(a("."+c).css("font-family")))},add_custom_rule:function(a,b){if(b===d&&Foundation.stylesheet)Foundation.stylesheet.insertRule(a,Foundation.stylesheet.cssRules.length);else{var c=Foundation.media_queries[b];c!==d&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[b]+"{ "+a+" }")}},image_loaded:function(a,b){var c=this,d=a.length;0===d&&b(a),a.each(function(){k(c.S(this),function(){d-=1,0===d&&b(a)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)}}},a.fn.foundation=function(){var a=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(a)),this})}}(jQuery,window,window.document),function(a,b,c,d){"use strict";Foundation.libs.clearing={name:"clearing",version:"5.4.7",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><div class="clearing-touch-label"></div><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close, div.clearing-blackout",open_selectors:"",skip_selector:"",touch_label:"",init:!1,locked:!1},init:function(a,b,c){var d=this;Foundation.inherit(this,"throttle image_loaded"),this.bindings(b,c),d.S(this.scope).is("["+this.attr_name()+"]")?this.assemble(d.S("li",this.scope)):d.S("["+this.attr_name()+"]",this.scope).each(function(){d.assemble(d.S("li",this))})},events:function(d){var e=this,f=e.S,g=a(".scroll-container");g.length>0&&(this.scope=g),f(this.scope).off(".clearing").on("click.fndtn.clearing","ul["+this.attr_name()+"] li "+this.settings.open_selectors,function(a,b,c){var b=b||f(this),c=c||b,d=b.next("li"),g=b.closest("["+e.attr_name()+"]").data(e.attr_name(!0)+"-init"),h=f(a.target);a.preventDefault(),g||(e.init(),g=b.closest("["+e.attr_name()+"]").data(e.attr_name(!0)+"-init")),c.hasClass("visible")&&b[0]===c[0]&&d.length>0&&e.is_open(b)&&(c=d,h=f("img",c)),e.open(h,b,c),e.update_paddles(c)}).on("click.fndtn.clearing",".clearing-main-next",function(a){e.nav(a,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(a){e.nav(a,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(a){Foundation.libs.clearing.close(a,this)}),a(c).on("keydown.fndtn.clearing",function(a){e.keydown(a)}),f(b).off(".clearing").on("resize.fndtn.clearing",function(){e.resize()}),this.swipe_events(d)},swipe_events:function(a){var b=this,c=b.S;c(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(a){a.touches||(a=a.originalEvent);var b={start_page_x:a.touches[0].pageX,start_page_y:a.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:d};c(this).data("swipe-transition",b),a.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(a){if(a.touches||(a=a.originalEvent),!(a.touches.length>1||a.scale&&1!==a.scale)){var d=c(this).data("swipe-transition");if("undefined"==typeof d&&(d={}),d.delta_x=a.touches[0].pageX-d.start_page_x,Foundation.rtl&&(d.delta_x=-d.delta_x),"undefined"==typeof d.is_scrolling&&(d.is_scrolling=!!(d.is_scrolling||Math.abs(d.delta_x)<Math.abs(a.touches[0].pageY-d.start_page_y))),!d.is_scrolling&&!d.active){a.preventDefault();var e=d.delta_x<0?"next":"prev";d.active=!0,b.nav(a,e)}}}).on("touchend.fndtn.clearing",".visible-img",function(a){c(this).data("swipe-transition",{}),a.stopPropagation()})},assemble:function(b){var c=b.parent();if(!c.parent().hasClass("carousel")){c.after('<div id="foundationClearingHolder"></div>');var d=c.detach(),e="";if(null!=d[0]){e=d[0].outerHTML;var f=this.S("#foundationClearingHolder"),g=c.data(this.attr_name(!0)+"-init"),h={grid:'<div class="carousel">'+e+"</div>",viewing:g.templates.viewing},i='<div class="clearing-assembled"><div>'+h.viewing+h.grid+"</div></div>",j=this.settings.touch_label;Modernizr.touch&&(i=a(i).find(".clearing-touch-label").html(j).end()),f.after(i).remove()}}},open:function(b,d,e){function f(){setTimeout(function(){this.image_loaded(m,function(){1!==m.outerWidth()||o?g.call(this,m):f.call(this)}.bind(this))}.bind(this),100)}function g(b){var c=a(b);c.css("visibility","visible"),i.css("overflow","hidden"),j.addClass("clearing-blackout"),k.addClass("clearing-container"),l.show(),this.fix_height(e).caption(h.S(".clearing-caption",l),h.S("img",e)).center_and_label(b,n).shift(d,e,function(){e.closest("li").siblings().removeClass("visible"),e.closest("li").addClass("visible")}),l.trigger("opened.fndtn.clearing")}var h=this,i=a(c.body),j=e.closest(".clearing-assembled"),k=h.S("div",j).first(),l=h.S(".visible-img",k),m=h.S("img",l).not(b),n=h.S(".clearing-touch-label",k),o=!1;a("body").on("touchmove",function(a){a.preventDefault()}),m.error(function(){o=!0}),this.locked()||(l.trigger("open.fndtn.clearing"),m.attr("src",this.load(b)).css("visibility","hidden"),f.call(this))},close:function(b,d){b.preventDefault();var e,f,g=function(a){return/blackout/.test(a.selector)?a:a.closest(".clearing-blackout")}(a(d)),h=a(c.body);return d===b.target&&g&&(h.css("overflow",""),e=a("div",g).first(),f=a(".visible-img",e),f.trigger("close.fndtn.clearing"),this.settings.prev_index=0,a("ul["+this.attr_name()+"]",g).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),e.removeClass("clearing-container"),f.hide(),f.trigger("closed.fndtn.clearing")),a("body").off("touchmove"),!1},is_open:function(a){return a.parent().prop("style").length>0},keydown:function(b){var c=a(".clearing-blackout ul["+this.attr_name()+"]"),d=this.rtl?37:39,e=this.rtl?39:37,f=27;b.which===d&&this.go(c,"next"),b.which===e&&this.go(c,"prev"),b.which===f&&this.S("a.clearing-close").trigger("click").trigger("click.fndtn.clearing")},nav:function(b,c){var d=a("ul["+this.attr_name()+"]",".clearing-blackout");b.preventDefault(),this.go(d,c)},resize:function(){var b=a("img",".clearing-blackout .visible-img"),c=a(".clearing-touch-label",".clearing-blackout");b.length&&(this.center_and_label(b,c),b.trigger("resized.fndtn.clearing"))},fix_height:function(a){var b=a.parent().children(),c=this;return b.each(function(){var a=c.S(this),b=a.find("img");a.height()>b.outerHeight()&&a.addClass("fix-height")}).closest("ul").width(100*b.length+"%"),this},update_paddles:function(a){a=a.closest("li");var b=a.closest(".carousel").siblings(".visible-img");a.next().length>0?this.S(".clearing-main-next",b).removeClass("disabled"):this.S(".clearing-main-next",b).addClass("disabled"),a.prev().length>0?this.S(".clearing-main-prev",b).removeClass("disabled"):this.S(".clearing-main-prev",b).addClass("disabled")},center_and_label:function(a,b){return this.rtl?(a.css({marginRight:-(a.outerWidth()/2),marginTop:-(a.outerHeight()/2),left:"auto",right:"50%"}),b.length>0&&b.css({marginRight:-(b.outerWidth()/2),marginTop:-(a.outerHeight()/2)-b.outerHeight()-10,left:"auto",right:"50%"})):(a.css({marginLeft:-(a.outerWidth()/2),marginTop:-(a.outerHeight()/2)}),b.length>0&&b.css({marginLeft:-(b.outerWidth()/2),marginTop:-(a.outerHeight()/2)-b.outerHeight()-10})),this},load:function(a){var b;return b="A"===a[0].nodeName?a.attr("href"):a.parent().attr("href"),this.preload(a),b?b:a.attr("src")},preload:function(a){this.img(a.closest("li").next()).img(a.closest("li").prev())},img:function(a){if(a.length){var b=new Image,c=this.S("a",a);c.length?b.src=c.attr("href"):b.src=this.S("img",a).attr("src")}return this},caption:function(a,b){var c=b.attr("data-caption");return c?a.html(c).show():a.text("").hide(),this},go:function(a,b){var c=this.S(".visible",a),d=c[b]();this.settings.skip_selector&&0!=d.find(this.settings.skip_selector).length&&(d=d[b]()),d.length&&this.S("img",d).trigger("click",[c,d]).trigger("click.fndtn.clearing",[c,d]).trigger("change.fndtn.clearing")},shift:function(a,b,c){var d,e=b.parent(),f=this.settings.prev_index||b.index(),g=this.direction(e,a,b),h=this.rtl?"right":"left",i=parseInt(e.css("left"),10),j=b.outerWidth(),k={};b.index()===f||/skip/.test(g)?/skip/.test(g)&&(d=b.index()-this.settings.up_count,this.lock(),d>0?(k[h]=-(d*j),e.animate(k,300,this.unlock())):(k[h]=0,e.animate(k,300,this.unlock()))):/left/.test(g)?(this.lock(),k[h]=i+j,e.animate(k,300,this.unlock())):/right/.test(g)&&(this.lock(),k[h]=i-j,e.animate(k,300,this.unlock())),c()},direction:function(a,b,c){var d,e=this.S("li",a),f=e.outerWidth()+e.outerWidth()/4,g=Math.floor(this.S(".clearing-container").outerWidth()/f)-1,h=e.index(c);return this.settings.up_count=g,d=this.adjacent(this.settings.prev_index,h)?h>g&&h>this.settings.prev_index?"right":h>g-1&&h<=this.settings.prev_index&&"left":"skip",this.settings.prev_index=h,d},adjacent:function(a,b){for(var c=b+1;c>=b-1;c--)if(c===a)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},off:function(){this.S(this.scope).off(".fndtn.clearing"),this.S(b).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,window,window.document),function(a){a.fn.extend({slimScroll:function(b){var c={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},d=a.extend(c,b);return this.each(function(){function c(b){if(j){var b=b||window.event,c=0;b.wheelDelta&&(c=-b.wheelDelta/120),b.detail&&(c=b.detail/3);var f=b.target||b.srcTarget||b.srcElement;a(f).closest("."+d.wrapperClass).is(v.parent())&&e(c,!0),b.preventDefault&&!u&&b.preventDefault(),u||(b.returnValue=!1)}}function e(a,b,c){u=!1;var e=a,f=v.outerHeight()-B.outerHeight();if(b&&(e=parseInt(B.css("top"))+a*parseInt(d.wheelStep)/100*B.outerHeight(),e=Math.min(Math.max(e,0),f),e=a>0?Math.ceil(e):Math.floor(e),B.css({top:e+"px"})),p=parseInt(B.css("top"))/(v.outerHeight()-B.outerHeight()),e=p*(v[0].scrollHeight-v.outerHeight()),c){e=a;var g=e/v[0].scrollHeight*v.outerHeight();g=Math.min(Math.max(g,0),f),B.css({top:g+"px"})}v.scrollTop(e),v.trigger("slimscrolling",~~e),h(),i()}function f(a){window.addEventListener?(a.addEventListener("DOMMouseScroll",c,!1),a.addEventListener("mousewheel",c,!1)):document.attachEvent("onmousewheel",c)}function g(){o=Math.max(v.outerHeight()/v[0].scrollHeight*v.outerHeight(),s),B.css({height:o+"px"});var a=o==v.outerHeight()?"none":"block";B.css({display:a})}function h(){if(g(),clearTimeout(m),p==~~p){if(u=d.allowPageScroll,q!=p){var a=0==~~p?"top":"bottom";v.trigger("slimscroll",a)}}else u=!1;return q=p,o>=v.outerHeight()?void(u=!0):(B.stop(!0,!0).fadeIn("fast"),void(d.railVisible&&A.stop(!0,!0).fadeIn("fast")))}function i(){d.alwaysVisible||(m=setTimeout(function(){d.disableFadeOut&&j||k||l||(B.fadeOut("slow"),A.fadeOut("slow"))},1e3))}var j,k,l,m,n,o,p,q,r="<div></div>",s=30,u=!1,v=a(this);if(v.parent().hasClass(d.wrapperClass)){var w=v.scrollTop();if(B=v.siblings("."+d.barClass),A=v.siblings("."+d.railClass),g(),a.isPlainObject(b)){if("height"in b&&"auto"==b.height){v.parent().css("height","auto"),v.css("height","auto");var x=v.parent().parent().height();v.parent().css("height",x),v.css("height",x)}else if("height"in b){var y=b.height;v.parent().css("height",y),v.css("height",y)}if("scrollTo"in b)w=parseInt(d.scrollTo);else if("scrollBy"in b)w+=parseInt(d.scrollBy);else if("destroy"in b)return B.remove(),A.remove(),void v.unwrap();e(w,!1,!0)}}else if(!(a.isPlainObject(b)&&"destroy"in b)){d.height="auto"==d.height?v.parent().height():d.height;var z=a(r).addClass(d.wrapperClass).css({position:"relative",overflow:"hidden",width:d.width,height:d.height});v.css({overflow:"hidden",width:d.width,height:d.height});var A=a(r).addClass(d.railClass).css({width:d.size,height:"100%",position:"absolute",top:0,display:d.alwaysVisible&&d.railVisible?"block":"none","border-radius":d.railBorderRadius,background:d.railColor,opacity:d.railOpacity,zIndex:90}),B=a(r).addClass(d.barClass).css({background:d.color,width:d.size,position:"absolute",top:0,opacity:d.opacity,display:d.alwaysVisible?"block":"none","border-radius":d.borderRadius,BorderRadius:d.borderRadius,MozBorderRadius:d.borderRadius,WebkitBorderRadius:d.borderRadius,zIndex:99}),C="right"==d.position?{
right:d.distance}:{left:d.distance};A.css(C),B.css(C),v.wrap(z),v.parent().append(B),v.parent().append(A),d.railDraggable&&B.bind("mousedown",function(b){var c=a(document);return l=!0,t=parseFloat(B.css("top")),pageY=b.pageY,c.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY,B.css("top",currTop),e(0,B.position().top,!1)}),c.bind("mouseup.slimscroll",function(a){l=!1,i(),c.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(a){return a.stopPropagation(),a.preventDefault(),!1}),A.hover(function(){h()},function(){i()}),B.hover(function(){k=!0},function(){k=!1}),v.hover(function(){j=!0,h(),i()},function(){j=!1,i()}),v.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(n=a.originalEvent.touches[0].pageY)}),v.bind("touchmove",function(a){if(u||a.originalEvent.preventDefault(),a.originalEvent.touches.length){var b=(n-a.originalEvent.touches[0].pageY)/d.touchScrollStep;e(b,!0),n=a.originalEvent.touches[0].pageY}}),g(),"bottom"===d.start?(B.css({top:v.outerHeight()-B.outerHeight()}),e(0,!0)):"top"!==d.start&&(e(a(d.start).position().top,null,!0),d.alwaysVisible||B.hide()),f(this)}}),this}}),a.fn.extend({slimscroll:a.fn.slimScroll})}(jQuery),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return a<10?"0"+a:a}function this_value(){return this.valueOf()}function quote(a){return rx_escapable.lastIndex=0,rx_escapable.test(a)?'"'+a.replace(rx_escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;c<f;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;c<f;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;d<c;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();
//# sourceMappingURL=tgstandalone_triton.min.js.map