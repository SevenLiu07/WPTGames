var __reflect=this&&this.__reflect||function(t,e,a){t.__class__=e,a?a.push(e):a=[e],t.__types__=t.__types__?a.concat(t.__types__):a},__extends=this&&this.__extends||function(t,e){function a(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)},wpt;!function(t){var e=function(e){function a(t){return e.call(this,t)||this}return __extends(a,e),a.getInstance=function(){return null==this._instance&&(this._instance=new a),this._instance},Object.defineProperty(a.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),a.prototype.setScreen=function(t){t&&(this._screen=t)},Object.defineProperty(a.prototype,"moudleManager",{get:function(){return void 0==this._moduleManager&&(this._moduleManager=new t.ModuleManager),this._moduleManager},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"gameManager",{get:function(){return void 0==this._gameManager&&(this._gameManager=new t.GameManager),this._gameManager},enumerable:!0,configurable:!0}),a}(egret.EventDispatcher);t.Context=e,__reflect(e.prototype,"wpt.Context")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"moduleStarter",{get:function(){return this._moduleStarter},enumerable:!0,configurable:!0}),t.prototype.setStarter=function(t){this._moduleStarter=t},t.prototype.init=function(){},t.prototype.clear=function(){},t}();t.Meditor=e,__reflect(e.prototype,"wpt.Meditor",["wpt.IMeditor"]);var a=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddHandler,e,!1),e.addEventListener(eui.UIEvent.COMPLETE,e.uiComplete,e,!1),e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.onAddHandler=function(t){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveHandler,this,!1),this._isOnAddtoStage=!0,this._initUIComplete&&this.onAdd()},e.prototype.uiComplete=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplete,this,!1),this._initUIComplete=!0,this._isOnAddtoStage&&this.onAdd()},e.prototype.onRemoveHandler=function(t){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveHandler,this,!1),this._isOnAddtoStage=!1,this.onRemove()},e.prototype.onAdd=function(){},e.prototype.onRemove=function(){},e.prototype.setUIState=function(t){this.currentState!=t&&(this.currentState=t)},e}(eui.Component);t.View=a,__reflect(a.prototype,"wpt.View",["eui.UIComponent","egret.DisplayObject","wpt.IView"]);var i=function(e){function a(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddHandler,t,!1),t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t,!1),t}return __extends(a,e),a.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a)},a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},a.prototype.onAddHandler=function(t){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveHandler,this,!1),this._isOnAddtoStage=!0,this._initUIComplete&&this.onAdd()},a.prototype.uiComplete=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplete,this,!1),this._initUIComplete=!0,this._isOnAddtoStage&&this.onAdd()},a.prototype.onRemoveHandler=function(t){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveHandler,this,!1),this._isOnAddtoStage=!1,this.onRemove()},a.prototype.onAdd=function(){},a.prototype.onRemove=function(){},a.prototype.dispatch=function(e){return t.Context.getInstance().dispatchEvent(e)},a}(eui.ItemRenderer);t.ItemRenderView=i,__reflect(i.prototype,"wpt.ItemRenderView",["wpt.IView"])}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){t[t.Modal=0]="Modal",t[t.Modeless=1]="Modeless",t[t.Panel=2]="Panel"}(e=t.DialogType||(t.DialogType={}));var a=function(a){function i(){return a.call(this)||this}return __extends(i,a),i.prototype.setType=function(t){this._type=t},i.prototype.getType=function(){return this._type},i.prototype.isModal=function(){return this._type==e.Modal||this._type==e.Panel},i.prototype.remove=function(){t.DisplayUtil.remove(this)},i.prototype.setCallback=function(t,e,a){return void 0===t&&(t=null),void 0===e&&(e=null),void 0===a&&(a=null),this.onConfirm=null==t?this.onConfirm:t,this.onCancel=null==e?this.onCancel:e,this.onTimeout=null==a?this.onTimeout:a,this},i.prototype.confirm=function(t){void 0===t&&(t=null),this.remove(),this.callback(this.onConfirm)},i.prototype.cancel=function(t){void 0===t&&(t=null),this.remove(),this.callback(this.onCancel)},i.prototype.onAdd=function(){a.prototype.onAdd.call(this),this.delay>0&&(this.timeOutID=egret.setTimeout(this.onTimerComplete,this,this.delay))},i.prototype.onRemove=function(){a.prototype.onRemove.call(this),this.delay>0&&egret.clearTimeout(this.timeOutID),this.timeOutID=0,this.onConfirm=null,this.onCancel=null,this.onTimeout=null,this.data=null,this.delay=0},i.prototype.onTimerComplete=function(){this.callback(this.onTimeout),this.remove()},i.prototype.callback=function(t){null!=t&&(null==this.data?t.call(this):t.call(this,this.data))},i}(t.View);t.Dialog=a,__reflect(a.prototype,"wpt.Dialog")}(wpt||(wpt={}));var wpt;!function(t){function e(e,a,i,n){if(void 0===n&&(n=0),a.prototype.__class__){var o=new a;t.$commandDict[e]||(t.$commandDict[e]={}),t.$commandDict[e][a.prototype.__class__]=o,t.Context.getInstance().addEventListener(e,o.execute,o,!1,n)}else t.Context.getInstance().addEventListener(e,a,i,!1,n)}function a(e,a,i){if(a.prototype.__class__){t.$commandDict;t.$commandDict[e]&&t.$commandDict[e][a.prototype.__class__]&&(t.$commandDict[e][a.prototype.__class__].destory(),t.$commandDict[e][a.prototype.__class__]=null,delete t.$commandDict[e][a.prototype.__class__])}else t.Context.getInstance().removeEventListener(e,a,i,!1)}function i(e){return t.Context.getInstance().hasEventListener(e)}function n(e){return t.Context.getInstance().dispatchEvent(e)}function o(e,a,i){t.Context.getInstance().gameManager.registerTimer(e,a,i)}function r(e,a){t.Context.getInstance().gameManager.unRegisterTimer(e,a)}function s(){t.Context.getInstance().gameManager.clearTimers()}function l(e,a){t.Context.getInstance().gameManager.registerEnterFrame(e,a)}function h(e,a){t.Context.getInstance().gameManager.unRegisterEnterFrame(e,a)}function c(){t.Context.getInstance().gameManager.clearAllEnterFrame()}var u=function(){function t(){}return Object.defineProperty(t.prototype,"screen",{get:function(){return t._context.screen},enumerable:!0,configurable:!0}),t.prototype.loadModule=function(e){t._context.moudleManager&&t._context.moudleManager.loadModule(e)},t.prototype.unloadModule=function(e){t._context.moudleManager&&t._context.moudleManager.unloadModule(e)},t}();u._context=t.Context.getInstance(),t.Actor=u,__reflect(u.prototype,"wpt.Actor");var p=function(){function t(){}return t.prototype.execute=function(t){},t.prototype.destory=function(){},t}();t.BaseSimpleCommand=p,__reflect(p.prototype,"wpt.BaseSimpleCommand",["wpt.ICommand"]),t.$commandDict={},t.addCommand=e,t.removeCommand=a,t.hasCommand=i,t.dispatch=n,t.registerTimer=o,t.unRegisterTimer=r,t.clearTimers=s,t.registerEnterFrame=l,t.unRegisterEnterFrame=h,t.clearAllEnterFrame=c}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){this.init()}return t.prototype.init=function(){},t.prototype.clear=function(){},t}();t.Controller=e,__reflect(e.prototype,"wpt.Controller")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.init_complete=!1,t.meditors=[],t}return __extends(a,e),Object.defineProperty(a.prototype,"manager",{get:function(){return this._manager},enumerable:!0,configurable:!0}),a.prototype.start=function(){this.init_complete?this.view&&t.DisplayUtil.addChildAt(this.screen.uiLayout,this.view,this._zindex):(this.init_complete=!0,this.initOnce()),this.initListeners()},a.prototype.clear=function(){this.removeListeners(),this.removeAllMeditor(),t.DisplayUtil.remove(this._view),this._manager=null},a.prototype.initOnce=function(){},a.prototype.initListeners=function(){},a.prototype.removeListeners=function(){},a.prototype.addTopView=function(t,e,a){void 0===e&&(e=0),void 0===a&&(a=0),this.addView(t,this.screen.uiLayout.numChildren,e,a)},a.prototype.addBottomView=function(t,e,a){void 0===e&&(e=0),void 0===a&&(a=0),this.addView(t,0,e,a)},a.prototype.addView=function(e,a,i,n){void 0===i&&(i=0),void 0===n&&(n=0),e.x=i,e.y=n,this._zindex=a,t.isempty(this._view)&&(this._view=e),t.DisplayUtil.addChildAt(this.screen.uiLayout,e,a)},Object.defineProperty(a.prototype,"view",{get:function(){return this._view},set:function(t){this._view=t},enumerable:!0,configurable:!0}),a.prototype.addMeditor=function(t){-1==this.meditors.indexOf(t)&&(this.meditors.push(t),t.setStarter(this),t.init())},a.prototype.removeMeditor=function(t){var e=this.meditors.indexOf(t);-1!=e&&(this.meditors.splice(e,1),t.clear())},a.prototype.removeAllMeditor=function(){for(var t=this.meditors.length-1;t>=0;t--)this.removeMeditor(this.meditors[t])},a}(t.Actor);t.ModuleStarter=e,__reflect(e.prototype,"wpt.ModuleStarter")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(e,a){var i=t.call(this,e,!1,!0,a)||this;return i.data=a,i}return __extends(e,t),e}(egret.Event);t.BaseEvent=e,__reflect(e.prototype,"wpt.BaseEvent")}(wpt||(wpt={}));var wpt;!function(t){function e(t,e){var a=o[t];if(!a){var i=RES.getRes(t);if(!i)return null;a=dcodeIO.ProtoBuf.loadProto(i),o[t]=a}return a?a.build(e):null}function a(t,a,i){var n=e(t,a);return i?n.decode(i):new n}var i=function(){function a(t){this.socket=t,this.cast={},this._protoName=this.socket.getProto()}return a.prototype.process=function(t){return null},a.prototype.send=function(t,e){void 0===e&&(e=null),this.socket.connected&&this.socket.send(t,e)},a.prototype.register=function(e){for(var a in this.cast)e[a]?t.log.error("协议号重复 --- ["+a+"] 已经存在"):e[a]=this.cast[a];this.cast=null},a.prototype.getProtoClassObj=function(t,a){var i=e(this._protoName,t);return a?i.decode(a):new i},Object.defineProperty(a.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),a}();t.BaseMessageProcessor=i,__reflect(i.prototype,"wpt.BaseMessageProcessor",["wpt.IMessageProcessor"]);var n=function(){function e(){this.processDataHandler={},this.heartbeatHandle=0,this.TimeDelay=0,this.messageParse=t.MessagePrase.Instance,this.init()}return e.prototype.init=function(){this.SocketServiceName=egret.getQualifiedClassName(this),this.client=new t.BaseSocket,this.client.resolver=new t.OGDataResolver,this.client.handler=this},e.prototype.setHeartBeat=function(t){this.heartbeatHandle>0&&(clearInterval(this.heartbeatHandle),this.heartbeatHandle=0),this.TimeDelay=t,this.heartbeatHandle=setInterval(this.HEART_BEAT.bind(this),t)},e.prototype.HEART_BEAT=function(t){void 0===t&&(t=null)},e.prototype.setProto=function(t){this.protoName=t},e.prototype.getProto=function(){return this.protoName},e.prototype.setDataResolver=function(t){this.client.resolver=t},e.prototype.registerMsg=function(t){t.register(this.processDataHandler)},e.prototype.resetHeartbeat=function(){this.heartbeatHandle>0&&clearInterval(this.heartbeatHandle),this.heartbeatHandle=setInterval(this.HEART_BEAT.bind(this),this.TimeDelay)},e.prototype.stopHeartbeat=function(){this.heartbeatHandle>0&&(clearInterval(this.heartbeatHandle),this.heartbeatHandle=0)},e.prototype.onConnect=function(){t.log.info(this.SocketServiceName+" Socket "+this.client.host+" 已连接。"),this.connected=!0,this.notify(t.SocketEvent.CONNECT_SUCCESS(this)),this.resetHeartbeat()},e.prototype.onIoError=function(){t.log.error(this.SocketServiceName+" Socket "+this.client.host+" 连接失败！"),this.connected=!1,this.notify(t.SocketEvent.CONNECT_ERROR(this))},e.prototype.onSecurityError=function(){t.log.error(this.SocketServiceName+" Socket "+this.client.host+" 安全策略连接失败！"),this.connected=!1,this.notify(t.SocketEvent.CONNECT_ERROR(this))},e.prototype.getMsgName=function(t){return this.messageParse?this.messageParse.getMsgName(t):t},e.prototype.onFlush=function(e){t.log.debug(this.SocketServiceName+" Socket "+this.client.host+" 发送数据：",this.getMsgName(e.type.toString(16))),t.ReportLog.getInstance().sendProtocol(e.type),this.notify(t.SocketEvent.FLUSH(this,e.type),e)},e.prototype.onRecive=function(e){t.log.debug(this.SocketServiceName+" Socket "+this.client.host+" 接收数据：",this.getMsgName(e.type.toString(16))),t.ReportLog.getInstance().reciveProtocol(e.type),this.notify(t.SocketEvent.RECIVED(this,e.type),this.process(e))},e.prototype.onClose=function(){t.log.info(this.SocketServiceName+" Socket "+this.client.host+" 关闭连接。"),this.connected=!1,this.notify(t.SocketEvent.CLOSED(this))},e.prototype.onDisconnect=function(){t.log.warn(this.SocketServiceName+" Socket "+this.client.host+" 已被断开！"),this.connected=!1,this.resetHeartbeat(),this.notify(t.SocketEvent.DISCONNECT(this))},e.prototype.connect=function(e){this.client.connected&&this.client.close(),t.log.info(this.SocketServiceName+" Socket connect "+e),this.client.connectByUrl(e)},e.prototype.send=function(e,a){var i;a?(i=new egret.ByteArray(a.toArrayBuffer()),i.endian=egret.Endian.LITTLE_ENDIAN):i=new egret.ByteArray,this.client.send(new t.OGDataPack(e,0,i))},e.prototype.close=function(){this.client.close(),this.stopHeartbeat()},e.prototype.process=function(e){var i=null;return this.processDataHandler[e.type]?"string"==typeof this.processDataHandler[e.type]?i="ByteArray"==this.processDataHandler[e.type]?e.body.buffer:a(this.protoName,this.processDataHandler[e.type],e.body.buffer):"function"==typeof this.processDataHandler[e.type]?i=this.processDataHandler[e.type](e):t.log.warn("收到未处理的消息"," 0x"+this.getMsgName(e.type.toString(16))):t.log.warn("收到未处理的消息"," 0x"+this.getMsgName(e.type.toString(16))),i&&t.log.debug(i),i},e.prototype.notify=function(e,a){a?t.Context.getInstance().dispatchEvent(new t.SocketEvent(e,a)):t.Context.getInstance().dispatchEvent(new t.SocketEvent(e,null))},e}();t.SocketService=n,__reflect(n.prototype,"wpt.SocketService",["wpt.ISocketHandler","wpt.ISocketProcessor","wpt.IMessageProcessor"]);var o={};t.getProtoClass=e,t.getProtoClassObj=a}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){var e=t.call(this)||this;return e.isBack=!1,e}return __extends(a,t),a.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.setBackCard(),this.init()},a.prototype.init=function(){this._cardVO=new e.CardVO},a.prototype.setBackCard=function(){this.pokerImg.source="poker0053_png",this.isBack=!0},Object.defineProperty(a.prototype,"cardVO",{get:function(){return this._cardVO},set:function(t){this._cardVO=t},enumerable:!0,configurable:!0}),a.prototype.setCardData=function(t,e){52==t?this.setBackCard():(this.isBack=!1,this._cardVO.value=t,this._cardVO.color=e,this._mergeCard=t+13*e+1,this._mergeStr=this._mergeCard<10?"0"+this._mergeCard:this._mergeCard.toString(),this.pokerImg.source="poker00"+this._mergeStr+"_png")},a}(t.View);a.TYPE_PLAYER=0,a.TYPE_PUBLIC=1,a.TYPE_MY=2,e.Poker=a,__reflect(a.prototype,"wpt.play.table.Poker")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var a=e.call(this)||this;return a._isBgMask=!0,a.setType(t.DialogType.Panel),a}return __extends(a,e),a.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a)},a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.closeBtn&&this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},a.prototype.closeBtnClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.hide()},a.prototype.show=function(){t.DisplayUtil.addChild(t.Context.getInstance().screen.panelLayout,this),t.AlignUtil.alginScreenCenter(this),this._isBgMask&&t.isempty(this._bg)&&this.createBgMask()},a.prototype.hide=function(){this.remove()},Object.defineProperty(a.prototype,"isBgMask",{set:function(t){this._isBgMask=t},enumerable:!0,configurable:!0}),a.prototype.createBgMask=function(){this._bg=new egret.Shape,this._bg.graphics.beginFill(0,.8),this._bg.graphics.drawRect(0,0,t.Screen.WIN_WIDTH,t.Screen.WIN_HEIGHT),this._bg.graphics.endFill(),this._bg.touchEnabled=!0,this._bg.x=-(t.Screen.WIN_WIDTH-this.width)/2,this._bg.y=-(t.Screen.WIN_HEIGHT-this.height)/2,this.addChildAt(this._bg,0)},a}(t.Dialog);t.BasePanel=e,__reflect(e.prototype,"wpt.BasePanel",["wpt.IPanel"])}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._SCROLL_DIS=10,e._DIS=0,e.privViewportContentH=-1,e.cont=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.sPos=new egret.Point,this.verticalScrollBar.touchEnabled=!0,this.verticalScrollBar.touchChildren=!0,this.btnUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpBind,this),this.btnDown.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDownBind,this),this.verticalScrollBar.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBarBegin,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this)},e.prototype.clear=function(){this.btnUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpBind,this),this.btnDown.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDownBind,this),this.verticalScrollBar.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBarBegin,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this),this.onBarEnd(null)},e.prototype.onMouseOver=function(t){mouse.addMouseWheelListener(this.onWheelHandler,this)},e.prototype.onMouseOut=function(t){mouse.removeMouseWheelListener()},e.prototype.onWheelHandler=function(t){t==mouse.MouseWheel_UP?this.onUpBind(null):t==mouse.MouseWheel_DOWN&&this.onDownBind(null)},e.prototype.onBarBegin=function(t){this.stopAnimation(),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onBarMove,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onBarEnd,this),this.sPos.setTo(t.stageX,t.stageY)},e.prototype.onBarEnd=function(t){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onBarMove,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onBarEnd,this)},e.prototype.onUpBind=function(t){this.viewport&&(this.stopAnimation(),this.viewport.scrollV+=this.testPos(-this.SCROLL_DIS))},e.prototype.onDownBind=function(t){this.viewport&&(this.stopAnimation(),this.viewport.scrollV+=this.testPos(this.SCROLL_DIS))},e.prototype.onBarMove=function(t){if(this.viewport){var e=new egret.Point(t.stageX,t.stageY),a=e.y-this.sPos.y,i=(this.viewport.contentHeight-this.height)*a/(this.verticalScrollBar.height-this.verticalScrollBar.thumb.height);this.viewport.scrollV+=this.testPos(i),this.sPos.setTo(t.stageX,t.stageY)}},e.prototype.testPos=function(t){return this.viewport.scrollV+t+this.height>=this.viewport.contentHeight?this.viewport.contentHeight-(this.viewport.scrollV+this.height):this.viewport.scrollV+t<=0?-this.viewport.scrollV:t},e.prototype.updateDisplayList=function(e,a){t.prototype.updateDisplayList.call(this,e,a),this.resiteVBar(),this.onPortResize()},e.prototype.onPortResize=function(){if(this.viewport&&(this.viewport.validateNow(),this.viewport.contentHeight!=this.privViewportContentH)){this.privViewportContentH=this.viewport.contentHeight;var t=this.$Scroller[10],e=t.$UIComponent;t.contentHeight>e[11]||0!==t.scrollV?this.setBarAndBtnVisible(!0):this.setBarAndBtnVisible(!1),this.resetPos()}},e.prototype.reSize=function(){},e.prototype.resetPos=function(){this.viewport&&(this.viewport.scrollV=0)},e.prototype.resiteVBar=function(){this.verticalScrollBar.height=this.height-this.btnUp.height-this.btnUp.y-this.btnDown.height-(this.height-this.btnDown.y-this.btnDown.height)-this.DIS-this.DIS,this.verticalScrollBar.y=this.btnUp.y+this.btnUp.height+this.DIS},e.prototype.setBarAndBtnVisible=function(t){this.btnUp.visible=t,this.btnDown.visible=t,this.verticalScrollBar.visible=t,t?(this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this)):(this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this))},e.prototype.setPosToBottom=function(){this.viewport.validateNow(),this.viewport.scrollV=this.viewport.contentHeight-this.height},Object.defineProperty(e.prototype,"SCROLL_DIS",{get:function(){return this._SCROLL_DIS},set:function(t){this._SCROLL_DIS=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DIS",{get:function(){return this._DIS},set:function(t){this._DIS=t},enumerable:!0,configurable:!0}),e}(eui.Scroller);t.WebVScollbar=e,__reflect(e.prototype,"wpt.WebVScollbar",["eui.UIComponent","egret.DisplayObject"])}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t.prototype.init=function(t){},t.prototype.start=function(){},t}();t.IPlatform=e,__reflect(e.prototype,"wpt.IPlatform")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){this.cast={}}return e.prototype.post=function(t,e){a.POST(t,e,this.completeHandler.bind(this),this.errorHandler.bind(this),this.progressHander.bind(this))},e.prototype.get=function(t,e){a.GET(t,e,this.completeHandler.bind(this),this.errorHandler.bind(this),this.progressHander.bind(this))},e.prototype.postByJS=function(t,e){a.POST_BY_JS(t,e,this.jsCompleteHandler.bind(this),this.jsCompleteHandler.bind(this),this.jsErrorHandler.bind(this))},e.prototype.getByJS=function(t,e){a.GET_BY_JS(t,e,this.jsCompleteHandler.bind(this),this.jsCompleteHandler.bind(this),this.jsErrorHandler.bind(this))},e.prototype.completeHandler=function(t){this.notify(t._url,this.process(t))},e.prototype.errorHandler=function(e){t.log.error(e)},e.prototype.jsCompleteHandler=function(t){this.notify(t._url,t)},e.prototype.jsErrorHandler=function(e){t.log.error("jsHttp请求失败"+e._url)},e.prototype.progressHander=function(t){},e.prototype.process=function(t){return JSON.parse(t.response)},e.prototype.processJSHttp=function(t){return JSON.parse(t)},e.prototype.notify=function(e,a){var i=e.split("?")[0];a?t.Context.getInstance().dispatchEvent(new t.HttpEvent(i,a)):t.Context.getInstance().dispatchEvent(new t.HttpEvent(i,null))},e}();t.BaseHttpProcessor=e,__reflect(e.prototype,"wpt.BaseHttpProcessor");var a=function(){function e(t,e,a){void 0===t&&(t=null),void 0===e&&(e=null),void 0===a&&(a=null),this.callbackComplete=t,this.callbackError=e,this.callbackProgress=a}return e.REQUEST=function(t,a,i,n,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),new e(i,n,o).call(t,a)},e.GET=function(a,i,n,o,r){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null),t.log.debug("---------------------------------------------------------------通过游戏发送GET请求："+a),null!=a&&""!=a){var s=new egret.HttpRequest;if(null!=i){var l=!1;a+="?";for(var h in i)l?a+="&"+h+"="+i[h]:(l=!0,a+=h+"="+i[h]);a+="&_="+egret.getTimer()}s.responseType=egret.HttpResponseType.TEXT,s.open(a,egret.HttpMethod.GET),e.REQUEST(s,null,n,o,r)}},e.POST=function(a,i,n,o,r){if(void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null),t.log.debug("---------------------------------------------------------------通过游戏发送POST请求："+a),null!=a&&""!=a){var s=new egret.HttpRequest;s.open(a,egret.HttpMethod.POST),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.REQUEST(s,i,n,o,r)}},e.GET_BY_JS=function(a,i,n,o,r){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null),null!=a&&""!=a){var s;s=e.testIsCross(a)?{xhrFields:{withCredentials:!0},crossDomain:!0}:{xhrFields:{withCredentials:!0},crossDomain:!0},t.log.debug("---------------------------------------------------------------通过JS发送GET请求："+a+"  是否跨域："+s.crossDomain+"  data:"+i),t.play.js.httpGet(a,s,i,n,o,r)}},e.POST_BY_JS=function(a,i,n,o,r){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null),null!=a&&""!=a){var s;s=e.testIsCross(a)?{xhrFields:{withCredentials:!0},crossDomain:!0}:{xhrFields:{withCredentials:!0},crossDomain:!0},t.log.debug("---------------------------------------------------------------通过JS发送POST请求："+a+"  是否跨域："+s.crossDomain+"  data:"+i),t.play.js.httpPost(a,s,i,n,o,r)}},e.testIsCross=function(t){var e=window.location.host,a="",i=e+(""==a?"":":"+a),n=t.split("/")[2];return i!=n},e.prototype.call=function(t,e){this.loader=t,this.loader.addEventListener(egret.Event.COMPLETE,this.onComplete,this,!1),this.loader.addEventListener(egret.ProgressEvent.PROGRESS,this.onProgress,this,!1),this.loader.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this,!1),null!=e?this.loader.send(e):this.loader.send("")},e.prototype.onComplete=function(t){var e=t.currentTarget;null!=this.callbackComplete&&this.callbackComplete(e)},e.prototype.onProgress=function(t){null!=this.callbackProgress&&this.callbackProgress(t)},e.prototype.onError=function(t){null!=this.callbackError&&this.callbackError(t)},e}();__reflect(a.prototype,"HttpUtil")}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),Object.defineProperty(a.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),a.prototype.start=function(){this._isPlaying=!0,t.Context.getInstance().gameManager.registerEnterFrame(this.enterframe,this)},a.prototype.reset=function(){},a.prototype.stop=function(){this._data=null,this._isPlaying=!1,t.Context.getInstance().gameManager.unRegisterEnterFrame(this.enterframe,this)},a.prototype.enterframe=function(){},a.prototype.setdata=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];this._data=t},a}(eui.Group);e.BaseEffect=a,__reflect(a.prototype,"wpt.play.table.BaseEffect",["wpt.play.table.ITableEffect"])}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.isPlayFanPaiMovie=!1,t.pokerVis=!0,t._scaleXY=1,t._dir="front",t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.configUI()},i.prototype.configUI=function(){this.playerMasker.visible=!1,this.nameTxtTip=new t.TextFieldTips,this.nameTxtTip.setTextField(this.nameTxt,10),this.giftBtn.visible=!1,this.removeChild(this.giftIcon),this.giftIcon.touchEnabled=!1},i.prototype.measure=function(){a.prototype.measure.call(this)},i.prototype.onAdd=function(){a.prototype.onAdd.call(this)},i.prototype.onRemove=function(){a.prototype.onRemove.call(this)},i.prototype.sendTableGift=function(){t.dispatch(new e.TableEvent(e.TableEvent.POPUP_TABLEGIFT,this._roleName))},Object.defineProperty(i.prototype,"scaleXY",{get:function(){return this._scaleXY},set:function(t){this._scaleXY=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dir",{get:function(){return this._dir},set:function(t){this._dir=t},enumerable:!0,configurable:!0}),i.prototype.setState=function(t){this.currentState!=t&&(this.currentState=t)},i.prototype.setHandState=function(t){this.playerHand.currentState!=t&&(this.playerHand.currentState=t)},i.prototype.setSeat=function(e){this.seatNum=e,this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onPlayerOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onPlayerOut,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPlayerClick,this),t.isempty(this.giftIcon.parent)&&t.Context.getInstance().screen.stage.addChild(this.giftIcon),this.giftIcon.visible=!1,mouse.setMouseMoveEnabled(!0),this.addEventListener(mouse.MouseEvent.MOUSE_MOVE,this.onPlayerOver,this)},i.prototype.onPlayerClick=function(){this.sendTableGift()},i.prototype.resetGiftIcon=function(){},i.prototype.onPlayerOver=function(t){var e=this.globalToLocal(t.stageX,t.stageY);return e.y>260||e.x>165||e.x<5?void(this.giftIcon.visible=!1):(this.giftIcon.x=t.stageX-this.giftIcon.width/2+5,this.giftIcon.y=t.stageY-this.giftIcon.height/2+5,void(this.giftIcon.visible=!0))},i.prototype.onPlayerOut=function(t){this.giftIcon.visible=!1},i.prototype.setChipView=function(t){this.chip=t},i.prototype.setHandView=function(t){this.playerHand=t,this.playerHand.touchEnabled=!1,this.playerHand.touchChildren=!1,this.poker1=this.playerHand.poker1,this.poker2=this.playerHand.poker2,this.showPoker1=this.playerHand.showPoker1,this.showPoker2=this.playerHand.showPoker2,this.playerHandImg=this.playerHand.playerHandImg,this.poker1.type=e.Poker.TYPE_PLAYER,this.poker2.type=e.Poker.TYPE_PLAYER,this.showPoker1.type=e.Poker.TYPE_PLAYER,this.showPoker2.type=e.Poker.TYPE_PLAYER,this.defaultShowPoker1Y=this.showPoker1.y,this.defaultShowPoker2Y=this.showPoker2.y},i.prototype.visHandCard=function(t){this.pokerVis=t,this.poker1.visible=this.poker2.visible=t,this.showPoker1.visible=this.showPoker2.visible=t},i.prototype.visShowCard=function(t){this.showPoker1.visible=this.showPoker2.visible=t},i.prototype.visCardBack=function(t){this.poker1.visible=this.poker2.visible=t},i.prototype.setHandData=function(t,a,i,n,o){void 0===o&&(o=!0),e.log.debug("设置了手牌:index",t,"value",a,"color",i,"是否显牌",n),this.showPoker1.parent&&(52!=a&&n?(this.poker1.visible=this.poker2.visible=!1,this.showPoker1.visible=this.showPoker2.visible=!0,this.showPoker1.parent.getChildIndex(this.showPoker1)>this.showPoker2.parent.getChildIndex(this.showPoker2)&&this.showPoker1.parent.swapChildren(this.showPoker1,this.showPoker2),0==t?this.showPoker1.setCardData(a,i):this.showPoker2.setCardData(a,i)):(this.poker1.setBackCard(),this.poker2.setBackCard(),this.poker1.visible=this.poker2.visible=!0,this.showPoker1.visible=this.showPoker2.visible=!1),o&&this.resetHandPos())},i.prototype.initHandCard=function(){this.poker1.filters=null,this.poker2.filters=null,this.resetHandPos()},i.prototype.resetHandPos=function(){this.showPoker1.y=this.defaultShowPoker1Y,this.showPoker2.y=this.defaultShowPoker2Y},i.prototype.resetChipPos=function(){},i.prototype.setIcon=function(e){t.isempty(e)||(this.currentState==i.STATE_DEALER?(this.playerImg.source=e+"_json."+i.ROLE_FRONT,this.playerHandImg.source=e+"_json."+i.ROLE_HAND_FRONT):this.dir==i.DIR_LEFT?(this.playerImg.source=e+"_json."+i.ROLE_LEFT,this.playerHandImg.source=e+"_json."+i.ROLE_HAND_LEFT):this.dir==i.DIR_RIGHT?(this.playerImg.source=e+"_json."+i.ROLE_LEFT,this.playerHandImg.source=e+"_json."+i.ROLE_HAND_LEFT):(this.playerImg.source=e+"_json."+i.ROLE_FRONT,this.playerHandImg.source=e+"_json."+i.ROLE_HAND_FRONT))},i.prototype.draw=function(){var t=new egret.Shape;t.graphics.beginFill(16776960,.5),t.graphics.drawRect(0,0,this.width,this.height),t.graphics.endFill(),this.addChild(t)},i.prototype.changGold=function(e){this.moneyTxt.text=t.DealMoneyUtil.getStrCommonByCnt(e,9)},i.prototype.setChips=function(t){0==t?this.chip.visible=!1:(this.chip.visible=!0,this.chip.setChip(t))},i.prototype.visChip=function(t){this.chip&&(this.chip.visible=t)},i.prototype.foldCard=function(a){this.state!=e.TableConst.STATE_SETTINGOUT||a||(a=!0),t.ColorUtil.setColorState(this.playerImg,a?t.ColorUtil.HALFLOWLIGHT:t.ColorUtil.DEFAULT),t.ColorUtil.setColorState(this.playerHand,a?t.ColorUtil.HALFLOWLIGHT:t.ColorUtil.DEFAULT)},i.prototype.setOperationState=function(t){this.state=t,null==t||""==t?(this.stateImg.source="",this.nameTxt.visible=!0,this.stateBG.visible=!1,this.specialClose()):(this.stateImg.source="table_seat_state_"+t+"_png",this.nameTxt.visible=!1,this.stateBG.visible=!0,this.specialShowName())
},i.prototype.specialShowName=function(){this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onNameConOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onNameConOut,this)},i.prototype.specialClose=function(){this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onNameConOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onNameConOut,this),this.stateImg.visible=!0},i.prototype.onNameConOver=function(t){""!=this.stateImg.source&&(this.stateImg.visible=!1,this.nameTxt.visible=!0,this.stateBG.visible=!1)},i.prototype.onNameConOut=function(t){""!=this.stateImg.source&&(this.stateImg.visible=!0,this.nameTxt.visible=!1,this.stateBG.visible=!0)},i.prototype.setShowName=function(t){this.nameTxt.text=t,this.nameTxtTip.setTxt(t)},i.prototype.getCard=function(t){return 0==t?this.showPoker1:this.showPoker2},i.prototype.getCardBack=function(t){return 0==t?this.poker1:this.poker2},i.prototype.showTime=function(){this.setFilterDefault()},i.prototype.hideTime=function(){},i.prototype.setFilterDefault=function(){t.ColorUtil.setColorState(this.playerImg,t.ColorUtil.DEFAULT),t.ColorUtil.setColorState(this.playerHand,t.ColorUtil.DEFAULT)},i.prototype.setMasker=function(t){t?this.playerImg.mask=this.playerMasker:this.playerImg.mask=null},Object.defineProperty(i.prototype,"roleName",{get:function(){return this._roleName},set:function(t){this._roleName=t},enumerable:!0,configurable:!0}),i.prototype.resite=function(){this.specialClose(),this.setShowName(""),this.roleName="",this.setOperationState(""),this.hideTime(),this.setChips(0),this.visChip(!1),this.setVisible(!1),this.poker1.visible=this.poker2.visible=!1,this.showPoker1.visible=!1,this.showPoker2.visible=!1,this.hasEventListener(mouse.MouseEvent.MOUSE_OVER)&&this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onPlayerOver,this),this.hasEventListener(mouse.MouseEvent.MOUSE_OUT)&&this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onPlayerOut,this),this.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onPlayerClick,this),this.hasEventListener(mouse.MouseEvent.MOUSE_MOVE)&&this.removeEventListener(mouse.MouseEvent.MOUSE_MOVE,this.onPlayerOver,this),mouse.setMouseMoveEnabled(!1),t.isempty(this.giftIcon.parent)||this.giftIcon.parent.removeChild(this.giftIcon),this.giftBtn.visible=!1},i.prototype.setVisible=function(t){this.visible=t,this.playerHand.visible=t},i}(t.View);a.STATE_CHAIR="STATE_CHAIR",a.STATE_PLAYER="STATE_PLAYER",a.STATE_DEALER="STATE_DEALER",a.STATE_PLAYER_FRONT70="STATE_PLAYER_FRONT70",a.STATE_PLAYER_LEFT="STATE_PLAYER_LEFT",a.STATE_PLAYER_RIGHT="STATE_PLAYER_RIGHT",a.DIR_FRONT="front",a.DIR_LEFT="left",a.DIR_RIGHT="right",a.DEFAULT_ROLE="1001",a.DEFAULT_DEALER_ROLE="dealer",a.ROLE_FRONT="role_front",a.ROLE_HAND_FRONT="role_hand_front",a.ROLE_LEFT="role_left",a.ROLE_HAND_LEFT="role_hand_left",a.ROLE_HEAD="role_head",a.ROLE_FINGER_1="role_finger_1",a.ROLE_FINGER_2="role_finger_2",e.Player=a,__reflect(a.prototype,"wpt.play.table.Player")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=a.TableData.gameinfo,r=a.TableData.userData,s=n.seatMeditor,l=i.data;a.log.debug("收到玩家让牌消息。坐位：",l.Seat),s.removeTime();var h=r.getUserByName(r.currentName),c=r.getUserByServerseat(l.Seat);if(h&&c){var u=o.getGameInfo().maxPlayer;if(t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_CHECK),-1!=l.NextSeat){var p=s.serverSeatTouiSeat(l.NextSeat,h.serverSeat,u),d=r.getUserByUIseat(p);s.setOverTime(p,o.getGameInfo().actionTime),d&&0==d.manipulateState&&s.changState(p,"")}c.isOperate=!0;var m=s.serverSeatTouiSeat(l.Seat,h.serverSeat,u);s.changState(m,a.TableConst.STATE_CHECK);var _=h.serverSeat,T=t.int64To32(l.pool),g=t.int64To32(l.MinRaise);if(n.dealerMeditor.setPool(T),o.getGameInfo().pool=T,o.getGameInfo().minRaise=g,l.Seat==h.serverSeat&&n.operMeditor.showPreBtnByType(!1),!h.isObserver&&!(h.isSqueezedOut||h.isFload||h.isOperate||0==h.goldNum||h.isWaitBigBlind)){var f=o.getGameInfo().currRaise-h.showGold;l.NextSeat==_&&0==n.operMeditor.preBtnPreOperation()&&(n.seatMeditor.changState(0,""),1==o.getGameInfo().allInFlag||(0==l.CanRaise||h.goldNum<=f?0==l.CanRaise?h.goldNum<=o.getGameInfo().currRaise?n.operMeditor.disableQG(h.goldNum):n.operMeditor.disableQG(o.getGameInfo().currRaise):n.operMeditor.disableQG(h.goldNum):h.goldNum+h.showGold<=g?f>0?n.operMeditor.disableQGJ(h.goldNum+h.showGold,f,h.goldNum):n.operMeditor.disableQRX(h.goldNum,h.goldNum):f>0?n.operMeditor.disableQGJ(g,f,h.goldNum):n.operMeditor.disableQRX(g,h.goldNum)))}}},n}(t.BaseSimpleCommand);a.AckCheckbetCommand=i,__reflect(i.prototype,"wpt.play.table.AckCheckbetCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t._mcName="",t._jsonName="",t._pngName="",t._playTimes=-1,t._mcHorizontalCenter=0,t._mcVerticalCenter=0,t.touchChildren=!1,t.touchEnabled=!1,t.onCreate(),t}return __extends(a,e),Object.defineProperty(a.prototype,"mc",{get:function(){return this._mc},enumerable:!0,configurable:!0}),a.prototype.onCreate=function(){this._mc||(this._mc=new egret.MovieClip,this.addChild(this._mc))},a.prototype.clear=function(){this.gotoAndStop()},a.prototype.destory=function(){t.DisplayUtil.remove(this),this.clear(),this._mc=null},a.prototype.centerMc=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._mcHorizontalCenter=t,this._mcVerticalCenter=e,this._mc.x=this.width/2+t,this._mc.y=this.height/2+e},a.prototype.setData=function(t,e,a){this._mcName=t,this._jsonName=void 0==e?t+"_json":e,this._pngName=void 0==a?t+"_png":a},a.prototype.loadData=function(e){var a=this;void 0===e&&(e=!0);var i=null,n=null,o=function(t,e){i=t,s()},r=function(t,e){n=t,s()},s=function(){if(i&&n){var o=new egret.MovieClipDataFactory(i,n);a._mc.movieClipData=o.generateMovieClipData(a._mcName),e?a._mc.play(a.playTimes):a._mc.stop(),a.dispatchEvent(new t.UIEvent(t.UIEvent.MovieClipDataLoadComplete))}};t.getAsset(this._jsonName,o,this,RES.ResourceItem.TYPE_JSON),t.getAsset(this._pngName,r,this,RES.ResourceItem.TYPE_IMAGE)},Object.defineProperty(a.prototype,"playTimes",{get:function(){return this._playTimes},set:function(t){this._playTimes=t},enumerable:!0,configurable:!0}),a.prototype.gotoAndStop=function(){this._mc&&this._mc.stop()},a.prototype.gotoAndPlay=function(){this._mc&&this._mc.play(this.playTimes)},a}(t.View);t.MovieClipPlayer=e,__reflect(e.prototype,"wpt.MovieClipPlayer")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t._particleAry=[],t._length=0,t._texture=[],t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(a,e),a.prototype.setURL=function(e,a,i){var n=this;this.resite(),this._texJsonURL=e,this._jsonURL=a,this._pngName=i;var o=function(e,a){for(var i=0;!t.isempty(e.getTexture(n._pngName+(i+1)));)n._texture.push(e.getTexture(n._pngName+(i+1))),i++;s()},r=function(t,e){n._config=t,s()},s=function(){if(!(n._texture.length<1||t.isempty(n._config)))for(var e=0;e<n._texture.length;e++){var a=n._config["json_"+(e+1)];if(!t.isempty(a)&&!t.isempty(n._texture[e])){var i=new particle.GravityParticleSystem(n._texture[e],a);n.addChild(i),i.x+=n.DIS*e,i.emitterX=i.emitterY=0,i.start(),n._particleAry.push(i),n._length=n._particleAry.length}}};t.getAsset(this._jsonURL,r,this,RES.ResourceItem.TYPE_JSON),t.getAsset(this._texJsonURL,o,this,RES.ResourceItem.TYPE_JSON)},a.prototype.play=function(){for(var t=0;t<this._length;t++){var e=this._particleAry[t];e.emitterX=e.emitterY=0,e.start()}},a.prototype.stop=function(t){for(var e=0;e<this._length;e++)this._particleAry[e].stop(t)},a.prototype.resite=function(){this.clear()},Object.defineProperty(a.prototype,"DIS",{get:function(){return this._DIS},set:function(t){this._DIS=t},enumerable:!0,configurable:!0}),a.prototype.clear=function(){this._texJsonURL="",this._jsonURL="",this._particleAry=[],this._length=0,t.DisplayUtil.remove(this)},a}(t.View);t.MulParticleMergePlayer=e,__reflect(e.prototype,"wpt.MulParticleMergePlayer")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t._particleAry=[],t._length=0,t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(a,e),a.prototype.setURL=function(e,a){if(e.length!=a.length)return void t.log.error("MulParticlePlayer Error: url length not same");if(!this.checkSame(e,a)){this.resite(),this._pngURLs=e,this._jsonURLs=a,this._length=e.length;for(var i=0;i<this._length;i++){var n=new t.ParticlePlayer;n.setURL(e[i],a[i]),t.DisplayUtil.addChild(this,n),this._particleAry.push(n)}}},a.prototype.checkSame=function(t,e){if(!this._pngURLs||!this._jsonURLs)return!1;if(t.length!=this._pngURLs.length||e.length!=this._jsonURLs.length)return!1;for(var a=0;a<t.length;a++)if(this._pngURLs[a]!=t[a])return!1;for(var i=0;i<e.length;i++)if(this._jsonURLs[i]!=e[i])return!1;return!0},a.prototype.play=function(){for(var t=0;t<this._length;t++)this._particleAry[t].play()},a.prototype.stop=function(t){for(var e=0;e<this._length;e++)this._particleAry[e].stop(t)},a.prototype.resite=function(){for(var t=0;t<this._length;t++)this._particleAry[t].clear();this._particleAry=[],this._length=0},a.prototype.clear=function(){this.resite(),this._pngURLs=[],this._jsonURLs=[],t.DisplayUtil.remove(this)},a}(t.View);t.MulParticlePlayer=e,__reflect(e.prototype,"wpt.MulParticlePlayer")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t._startFlag=!1,t.touchChildren=!1,t.touchEnabled=!1,t}return __extends(a,e),a.prototype.setURL=function(e,a){var i=this,n=function(t,e){i._texture=t,r()},o=function(t,e){i._config=t,r()},r=function(){i._texture&&i._config&&(t.isempty(i._system)||(i.stop(),t.isempty(i._system.parent)||i.removeChild(i._system),i._system=null),i._system=new particle.GravityParticleSystem(i._texture,i._config),i.addChild(i._system),i._system.emitterX=i._system.emitterY=0,i._startFlag&&i.play())};t.getAsset(a,o,this,RES.ResourceItem.TYPE_JSON),t.getAsset(e,n,this,RES.ResourceItem.TYPE_IMAGE)},a.prototype.play=function(){this._system?this._system.start():this._startFlag=!0},a.prototype.stop=function(t){this._system?this._system.stop(t):this._startFlag=!1},a.prototype.clear=function(){t.isempty(this._system)||this._system.stop(),this._startFlag=!1,t.isempty(this.parent)||this.parent.removeChild(this)},a}(t.View);t.ParticlePlayer=e,__reflect(e.prototype,"wpt.ParticlePlayer")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.bg=new egret.Sprite,t}return __extends(a,e),a.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a)},a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),t.DisplayUtil.addChild(this,this.bg)},Object.defineProperty(a.prototype,"sourceStr",{get:function(){return this._sourceStr},set:function(e){this._sourceStr=e,t.isempty(e)||(this._sourceList=this._sourceStr.split(","),this.flag_source=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),a.prototype.dragBg=function(){if(this._sourceList){t.DisplayUtil.removeAllChild(this.bg);for(var e,a=0,i=0,n=!0;n;)for(var o=0;o<this._sourceList.length;o++)if(this._sourceList[o]&&(e=new eui.Image,e.source=this._sourceList[o],t.DisplayUtil.addChild(this.bg,e),e.y=i,a=e.height>0?e.height:29),i+=a,i>=this.width){n=!1;break}}},a.prototype.validateProperties=function(){e.prototype.validateProperties.call(this),this.flag_source&&(this.dragBg(),this.flag_source=!1)},a}(eui.Component);t.BgFill=e,__reflect(e.prototype,"wpt.BgFill",["eui.UIComponent","egret.DisplayObject"])}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var a=e.call(this)||this;return a._bg=new egret.Shape,a._bg.graphics.beginFill(0,.8),a._bg.graphics.drawRect(0,0,t.Screen.WIN_WIDTH,t.Screen.WIN_HEIGHT),a._bg.graphics.endFill(),a._bg.touchEnabled=!0,t.DisplayUtil.addBottom(a,a._bg),a._labelTxt=t.getLang("black_bra_txt"),a._label=new eui.Label,a._label.text=a._labelTxt,a._label.fontFamily="Microsoft Sans Serif",a._label.x=a._bg.width-a._label.width>>1,a._label.y=a._bg.height-a._label.height>>1,t.DisplayUtil.addTop(a,a._label),t.addCommand(t.UIEvent.ShowBlackBra,a.onEvent,a),a}return __extends(a,e),a.init=function(){this._instance||(this._instance=new a)},a.prototype.onEvent=function(t){1==t.data?this.show():this.hide()},a.prototype.show=function(){t.DisplayUtil.addChild(t.Context.getInstance().screen.tipsLayout,this),t.addCommand(t.SocketEvent.DISCONNECT(t.net.MatchListService),this.hide,this),egret.Tween.get(this._label,{loop:!0}).to({text:this._labelTxt+"."},1e3).to({text:this._labelTxt+".."},1e3).to({text:this._labelTxt+"..."},1e3).wait(1e3)},a.prototype.hide=function(){t.DisplayUtil.remove(this),t.removeCommand(t.SocketEvent.DISCONNECT(t.net.MatchListService),this.hide,this),egret.Tween.removeTweens(this._label),this._label.text=this._labelTxt},a}(egret.DisplayObjectContainer);t.BlackBra=e,__reflect(e.prototype,"wpt.BlackBra")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t._addTxtWidth=20,t._gap=0,t.arrowSkins=["upimg","downimg","leftimg","rightimg"],t}return __extends(a,e),Object.defineProperty(a.prototype,"gap",{set:function(t){this._gap=parseInt(t)},enumerable:!0,configurable:!0}),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initComplete=!0,this.updateArrow()},a.prototype.updateArrow=function(){switch(this._dir){case a.TOP:this.arrowImg=this.skin.upimg;break;case a.BOTTOM:this.arrowImg=this.skin.downimg;break;case a.LEFT:this.arrowImg=this.skin.leftimg;break;case a.RIGHT:this.arrowImg=this.skin.rightimg}for(var t=0;t<this.arrowSkins.length;t++)this.skin[this.arrowSkins[t]]&&(this.skin[this.arrowSkins[t]].visible=this.skin[this.arrowSkins[t]]==this.arrowImg)},Object.defineProperty(a.prototype,"dir",{get:function(){return this._dir},set:function(t){this._dir=t,this.initComplete&&this.updateArrow()},enumerable:!0,configurable:!0}),a.prototype.setTxt=function(e){if(void 0==this.arrowImg)return void t.log.error("Bubble.arrow is null.");switch(this.txt.text=e,this._dir){case a.TOP:this.bg.width=this.width=this.txt.width+this._addTxtWidth,this.bg.x=0,this.arrowImg.x=(this.width-this.arrowImg.width)/2,this.arrowImg.y=0,this.bg.y=this.arrowImg.y+this.arrowImg.height+this._gap;break;case a.BOTTOM:this.bg.width=this.width=this.txt.width+this._addTxtWidth,this.bg.x=0,this.bg.y=0,this.arrowImg.x=(this.width-this.arrowImg.width)/2,this.arrowImg.y=this.bg.y+this.bg.height+this._gap;break;case a.LEFT:this.bg.width=this.txt.width+this._addTxtWidth,this.width=this.bg.width+this.arrowImg.width,this.arrowImg.x=0,this.arrowImg.y=(this.height-this.arrowImg.height)/2,this.bg.x=this.arrowImg.width+this._gap,this.bg.y=0;break;case a.RIGHT:this.bg.width=this.txt.width+this._addTxtWidth,this.width=this.bg.width+this.arrowImg.width,this.bg.x=0,this.bg.y=0,this.arrowImg.x=this.bg.x+this.bg.width+this._gap,this.arrowImg.y=(this.height-this.arrowImg.height)/2}this.txt.x=this.bg.x+(this.bg.width-this.txt.width)/2,this.txt.y=this.bg.y+(this.bg.height-this.txt.height)/2},a.prototype.clear=function(){},a}(eui.Component);e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right",t.Bubble=e,__reflect(e.prototype,"wpt.Bubble")}(wpt||(wpt={}));var wpt;!function(t){t.isDebug=!0;var e=function(){function e(){this._lastTimer=0/0,this._curTime=0}return e.prototype.init=function(e){var a=new t.Screen(e);t.DisplayUtil.addChild(e,a.rootLayout),t.Context.getInstance().setScreen(a),this._timerDict=new t.Dictionary,this._frameDict=new t.Dictionary,t.Context.getInstance().screen.stage.addEventListener(egret.Event.ENTER_FRAME,this.enterframe,this)},e.prototype.clear=function(){t.Context.getInstance().screen&&t.Context.getInstance().screen.stage&&t.Context.getInstance().screen.stage.removeEventListener(egret.Event.ENTER_FRAME,this.enterframe,this)},e.prototype.enterframe=function(t){return isNaN(this._lastTimer)&&(this._lastTimer=egret.getTimer()),this._curTime=egret.getTimer(),this.elapsedTime=this._curTime-this._lastTimer,this._lastTimer=this._curTime,dragonBones.WorldClock.clock.advanceTime(this.elapsedTime/1e3),this._timerDict.forEach(this.checkTimer,this),this._frameDict.forEach(this.checkFrame,this),!1},e.prototype.checkTimer=function(t,e){this._curTime-e.lastTime>=e.delayTime&&(e.callFun.call(e.thisObject),e.lastTime=this._curTime)},e.prototype.checkFrame=function(t,e){e.callFun.call(e.thisObject)},e.prototype.registerTimer=function(t,e,a){this._timerDict.add(a.hashCode+e,{lastTime:this._curTime,delayTime:t,callFun:e,thisObject:a})},e.prototype.unRegisterTimer=function(t,e){this._timerDict.del(e.hashCode+t)},e.prototype.clearTimers=function(){this._timerDict.destroy()},e.prototype.registerEnterFrame=function(t,e){this._frameDict.add(e.hashCode+t,{callFun:t,thisObject:e})},e.prototype.unRegisterEnterFrame=function(t,e){this._frameDict.del(e.hashCode+t)},e.prototype.clearAllEnterFrame=function(){this._frameDict.destroy()},e}();t.GameManager=e,__reflect(e.prototype,"wpt.GameManager")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){this._dialogs={},this._bg=new egret.Shape,this._bg.graphics.beginFill(0,.8),this._bg.graphics.drawRect(0,0,t.Screen.WIN_WIDTH,t.Screen.WIN_HEIGHT),this._bg.graphics.endFill(),this._bg.touchEnabled=!0}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.getQueue=function(t){return this._dialogs[t]},e.prototype.removeQueue=function(t){this._dialogs[t]=null,delete this._dialogs[t]},e.prototype.add=function(t,e){if(t&&e){var a=this.getQueue(t);a||(a=[],this._dialogs[t]=a),-1==a.indexOf(e)&&a.push(e),this.progress(t)}},e.prototype.remove=function(e,a){var i=this.getQueue(e);if(null!=i){if(i.length<=0)return void this.removeQueue(e);for(var n=i.length-1;n>=0;n--)if(i[n]==a){i.splice(n,1);break}e.contains(a)&&(a.isModal()&&t.DisplayUtil.remove(this._bg),a.remove())}},e.prototype.clear=function(e){if(void 0===e&&(e=null),null==e){for(var a in this._dialogs)this.clear(a),this.removeQueue(a);return void(this._dialogs={})}var i=this.getQueue(e);if(null!=i){for(this.removeQueue(e);i.length>0;)i.shift().remove();t.DisplayUtil.remove(this._bg)}},e.prototype.progress=function(e){var a=this.getQueue(e);if(null!=a){if(a.length<=0)return this.removeQueue(e),void t.DisplayUtil.remove(this._bg);var i=a[0];void 0==i||e.contains(i)||(i.addEventListener(egret.Event.ADDED_TO_STAGE,this.onDialogAdded,this,!1),e.addChild(i),t.AlignUtil.alginScreenCenter(i),i.isModal()&&t.DisplayUtil.addBottom(e,this._bg))}},e.prototype.getNextDialog=function(e,a){var i=this.checkTypePanel(e),n=this.checkTypeNotPanel(e);if((i>1||n>1)&&t.log.error("检测到错误：panel或非panel类型的dialog当前显示数量多于1个。panelNum:"+i+",notPanelNum:"+n),i>=1&&n>=1)return null;if(0==i)for(var o in a){var r=a[o];if(r.getType()==t.DialogType.Panel)return r}if(0==n)for(var o in a){var r=a[o];if(r.getType()!=t.DialogType.Panel)return r}},e.prototype.checkTypePanel=function(e){for(var a=0,i=0;i<e.numChildren;i++)e.getChildAt(i)instanceof t.Dialog&&e.getChildAt(i).getType()==t.DialogType.Panel&&a++;return a},e.prototype.checkTypeNotPanel=function(e){for(var a=0,i=0;i<e.numChildren;i++)e.getChildAt(i)instanceof t.Dialog&&e.getChildAt(i).getType()!=t.DialogType.Panel&&a++;return a},e.prototype.onDialogAdded=function(t){t.target.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onDialogAdded,this,!1),t.target.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDialogRemoved,this,!1)},e.prototype.onDialogRemoved=function(t){t.target.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDialogRemoved,this,!1);var e=t.target.parent,a=this.getQueue(e);null!=a&&delete a.shift(),this.progress(e)},e}();t.DialogManager=e,__reflect(e.prototype,"wpt.DialogManager")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.spMask=new egret.Shape,e.isShow=!1,e.MOVE_TIME=200,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.configUI()},e.prototype.configUI=function(){this.selectedIndex=this._selectedIndex,this.scrollerGroup.visible=!0,this.setMask(),this.posScrollerClose=this.scrollerGroup.y=-this.scrollerGroup.height,this.btnGroup.touchEnabled=!0,this.btnGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeListType,this),this.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.listItemClick,this)},e.prototype.setMask=function(){this.spMask.graphics.clear(),this.scrollerGroup.mask=null,this.spMask.graphics.beginFill(0),this.spMask.graphics.drawRect(0,0,this.scrollerGroup.width,this.scrollerGroup.height),this.spMask.graphics.endFill(),null==this.spMask.parent&&this.addChild(this.spMask),this.scrollerGroup.mask=this.spMask,this.spMask.x=this.scrollerGroup.x,this.spMask.y=this.scrollerGroup.y},e.prototype.setLabel=function(t){this.label&&(this.label.text=t)},e.prototype.setItemHeight=function(t){this.itemHeight=t,this.updateListHeight()},Object.defineProperty(e.prototype,"dataProvider",{set:function(t){this.list&&(this.list.dataProvider=t,this.updateListHeight())},enumerable:!0,configurable:!0}),e.prototype.updateListHeight=function(){this.list.dataProvider&&(this.list.height=this.list.dataProvider.length*this.itemHeight)},e.prototype.changeListType=function(t){t.stopPropagation(),this.isShow?(egret.Tween.get(this.scrollerGroup).to({y:this.posScrollerClose},this.MOVE_TIME),this.isShow=!1):(egret.Tween.get(this.scrollerGroup).to({y:this.btnGroup.height},this.MOVE_TIME),this.isShow=!0,this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stageClick,this))},e.prototype.stageClick=function(t){this.isShow&&(egret.Tween.get(this.scrollerGroup).to({y:this.posScrollerClose},this.MOVE_TIME),this.isShow=!1,this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stageClick,this))},e.prototype.listItemClick=function(t){this.selectedIndex=this.list.selectedIndex},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this.list?this.list.selectedIndex:0},set:function(t){this.list&&this._selectedIndex!=t&&(this._selectedIndex=t,this.list.selectedIndex=t,this.setLabel(this.list.selectedItem),this.dispatchEvent(new eui.UIEvent(eui.UIEvent.CHANGE)))},enumerable:!0,configurable:!0}),e}(eui.Component);t.DropDownList=e,__reflect(e.prototype,"wpt.DropDownList",["eui.UIComponent","egret.DisplayObject"])}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._algin="left",e._iconSource="null",e}return __extends(e,t),Object.defineProperty(e.prototype,"algin",{get:function(){return this._algin},set:function(t){this._algin=t,this.flag_algin=!0,this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconSource",{get:function(){return this._iconSource},set:function(t){t!=this._iconSource&&(this._iconSource=t,this.icon&&(this.icon.source=t),this.flag_iconSource=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconwidth",{get:function(){return this._iconwidth},set:function(t){this._iconwidth=t,this.icon&&(this.icon.width=t),this.flag_iconSource=!0,this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconheight",{get:function(){return this._iconheight},set:function(t){this._iconheight=t,this.icon&&(this.icon.height=t),this.flag_iconSource=!0,this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label=t,this.labelDisplay&&(this.labelDisplay.text=t),this.flag_label=!0,this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textsize",{get:function(){return this._textsize},set:function(t){this._textsize=t,this.labelDisplay&&(this.labelDisplay.size=t),this.flag_label=!0,this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textcolor",{get:function(){return this._textcolor},set:function(t){this._textcolor=t,this.labelDisplay&&(this.labelDisplay.textColor=t),this.flag_label=!0,this.invalidateProperties()},enumerable:!0,configurable:!0}),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.initOK=!0,this.flag_iconSource&&(this.icon.source=this._iconSource),this.flag_label&&(this.labelDisplay.text=this._label)},e.prototype.validateProperties=function(){t.prototype.validateProperties.call(this),this.updatePos()},e.prototype.updatePos=function(){this.initOK&&(this.flag_label||this.flag_iconSource||this.flag_algin)&&("left"==this._algin?(this.icon.x=0,this.labelDisplay.x=this.icon.x+this.icon.width+2):"center"==this._algin?(this.t_w=(this.width-(this.icon.width+this.labelDisplay.textWidth+4))/2,this.icon.x=this.t_w,this.labelDisplay.x=this.icon.x+this.icon.width+2):"right"==this._algin&&(this.labelDisplay.x=this.width-this.labelDisplay.textWidth-4,this.icon.x=this.labelDisplay.x-this.icon.width-2),this.flag_label=this.flag_iconSource=this.flag_algin=!1)},e}(eui.Component);t.IconTxt=e,__reflect(e.prototype,"wpt.IconTxt",["eui.UIComponent","egret.DisplayObject"])}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.tabs=[],t.addEventListener(mouse.MouseEvent.MOUSE_OVER,t.itemMsOverHandler,t),t.addEventListener(mouse.MouseEvent.MOUSE_OUT,t.itemMsOutHandler,t),t}return __extends(a,e),a.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a),this.tabs.push(a)},a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},a.prototype.dataChanged=function(){for(var e=0;e<this.tabs.length;e++)e!=this.itemIndex&&t.DisplayUtil.remove(this.tabs[e])},a.prototype.itemMsOverHandler=function(t){this._msoverCaptured=!0,this.invalidateState()},a.prototype.itemMsOutHandler=function(t){this._msoverCaptured=!1,this.invalidateState()},a.prototype.getCurrentState=function(){return"up"==e.prototype.getCurrentState.call(this)&&this._msoverCaptured?"over":e.prototype.getCurrentState.call(this)},a}(eui.ItemRenderer);t.ImgTabItemRender=e,__reflect(e.prototype,"wpt.ImgTabItemRender")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.offsetWidth=0,t._maskerS=new egret.Shape,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdded,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoved,t),t.addEventListener(egret.Event.COMPLETE,t.onBmpComplete,t),t}return __extends(a,e),a.prototype.onAdded=function(e){this.parent&&(this._maskerS.y=this.y,this._maskerS.x=this.x,t.DisplayUtil.addChild(this.parent,this._maskerS),this.mask=this._maskerS)},a.prototype.onRemoved=function(t){this._maskerS.parent&&(this._maskerS.parent.removeChild(this._maskerS),this.mask=null)},a.prototype.onBmpComplete=function(t){var e=this.$Bitmap[0];this._bmpWidth=e.$getTextureWidth(),this._bmpHeight=e.$getTextureHeight(),this.defaultWidth=this._bmpWidth,this.defaultHeight=this._bmpHeight,this._maskerS.graphics.clear(),this._maskerS.graphics.beginFill(144470,1),this._maskerS.graphics.drawRect(0,0,this._bmpWidth,this._bmpHeight),this._maskerS.graphics.endFill()},Object.defineProperty(a.prototype,"maskerS",{get:function(){return this._maskerS},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this._maskerS.width},set:function(t){this._maskerS.scaleX=(t+this.offsetWidth)/this._bmpWidth},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._maskerS.height},set:function(t){this._maskerS.scaleY=t/this._bmpHeight},enumerable:!0,configurable:!0}),a}(eui.Image);t.MaskScaleShape=e,__reflect(e.prototype,"wpt.MaskScaleShape",["eui.UIComponent","egret.DisplayObject"])}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._status=0,e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},Object.defineProperty(e.prototype,"status",{get:function(){return this._status},set:function(t){this._status=t},enumerable:!0,configurable:!0}),e.prototype.setStatus=function(t){switch(this._status=t,t){case 0:this.currentState="announced";break;case 1:this.currentState="registering";break;case 2:this.currentState="running";break;case 3:this.currentState="completed";break;case 4:this.currentState="later"}},e}(eui.Component);t.MatchStateIcon=e,__reflect(e.prototype,"wpt.MatchStateIcon",["eui.UIComponent","egret.DisplayObject"])}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.imgs=[],t._num=0,t.flag_num=!1,t.skinName="wpt.NumberImgSkin",t}return __extends(a,e),Object.defineProperty(a.prototype,"num",{get:function(){return this._num},set:function(t){this._num=t,this.updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numSkin",{get:function(){return this._numSkin},set:function(t){this._numSkin=t},enumerable:!0,configurable:!0}),a.prototype.updateView=function(){this.numStr=t.DealMoneyUtil.getStrByWptRule(this._num);for(var e=0;e<this.numStr.length;e++){var a=this.numStr.charAt(e);if(this.t_res=this._numSkin+(","==a?"dot":a)+"_png",RES.hasRes(this.t_res)){if(void 0==this.imgs[e]||null==this.imgs[e]){var i=new eui.Image;this.imgs[e]=i}this.imgs[e].source=this.t_res,this.flag_num=!0}}for(var n=this.imgs.length-1;n>=e;n--)this.imgs[n]&&(this.imgs[n].source=null,this.imgs[n]=null,this.imgs.splice(n,1));this.invalidateProperties()},a.prototype.validateProperties=function(){if(e.prototype.validateProperties.call(this),this.flag_num){this.flag_num=!1;for(var a=0;a<this.imgs.length;a++)t.DisplayUtil.addChild(this.imgGroup,this.imgs[a])}},a}(t.View);t.NumberImg=e,__reflect(e.prototype,"wpt.NumberImg")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){this.modules={},this.loadedModules=[]}return e.prototype.registerModule=function(e,i,n,o){void 0===o&&(o=!1);var r=new a;r.name=e,r.type=i,r.defaultload=o,r.controllers=[];for(var s=0;s<n.length;s++){var l=t.getDefinitionObjByName(n[s]);l&&r.controllers.push(l)}this.modules[e]=r},e.prototype.loadModule=function(t){var e;if("number"==typeof t?e=this.modules[t]:t instanceof a&&(e=t),e){for(var i=this.loadedModules.length-1;i>=0;i--)this.loadedModules[i].type==e.type&&this.unloadModule(this.loadedModules[i]);this.loadedModules.push(e);var n;for(i=0;i<e.controllers.length;i++)n=e.controllers[i],n.start()}},e.prototype.unloadModule=function(t){var e,i;if("number"==typeof t?e=this.loadedModules[t]:t instanceof a&&(e=t),e)for(var n,o=0;o<e.controllers.length;o++)n=e.controllers[o],n.clear();i&&(this.loadedModules[t]=null,delete this.loadedModules[t])},e.prototype.getControllerByName=function(t,e){for(var a,i=0;i<this.loadedModules.length;i++)this.loadedModules[i].name==t&&(a=this.loadedModules[i].controllers);for(var n=0;n<a.length;n++)if(egret.getQualifiedClassName(a[n])==egret.getQualifiedClassName(e))return a[n];return null},e.prototype.start=function(){var t,e=[];for(var a in this.modules)t=this.modules[a],t.defaultload&&-1==e.indexOf(t.type)&&(this.loadModule(t),e.push(t.type))},e}();t.ModuleManager=e,__reflect(e.prototype,"wpt.ModuleManager");var a=function(){function t(){}return t}();t.ModuleConfig=a,__reflect(a.prototype,"wpt.ModuleConfig")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()
},e.prototype.click=function(){this._isUp=!this._isUp,this._isUp?this.currentState=e.state_down:this.currentState=e.state_up},e.prototype.init=function(){this._isUp=!1,this.currentState!=e.state_normal&&(this.currentState=e.state_normal)},Object.defineProperty(e.prototype,"isUp",{get:function(){return!this._isUp},enumerable:!0,configurable:!0}),e}(eui.Component);e.state_normal="normal",e.state_up="up",e.state_down="down",t.SortArrowButton=e,__reflect(e.prototype,"wpt.SortArrowButton",["eui.UIComponent","egret.DisplayObject"])}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t._isOverMusic=!1,t.addEventListener(mouse.MouseEvent.MOUSE_OVER,t.overHandler,t),t.addEventListener(mouse.MouseEvent.MOUSE_OUT,t.outHandler,t),t}return __extends(a,e),a.prototype.overHandler=function(e){this._isOverMusic&&t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_OVER,t.SoundManager.SOUND_OTHER),this._msoverCaptured=!0,this.invalidateState()},a.prototype.outHandler=function(t){this._msoverCaptured=!1,this.invalidateState()},a.prototype.getCurrentState=function(){return"up"==e.prototype.getCurrentState.call(this)&&this._msoverCaptured?"over":e.prototype.getCurrentState.call(this)},Object.defineProperty(a.prototype,"isOverMusic",{set:function(t){this._isOverMusic=t},enumerable:!0,configurable:!0}),a}(eui.Button);t.WebButton=e,__reflect(e.prototype,"wpt.WebButton")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(mouse.MouseEvent.MOUSE_OVER,e.overHandler,e),e.addEventListener(mouse.MouseEvent.MOUSE_OUT,e.outHandler,e),e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.overHandler=function(t){this._msoverCaptured=!0,this.invalidateState()},e.prototype.outHandler=function(t){this._msoverCaptured=!1,this.invalidateState()},e.prototype.getCurrentState=function(){return this._curSuperState=t.prototype.getCurrentState.call(this),this._msoverCaptured&&("up"==this._curSuperState?this._curSuperState="over":(this._curSuperState="upAndSelected")&&(this._curSuperState="overAndSelected")),this._curSuperState},e}(eui.CheckBox);t.WebCheckBox=e,__reflect(e.prototype,"wpt.WebCheckBox",["eui.UIComponent","egret.DisplayObject"])}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.measure=function(){t.prototype.measure.call(this)},e.prototype.init=function(){this.sPos=new egret.Point,this.horizontalScrollBar.touchEnabled=!0,this.horizontalScrollBar.touchChildren=!0,this.btnLeft.visible=!1,this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpBind,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDownBind,this),this.horizontalScrollBar.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBarBegin,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this),this.addEventListener(egret.Event.CHANGE,this.onChange,this)},e.prototype.clear=function(){this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpBind,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDownBind,this),this.horizontalScrollBar.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBarBegin,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this),this.removeEventListener(egret.Event.CHANGE,this.onChange,this),this.onBarEnd(null)},e.prototype.onUpBind=function(t){this.viewport&&(this.stopAnimation(),this.viewport.scrollH+=this.testPos(-this.SCROLL_DIS),this.callback(this._changeCallBack))},e.prototype.onDownBind=function(t){this.viewport&&(this.stopAnimation(),this.viewport.scrollH+=this.testPos(this.SCROLL_DIS),this.callback(this._changeCallBack))},e.prototype.onBarMove=function(t){if(this.viewport){var e=new egret.Point(t.stageX,t.stageY),a=e.x-this.sPos.x,i=(this.viewport.contentWidth-this.width)*a/(this.horizontalScrollBar.width-this.horizontalScrollBar.thumb.width);this.viewport.scrollH+=this.testPos(i),this.sPos.setTo(t.stageX,t.stageY)}},e.prototype.testPos=function(t){return this.viewport.scrollH+t+this.width>=this.viewport.contentWidth?(this.btnRight.visible=!1,this.viewport.contentWidth-(this.viewport.scrollH+this.width)):this.viewport.scrollH+t<=0?(this.btnLeft.visible=!1,-this.viewport.scrollH):(this.btnLeft.visible=!0,this.btnRight.visible=!0,t)},e.prototype.onPortResize=function(){if(this.viewport&&(this.viewport.validateNow(),this.viewport.contentWidth!=this.privViewportContentH)){this.privViewportContentH==this.viewport.contentWidth;var t=this.$Scroller[10],e=t.$UIComponent;t.contentWidth>e[10]||0!==t.scrollH?this.setBarAndBtnVisible(!0):this.setBarAndBtnVisible(!1),this.resetPos()}},e.prototype.resetPos=function(){this.viewport.scrollH=0,this.btnLeft.visible=!1},e.prototype.resiteVBar=function(){this.horizontalScrollBar.width=this.width-this.btnLeft.width-this.btnRight.width-this.DIS-this.DIS,this.horizontalScrollBar.x=this.btnLeft.width+this.DIS},e.prototype.setBarAndBtnVisible=function(t){t&&this.viewport.scrollH<=0?this.btnLeft.visible=!1:this.btnLeft.visible=t,t&&this.viewport.scrollH+this.width>=this.viewport.contentWidth?this.btnRight.visible=!1:this.btnRight.visible=t,this.horizontalScrollBar.visible=t,t?(this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this)):(this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this))},e.prototype.setPosToBottom=function(){this.viewport.validateNow(),this.viewport.scrollH=this.viewport.contentWidth-this.width},e.prototype.setBtnLeft=function(t){this.btnLeft=t},e.prototype.setBtnRight=function(t){this.btnRight=t},e.prototype.setChangeCallBack=function(t){this._changeCallBack=t},e.prototype.onChange=function(){this.viewport.scrollH+this.width>=this.viewport.contentWidth?this.btnRight.visible=!1:this.btnRight.visible=!0,this.viewport.scrollH<=0?this.btnLeft.visible=!1:this.btnLeft.visible=!0,this.callback(this._changeCallBack)},e.prototype.callback=function(t){null!=t&&t.call(this)},e}(t.WebVScollbar);t.WebHScollbar=e,__reflect(e.prototype,"wpt.WebHScollbar")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t._isOverMusic=!1,t}return __extends(a,e),a.prototype.init=function(e,a,i){void 0===i&&(i="armatureName"),this._movie=new t.DragonBonesPlayer,t.DisplayUtil.addChild(this,this._movie),this._movie.setDataSimple(e,a,i),this._movie.playTimes=0,this._movie.touchEnabled=!0,this._movie.loadData(!0,this.onLoaded.bind(this))},a.prototype.onLoaded=function(t){this._movie.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.overHandler,this),this._movie.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.outHandler,this),this._movie.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onDown,this),this._movie.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onUp,this),this._movie.addEventListener(egret.TouchEvent.TOUCH_END,this.overHandler,this)},a.prototype.overHandler=function(e){this._isOverMusic&&t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_OVER,t.SoundManager.SOUND_OTHER),t.ColorUtil.setColorState(this,t.ColorUtil.HIGHTLIGHT)},a.prototype.outHandler=function(e){t.ColorUtil.setColorState(this,t.ColorUtil.DEFAULT)},a.prototype.onDown=function(e){t.ColorUtil.setColorState(this,t.ColorUtil.LOWLIGHT2)},a.prototype.onUp=function(e){t.ColorUtil.setColorState(this,t.ColorUtil.DEFAULT)},Object.defineProperty(a.prototype,"isOverMusic",{set:function(t){this._isOverMusic=t},enumerable:!0,configurable:!0}),a}(eui.Component);t.WebMovieButton=e,__reflect(e.prototype,"wpt.WebMovieButton")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(mouse.MouseEvent.MOUSE_OVER,e.overHandler,e),e.addEventListener(mouse.MouseEvent.MOUSE_OUT,e.outHandler,e),e}return __extends(e,t),e.prototype.overHandler=function(t){this._msoverCaptured=!0,this.invalidateState()},e.prototype.outHandler=function(t){this._msoverCaptured=!1,this.invalidateState()},e.prototype.getCurrentState=function(){return"up"==t.prototype.getCurrentState.call(this)&&this._msoverCaptured?"over":t.prototype.getCurrentState.call(this)},e}(eui.ToggleButton);t.WebToggleButton=e,__reflect(e.prototype,"wpt.WebToggleButton")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(eui.LayoutBase);t.WebVBottomLayout=e,__reflect(e.prototype,"wpt.WebVBottomLayout")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){this._isOnAudio=!0,this._isOnMusic=!0,this.isMusicComplete=!1;var a=t.SharedObjectUtil.read(e.key_isOnAudio);this._isOnAudio="0"==a?!1:!0;var a=t.SharedObjectUtil.read(e.key_isOnMusic);this._isOnMusic="0"==a?!1:!0}return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.playMusic=function(e,a){this.isOnMusic&&t.isempty(this._musicChannel)&&(t.isempty(this._musicSound)&&(this._musicSound=RES.getRes(e)),t.isempty(this._musicSound)?(this._musicSound=new egret.Sound,this._musicSound.addEventListener(egret.Event.COMPLETE,function(t){this.isMusicComplete=!0,this._musicChannel=this._musicSound.play(0,a),this._musicChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.stopSoundAudio,this)},this),this._musicSound.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){console.log("loaded error!")},this),this._musicSound.load("resource/play/sounds/"+e)):this.isMusicComplete&&(this._musicChannel=this._musicSound.play(0,a),this._musicChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onMusicComplete,this)))},e.prototype.playAudio=function(a,i){if(void 0===i&&(i=e.SOUND_TABLE),this.isOnAudio){var n=e.audioPool[a],o=e.audioChannelPool[i];if(t.isempty(o)&&(o=[],e.audioChannelPool[i]=o),t.isempty(n))n=new egret.Sound,n.addEventListener(egret.Event.COMPLETE,function(t){var i=n.play(0,1);i.addEventListener(egret.Event.SOUND_COMPLETE,this.stopSoundAudio,this),e.audioPool[a]=n,o.push(i)},this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){console.log("loaded error!")},this),n.load("resource/play/sounds/"+a);else{var r=n.play(0,1);r.addEventListener(egret.Event.SOUND_COMPLETE,this.stopSoundAudio,this),o.push(r)}}},e.prototype.stopSoundAudio=function(t){var e=t.currentTarget;e&&(e.hasEventListener(egret.Event.SOUND_COMPLETE)&&e.removeEventListener(egret.Event.SOUND_COMPLETE,this.stopSoundAudio,this),e.stop())},e.prototype.onMusicComplete=function(t){this.stopMusic()},e.prototype.stopMusic=function(){this._musicChannel&&(this._musicChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onMusicComplete,this),this._musicChannel.stop(),this._musicChannel=null)},e.prototype.stopAllAudio=function(a){void 0===a&&(a=e.SOUND_TABLE);var i=e.audioChannelPool[a];if(!(t.isempty(i)||i.length<1))for(;i.length>0;){var n=i.shift();t.isempty(n)||(n.hasEventListener(egret.Event.SOUND_COMPLETE)&&n.removeEventListener(egret.Event.SOUND_COMPLETE,this.stopSoundAudio,this),n.stop())}},e.prototype.setSoundOff=function(t){},Object.defineProperty(e.prototype,"isOnMusic",{get:function(){return this._isOnMusic},set:function(a){this._isOnMusic!=a&&(this._isOnMusic=a,t.SharedObjectUtil.write(e.key_isOnMusic,a?"1":"0"),this._isOnMusic?this.playMusic(t.ResConst.SOUND_BACKGROUND,0):this.stopMusic())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOnAudio",{get:function(){return this._isOnAudio},set:function(a){this._isOnAudio!=a&&(this._isOnAudio=a,t.SharedObjectUtil.write(e.key_isOnAudio,a?"1":"0"),this._isOnAudio||(this.stopAllAudio(),this.stopAllAudio(e.SOUND_SPIN),this.stopAllAudio(e.SOUND_OTHER)))},enumerable:!0,configurable:!0}),e}();e.SOUND_TABLE="SOUND_TABLE",e.SOUND_SPIN="SOUND_SPIN",e.SOUND_OTHER="SOUND_OTHER",e.key_isOnAudio="key_isOnAudio",e.key_isOnMusic="key_isOnMusic",e.audioPool={},e.audioChannelPool={},t.SoundManager=e,__reflect(e.prototype,"wpt.SoundManager")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(t){this._rootLayout=new egret.Sprite,this._backgroudLayout=new egret.Sprite,this._uiLayout=new egret.Sprite,this._aniLayout=new egret.Sprite,this._popupLayout=new egret.Sprite,this._panelLayout=new egret.Sprite,this._tipsLayout=new egret.Sprite,this._stage=t,this.initLayer(t)}return e.prototype.initLayer=function(e){var a=[this.backgroudLayout,this.uiLayout,this.aniLayout,this.panelLayout,this.popupLayout,this.tipsLayout];t.DisplayUtil.addChild(e,this.rootLayout);for(var i=0;i<a.length;i++)t.DisplayUtil.addChild(this.rootLayout,a[i])},e.prototype.clear=function(){t.DisplayUtil.removeAllChild(this.backgroudLayout,!1),t.DisplayUtil.removeAllChild(this.uiLayout,!1),t.DisplayUtil.removeAllChild(this.aniLayout,!1),t.DisplayUtil.removeAllChild(this.panelLayout,!1),t.DisplayUtil.removeAllChild(this.popupLayout,!1),t.DisplayUtil.removeAllChild(this.tipsLayout,!1)},Object.defineProperty(e.prototype,"rootLayout",{get:function(){return this._rootLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroudLayout",{get:function(){return this._backgroudLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uiLayout",{get:function(){return this._uiLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aniLayout",{get:function(){return this._aniLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupLayout",{get:function(){return this._popupLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelLayout",{get:function(){return this._panelLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tipsLayout",{get:function(){return this._tipsLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),e}();e.WIN_WIDTH=1960,e.WIN_HEIGHT=1080,t.Screen=e,__reflect(e.prototype,"wpt.Screen")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){}return e.alginScreenCenter=function(e){null!=e&&(e.x=(t.Screen.WIN_WIDTH-e.width)/2,e.y=(t.Screen.WIN_HEIGHT-e.height)/2)},e.alginScreenRB=function(e){null!=e&&(e.x=t.Screen.WIN_WIDTH-e.width,e.y=t.Screen.WIN_HEIGHT-e.height)},e.alginScreenLB=function(e){null!=e&&(e.x=0,e.y=t.Screen.WIN_HEIGHT-e.height)},e.alginScreenRT=function(e){null!=e&&(e.x=t.Screen.WIN_WIDTH-e.width,e.y=0)},e.alginScreenR=function(e){null!=e&&(e.x=t.Screen.WIN_WIDTH-e.width)},e.alginScreenBC=function(e){null!=e&&(e.x=(t.Screen.WIN_WIDTH-e.width)/2,e.y=t.Screen.WIN_HEIGHT-e.height)},e.alginScreenTC=function(e){null!=e&&(e.x=(t.Screen.WIN_WIDTH-e.width)/2,e.y=0)},e}();t.AlignUtil=e,__reflect(e.prototype,"wpt.AlignUtil")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"nativeBase64",{get:function(){return"function"==typeof window.atob},enumerable:!0,configurable:!0}),t.decode=function(t){if(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),this.nativeBase64)return window.atob(t);for(var e,a,i,n,o,r,s,l=[],h=0;h<t.length;)n=this._keyStr.indexOf(t.charAt(h++)),o=this._keyStr.indexOf(t.charAt(h++)),r=this._keyStr.indexOf(t.charAt(h++)),s=this._keyStr.indexOf(t.charAt(h++)),e=n<<2|o>>4,a=(15&o)<<4|r>>2,i=(3&r)<<6|s,l.push(String.fromCharCode(e)),64!==r&&l.push(String.fromCharCode(a)),64!==s&&l.push(String.fromCharCode(i));return l=l.join("")},t.encode=function(t){if(t=t.replace(/\r\n/g,"\n"),this.nativeBase64)return window.btoa(t);for(var e,a,i,n,o,r,s,l=[],h=0;h<t.length;)e=t.charCodeAt(h++),a=t.charCodeAt(h++),i=t.charCodeAt(h++),n=e>>2,o=(3&e)<<4|a>>4,r=(15&a)<<2|i>>6,s=63&i,isNaN(a)?r=s=64:isNaN(i)&&(s=64),l.push(this._keyStr.charAt(n)),l.push(this._keyStr.charAt(o)),l.push(this._keyStr.charAt(r)),l.push(this._keyStr.charAt(s));return l=l.join("")},t.decodeBase64AsArray=function(e,a){a=a||1;var i,n,o,r=t.decode(e),s=new Uint32Array(r.length/a);for(i=0,o=r.length/a;o>i;i++)for(s[i]=0,n=a-1;n>=0;--n)s[i]+=r.charCodeAt(i*a+n)<<(n<<3);return s},t.encodeByteArray=function(t){var e,a="",i=[];for(t.position=0;t.bytesAvailable>0;){e=[];for(var n=0;3>n&&t.bytesAvailable>0;n++)e[n]=t.readUnsignedByte();i[0]=(252&e[0])>>2,i[1]=(3&e[0])<<4|e[1]>>4,i[2]=(15&e[1])<<2|e[2]>>6,i[3]=63&e[2];for(var o=e.length;3>o;o++)i[o+1]=64;for(var r=0;r<i.length;r++)a+=this._keyStr.charAt(i[r])}return a},t.decodeToByteArray=function(t){for(var e=new egret.ByteArray,a=new Array(4),i=new Array(3),n=0;n<t.length;n+=4){for(var o=0;4>o&&n+o<t.length;o++)a[o]=this._keyStr.indexOf(t.charAt(n+o));i[0]=(a[0]<<2)+((48&a[1])>>4),i[1]=((15&a[1])<<4)+((60&a[2])>>2),i[2]=((3&a[2])<<6)+a[3];for(var r=0;r<i.length&&64!=a[r+1];r++)e.writeByte(i[r])}return e.position=0,e.buffer},t.decompress=function(t,e,a){throw new Error("GZIP/ZLIB compressed TMX Tile Map not supported!")},t.decodeCSV=function(t){for(var e=t.replace("\n","").trim().split(","),a=[],i=0;i<e.length;i++)a.push(+e[i]);return a},t}();e._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t.Base64=e,__reflect(e.prototype,"wpt.Base64")}(wpt||(wpt={}));var wpt;!function(t){function e(t){return t.buffer.slice(t.offset,t.limit)}function a(t,e){return void 0===e&&(e="utf-8"),new TextEncoding.TextEncoder(e).encode(t).buffer}function i(t,a){return void 0===a&&(a="utf-8"),new TextEncoding.TextDecoder(a).decode(e(t))}t.getArrayBuffer=e,t.writeMultiByte=a,t.readMultiByte=i}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t.prototype.ColorUtil=function(){},t.setColorState=function(t,e){switch(void 0===e&&(e=this.DEFAULT),e){case this.DEFAULT:t.filters=null;break;case this.DISABLE:t.filters=this.balckWhiteFilter;break;case this.HIGHTLIGHT:t.filters=this.highLightFilter;break;case this.LIGHT:t.filters=this.lightFilter;break;case this.LOWLIGHT:t.filters=this.lowLightFilter;break;case this.LOWLIGHT2:t.filters=this.lowLightFilter2;case this.HALFLOWLIGHT:t.filters=this.halfLowLightFilter;break;default:t.filters=null}},t.setbwBitmap=function(t,e){void 0===e&&(e=!0),null!=t&&(e?t.filters=this.balckWhiteFilter:t.filters=null)},t.setGlowFilter=function(t,e,a,i,n,o,r,s,l,h){void 0===e&&(e=!0),void 0===a&&(a=15525231),void 0===i&&(i=1),void 0===n&&(n=6),void 0===o&&(o=6),void 0===r&&(r=2),void 0===s&&(s=1),void 0===l&&(l=!1),void 0===h&&(h=!1),null!=t&&(e?t.filters=[new egret.GlowFilter(a,i,n,o,r,s,l,h)]:t.filters=null)},t}();e.DEFAULT=0,e.DISABLE=1,e.HIGHTLIGHT=2,e.LOWLIGHT=5,e.HALFLOWLIGHT=6,e.LOWLIGHT2=7,e.HIT=3,e.LIGHT=4,e.lightFilter=[new egret.GlowFilter(3644588,.75,5,5,3,0,!1,!1)],e.highLightFilter=[new egret.ColorMatrixFilter([1.5,0,0,0,0,0,1.5,0,0,0,0,0,1.5,0,0,0,0,0,1,0])],e.lowLightFilter=[new egret.ColorMatrixFilter([.2,0,0,0,0,0,.2,0,0,0,0,0,.2,0,0,0,0,0,1,0])],e.halfLowLightFilter=[new egret.ColorMatrixFilter([.6,0,0,0,0,0,.6,0,0,0,0,0,.6,0,0,0,0,0,1,0])],e.lowLightFilter2=[new egret.ColorMatrixFilter([1,0,0,0,-255,0,1,0,0,-255,0,0,1,0,-255,0,0,0,1,0])],e.balckWhiteFilter=[new egret.ColorMatrixFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])],e.balckWhiteBitmapFilter=[new egret.ColorMatrixFilter([.18,0,0,0,52,0,.18,0,0,52,0,0,.18,0,52,0,0,0,1,0])],t.ColorUtil=e,__reflect(e.prototype,"wpt.ColorUtil")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t.getFormatHMString=function(t){var e="";if(10>t)e="00:0"+t;else if(60>t)e="00:"+t;else{var a=t%60,i=t/60;e=10>i?"0"+i:i+"",e+=":",e+=10>a?"0"+a:a}return e},t.getFormatDH=function(t){var e={},a=t/1e3/60;if(60>a)e.m=a,e.h1=0,e.h2=a>0?1:0,e.d1=0,e.d2=0;else{var i=a%60,n=a/60,o=n/24;n%=24,i>0&&(n+=1),0==n&&o>0&&(n=24,o-=1),10>n?(e.h1=0,e.h2=n):(e.h1=n.toString().substring(0,1),e.h2=n.toString().substring(1,2)),e.m=a,10>o?(e.d2=o.toString().substring(0,1),e.d1=0):(e.d1=o.toString().substring(0,1),e.d2=o.toString().substring(1,2))}return e},t.getFormatHM=function(t){var e={sec:0,minute1:0,minute2:0,hour1:0,hour2:0},a=Math.round(t/1e3);if(60>a)e.sec=a,e.minute1=0,e.minute2=a>0?1:0;else{var i=a%60,n=Math.floor(a/60),o=Math.floor(a/60/60);i>0&&(n+=1),10>n?(e.minute1=0,e.minute2=n):(n>60&&(o=Math.floor(n/60),n%=60),10>n?(e.minute1=0,e.minute2=n):(e.minute1=n.toString().substring(0,1),e.minute2=n.toString().substring(1,2)),10>o?(e.hour1=0,e.hour2=o):(e.hour1=o.toString().substring(0,1),e.hour2=o.toString().substring(1,2)))}return e},t.parseStringToDateByZone=function(t,e){return this.switchTimeZone(this.parseStringToDate(t),e)},t.switchTimeZone=function(t,e){return void 0===e&&(e=null),t},t.parseStringToDate=function(t){var e,a,i=t.split(/\s+/g);i.length>=2?(e=i[0].split(/[-|\/]/g),a=i[1].split(/[:]/g)):-1!=t.indexOf(":")?(e=[],a=t.split(/[:]/g)):(e=t.split(/[-|\/]/g),a=[]);var n;if(e){for(n=0;3>n;n++)e[n]?e[n]=Number(e[n]):e[n]=null;null!=e[1]&&(e[1]=e[1]-1)}if(a)for(n=0;3>n;n++)a[n]?a[n]=Number(a[n]):a[n]=null;return new Date(e[0],e[1],e[2],a[0],a[1],a[2])},t.parseStringToDateTime=function(e,a){if(void 0===a&&(a="EST"),!e)return"";var i=t.parseStringToDateByZone(e,a),n=i.toString().split(" ");return n[1]+"."+n[2]+" "+n[3].substr(0,5)},t.formatDateStr=function(t,e,a){if(void 0===a&&(a="EST"),!t)return"";var i=this.parseStringToDateByZone(t,a);return this.formatDate(i,e)},t.formatDate=function(t,e,a){function i(t){return 1==t.length?"0"+t:t}void 0===a&&(a="EST");var n=e;if(-1!=e.indexOf("yyyy")&&(n=n.replace(new RegExp("yyyy","gm"),t.getFullYear().toString())),-1!=e.indexOf("MM")?n=n.replace(new RegExp("MM","gm"),t.toDateString().split(" ")[1]):-1!=e.indexOf("Mm")&&(n=n.replace(new RegExp("Mm","gm"),(t.getMonth()+1).toString())),-1!=e.indexOf("dd")&&(n=n.replace(new RegExp("dd","gm"),i(t.getDate().toString()))),-1!=e.indexOf("HH")&&(n=n.replace(new RegExp("HH","gm"),i(t.getHours().toString()))),-1!=e.indexOf("hh"))if(-1!=e.indexOf("tt")){var o=t.getHours();n=12==o||0==o?n.replace(new RegExp("hh","gm"),"12"):n.replace(new RegExp("hh","gm"),i(o%12)),n=n.replace(new RegExp("tt","gm"),o>=12?"PM":"AM")}else n=n.replace(new RegExp("hh","gm"),i(t.getHours().toString()));return-1!=e.indexOf("mm")&&(n=n.replace(new RegExp("mm","gm"),i(t.getMinutes().toString()))),-1!=e.indexOf("ss")&&(n=n.replace(new RegExp("ss","gm"),i(t.getSeconds().toString()))),n},t.convertDateStr=function(e,a){void 0===a&&(a="");var i=e.split(" "),n="{0} {1} {2}";return t.format(n,i[0].toString().split("-").join("/"),i[1],a)},t.format=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];for(var i=0;i<e.length;i++)t=t.replace(new RegExp("\\{"+i+"\\}","gm"),e[i]);return t},t.stringTime=function(t,e){void 0===e&&(e=4);var a="";if(Math.floor(t/86400)>0){var i=Math.floor(t/86400);a+=i+(i>1?" days":" day"),t%=86400}if(1==e)return a;if(Math.floor(t/3600)>0){var n=Math.floor(t/3600);a+=" "+n+(n>1?" hours":" hour"),t%=3600}if(2==e)return a;if(Math.floor(t/60)>0){var o=Math.floor(t/60);a+=" "+o+(o>1?" minutes":" minute"),t%=60}if(3==e)return a;if(Math.floor(t%60)>0){var r=t%60;a+=" "+r+(r>0?"Seconds":"Second")}return a.length<1&&(a=" 0Second"),a},t}();t.DateUtils=e,__reflect(e.prototype,"wpt.DateUtils")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t.getStrByComma=function(t){return t.toString().replace(/(?!^)(?=(\d{3})+(?:$|\.))/g,",")},t.getNumberByString=function(t){var e=t.replace(",","");return e},t.getStrByWptRule=function(t,e){if(void 0===e&&(e=0),isNaN(t)||1e3>t&&0==e)return t.toString();e++;var a=t.toString();if(this.checkZero(t,7))a=this.getStrByWptRule(t/1e3,e++);else if(1==e)a=this.getStrByComma(t),this.checkZero(t,3)?a=this.getStrByCutZero(a,1)+this.UINTS[e]:this.checkZero(t,1)&&(a=this.getStrByCutZero(a,2)+this.UINTS[e]);else{var i=Math.max(0,e-1);i=Math.min(i,this.UINTS.length-1),e>i&&(t*=Math.pow(1e3,e-i-1)),a=this.getStrByComma(t)+this.UINTS[i],t>1e3&&this.checkZero(t,3)&&e<=this.UINTS.length-1&&(a=this.getStrByCutZero(a,1)+this.UINTS[e])}return a},t.getStrByCutZero=function(t,e){var a=t.split(","),i=a.pop();return a.join(",")+"."+i.substr(0,e)},t.getStrCommonByCnt=function(t,e){if(isNaN(t))return t.toString();var a=t.toString();if(a.length<=e)return this.getStrByComma(a);for(var i=0;a.length>e&&i<this.UINTS.length;)t/=1e3,a=Math.floor(t).toString(),i++;return this.getStrByComma(a)+this.UINTS[Math.min(i,this.UINTS.length-1)]},t.checkZero=function(t,e){var a=!1,i=t.toString();return 1==e?a="0"==i.charAt(i.length-1):2==e?a="0"==i.charAt(i.length-2):3==e?(a="0"==i.charAt(i.length-1),a=a&&"0"==i.charAt(i.length-2)):7==e&&(a="0"==i.charAt(i.length-1),a=a&&"0"==i.charAt(i.length-2),a=a&&"0"==i.charAt(i.length-3)),a},t.getMinFormatStr=function(e,a,i){var n=t.getMinFormat(e,a);return n[0]+(i?i:"")+n[1]},t.getMinFormat=function(e,a){var i,n=e;if(e>a&&(n=a),n>=t.UINTS_NUM[t.UINTS_NUM.length-1])i=t.UINTS_NUM.length-1;else for(var o=0;o<t.UINTS_NUM.length;o++)if(n<t.UINTS_NUM[o]){i=Math.max(0,o-1);break}return[t.getStrByUint(e,i),t.getStrByUint(a,i)]},t.getStrByUint=function(e,a){if(isNaN(e)||1e3>e||0==a)return e.toString();var i=e.toString(),n=t.UINTS_NUM[a];return e>=n&&(i=t.toFix(e/n,1)+t.UINTS[a]),i},t.toFix=function(t,e){var a=t.toString().split(".");return 2==a.length&&(a[1]=a[1].toString().substr(0,e<a[1].length?e:a[1].length)),a.join(".")},t}();e.UINTS=["","K","M","B"],e.UINTS_NUM=[0,1e3,1e6,1e9],t.DealMoneyUtil=e,__reflect(e.prototype,"wpt.DealMoneyUtil")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){this._count=0,this._maps={},this._hashMaps={},this._objKeys=[],this._objDatum=[]}return e.prototype.add=function(t,e){if("object"!=typeof t)this._maps[t]||this._count++,this._maps[t]=e;else if(t instanceof egret.HashObject)this._hashMaps[t.hashCode]||this._count++,this._hashMaps[t.hashCode]=[t,e];else{var a=this._objKeys.lastIndexOf(t);-1==a?(this._objKeys.push(t),this._objDatum.push(e),this._count++):this._objDatum[a]=e}},e.prototype.del=function(t){var e;"object"!=typeof t?this._maps[t]&&(delete this._maps[t],this._count--):t instanceof egret.HashObject?this._hashMaps[t.hashCode]&&(delete this._hashMaps[t.hashCode],this._count--):(e=this._objKeys.lastIndexOf(t),-1!=e&&(this._objKeys.splice(e,1),this._objDatum.splice(e,1),this._count--))},e.prototype.get=function(t){if("object"!=typeof t)return this._maps[t]?this._maps[t]:null;if(t instanceof egret.HashObject)return this._hashMaps[t.hashCode]?this._hashMaps[t.hashCode][1]:null;var e=this._objKeys.lastIndexOf(t);return-1!=e?this._objDatum[e]:null},e.prototype.has=function(t){if("object"!=typeof t)return this._maps[t]?!0:!1;if(t instanceof egret.HashObject)return this._hashMaps[t.hashCode]?!0:!1;var e=this._objKeys.lastIndexOf(t);return-1!=e?!0:!1},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.forEach=function(t,e){void 0===e&&(e=null);var a,i;for(a in this._maps)t.call(e,a,this._maps[a]);for(a in this._hashMaps)i=this._hashMaps[a],t.call(e,i[0],i[1]);for(var n=0;n<this._objKeys.length;n++){var o=this._objKeys[n];t.call(e,this._objKeys[n],this._objDatum[n]),o!=this._objKeys[n]&&n--}},Object.defineProperty(e.prototype,"elements",{get:function(){var t,e,a=[];for(t in this._maps)a.push({key:t,data:this._maps[t]});for(t in this._hashMaps)e=this._hashMaps[t],a.push({key:e[0],data:e[1]});for(var i=this._objKeys.length,n=0;i>n;n++)a.push({key:this._objKeys[n],data:this._objDatum[n]});return a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){var t,e=[];for(t in this._maps)e.push(t);for(t in this._hashMaps)e.push(this._hashMaps[t][0]);return e=e.concat(this._objKeys)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datum",{get:function(){var t,e=[];for(t in this._maps)e.push(this._maps[t]);for(t in this._hashMaps)e.push(this._hashMaps[t][1]);return e=e.concat(this._objDatum)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._maps={},this._hashMaps={},this._objKeys.length=0,this._objDatum.length=0},e.prototype.dump=function(){var e,a;for(e in this._maps)t.log.debug("key:",e,"---> data:",this._maps[e]);for(e in this._hashMaps)a=this._hashMaps[e],t.log.debug("key:",a[0],"---> data:",a[1]);for(var i=this._objKeys.length,n=0;i>n;n++)t.log.debug("key:",typeof this._objKeys[n]," ---> data:",this._objDatum[n])},e}();t.Dictionary=e,__reflect(e.prototype,"wpt.Dictionary")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t.addChild=function(t,e){null!=t&&null!=e&&(t.contains(e)||t.addChild(e))},t.addChildAt=function(t,e,a){null!=t&&null!=e&&t.addChildAt(e,a)},t.addTop=function(t,e){null!=t&&null!=e&&this.addChildAt(t,e,t.numChildren)},t.addBottom=function(t,e){null!=t&&(t.numChildren>0&&t.getChildAt(0)==e||this.addChildAt(t,e,0))},t.bringTop=function(t){null!=t&&null!=t.parent&&t.parent.addChild(t)},t.remove=function(t){if(null!=t){var e=t.parent;null!=e&&e.contains(t)&&e.removeChild(t)}},t.removeAllChild=function(t,e){if(void 0===e&&(e=!0),null!=t)for(;t.numChildren>0;){var a=t.getChildAt(0);t.removeChild(a)}},t.clearImgData=function(t){null!=t&&null!=t.bitmapData&&(t.bitmapData=null)},t}();t.DisplayUtil=e,__reflect(e.prototype,"wpt.DisplayUtil")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(t,e,a){void 0===t&&(t=null),void 0===e&&(e=null),void 0===a&&(a=null),this.callbackComplete=t,this.callbackError=e,this.callbackProgress=a}return e.REQUEST=function(t,a,i,n,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),new e(i,n,o).call(t,a)},e.GET=function(a,i,n,o,r){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null),null!=a&&""!=a){var s=new egret.HttpRequest;if(null!=i){var l=!1;a+="?";for(var h in i)l?a+="&"+h+"="+i[h]:(l=!0,a+=h+"="+i[h]);a+="&_="+egret.getTimer()}t.log.debug("HttpServer.Get1:"+a),s.responseType=egret.HttpResponseType.TEXT,s.open(a,egret.HttpMethod.GET),s.withCredentials=!0,e.REQUEST(s,null,n,o,r)}},e.POST=function(t,a,i,n,o){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),null!=t&&""!=t){var r=new egret.HttpRequest;r.open(t,egret.HttpMethod.POST),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.REQUEST(r,a,i,n,o)}},e.POST2=function(t,a,i,n,o){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),null!=t&&""!=t){var r="";if(null!=a){var s=!1;for(var l in a)s?r+="&"+l+"="+a[l]:(s=!0,r+=l+"="+a[l])}var h=new egret.HttpRequest;h.open(t,egret.HttpMethod.POST),h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.withCredentials=!0,e.REQUEST(h,r,i,n,o)}},e.prototype.call=function(t,e){this.loader=t,this.loader.addEventListener(egret.Event.COMPLETE,this.onComplete,this,!1),this.loader.addEventListener(egret.ProgressEvent.PROGRESS,this.onProgress,this,!1),this.loader.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this,!1),null!=e?this.loader.send(e):this.loader.send("")},e.prototype.onComplete=function(t){var e=t.currentTarget;console.log("request.response data : ",e.response),null!=this.callbackComplete&&this.callbackComplete(e.response)},e.prototype.onProgress=function(t){null!=this.callbackProgress&&this.callbackProgress(t)},e.prototype.onError=function(e){t.log.error(e.data,e.type),null!=this.callbackError&&this.callbackError(e)},e}();t.HttpService=e,__reflect(e.prototype,"wpt.HttpService")}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){function a(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];t.isDebug&&r(l.Debug,e)}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r(l.Info,t)}function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];
r(l.Warn,t)}function o(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];r(l.Error,e),t.isDebug}function r(e,a,i){switch(void 0===i&&(i=""),h=a instanceof String?a.toString():a.join(","),i=t.isempty(i)?"":"["+i+"]",i="["+s()+"]"+i,e){case l.Debug:console.debug(i+"Debug:"+h);break;case l.Info:console.info(i+"Info:"+h);break;case l.Warn:console.warn(i+"Warn:"+h);break;case l.Error:console.error(i+"Error:"+h)}}function s(){return void 0==e.$logRuntime&&(e.$logRuntime=new Date,e.$LOG_RUNTIME_DELTA=egret.getTimer()),e.$LOG_RUNTIME_DELTA=egret.getTimer()-e.$LOG_RUNTIME_DELTA,e.$logRuntime.setTime(e.$LOG_RUNTIME_DELTA+e.$logRuntime.getTime()),e.$LOG_RUNTIME_DELTA=egret.getTimer(),t.DateUtils.formatDate(e.$logRuntime,"yyyy-Mm-dd HH:mm:ss")}var l;!function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(l=e.LogTypes||(e.LogTypes={})),e.debug=a,e.info=i,e.warn=n,e.error=o;var h;e.$log=r,e.$LOG_RUNTIME_DELTA=0,e.$getLogRuntimeStr=s}(e=t.log||(t.log={}))}(wpt||(wpt={}));var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,a){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),a)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var a=this.rstr2binl(t);a.length>16&&(a=this.binl_md5(a,8*t.length));for(var i=Array(16),n=Array(16),o=0;16>o;o++)i[o]=909522486^a[o],n[o]=1549556828^a[o];var r=this.binl_md5(i.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(n.concat(r),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var a,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<t.length;o++)a=t.charCodeAt(o),n+=i.charAt(a>>>4&15)+i.charAt(15&a);return n},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",n=t.length,o=0;n>o;o+=3)for(var r=t.charCodeAt(o)<<16|(n>o+1?t.charCodeAt(o+1)<<8:0)|(n>o+2?t.charCodeAt(o+2):0),s=0;4>s;s++)i+=8*o+6*s>8*t.length?this.b64pad:a.charAt(r>>>6*(3-s)&63);return i},t.prototype.rstr2any=function(t,e){var a,i,n,o,r,s=e.length,l=Array(Math.ceil(t.length/2));for(a=0;a<l.length;a++)l[a]=t.charCodeAt(2*a)<<8|t.charCodeAt(2*a+1);var h=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(h);for(i=0;h>i;i++){for(r=Array(),o=0,a=0;a<l.length;a++)o=(o<<16)+l[a],n=Math.floor(o/s),o-=n*s,(r.length>0||n>0)&&(r[r.length]=n);c[i]=o,l=r}var u="";for(a=c.length-1;a>=0;a--)u+=e.charAt(c[a]);return u},t.prototype.str2rstr_utf8=function(t){for(var e,a,i="",n=-1;++n<t.length;)e=t.charCodeAt(n),a=n+1<t.length?t.charCodeAt(n+1):0,e>=55296&&56319>=e&&a>=56320&&57343>=a&&(e=65536+((1023&e)<<10)+(1023&a),n++),127>=e?i+=String.fromCharCode(e):2047>=e?i+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i},t.prototype.str2rstr_utf16le=function(t){for(var e="",a=0;a<t.length;a++)e+=String.fromCharCode(255&t.charCodeAt(a),t.charCodeAt(a)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",a=0;a<t.length;a++)e+=String.fromCharCode(t.charCodeAt(a)>>>8&255,255&t.charCodeAt(a));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),a=0;a<e.length;a++)e[a]=0;for(var a=0;a<8*t.length;a+=8)e[a>>5]|=(255&t.charCodeAt(a/8))<<a%32;return e},t.prototype.binl2rstr=function(t){for(var e="",a=0;a<32*t.length;a+=8)e+=String.fromCharCode(t[a>>5]>>>a%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var a=1732584193,i=-271733879,n=-1732584194,o=271733878,r=0;r<t.length;r+=16){var s=a,l=i,h=n,c=o;a=this.md5_ff(a,i,n,o,t[r+0],7,-680876936),o=this.md5_ff(o,a,i,n,t[r+1],12,-389564586),n=this.md5_ff(n,o,a,i,t[r+2],17,606105819),i=this.md5_ff(i,n,o,a,t[r+3],22,-1044525330),a=this.md5_ff(a,i,n,o,t[r+4],7,-176418897),o=this.md5_ff(o,a,i,n,t[r+5],12,1200080426),n=this.md5_ff(n,o,a,i,t[r+6],17,-1473231341),i=this.md5_ff(i,n,o,a,t[r+7],22,-45705983),a=this.md5_ff(a,i,n,o,t[r+8],7,1770035416),o=this.md5_ff(o,a,i,n,t[r+9],12,-1958414417),n=this.md5_ff(n,o,a,i,t[r+10],17,-42063),i=this.md5_ff(i,n,o,a,t[r+11],22,-1990404162),a=this.md5_ff(a,i,n,o,t[r+12],7,1804603682),o=this.md5_ff(o,a,i,n,t[r+13],12,-40341101),n=this.md5_ff(n,o,a,i,t[r+14],17,-1502002290),i=this.md5_ff(i,n,o,a,t[r+15],22,1236535329),a=this.md5_gg(a,i,n,o,t[r+1],5,-165796510),o=this.md5_gg(o,a,i,n,t[r+6],9,-1069501632),n=this.md5_gg(n,o,a,i,t[r+11],14,643717713),i=this.md5_gg(i,n,o,a,t[r+0],20,-373897302),a=this.md5_gg(a,i,n,o,t[r+5],5,-701558691),o=this.md5_gg(o,a,i,n,t[r+10],9,38016083),n=this.md5_gg(n,o,a,i,t[r+15],14,-660478335),i=this.md5_gg(i,n,o,a,t[r+4],20,-405537848),a=this.md5_gg(a,i,n,o,t[r+9],5,568446438),o=this.md5_gg(o,a,i,n,t[r+14],9,-1019803690),n=this.md5_gg(n,o,a,i,t[r+3],14,-187363961),i=this.md5_gg(i,n,o,a,t[r+8],20,1163531501),a=this.md5_gg(a,i,n,o,t[r+13],5,-1444681467),o=this.md5_gg(o,a,i,n,t[r+2],9,-51403784),n=this.md5_gg(n,o,a,i,t[r+7],14,1735328473),i=this.md5_gg(i,n,o,a,t[r+12],20,-1926607734),a=this.md5_hh(a,i,n,o,t[r+5],4,-378558),o=this.md5_hh(o,a,i,n,t[r+8],11,-2022574463),n=this.md5_hh(n,o,a,i,t[r+11],16,1839030562),i=this.md5_hh(i,n,o,a,t[r+14],23,-35309556),a=this.md5_hh(a,i,n,o,t[r+1],4,-1530992060),o=this.md5_hh(o,a,i,n,t[r+4],11,1272893353),n=this.md5_hh(n,o,a,i,t[r+7],16,-155497632),i=this.md5_hh(i,n,o,a,t[r+10],23,-1094730640),a=this.md5_hh(a,i,n,o,t[r+13],4,681279174),o=this.md5_hh(o,a,i,n,t[r+0],11,-358537222),n=this.md5_hh(n,o,a,i,t[r+3],16,-722521979),i=this.md5_hh(i,n,o,a,t[r+6],23,76029189),a=this.md5_hh(a,i,n,o,t[r+9],4,-640364487),o=this.md5_hh(o,a,i,n,t[r+12],11,-421815835),n=this.md5_hh(n,o,a,i,t[r+15],16,530742520),i=this.md5_hh(i,n,o,a,t[r+2],23,-995338651),a=this.md5_ii(a,i,n,o,t[r+0],6,-198630844),o=this.md5_ii(o,a,i,n,t[r+7],10,1126891415),n=this.md5_ii(n,o,a,i,t[r+14],15,-1416354905),i=this.md5_ii(i,n,o,a,t[r+5],21,-57434055),a=this.md5_ii(a,i,n,o,t[r+12],6,1700485571),o=this.md5_ii(o,a,i,n,t[r+3],10,-1894986606),n=this.md5_ii(n,o,a,i,t[r+10],15,-1051523),i=this.md5_ii(i,n,o,a,t[r+1],21,-2054922799),a=this.md5_ii(a,i,n,o,t[r+8],6,1873313359),o=this.md5_ii(o,a,i,n,t[r+15],10,-30611744),n=this.md5_ii(n,o,a,i,t[r+6],15,-1560198380),i=this.md5_ii(i,n,o,a,t[r+13],21,1309151649),a=this.md5_ii(a,i,n,o,t[r+4],6,-145523070),o=this.md5_ii(o,a,i,n,t[r+11],10,-1120210379),n=this.md5_ii(n,o,a,i,t[r+2],15,718787259),i=this.md5_ii(i,n,o,a,t[r+9],21,-343485551),a=this.safe_add(a,s),i=this.safe_add(i,l),n=this.safe_add(n,h),o=this.safe_add(o,c)}return[a,i,n,o]},t.prototype.md5_cmn=function(t,e,a,i,n,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(i,o)),n),a)},t.prototype.md5_ff=function(t,e,a,i,n,o,r){return this.md5_cmn(e&a|~e&i,t,e,n,o,r)},t.prototype.md5_gg=function(t,e,a,i,n,o,r){return this.md5_cmn(e&i|a&~i,t,e,n,o,r)},t.prototype.md5_hh=function(t,e,a,i,n,o,r){return this.md5_cmn(e^a^i,t,e,n,o,r)},t.prototype.md5_ii=function(t,e,a,i,n,o,r){return this.md5_cmn(a^(e|~i),t,e,n,o,r)},t.prototype.safe_add=function(t,e){var a=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(a>>16);return i<<16|65535&a},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var wpt;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.prase(RES.getRes("MessageType_txt"))},e.prototype.getMsgName=function(t){var e=t;if(this.varDict){var a;for(var i in this.varDict)if(a=this.varDict[i],a.key==t){a.comment&&(e=" 0x"+t+"["+a.comment+"] "+i);break}}return e},Object.defineProperty(e.prototype,"varDict",{get:function(){return this._varDict},enumerable:!0,configurable:!0}),e.prototype.prase=function(e){if(!t.isempty(e)){this._varDict={};var a=e.split("\n");t.log.debug("\n**************************开始解析***********************************");var i,n;for(var o in a)if(n=a[o],i&&(i+=n),-1!=n.indexOf("		//"))this.curComment=this.parseComment([n]);else if(-1!=n.indexOf("		/*")&&-1!=n.indexOf("*/"))this.curComment=this.parseComment([n]);else if(-1!=n.indexOf("		/*")&&-1==n.indexOf("*/"))i=n;else if(-1!=n.indexOf("*/"))this.curComment=this.parseComment([i]),i=null;else if(-1!=n.indexOf("=")){var r=this.parseVar(n);this._varDict[r[0]]=new Object,this._varDict[r[0]].key=r[1],this._varDict[r[0]].comment=this.curComment,this.curComment=""}t.log.debug("解析完成")}},e.prototype.parseComment=function(e){var a="";for(var i in e)a+=e[i]+"";return a=t.StringUtil.replaceStr(a,"	",""),a=t.StringUtil.replaceStr(a,"/",""),a=t.StringUtil.replaceStr(a,"*","")},e.prototype.parseVar=function(t){var e=t.split("="),a=this.getKey(e[0]),i=this.getValue(e[1]);return[a,i]},e.prototype.getKey=function(t){for(var e,a=t.split(":"),i=a[0],n=i.split(" ");n.length&&!(e=n.pop()););return e},e.prototype.getValue=function(e){if(-1!=e.indexOf("//")){var a=e.split("//");this.curComment=a[1],e=a[0]}e=t.StringUtil.replaceStr(e,"	",""),e=t.StringUtil.replaceStr(e,"'",""),e=t.StringUtil.replaceStr(e,'"',""),e=t.StringUtil.replaceStr(e," ",""),e=t.StringUtil.replaceStr(e,";",""),e=t.StringUtil.replaceStr(e,"(",""),e=t.StringUtil.replaceStr(e,")","");var i=e;if(-1!=e.indexOf("+")){var n,o=e.split("+"),r=o[0],s=this._varDict[r];if(s){var l=s.key;i=""+(parseInt(l,16)+parseInt(o[1],16)).toString(16)}else n=parseInt(o[0],16)+parseInt(o[1],16),i=""+n.toString(16)}return i},e}();t.MessagePrase=e,__reflect(e.prototype,"wpt.MessagePrase")}(wpt||(wpt={}));var wpt;!function(t){function e(){var t=[.25,.45,.63,.78,.9,.97,1.1],e=Math.random(),a=0;e<=t[0]&&(a=0);for(var i=1;i<t.length;i++)if(e>=t[i-1]&&e<t[i]){a=i;break}return a/t.length}function a(e){var a=new egret.Point(e.x+e.width/2,e.y+e.height/2);return a.x+=e.width/2*t.getStepPosRate()*(Math.random()<.5?-1:1),a.y+=e.height/2*t.getStepPosRate()*(Math.random()<.5?-1:1),a}function i(t){var e=[];if(t>=0){for(;t>=10;)e.push(t%10),t=Math.floor(t/10);e.push(t)}return e}function n(t){return 0>t?Math.ceil(t):Math.floor(t)}function o(t){return t-n(t)}t.getStepPosRate=e,t.getPointNearCenter=a,t.numberToNumberArr=i,t.getInt=n,t.getFloat=o}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){this.sendArr=[],this.intervalTime=5}return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.sendProtocol=function(e){switch(e){case t.OGJSSProtocol.ReqUserMaxCGZUnlockValue:case t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SEARCHMATCH_NEW:0==this.sendArr.length&&this.startTimer(),this.sendArr.push({type:e,time:egret.getTimer()})}},e.prototype.reciveProtocol=function(e){switch(e){case t.OGJSSProtocol.ReqUserMaxCGZUnlockValue:case t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SEARCHMATCH_NEW:for(var a=0;a<this.sendArr.length;a++){var i=this.sendArr[a];e==i.type&&(this.reportToServer(i),this.sendArr.splice(a,1))}this.sendArr.length<1&&this.stopTimer()}},e.prototype.reportToServer=function(e){var a=(t.CoreData.getHttpUri(t.CoreData.ReportLogURL),egret.getTimer()-e.time),i="platform=web,type="+e.type.toString(16)+",time="+a,n={logType:1,logMsg:i};t.log.debug("************************************:",i),t.CommonData.getInstance().httpProcessor.send_service_log(n)},e.prototype.startTimer=function(){t.isempty(this.timer)&&(this.timer=new egret.Timer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this,!1)),this.startTime=egret.getTimer(),this.timer.start()},e.prototype.stopTimer=function(){this.timer.stop(),this.timer.reset()},e.prototype.onTimer=function(){if(this.sendArr.length<1)return void this.stopTimer();var t=egret.getTimer()-this.startTime;if(t>0&&Math.floor(t/1e3)%this.intervalTime==0)for(var e=0;e<this.sendArr.length;e++){var a=this.sendArr[e];this.reportToServer(a)}},e}();t.ReportLog=e,__reflect(e.prototype,"wpt.ReportLog")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){}return e.write=function(t,a){egret.localStorage.setItem(e._CLUBPOKER+e.getUserName+""+t,a)},e.read=function(t){return egret.localStorage.getItem(e._CLUBPOKER+e.getUserName+""+t)},e["delete"]=function(t){egret.localStorage.removeItem(e._CLUBPOKER+e.getUserName+""+t)},e.getUserName=function(){return t.isempty(t.CommonData.getInstance().currentUser)?"":t.CommonData.getInstance().currentUser.rolename+"_"},e}();e._CLUBPOKER="_wptpoker_",t.SharedObjectUtil=e,__reflect(e.prototype,"wpt.SharedObjectUtil")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t.format=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];if(null==t)return"";var i,n=e.length;1==n&&e[0]instanceof Array?(i=e[0],n=i.length):i=e;for(var o=0;n>o;o++)t=t.replace(new RegExp("\\{"+o+"\\}","g"),i[o]);return t},t.replaceStr=function(t,e,a){if(!t)return"";var i=t.split(e);return i.join(a)},t.byteNums=function(t){var e=0,a=0;for(a=0;a<t.length;a++){var i=t.charAt(a);i>"一"&&"龥">i?e+=2:"W"==i||"M"==i?e+=2:e++}return e},t}();t.StringUtil=e,__reflect(e.prototype,"wpt.StringUtil")}(wpt||(wpt={}));var wpt;!function(t){function e(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];var i=egret.getDefinitionByName(t);return i&&(i=Object.create(i.prototype),i.constructor.apply(i,e)),i}function a(t){return void 0!=t?egret.getQualifiedClassName(t):"null"}function i(t){var e=0;return t&&(e=t.toNumber?t.toNumber():t),e}function n(t){for(var e=[],a=0,i=t.length;i>a;a++){var n=t[a],o=0;o=n.toNumber?n.toNumber():n,e.push(o)}return e}function o(t){return i(t)}function r(t){return i(t)}function s(t){return t}function l(e){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];return _||(_=RES.getRes("lang_json")),_&&_[e]&&(e=t.StringUtil.format(_[e],a)),e}function h(t,e,a,i){function n(i){e.call(a,i,t)}if(void 0===i&&(i=RES.ResourceItem.TYPE_IMAGE),RES.hasRes(t)){var o=RES.getRes(t);o?n(o):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,i)}function c(t){return void 0==t||null==t||""==t}function u(t,e,a){function i(t,i){for(var o=0,r=0;r<e.length;r++)if("number"==typeof t[e[r]]&&"number"==typeof i[e[r]]?o=t[e[r]]-i[e[r]]:"string"==typeof t[e[r]]&&"string"==typeof i[e[r]]?t[e[r]]>i[e[r]]?o=1:t[e[r]]<i[e[r]]&&(o=-1):"number"==typeof t[e[r]]&&"string"==typeof i[e[r]]?o=1:"string"==typeof t[e[r]]&&"number"==typeof i[e[r]]&&(o=-1),0!=o){o*=a&&void 0!=a[r]?a[r]?1:-1:n;break}return o}if(t&&t.length>1&&e&&e.length>0){var n=1;a&&1==a.length&&(n=a[0]?1:-1),t.sort(i)}}function p(t,e,a,i){RES.getResByUrl(t,e,a,i)}function d(t,e,a,i,n,o){function r(){t.length>0?m(t.shift(),e,a,r,n,o):i&&i.call(e)}r()}function m(e,a,i,n,o,r){function s(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,h,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,u,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,p,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,c,this)}function l(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,h,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,u,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,p,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,c,this)}function h(e){t.log.info(e.groupName+" load complete"),l(),n&&n.call(a)}function c(e){t.log.warn("Url:"+e.resItem.url+" has failed to load")}function u(e){t.log.warn("Group:"+e.groupName+" has failed to load"),h(e)}function p(t){r&&r.call(a,t)}s(),RES.loadGroup(e)}t.getDefinitionObjByName=e,t.getClassName=a,t.getProtoNumber=i,t.getProtoNumberArray=n;t.int64To32=o,t.uint64ToUint32=r,t.int32To64=s;var _;t.getLang=l,t.getAsset=h,t.isempty=c,t.sortOn=u,t.getResByUrl=p,t.loadGroups=d,t.loadGroup=m}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._imageLoader=null,e._source="",e._autoResizeContent=!0,e._bitmap=null,e._isComplete=!1,e.onCreate(),e}return __extends(e,t),e.prototype.onCreate=function(){this._imageLoader||(this._imageLoader=new egret.ImageLoader,"webgl"==egret.Capabilities.renderMode&&(this._imageLoader.crossOrigin="anonymous"),this._imageLoader.addEventListener(egret.Event.COMPLETE,this.onImageLoaderComplete,this),this._imageLoader.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onImageLoaderIOError,this)),this._bitmap||(this._bitmap=new egret.Bitmap,this.addChild(this._bitmap)),this.addEventListener(egret.Event.RESIZE,this.onResize,this)},e.prototype.onDestroy=function(){this._imageLoader&&(this._imageLoader.removeEventListener(egret.Event.COMPLETE,this.onImageLoaderComplete,this),this._imageLoader.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onImageLoaderIOError,this),this._imageLoader=null),this.removeEventListener(egret.Event.RESIZE,this.onResize,this)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){this._source=t,this._imageLoader&&(""==t||void 0==t?this._bitmap.bitmapData=null:this._imageLoader.load(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoResizeContent",{get:function(){return this._autoResizeContent},set:function(t){this._autoResizeContent=t,this.onResize()},enumerable:!0,configurable:!0}),e.prototype.onImageLoaderComplete=function(t){this._bitmap.bitmapData=this._imageLoader.data,this._isComplete=!0,this.onResize()},e.prototype.onImageLoaderIOError=function(t){egret.log("WebImage 图片加载失败",this._source)},e.prototype.onResize=function(){this._bitmap&&this._bitmap.bitmapData&&(this._autoResizeContent?(this._bitmap.width=this.width,this._bitmap.height=this.height):(this.width=this._bitmap.width=this._bitmap.bitmapData.width,this.height=this._bitmap.height=this._bitmap.bitmapData.height))},Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._isComplete},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bitmap",{get:function(){return this._bitmap},enumerable:!0,configurable:!0}),e}(eui.Component);t.WebImage=e,__reflect(e.prototype,"wpt.WebImage")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(e,a){return void 0===a&&(a=null),t.call(this,e,a)||this}return __extends(e,t),e}(t.BaseEvent);t.HttpEvent=e,__reflect(e.prototype,"wpt.HttpEvent")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(e,a){return t.call(this,e,a)||this}return __extends(e,t),e}(t.BaseEvent);e.BASE="ToLobbyEvent_",e.TO_LOBBY_PIPE=e.BASE+"PIPE",e.START_NORMAL=e.BASE+"START_NORMAL",e.START_MATCH=e.BASE+"START_MATCH",e.ENTERMATCH_RESULT=e.BASE+"ENTERMATCH_RESULT",e.REQ_RESIGN_MATCH=e.BASE+"REQ_RESIGN_MATCH",e.REQ_SIMILAR_TABLE=e.BASE+"REQ_SIMILAR_TABLE",e.REQ_OPEN_MATCHINFO=e.BASE+"REQ_OPEN_MATCHINFO",e.SEND_SIGN_MATCH_CHIP=e.BASE+"SEND_SIGN_MATCH_CHIP",e.REQ_TICKET=e.BASE+"REQ_TICKET",e.REFRESH_TICKET=e.BASE+"REFRESH_TICKET",e.REQ_TABLEGIFTLIST=e.BASE+"REQ_TABLEGIFTLIST",e.REQ_IMGLIST=e.BASE+"REQ_IMGLIST",t.ToLobbyEvent=e,__reflect(e.prototype,"wpt.ToLobbyEvent")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(a,i){var n=t.call(this,e.TO_TABLE_PIPE,i)||this;return n.eventType=a,n}return __extends(e,t),e}(t.BaseEvent);e.TO_TABLE_PIPE=e.BASE+"TO_TABLE_PIPE",e.BASE="ToTableEvent",e.START_NORMAL=e.BASE+"TO_TABLE_START_NORMAL",e.START_MATCH=e.BASE+"TO_TABLE_START_MATCH",e.TO_TABLE_SIGNEDMATCH_READYSTART=e.BASE+"TO_TABLE_SIGNEDMATCH_READYSTART",e.TO_TABLE_UPDATE_HEAD=e.BASE+"TO_TABLE_UPDATE_HEAD",e.TO_TABLE_UPDATE_REBUY_REFILL=e.BASE+"TO_TABLE_UPDATE_REBUY_REFILL",e.TO_TABLE_UPDATE_GIFTLIST=e.BASE+"TO_TABLE_UPDATE_GIFTLIST",e.TO_TABLE_UPDATE_CARDLIST=e.BASE+"TO_TABLE_UPDATE_CARDLIST",e.TO_TABLE_REFRESH_TICKET=e.BASE+"TO_TABLE_REFRESH_TICKET",e.TO_TABLE_REFRESH_COIN=e.BASE+"TO_TABLE_REFRESH_COIN",e.TO_TABLE_EXIT_GAME=e.BASE+"TO_TABLE_EXIT_GAME",t.ToTableEvent=e,__reflect(e.prototype,"wpt.ToTableEvent")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(e,a){return void 0===a&&(a=null),t.call(this,e,a)||this}return __extends(e,t),e}(t.BaseEvent);e.Base="WPTEvent:",e.LOAD_ALL_COMPLETE=e.Base+"load_all_complete",e.LOAD_MODULE=e.Base+"load_module",e.MATCHLIST_UPDATEVIEW=e.Base+"matchlist_udateview",e.ENTER_TABLE=e.Base+"ENTER_TABLE",e.LOOK_NORMAL=e.Base+"LOOK_NORMAL",e.ENTER_SIMPLE_TABLE=e.Base+"ENTER_SIMPLE_TABLE",e.SIGNUP_MATCH=e.Base+"SIGNUP_MATCH",e.BUYIN_MATCH=e.Base+"BUYIN_MATCH",e.SELECTED_SIGNED_MATCH=e.Base+"SELECTED_SIGNED_MATCH",e.SELECT_TABLE_PLAYERINFO=e.Base+"SELECT_TABLE_PLAYERINFO",e.WATCH_MATCH=e.Base+"WATCH_MATCH",e.OPEN_TOURNEYLOBBY_BY_MATCHID=e.Base+"OPEN_TOURNEYLOBBY_BY_MATCHID",e.FILTER_SIGNED_MATCH=e.Base+"FILTER_SIGNED_MATCH",e.SELECT_MATCH_TABLE=e.Base+"SELECT_MATCH_TABLE",e.UPDATE_MATCHLIST_SENDREWARD=e.Base+"UPDATE_MATCHLIST_SENDREWARD",e.OPEN_DETAILS_POPUP=e.Base+"OPEN_DETAILS_POPUP",e.OPEN_REGISTER_POPUP=e.Base+"OPEN_REGISTER_POPUP",e.TOUR_OPEN_WAIT_POPUP=e.Base+"TOUR_OPEN_WAIT_POPUP",e.SELECT_MATCH_TABLE_TOUR_CACHE=e.Base+"SELECT_MATCH_TABLE_TOUR_CACHE",e.TOUR_TAGDATA_UPDATA=e.Base+"TOUR_TAGDATA_UPDATA",e.TOUR_TAGDATA_UPDATA_ONE=e.Base+"TOUR_TAGDATA_UPDATA_ONE",e.TOUR_BUYIN_MATCH_FAILD=e.Base+"TOUR_BUYIN_MATCH_FAILD",e.TOUR_REGMATCH=e.Base+"TOUR_REGMATCH",e.TOUR_END_TO_BUYIN=e.Base+"TOUR_ENT_TO_BUYIN",e.TOUR_END_TO_PLAY=e.Base+"TOUR_ENT_TO_PLAY",e.TOUR_ON_UNLOCK=e.Base+"TOUR_ON_UNLOCK",e.TOUR_GAME_REWARD_CLOSE=e.Base+"TOUR_GAME_REWARD_CLOSE",e.TOUR_LOGIN_ENTER_GAME=e.Base+"TOUR_LOGIN_ENTER_GAME",e.TOUR_DISPLAY_REFRSH=e.Base+"TOUR_DISPLAY_REFRSH",e.TICKET_GETED=e.Base+"TICKET_GETED",e.READY_START_MATCH=e.Base+"READY_START_MATCH",e.UPDATE_COINS_DATA=e.Base+"UPDATE_COINS_DATA",e.UPDATE_MATCH_DATA=e.Base+"UPDATE_MATCH_DATA",e.GET_MATCHLIST_SENDREWARD=e.Base+"GET_MATCHLIST_SENDREWARD",e.UPDATE_CHANGEINFO=e.Base+"UPDATE_CHANGEINFO",e.UPDATE_UNLOCK_VIEW=e.Base+"UPDATE_UNLOCK_VIEW",e.UPDATE_MATCH_PLAYERNUM=e.Base+"UPDATE_MATCH_PLAYERNUM",e.SEND_SIGN_MATCH_CHIP=e.Base+"SEND_SIGN_MATCH_CHIP",e.REQ_TICKEY_INFO=e.Base+"REQ_TICKEY_INFO",e.UPDATE_VIEW_LAYOUT=e.Base+"REQ_TICKEY_INFO",e.JS_REQ_FUNC=e.Base+"JS_REQ_FUNC",e.JSS_DATA=e.Base+"JSS_DATA",e.JSS_UPDATE=e.Base+"JSS_UPDATE",e.REFRESH_GET_FLASHVARS=e.Base+"REFRESH_GET_FLASHVARS",t.WPTEvent=e,__reflect(e.prototype,"wpt.WPTEvent")}(wpt||(wpt={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,a){function i(i){e.call(a,i,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?i(n):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var wpt;!function(t){var e=function(){function e(){this.player_location=t.TableLobbyConst.PLAYER_LOBBY,this.stopInfo={},this.promoInfo={},this.DEST_GAME_SELF="DEST_GAME_SELF",this.SYNC_DATA="SYNC_DATA",this.currentUser=new t.UserData,this.lobby=new t.LobbyData,this.tableGiftList=[],this.imgUrlList=[],this.stamp=new t.Stamp,this.initMatchComplete=!1,this.isOpenPopupInTable=!1,this.hideEmoji=!1,this.spinData=new t.play.spin.SpinData,this.masterConfigs=[],this.maxMasterLv=0}return e.getInstance=function(){return null==e._instance&&(e._instance=new e,e._instance.init()),e._instance},e.prototype.init=function(){this.matchlistService=new t.net.MatchListService,this.jssService=new t.net.JSSService,this.spinService=new t.net.SpinSocketService,this.preload=new t.PreLoad,this.httpProcessor=new t.net.HttpProcessor},e.prototype.getConfigByMasterLevel=function(t){t=0==t?1:t>e.getInstance().masterConfigs.length&&e.getInstance().masterConfigs.length>0?e.getInstance().masterConfigs[e.getInstance().masterConfigs.length-1].nLev:t;var a;for(var i in this.masterConfigs)if(a=this.masterConfigs[i],a.nLev==t)return a;return null},e.prototype.getConfigArrayList=function(){var t,e=[];for(var a in this.masterConfigs)t=this.masterConfigs[a],e.push(t);return e},e.prototype.getMasterMaxLevel=function(){if(this.maxMasterLv>0)return this.maxMasterLv;var t;for(var e in this.masterConfigs)t=this.masterConfigs[e],t.nLev>this.maxMasterLv&&t.nLev<101&&(this.maxMasterLv=t.nLev);return this.maxMasterLv},e.prototype.getTicketNumById=function(t){for(var e=0,a=0;a<this.currentUser.ticketInfos.length;a++)if(this.currentUser.ticketInfos[a].itemid==t){e=this.currentUser.ticketInfos[a].num;break}return e},e.prototype.getTicketDataById=function(t){for(var e=0,a=0;a<this.currentUser.ticketInfos.length;a++)if(this.currentUser.ticketInfos[a].itemid==t){e=this.currentUser.ticketInfos[a].validate;break}return e},e.prototype.setTicketNumById=function(e,a,i){if(void 0===i&&(i=!1),""!=e&&null!=e){for(var n=!1,o=0;o<this.currentUser.ticketInfos.length;o++)if(this.currentUser.ticketInfos[o].itemid==e){n=!0,i?this.currentUser.ticketInfos[o].num+=a:this.currentUser.ticketInfos[o].num=a,t.dispatch(new t.WPTEvent(t.WPTEvent.TICKET_GETED));break}n||t.dispatch(new t.WPTEvent(t.WPTEvent.REQ_TICKEY_INFO))}},e.prototype.UpdateMaxCGZUnlockValue=function(){if(0==this.lobby.isGetedUnlockValue)return!1;if(this.currentUser.coins>this.lobby.maxCGZUnlockValue&&this.lobby.maxCGZUnlockValue<this.lobby.cgzPartionConfigs[this.lobby.cgzPartionConfigs.length-1].bankRoll){for(var e=1;e<this.lobby.cgzPartionConfigs.length;e++)if(this.currentUser.coins<this.lobby.cgzPartionConfigs[e].bankRoll&&this.lobby.maxCGZUnlockValue<this.lobby.cgzPartionConfigs[e-1].bankRoll)return this.currentUser.coins>=this.lobby.cgzPartionConfigs[e-1].bankRoll?(t.log.info("更新最大解锁值:"+this.lobby.cgzPartionConfigs[e-1].bankRoll),this.jssService.jssProcessor.ReqUpdateMaxCGZUnlockValue(this.lobby.cgzPartionConfigs[e-1].bankRoll),!0):!1;if(e==this.lobby.cgzPartionConfigs.length)return this.currentUser.coins>=this.lobby.cgzPartionConfigs[e-1].bankRoll?(t.log.info("更新最大解锁值:"+this.lobby.cgzPartionConfigs[e-1].bankRoll),this.jssService.jssProcessor.ReqUpdateMaxCGZUnlockValue(this.lobby.cgzPartionConfigs[e-1].bankRoll),!0):!1}return!1},e.prototype.getLuckyNameByID=function(e){for(var a=0;a<this.imgUrlList.length;a++)if(t.readMultiByte(this.imgUrlList[a].itemId)==e.toString())return t.readMultiByte(this.imgUrlList[a].name)},e}();e.isExitGameToTourModeGame=!1,e.isTourModeBuyinOrFree=0,t.CommonData=e,__reflect(e.prototype,"wpt.CommonData")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){}return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},Object.defineProperty(e.prototype,"loadUI",{get:function(){return t.isempty(this._loadUI)&&(this._loadUI=new t.LoadingUI),this._loadUI},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadEffect",{get:function(){return t.isempty(this._loadEffect)&&(this._loadEffect=new t.LoadingEffect),this._loadEffect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadStopServerImg",{get:function(){return t.isempty(this._loadStopServerImg)&&(this._loadStopServerImg=new t.LoadingStopServerImg),this._loadStopServerImg},enumerable:!0,configurable:!0}),e}();t.CommonView=e,__reflect(e.prototype,"wpt.CommonView")}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){t[t.announced=0]="announced",t[t.registering=1]="registering",t[t.inprogress=2]="inprogress",t[t.completed=3]="completed",t[t.lastregistering=4]="lastregistering"}(e=t.MATCHSTATUS||(t.MATCHSTATUS={})),t.TAB_NORMAL=0,t.TAB_SITGO=1,t.TAB_TOURNAMENTS=2,t.PLAYER_LOBBY=0,t.PLAYER_TABLE=1,t.RING_STAKES_LOW=1,t.RING_STAKES_MEDIUM=16,t.RING_STAKES_HIGHT=256,t.RING_AND=69905,t.RING_SEAT_ANY=1,t.RING_SEAT_AND_ANY=69904,t.RING_SEAT_2=16,t.RING_SEAT_AND_2=69889,t.RING_SEAT_6=256,t.RING_SEAT_AND_6=69649,t.RING_SEAT_9=4096,t.RING_SEAT_AND_9=65809,t.ROOM_NORMAL=1,t.ROOM_MATCH=2,t.ROOM_NORMAN_MATCH=3,t.TyPrefix="ty",t.MATCH_STATE_ANNOUNCED=0,t.MATCH_STATE_REGISTER=1,t.MATCH_STATE_RUNNING=2,t.MATCH_STATE_COMPLETE=3,t.MATCH_STATE_LATER=4,t.ys_area=1,t.jy_area=2,t.zj_area=3,t.ds_area=4,t.py_area=5,t.zt_area=6,t.gsandbx_area=11,t.mx_area=12,t.yx_area=13,t.zz_area=14,t.sitgo_area=10001,t.tournaments_area=10002,t.mytourneys_area=10003}(e=t.TableLobbyConst||(t.TableLobbyConst={}));var a;!function(t){t.GET_AVATAR="GetMultiPersonalCurrentAvatars",t.GET_AVATAR_MULTI="GetMultiPersonalCurrentAvatars",t.GET_AVATAR_LIST="GetPersonalAvatarList",t.SELECT_AVATAR="SetCurrentAvatar",t.GET_CHARM_LIST="GetCharmList",t.SELECT_CHARM="SelectCharm",t.GET_TICKET_LIST="GetTicketList",t.CHECK_USER_STATUS="CheckUserStatus"}(a=t.NetInterfaceConst||(t.NetInterfaceConst={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){function a(a){e.Version=a.version,e.Encode=a.encode,e.Language=a.language,e.product=a.product,e.clientType=a.clientType,e.isShield=a.isShield,e.Match_Sign_Minute=a.Match_Sign_Minute,e.AD_num=a.AD_num,e.skinGroups=a.skins;var o=a;t.isDebug=o.isDebug,e.StopServicesApi=o.StopServicesApi,e.GetPromoApi=o.GetPromoApi,e.flashvarApi=o.flashvarApi,e.GetPersonalAvatar=o.GetPersonalAvatar,e.GetUserInfo=o.GetUserInfo,e.UserAvatar=o.UserAvatar,e.GetSpinTime=o.GetSpinTime,e.ReportLogURL=o.ReportLogURL,e.tourmodeUri=o.tourmode_uri,e.MatchListConfig=new t.ServerConfig(o.matchlist),e.GameServerConfig=new t.ServerConfig(o.gameserver),e.JSSServerConfig=new t.ServerConfig(o.jss),e.BoradcastServerConfig=new t.ServerConfig(o.boradcast),e.SpinServerConfig=new t.ServerConfig(o.spin),e.MailConfig=a.mail,i()&&(t.log.debug("设置测试数据parseDebug"),n(a))}function i(){return t.isempty(e.flashvarApi)}function n(a){e.ourgameID=a.debug.ourgameID,e.username=a.debug.username,e.rolename=a.debug.rolename,e.nickname=a.debug.nickname,e.IDCertificate=a.debug.IDCertificate,e.IP=a.debug.ip,e.isValidatedEmail=1==parseInt(t.isempty(a.debug.isValidatedEmail)?1:a.debug.isValidatedEmail)}function o(t){return http_type+t}function r(a){var i=a;if(t.log.debug("setFlashVar , "+typeof i,i.State),i&&null!=i.Value){var n=i.Value.split("&");if(null!=n)for(var o,r={},s=0;s<n.length;s++)t.isempty(n[s])||(o=n[s].split("="),r[o[0]]=o[1],t.log.debug("flashvar key:"+o[0]+" = "+o[1]));e.ourgameID=r.OurGameID,e.username=r.userName,e.rolename=r.Rolename,e.nickname=r.DisplayName,e.IDCertificate=r.IDCertificate,e.isValidatedEmail=1==parseInt(r.isValidatedEmail),e.avatarCode=r.avatarCode,e.channelID=parseInt(r.channelID),e.IP=r.ip}}function s(a,i){function n(e){t.log.debug("Load onCheckUserComplete.",e);var a=JSON.parse(e);1==a.State&&10==a.Value?r(!0):r()}function o(e){t.log.debug("onCheckUserError",e),r()}function r(t){void 0===t&&(t=!1),e.isValidatedEmail=t;var n=a;t&&(n=i),null!=n&&n.call(this)}if(void 0===a&&(a=null),void 0===i&&(i=null),!e.isValidatedEmail){var s=e.getHttpUri(e.GetUserInfo+t.NetInterfaceConst.CHECK_USER_STATUS);t.HttpService.GET(s,null,n,o)}}e.Version="1.0.1",e.Encode="utf-8",e.isGBK="GBK"==e.Encode,e.Language="en",e.product=3,e.clientType=1,e.MAXCGZUnlockValue=2e4,e.channelType=1,e.exclude_tables=[],e.Match_Sign_Minute=2,e.TimeZone="Local",e.containerScale=1,e.GAMEID=25011,e.channelID=0,e.sIpParse="",e.isShield=!1,e.isLoginFirst=!1,e.setConfig=a,e.isDebugData=i,e.getHttpUri=o,e.setFlashVar=r,e.checkUserStatus=s}(e=t.CoreData||(t.CoreData={}))}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){this.normalJoin=!1,this.rank={},this.normalData=[],this.matchData=[],this.tyNormalDataDic={},this.myMatchData=[],this.signedArray=[],this.curTabSelectedIndex=-1,this._curTableAreas=[],this._selectedFliterSeats=256,this.selectedFilterSeat=6,this._isHideEmpty=!1,this._isHideFull=!1,this._isRegistering=!0,this._isAnnounced=!0,this._isRunning=!0,this._isCompleted=!0,this._isMytourney=!1,this.curJoinTableArea=-1,this.curSelectTourDataID=-1,this.tourModeUpUseCache=!0,this.tourModeDatas=[],this.isWatchGame=!1,this.autoOpenTourneyLobby=!1,this.isReEntry=!1,this.mlConfigInfo={},this.normalBindList=new eui.ArrayCollection,this.sitgoBindList=new eui.ArrayCollection,this.tourBindList=new eui.ArrayCollection,this.maxCGZUnlockValue=0,this.isGetedUnlockValue=!1
}return e.prototype.getTourDataIndexByID=function(t){for(var e=0;e<this.tourModeDatas.length;++e)if(this.tourModeDatas[e].id==t)return e;return-1},e.prototype.getTourDataByID=function(e){var a=this.getTourDataIndexByID(e);return-1==a?(t.log.warn("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~根据curSelectTourDataID未找到tourData,ID,TourData.length",e,this.tourModeDatas.length),null):this.tourModeDatas[a]},e.prototype.getTourDataByTempleteID=function(t){for(var e=0;e<this.tourModeDatas.length;++e)if(this.tourModeDatas[e].templateId==t.toString())return this.tourModeDatas[e];return null},e.prototype.addTourData=function(t){var e=this.getTourDataIndexByID(t.id);-1!=e?this.tourModeDatas[e]=t:this.tourModeDatas.push(t)},e.prototype.getTourPrevData=function(){var t=this.getTourDataIndexByID(this.curSelectTourDataID)-1;return 0>t?null:this.tourModeDatas[t]},e.prototype.getTourNextData=function(){var t=this.getTourDataIndexByID(this.curSelectTourDataID);return-1==t||t+1>=this.tourModeDatas.length?null:this.tourModeDatas[t+1]},e.prototype.updateSharedObjectData=function(){var a;a=t.SharedObjectUtil.read(e.key_matchState_register),this._isRegistering="0"==a?!1:!0,a=t.SharedObjectUtil.read(e.key_matchState_running),this._isRunning="0"==a?!1:!0,a=t.SharedObjectUtil.read(e.key_matchState_complete),this._isCompleted="0"==a?!1:!0,a=t.SharedObjectUtil.read(e.key_matchState_announced),this._isAnnounced="0"==a?!1:!0,this._isRegistering||this._isRunning||this._isCompleted||(this._isRegistering=this._isRunning=this._isCompleted=!0)},Object.defineProperty(e.prototype,"isHideEmpty",{get:function(){return this._isHideEmpty},set:function(t){this._isHideEmpty=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHideFull",{get:function(){return this._isHideFull},set:function(t){this._isHideFull=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRegistering",{get:function(){return this._isRegistering},set:function(a){this._isRegistering!=a&&(this._isRegistering=a,t.SharedObjectUtil.write(e.key_matchState_register,a?"1":"0"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnnounced",{get:function(){return this._isAnnounced},set:function(a){this._isAnnounced!=a&&(this._isAnnounced=a,t.SharedObjectUtil.write(e.key_matchState_announced,a?"1":"0"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._isRunning},set:function(a){this._isRunning!=a&&(this._isRunning=a,t.SharedObjectUtil.write(e.key_matchState_running,a?"1":"0"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCompleted",{get:function(){return this._isCompleted},set:function(a){this._isCompleted!=a&&(this._isCompleted=a,t.SharedObjectUtil.write(e.key_matchState_complete,a?"1":"0"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMytourney",{get:function(){return this._isMytourney},set:function(t){this._isMytourney!=t&&(this._isMytourney=t)},enumerable:!0,configurable:!0}),e.prototype.updateSelectedFilterSeats=function(){},Object.defineProperty(e.prototype,"selectedFliterSeats",{get:function(){return this._selectedFliterSeats},set:function(t){this._selectedFliterSeats=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curTableAreas",{get:function(){return this._curTableAreas},enumerable:!0,configurable:!0}),e.prototype.updateTableArea=function(t,e){if(void 0===t&&(t=-1),void 0===e&&(e=!0),-1!=t&&-1==this.curTableAreas.indexOf(t)||!e){if(e)this.curTableArea=t;else{var a=this._curTableAreas.indexOf(t);-1!=a&&this._curTableAreas.splice(a,1)}for(var i="",n=0;n<this.curTableAreas.length;n++)this.curTableAreas[n]&&(i+=this.curTableAreas[n]+(n!=this.curTableAreas.length-1?",":""))}return t},Object.defineProperty(e.prototype,"curTableArea",{set:function(t){this.preArea=t,-1==this.curTableAreas.indexOf(t)&&this.curTableAreas.push(t)},enumerable:!0,configurable:!0}),e.prototype.getTagMatchDataByMatchId=function(t){if(this.matchData)for(var e=0,a=this.matchData.length;a>e;e++)if(this.matchData[e].szMatchID==t)return this.matchData[e];return null},e.prototype.getMatchDataByTicketId=function(e){var a=[];if(this.matchData)for(var i=0,n=this.matchData.length;n>i;i++){var o=this.matchData[i];if(!t.isempty(o.ticketMatchItemId)&&1==o.nMatchStatus){var r=o.ticketMatchItemId;r==e&&a.push(o)}}return a},e.prototype.isSignedMatch=function(t){return-1!=this.signedArray.indexOf(t)},e}();e.key_maxCGZUnlockValue="key_maxCGZUnlockValue",e.key_matchState_register="key_matchState_register",e.key_matchState_announced="key_matchState_announced",e.key_matchState_running="key_matchState_running",e.key_matchState_complete="key_matchState_complete",t.LobbyData=e,__reflect(e.prototype,"wpt.LobbyData")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"RootPath",{get:function(){return"resource/"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PlatFormPath",{get:function(){return"resource/"+t.platform+"/"},enumerable:!0,configurable:!0}),t.getRootPath=function(){return t.RootPath},t.getDefaultRes=function(){return t.RootPath+t.Default_Res},t.getDefaultThm=function(){return t.RootPath+"default.thm.json"},t}();e.platform="play",e.Default_Res="default.res.json",e.Httpload_Res="httpload.res.json",e.Config_Path="resource/config.json",e.PROTO_NAME_CHAT="OGChatProtocol_proto",e.PROTO_NAME_COMMON="OGPositionCommon_proto",e.PROTO_NAME_MATCHLIST="OGTexasPokerMatchListProtocol_proto",e.PROTO_NAME_TABLE="OGTexasPokerProtocol_proto",e.PROTO_NAME_JSS="Texaspoker_proto",e.PROTO_NAME_SPIN="lucky-spin_proto",e.SOUND_SEND_CARD="send_card.mp3",e.SOUND_BET="bet.mp3",e.SOUND_CHECK="check.mp3",e.SOUND_FOLD="fold.mp3",e.SOUND_RAISE="raise.mp3",e.SOUND_WIN="win.mp3",e.SOUND_YOU_WIN="you_win.wav",e.SOUND_GOLD_INPUT="gold_input.mp3",e.SOUND_GOLD_REMOVE="gold_remove.mp3",e.SOUND_WARNING="warning.mp3",e.SOUND_ERROR="error.mp3",e.SOUND_ATTENTION="attention.mp3",e.SOUND_MESSAGE="message.mp3",e.SOUND_TIME_REMIND="time_remind.mp3",e.SOUND_SPIN_YES="spin_yes.mp3",e.SOUND_SPIN_NO="spin_no.mp3",e.SOUND_SPIN_MOVE="spin_move.mp3",e.SOUND_SPIN_CLICK="spin_click.mp3",e.SOUND_SPIN_LIGHT="spin_light.mp3",e.SOUND_BTN_CLICK="btn_click.wav",e.SOUND_BTN_OVER="btn_over.wav",e.SOUND_BTN_CHECK="checkbox_select.wav",e.SOUND_BACKGROUND="background.mp3",e.RANK_FIRST_IMG="rankPanel_first_png",e.RANK_SECOND_IMG="rankPanel_second_png",e.RANK_THIRD_IMG="rankPanel_third_png",e.RANK_TIME_PREFIX="num_",e.GREEN_TIME_PREFIX="num_green_",e.YELLOW_TIME_PREFIX="num_yellow_",e.RED_TIME_PREFIX="num_red_",e.RES_PNG="_png",e.RES_COLON="colon",e.ICON_GOLD="icon_gold_png",e.ICON_TICKEY="icon_ticket_png",e.MAIL_ITEM_ICON_READ="mail_icon_readed_png",e.MAIL_ITEM_ICON_UNREAD="mail_icon_unread_png",e.MY_REGISTER_SIGN_IMG="my_register_sign_png",e.MY_RUN_SIGN_IMG="my_run_sign_png",e.EFFECT_SUFFIX="_texture",t.ResConst=e,__reflect(e.prototype,"wpt.ResConst")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){this.server=0,this.sendStamp=0,this.TIME_DELTA=0,this.startTime=0,this.t_preClockTime=0,this.t_curtime=0}return e.prototype.updateTimeDelta=function(e){this.TIME_DELTA=t.DateUtils.parseStringToDate(e).getTime()-(new Date).getTime()},e.prototype.update=function(){this.t_curtime=egret.getTimer(),this.t_curtime-this.t_preClockTime>=500&&(this.startTime=this.startTime+(this.t_curtime-this.t_preClockTime),this.curDate.setTime(this.startTime),this.time=t.DateUtils.formatDate(new Date,"hh:mm:ss tt"),this.t_preClockTime=egret.getTimer())},Object.defineProperty(e.prototype,"serverTime",{get:function(){return this.curDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverTime2",{get:function(){return new Date(this.curDate.getTime()+this.TIME_DELTA)},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.stop(),this.curDate=new Date,this.startTime=this.curDate.getTime(),t.Context.getInstance().gameManager.registerTimer(300,this.update,this)},e.prototype.stop=function(){t.Context.getInstance().gameManager.unRegisterTimer(this.update,this)},e.prototype.serverToLocalDate=function(t){return new Date(t.getTime()-this.TIME_DELTA)},e}();t.Stamp=e,__reflect(e.prototype,"wpt.Stamp")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){this.gold=0,this.hornCount=0,this.nInsBuyFlagShow=1,this.seat=-1,this.nickname="",this.chips=0,this._coins=0,this.score=0,this.master=new t.MasterData,this.headImage="",this.level=0,this.experience=0,this.rolename="",this.sfItem=[],this.ticketInfos=[]}return e.prototype.toString=function(){return"[User(name="+this.nickname+",seat="+this.seat+",coins="+this.coins+",chips="+this.chips+")]"},e.prototype.getTicketNumById=function(t){for(var e=0,a=0;a<this.ticketInfos.length;a++)if(this.ticketInfos[a].itemid==t){e=this.ticketInfos[a].num;break}return e},Object.defineProperty(e.prototype,"coins",{get:function(){return this._coins},set:function(t){this._coins=t},enumerable:!0,configurable:!0}),e}();t.UserData=e,__reflect(e.prototype,"wpt.UserData")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(t){this.config=t,t&&(this.serverHost=t.serverHost,this.serverPort=t.serverPort)}return t}();t.ServerConfig=e,__reflect(e.prototype,"wpt.ServerConfig")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t}();t.MasterData=e,__reflect(e.prototype,"wpt.MasterData")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){this.flag=0,this.nTopIndex=0,this.ticketMatchItemName="",this.ticketMatchItemId="",this.nSignTicketNum=0,this.matchTypeArr=[],this.nTableID=0,this.matchImg="",this.szMatchMinRew="",this.signMatchChip=0}return t.prototype.matchTypeFunc=function(){var t=!1,e=!1,a=!1;(1&this.nSignMode)>0&&(t=!0),(8&this.nSignMode)>0&&(e=!0),(16&this.nSignMode)>0&&(a=!0);var i=[];return i.push(e),i.push(t),i.push(a),i},t}();t.MySignVO=e,__reflect(e.prototype,"wpt.MySignVO")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){this.nBeShowPlyNum=0,this.playerCount=0}return t}();t.NewComerReginVo=e,__reflect(e.prototype,"wpt.NewComerReginVo")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t.compareLimitID=function(t,e){return e-t},t}();t.NormalLimitInfo=e,__reflect(e.prototype,"wpt.NormalLimitInfo")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){this.tyTableId=0,this.preBlind=0,this.tableGiftList=new Array,this.imgUrlList=new Array,this.hornCount=0,this.nField=0,this.allInFlag=!1,this.isNoviceAreas=!1,this.isTiYan_CGZ=0,this.nLuckyID=0,this.isGraduTable=!1,this.nGradu_Ball=-1,this.nGradu_Val=-1,this.nGradu_PerPcomp=-1,this.nGradu_MinPlayer=-1,this.isPopupGame=!1,this.destName=null,this.tableSkinName=null,this.isTyCreater=!1,this.isAccelerated=!1,this.sLangID="",this.sIpParse="",this.gameAddress={high:0,low:0},this.fieldType=0}return t}();t.NormalStartGameVO=e,__reflect(e.prototype,"wpt.NormalStartGameVO")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){this.ticketMatchItemName="",this.ticketMatchItemId="",this.ticketNumb=0,this.nSignTicketNum=0,this.matchTypeArr=[]}return t}();t.SignFeeVO=e,__reflect(e.prototype,"wpt.SignFeeVO")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t}();t.SngResultAwardVO=e,__reflect(e.prototype,"wpt.SngResultAwardVO")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){this.flag=0,this.nTopIndex=0,this.nSignTicketNum=0,this.hornCount=0,this.matchImg="",this.isPopupGame=!1,this.destName=null,this.isWatchGame=!0,this.tableSkinName=null,this.isAccelerated=!1,this.sLangID="",this.sIpParse="",this.tableGiftList=[],this.imgUrlList=[],this.szMatchMinRew="",this.signMatchChip=0,this.ticketBool=!1,this.gameAddress={high:0,low:0}}return t.prototype.matchTypeFunc=function(){var t=!1,e=!1,a=!1;(1&this.nSignMode)>0&&(t=!0),(8&this.nSignMode)>0&&(e=!0),(16&this.nSignMode)>0&&(a=!0);var i=[];return i.push(e),i.push(t),i.push(a),i},t}();t.StartGameVO=e,__reflect(e.prototype,"wpt.StartGameVO")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t}();t.TagBlindInfo=e,__reflect(e.prototype,"wpt.TagBlindInfo")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.szMatchName="",t.szMatchID="",t.nSignFee=0,t.nCharge=0,t.dwGameServerIP=0,t.dwGameServerPort=0,t.szStartTime="",t.nCreateTime=0,t.dwCheckSum=0,t.nInitChip=0,t.bReBuyValue=0,t.bReBuyChip=0,t.bReBuyLimitValue=0,t.bReBuyBlindClass=0,t.bFinalAddOnTime=0,t.bFinalAddOnChip=0,t.bFinalAddOnValue=0,t.nSignTicketNum=0,t.ticketMatchItemName="",t.ticketMatchItemId="",t.blindCollection=[],t.preCollection=[],t.flag=0,t.nTopIndex=0,t.orderId=0,t.matchImg="",t.templateId=0,t.isTiYan_CGZ=0,t.nLuckyID=0,t.nCgzShowType=1,t.curBlindClass=0,t.szMatchMinRew="",t.rewardTotalWnd=0,t.signMatchChip=-1,t.cgzMinChip=0,t}return __extends(a,e),a.prototype.matchTypeFunc=function(){var t=!1,e=!1,a=!1;(1&this.nSignMode)>0&&(t=!0),(8&this.nSignMode)>0&&(e=!0),(16&this.nSignMode)>0&&(a=!0);var i=[];return i.push(e),i.push(t),i.push(a),i},a.prototype.getBlindInfoByLevel=function(t){t=Math.max(t,1);var e={};e.lv=this.blindCollection[t-1].nBlindClass,e.smallBlind=this.blindCollection[t-1].nSmallBlind,e.bigBlind=this.blindCollection[t-1].nBigBlind,e.preBlind=0,e.BlindTime=this.nBlindTime;var a=0,i=e.lv-this.nBlindClassToPreChip;if(i>=0&&this.preCollection[i]){var n=this.preCollection[i];n.nPrechipClass<=this.nMaxPrechipClass&&(a=n.nPrechipValue),e.preBlind=a}return e},a.prototype.getBlindList=function(){for(var t=[],e=this.nStartBlindClass-1;e<this.nMaxBlindClass;e++)if(null!=this.blindCollection[e]){var a={};a.lv=this.blindCollection[e].nBlindClass,a.smallBlind=this.blindCollection[e].nSmallBlind,a.bigBlind=this.blindCollection[e].nBigBlind,a.preBlind=0,a.BlindTime=this.nBlindTime,t.push(a)}for(var i=0,n=0;n<t.length;n++){var o=t[n].lv-this.nBlindClassToPreChip;if(o>=0&&this.preCollection[o]){var r=this.preCollection[o];r.nPrechipClass<=this.nMaxPrechipClass&&(i=r.nPrechipValue),t[n].preBlind=i}}return t},a.prototype.getPreBlindList=function(){for(var t=[],e=this.nStartBlindClass-1;e<this.nMaxBlindClass;e++)if(null!=this.blindCollection[e]){var a={};a.lv=this.blindCollection[e].nBlindClass,a.preBlind=0,t.push(a)}for(var i,n=0,o=0;o<t.length;o++){var r=t[o].lv-this.nBlindClassToPreChip;r>=0&&(i=this.preCollection[r]?this.preCollection[r]:this.preCollection[r-1],i&&(i.nPrechipClass<=this.nMaxPrechipClass&&(n=i.nPrechipValue),t[o].preBlind=n))}return t},a.prototype.isLaterRegister=function(){return 2==this.nMatchStatus&&this.nMatchMaxSignLaterBlindClass>0&&this.nMatchMaxSignLaterBlindClass>=this.curBlindClass?!0:!1},a.prototype.isAnnounced=function(){if(1==this.nMatchStatus){var e=t.DateUtils.parseStringToDateByZone(this.szStartTime,t.CoreData.Encode),a=t.CommonData.getInstance().stamp.serverTime2,i=e.getTime()-a.getTime();return 0>i||60*t.CoreData.Match_Sign_Minute*1e3>i?!1:!0}return!1},a}(egret.EventDispatcher);t.TagMatchData=e,__reflect(e.prototype,"wpt.TagMatchData")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){this.flopRate=0,this.gameCountPerhour=0,this.avgPool=0,this.mode=0,this.flag=0,this.nTopIndex=0,this.friendOrder=-1,this.maxCoin=0,this.minCoin=0,this.allInFlag=!1,this.hydValue=0,this.hasPassWord=!1,this.sCreater=null,this.isTiYan_CGZ=0,this.isShowTiYan_CGZ=!1,this.hotLevel=-1,this.nLuckyID=0,this.nCgzShowType=1,this.nMinBuyChip=0,this.isGraduTable=!1,this.nGradu_Ball=-1,this.nGradu_Val=-1,this.nGradu_PerPcomp=-1,this.nGradu_MinPlayer=-1,this.nCgzShowType_BeWPT=0,this.newOpenActState=0,this.fullTableActState=0,this.nCGZBeShowInBXField=!1,this.fieldType=0}return t}();t.TagNormalData=e,__reflect(e.prototype,"wpt.TagNormalData")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t}();t.TagPreChipInfo=e,__reflect(e.prototype,"wpt.TagPreChipInfo")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.isRunAndNotmyMatch=!1,e}return __extends(e,t),e}(egret.EventDispatcher);t.TourModeData=e,__reflect(e.prototype,"wpt.TourModeData")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t}();t.WPTCgzPartionConfigVO=e,__reflect(e.prototype,"wpt.WPTCgzPartionConfigVO")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.clear=function(){e.prototype.clear.call(this)},a.prototype.init=function(){t.addCommand(t.ToLobbyEvent.REQ_RESIGN_MATCH,this.TO_LOBBY_REQ_RESIGN_MATCH,this),t.addCommand(t.ToLobbyEvent.REQ_SIMILAR_TABLE,this.TO_LOBBY_REQ_SIMILAR_TABLE,this),t.addCommand(t.ToLobbyEvent.REQ_OPEN_MATCHINFO,this.TO_LOBBY_REQ_OPEN_MATCHINFO,this),t.addCommand(t.ToLobbyEvent.SEND_SIGN_MATCH_CHIP,this.TO_LOBBY_SEND_SIGN_MATCH_CHIP,this),t.addCommand(t.ToLobbyEvent.REQ_TICKET,this.TO_LOBBY_REQ_TICKET,this),t.addCommand(t.ToLobbyEvent.REFRESH_TICKET,this.TO_LOBBY_REFRESH_TICKET,this)},a.prototype.TO_LOBBY_REFRESH_TICKET=function(e){t.dispatch(new t.WPTEvent(t.WPTEvent.REQ_TICKEY_INFO))},a.prototype.TO_LOBBY_REQ_TICKET=function(e){var a=e.data;t.dispatch(new t.ToTableEvent(t.ToTableEvent.TO_TABLE_REFRESH_TICKET,t.CommonData.getInstance().getTicketNumById(a)))},a.prototype.TO_LOBBY_SEND_SIGN_MATCH_CHIP=function(e){t.dispatch(new t.WPTEvent(t.WPTEvent.SEND_SIGN_MATCH_CHIP,e.data))},a.prototype.TO_LOBBY_REQ_OPEN_MATCHINFO=function(t){},a.prototype.TO_LOBBY_REQ_RESIGN_MATCH=function(e){var a=e.data.moneyType,i=e.data.matchid;t.CommonData.getInstance().lobby.isReEntry=!0,t.log.debug("REQ_RESIGN_MATCH",i,a),t.CommonData.getInstance().matchlistService.matchlistProcessor.signMoney(i,a)},a.prototype.TO_LOBBY_REQ_SIMILAR_TABLE=function(e){t.dispatch(new t.WPTEvent(t.WPTEvent.ENTER_SIMPLE_TABLE,t.CommonData.getInstance().lobby.curSelectedNormalData))},a}(t.Controller);t.ToLobbyController=e,__reflect(e.prototype,"wpt.ToLobbyController")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.initOnce=function(){this.toLobbyController=new t.ToLobbyController,this.addMeditor(new t.MatchListMeditor),this.addMeditor(new t.JSSMeditor)},a.prototype.clear=function(){e.prototype.clear.call(this)},a}(t.ModuleStarter);t.GlobalServiceController=e,__reflect(e.prototype,"wpt.GlobalServiceController")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.running=!1,t}return __extends(a,e),a.prototype.init=function(){t.addCommand(t.SocketEvent.CONNECT_SUCCESS(t.net.JSSService),this.JSS_CONNECT_SUCCESS,this),t.addCommand(t.SocketEvent.CONNECT_ERROR(t.net.JSSService),this.JSS_CONNECT_ERROR,this),t.addCommand(t.SocketEvent.DISCONNECT(t.net.JSSService),this.DISCONNECT,this),t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.ACK|t.OGJSSProtocol.OGID_MASTER_CONFIG),this.OGID_MASTER_CONFIG,this),t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.ACK|t.OGJSSProtocol.OGID_MASTER_INFO),this.OGID_MASTER_INFO,this),t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.Req_Ack_TableGiftList),this.Req_Ack_TableGiftList,this),t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.ACK_BUYTICKETFROMSHOP),this.ackTicketByOne,this),t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.ACK_TICKETLIST),this.ackTicketList,this),t.addCommand(t.ToLobbyEvent.REQ_TABLEGIFTLIST,this.TO_LOBBY_REQ_TABLEGIFTLIST,this),t.addCommand(t.WPTEvent.REQ_TICKEY_INFO,this.REQ_TICKEY_INFO,this),t.addCommand(t.play.table.TableEvent.PLAYER_SITDOWN,this.JSS_PLAYER_SITDOWN,this),t.addCommand(t.WPTEvent.JSS_DATA,this.JSS_DATA,this),t.addCommand(t.WPTEvent.JSS_UPDATE,this.JSS_UPDATE,this)},a.prototype.JSS_DATA=function(e){if(!this.running){var a=t.CoreData.JSSServerConfig.config.serverHost;this.jssService.connect(a),this.running=!0}},a.prototype.JSS_UPDATE=function(e){if(this.running)return void this.jssProcessor.UPDATE();t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.OGID_JSS_LOGIN+1),this.OGID_JSS_LOGIN_INFO,this);var a=t.CoreData.JSSServerConfig.config.serverHost;this.jssService.connect(a),this.running=!0},a.prototype.OGID_JSS_LOGIN_INFO=function(t){var e=t.data;1==e.result&&this.jssProcessor.UPDATE()},a.prototype.JSS_PLAYER_SITDOWN=function(t){var e=t.data,a=e.matchID,i=e.tableId,n=e.roleName;this.jssProcessor.sendPlayerSitDownState(a,i,n)},a.prototype.REQ_TICKEY_INFO=function(t){this.jssProcessor.reqItemPack(2)},a.prototype.Req_Ack_TableGiftList=function(e){var a=e.data.tableGifts;t.CommonData.getInstance().tableGiftList=a,this.TO_LOBBY_REQ_TABLEGIFTLIST()},a.prototype.TO_LOBBY_REQ_TABLEGIFTLIST=function(e){void 0===e&&(e=null),t.dispatch(new t.ToTableEvent(t.ToTableEvent.TO_TABLE_UPDATE_GIFTLIST,{tableGiftList:t.CommonData.getInstance().tableGiftList}))},Object.defineProperty(a.prototype,"jssProcessor",{get:function(){return this.jssService.jssProcessor},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"jssService",{get:function(){return t.CommonData.getInstance().jssService},enumerable:!0,configurable:!0}),a.prototype.JSS_CONNECT_ERROR=function(e){this.running=!1,t.log.debug("JSS_CONNECT_ERROR")},a.prototype.DISCONNECT=function(e){this.running=!1,t.log.debug("JSS_CONNECT_DISCONNECT")},a.prototype.JSS_CONNECT_SUCCESS=function(e){t.log.debug("JSS_CONNECT_SUCCESS"),this.running=!0,t.CommonData.getInstance().jssService.jssProcessor.LOGIN()},a.prototype.OGID_MASTER_CONFIG=function(t){this.jssProcessor.UPDATE()},a.prototype.OGID_MASTER_INFO=function(t){},a.prototype.ackTicketByOne=function(e){var a=t.CommonData.getInstance().currentUser.ticketInfos,i=e.data,n={};n.id=t.int64To32(i.id),n.itemid=t.readMultiByte(i.itemid,t.CoreData.Encode),n.createtime=t.int64To32(i.createtime),n.num=i.num;var o=i.ticket_config;n.itemname=t.readMultiByte(o.ticket_name,t.CoreData.Encode),n.imgUrl=t.readMultiByte(o.ticket_url,t.CoreData.Encode),n.validate=t.int64To32(o.ticketValiddate),n.tooltip=t.readMultiByte(o.ticket_tooltip,t.CoreData.Encode),n.bsend=o.ticket_bSend;var r=[];r.push(n);for(var s=!1,l=0;l<a.length;l++)if(a[l].itemid==i.itemid){a[l].num=i.num,s=!0;break}s||a.push(n),t.dispatch(new t.WPTEvent(t.WPTEvent.TICKET_GETED))},a.prototype.ackTicketList=function(e){for(var a=e.data,i=[],n=0;n<a.tickets.length;n++){var o={},r=a.tickets[n];o.id=t.int64To32(r.id),o.itemid=t.readMultiByte(r.itemid,t.CoreData.Encode),o.createtime=t.int64To32(r.createtime),o.num=r.num;var s=r.ticket_config;o.itemname=t.readMultiByte(s.ticket_name,t.CoreData.Encode),o.imgUrl=t.readMultiByte(s.ticket_url,t.CoreData.Encode),o.validate=t.int64To32(s.ticket_validdate),o.tooltip=t.readMultiByte(s.ticket_tooltip,t.CoreData.Encode),o.bsend=s.ticket_bSend,i.push(o)}t.CommonData.getInstance().currentUser.ticketInfos=i,t.dispatch(new t.WPTEvent(t.WPTEvent.TICKET_GETED))},a}(t.Meditor);t.JSSMeditor=e,__reflect(e.prototype,"wpt.JSSMeditor")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.matchDataEnabled=!1,t.moneySign=!1,t.enterTableDestName=null,t}return __extends(a,e),a.prototype.init=function(){this.commonData.initMatchComplete=!1,t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_MATCHLIST_NTF_ADDNEWMATCH),this.OGID_MATCHLIST_NTF_ADDNEWMATCH,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_MATCHLIST_NTF_MATCHSPEINFO),this.OGID_MATCHLIST_NTF_MATCHSPEINFO,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_DELMATCH),this.OGID_TEXASPOKER_MATCHLIST_DELMATCH,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_MATCHINFO),this.OGID_TEXASPOKER_MATCHLIST_MATCHINFO,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_MATCHLIST_SHOWLABLE_CONFIG),this.OGID_MATCHLIST_SHOWLABLE_CONFIG,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SEARCHMATCH_NEW),this.matchlistSearchMatch,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_OPENUPFIELD_MODULECONFIG),this.ackNoviceFieldModuleConfig,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_GETGAMEUSERINFO),this.updateNormalUserInfoData,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_NOTIFYMATCHPLAYER),this.notifyMatchPlayer,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDPLAYERINFO),this.revPlayInfo,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDREWARD),this.watchMatchWindow,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SIGNMATCH),this.signSucceed,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_NEWNOTIFYPLAYER),this.updateNewNotify,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_STARTMATCH),this.OGID_TEXASPOKER_MATCHLIST_STARTMATCH,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDMATCHTOPINFO),this.recvMatchTopInfo,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDSIGNINFO),this.myInfo,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_NOTIFYMATCHSTATUS),this.notifyStatus,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_GETROLERESULT),this.GETROLERESULT,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDCHANGEINFO),this.changeInfo,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDMATCHCOININFO),this.matchCoinInfo,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDTABLEINFO),this.tableInfo,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_MATCHLIST_NTF_MATCHSTART_SIGNLATER),this.signLaterSuccess,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_ENTER_SIMILAR_TABLE),this.OGID_TEXASPOKER_MATCHLIST_ENTER_SIMILAR_TABLE,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_MATCHREWARDLATER),this.getMatchRewardLater,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_WPT_FASTJOIN),this.OGID_WPT_FASTJOIN,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_WPT_GETUSERCOININFO),this.OGID_WPT_GETUSERCOININFO,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDSERVERTIME),this.serverTime,this),t.addCommand(t.WPTEvent.ENTER_TABLE,this.ENTER_NORMAL_TABLE,this),t.addCommand(t.WPTEvent.LOOK_NORMAL,this.LOOK_NORMAL,this),t.addCommand(t.WPTEvent.ENTER_SIMPLE_TABLE,this.ENTER_SIMPLE_TABLE,this),t.addCommand(t.WPTEvent.SIGNUP_MATCH,this.SIGNUP_MATCH,this),t.addCommand(t.WPTEvent.BUYIN_MATCH,this.BUYIN_MATCH,this),t.addCommand(t.WPTEvent.SELECTED_SIGNED_MATCH,this.select_SignedMatch_handler,this),t.addCommand(t.WPTEvent.SELECT_TABLE_PLAYERINFO,this.SELECT_TABLE_PLAYERINFO,this),t.addCommand(t.WPTEvent.WATCH_MATCH,this.WATCH_MATCH,this),t.addCommand(t.WPTEvent.FILTER_SIGNED_MATCH,this.FILTER_SIGNED_MATCH,this),t.addCommand(t.WPTEvent.SELECT_MATCH_TABLE,this.SELECT_MATCH_TABLE,this),t.addCommand(t.WPTEvent.SELECT_MATCH_TABLE_TOUR_CACHE,this.SELECT_MATCH_TABLE_TOUR_CACHE,this),t.addCommand(t.WPTEvent.UPDATE_COINS_DATA,this.UPDATE_COINS_DATA,this),t.addCommand(t.WPTEvent.SEND_SIGN_MATCH_CHIP,this.SendSignMatchChipCmd,this)},a.prototype.SendSignMatchChipCmd=function(e){for(var a={},i=0;i<this.myMatchData.length;i++)null==a[this.myMatchData[i].szMatchID]&&(a[this.myMatchData[i].szMatchID]=this.myMatchData[i]);this.myMatchData.length=0;for(var n in a)this.myMatchData.push(a[n]);for(var o=0;o<this.myMatchData.length;o++)if(this.myMatchData[o].szMatchID==e.data.matchId){t.log.debug("比赛退出后,发送我的比赛的金币数量: "+e.data.goldNum),this.myMatchData[o].signMatchChip=e.data.goldNum;break}for(var r=0;r<this.matchData.length;r++)if(this.matchData[r].szMatchID==e.data.matchId){this.matchData[r].signMatchChip=e.data.goldNum;break}},a.prototype.UPDATE_COINS_DATA=function(t){this.commonData.matchlistService.matchlistProcessor.GET_USER_COIN()},a.prototype.serverTime=function(e){var a=e.data;t.log.debug("serverTime:"+e.data.detailtime),this.commonData.stamp.updateTimeDelta(a.detailtime)},a.prototype.signLaterSuccess=function(t){this.startMatch(t.data,!0)},a.prototype.OGID_TEXASPOKER_MATCHLIST_ENTER_SIMILAR_TABLE=function(e){var a=e.data;if(a.isok)t.log.debug("加入相似桌成功 "),this.commonData.lobby.normalJoin=!0,this.autoJoin=!0,this.normalTableStart(a);else{var i,n;switch(a.reason){case 0:i="unknow";break;case 1:i="no_enough_balance_minbuyin",this.lobbyData.curSelectedNormalData&&(n=t.DealMoneyUtil.getStrByWptRule(this.lobbyData.curSelectedNormalData.nMinBuyChip));break;case 2:i="newplayer_limit2";break;case 3:i="no_table_seat"}n?t.MessageDialog.showConfirmNotice(t.getLang(i,n),t.MessageDialog.INSURFICIENT_BALANCE):t.MessageDialog.showConfirmNotice(t.getLang(i))}},a.prototype.WATCH_MATCH=function(t){this.lobbyProcessor.watchMatch(t.data[0],t.data[1])},a.prototype.tableInfo=function(t){this.lobbyData.curSelectMatchTableInfo=t.data},a.prototype.changeInfo=function(e){this.lobbyData.curSelectedMatchChangeInfo=e.data,t.log.debug("changeInfo"),t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_CHANGEINFO,e.data))},a.prototype.GETROLERESULT=function(e){t.MessageDialog.showConfirmNotice(t.getLang("noCreatRole"))},a.prototype.BUYIN_MATCH=function(t){this.lobbyProcessor.signMoney(t.data[0],t.data[1])},a.prototype.SIGNUP_MATCH=function(e){var a=e.data;!this.isSignedMatch(a.szMatchID)||a.nMatchMaxSignLaterBlindClass>0&&a.nMatchReentryCount>0?(t.log.debug("是否已报名比赛判断：未报名,matchData.szMatchID,matchData.templateId: ",a.szMatchID,a.templateId),this.signMatch(this.lobbyData.curSelectedMatchID)):t.log.debug("是否已报名比赛判断：已报名,matchData.szMatchID,matchData.templateId: ",a.szMatchID,a.templateId)},a.prototype.matchCoinInfo=function(t){this.lobbyData.curSelectedMatchCoinInfo=t.data},a.prototype.notifyStatus=function(e){var a=e.data;t.log.debug("比赛状态 改变===========");for(var i=0,n=this.matchData.length;n>i;i++){var o=this.matchData[i];if(o.szMatchID==a.matchid){o.nMatchStatus=a.matchstatus,t.isempty(a.szStartTime)||(o.szStartTime=a.szStartTime),t.isempty(a.nSignPlayer)||(o.nSignPlayer=a.nSignPlayer);break}}for(var r=0,s=this.myMatchData.length;s>r;r++){var l=this.myMatchData[r];if(l.szMatchID==a.matchid){l.nMatchStatus=a.matchstatus,!t.isempty(a.szStartTime)&&l.hasOwnProperty("szStartTime")&&(l.szStartTime=a.szStartTime),!t.isempty(a.nSignPlayer)&&l.hasOwnProperty("nSignPlayer")&&(l.nSignPlayer=a.nSignPlayer);break}}this.updateView(!1)},a.prototype.recvMatchTopInfo=function(t){for(var e,a=t.data,i=0;i<this.matchData.length;i++)for(var n=0;n<a.topInfoList.length;n++)if(e=a.topInfoList[n],this.matchData[i].templateId==e.templateID){this.matchData[i].flag=e.nTopColor,this.matchData[i].nTopIndex=e.nTopIndex;break}},a.prototype.OGID_TEXASPOKER_MATCHLIST_STARTMATCH=function(e){if(t.log.debug("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~服务器下发比赛开始，isMatching: "+this.commonData.isMatching),this.commonData.isMatching){var a,i=e.data;if(a=i.matchid){var n=this.lobbyData.getTagMatchDataByMatchId(a);n&&t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,t.getLang("signedmatch_readystart",n.szMatchName),null)
}}else this.startMatch(e.data),t.play.lobby.TourModeWait.isHideByGame=!0,t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_OPEN_WAIT_POPUP,!1))},a.prototype.OGID_MATCHLIST_SHOWLABLE_CONFIG=function(t){for(var e=t.data,a=[],i=0,n=e.sShowLableConf;i<n.length;i++){var o=n[i],r={};r.nID=o.nID,r.bShow=o.bShow,r.szShowName=o.szShowName,a.push(r)}},a.prototype.OGID_TEXASPOKER_MATCHLIST_MATCHINFO=function(e){var a=e.data,i=this.getTagNormalDataByMatchId(a.MatchID),n=this.getTyNormalDataByMatchId(a.MatchID);n&&(n.nMinBuyChip=t.int64To32(a.nMinBuyChip)),i&&(i.nTableID=t.int64To32(a.nTableID),i.sCreater=a.sCreater,i.hasPassWord=1==a.bPassWord,i.hydValue=t.int64To32(a.nHYDValue),i.nMinBuyChip=t.int64To32(a.nMinBuyChip),t.isempty(a.nGradu_Ball)||(i.nGradu_Ball=t.int64To32(a.nGradu_Ball)),t.isempty(a.nGradu_Val)||(i.nGradu_Val=t.int64To32(a.nGradu_Val)),t.isempty(a.nGradu_PerPcomp)||(i.nGradu_PerPcomp=t.int64To32(a.nGradu_PerPcomp)),t.isempty(a.nGradu_MinPlayer)||(i.nGradu_MinPlayer=a.nGradu_MinPlayer),i.isGraduTable=i.nGradu_Val>0,i.nCgzShowType_BeWPT=a.nCgzShowType_BeWPT,i.nCGZBeShowInBXField=t.isempty(a.bCgzShowInBxField)?!1:a.bCgzShowInBxField)},a.prototype.OGID_TEXASPOKER_MATCHLIST_DELMATCH=function(e){for(var a=e.data,i=0;i<this.matchData.length;i++){var n=this.matchData[i];if(n.szMatchID==a.MatchID){this.matchData.splice(i,1);break}}for(var o=null,r=0;r<this.normalData.length;r++){var s=this.normalData[r];if(s.szMatchID==a.MatchID){o=s,this.normalData.splice(r,1);break}}if(null!=o){for(var l=0,h=0;h<this.normalData.length;h++){var c=this.normalData[h];c.templateId==o.templateId&&l++}if(0==l&&this.tyNormalDataDic[o.templateId]){for(var u=0;u<this.normalData.length;u++){var p=this.normalData[u];if(p.szMatchID==this.tyNormalDataDic[o.templateId].szMatchID){this.normalData.splice(u,1);break}}delete this.tyNormalDataDic[o.templateId]}}for(var d=0;d<this.myMatchData.length;d++)if(this.myMatchData[d].szMatchID==a.MatchID){if(1==this.myMatchData[d].nMatchMode&&1!=this.myMatchData[d].nSpeMatchMode){var m=t.getLang("game_started",this.myMatchData[d].szMatchName);t.MessageDialog.showConfirm(m).setCallback(function(){t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_COINS_DATA,null)),t.dispatch(new t.WPTEvent(t.WPTEvent.REQ_TICKEY_INFO,null))})}this.myMatchData.splice(d,1);break}for(var _=0;_<this.signedArray.length;_++)if(this.signedArray[_]==a.MatchID){this.signedArray.splice(_,1);break}},a.prototype.OGID_MATCHLIST_NTF_MATCHSPEINFO=function(e){var a=e.data,i=this.lobbyData.getTagMatchDataByMatchId(a.szMatchId);if(null!=i&&(i.szMatchMinRew=a.szMatchMinRew?a.szMatchMinRew:"0",i.rewardTotalWnd=t.uint64ToUint32(a.rewardTotalWnd),a.szLableShowConf)){for(var n=[],o=a.szLableShowConf.split(";"),r=0,s=o;r<s.length;r++){var l=s[r];if(""!=l){for(var h={},c=l.split(","),u=0;u<c.length;u++)c[0]&&(h.id=c[0]),c[1]&&(h.weight=c[1]);n[h.id]=h}}i.labelArr=n}},a.prototype.OGID_MATCHLIST_NTF_ADDNEWMATCH=function(e){t.log.debug("!!!!!!!!!!!!!!!!!!!!!!!————————新增MATCH");var a=e.data,i=new t.TagMatchData;if(i.szMatchName=a.szMatchName,i.szMatchID=a.szMatchId,i.nMaxPlayer=t.isempty(a.nMaxPlayer)?0:a.nMaxPlayer,i.nMatchStatus=t.isempty(a.nMatchStatus)?0:a.nMatchStatus,i.nGameType=t.isempty(a.nGameType)?0:a.nGameType,!t.isempty(a.nSpeMode)){var n=t.int64To32(a.nSpeMode);i.allInFlag=0!=(1&n)?!0:!1,i.bDoubleStack=0!=(2&n)?!0:!1,i.bSuperStack=0!=(4&n)?!0:!1,i.bTurbo=0!=(8&n)?!0:!1,i.bSurperTurbo=0!=(16&n)?!0:!1,i.nSpeMatchMode=0!=(32&n)?1:0,i.bPlanetMatch=0!=(128&n)?!0:!1,i.bReBuy=0!=(256&n)?!0:!1,i.bRebuyUseTicket=0!=(512&n)?1:0,i.bFinalAddOnUseTicket=0!=(1024&n)?1:0,i.isTiYan_CGZ=0!=(2048&n)?1:0}i.nSignFee=t.isempty(a.nSignFee)?0:t.int64To32(a.nSignFee),i.nCharge=t.isempty(a.nCharge)?0:t.int64To32(a.nCharge),i.nSignPlayer=t.isempty(a.nSignPlayer)?0:a.nSignPlayer,i.dwGameServerIP=t.isempty(a.nGameIP)?0:t.int64To32(a.nGameIP),i.dwGameServerPort=t.isempty(a.nGamePort)?0:a.nGamePort,i.nMatchMode=t.isempty(a.nMatchMode)?0:a.nMatchMode,i.nTableMode=t.isempty(a.nTableMode)?0:a.nTableMode,i.nSignMode=t.isempty(a.nSignMode)?0:a.nSignMode,i.nClassMode=t.isempty(a.nClassMode)?0:a.nClassMode,i.szStartTime=t.isempty(a.szStartTime)?"":a.szStartTime,i.nDualTime=t.isempty(a.nDualTime)?0:a.nDualTime,i.nStartBlindClass=t.isempty(a.nStartBlindClass)?0:a.nStartBlindClass,i.nMaxBlindClass=t.isempty(a.nMaxBlindClass)?0:a.nMaxBlindClass,i.nBlindTime=t.isempty(a.nBlindTime)?0:a.nBlindTime,i.nBlindClassToPreChip=t.isempty(a.nBlindClassToPreChip)?0:a.nBlindClassToPreChip,i.nMaxPrechipClass=t.isempty(a.nMaxPrechipClass)?0:a.nMaxPrechipClass,i.nCreateTime=t.isempty(a.nCreateTime)?0:t.int64To32(a.nCreateTime),i.nBlindCount=t.isempty(a.nBlindCount)?0:a.nBlindCount,i.nPreChipCount=t.isempty(a.nPreChipCount)?0:a.nPreChipCount,i.dwCheckSum=t.isempty(a.nCheckSum)?0:t.int64To32(a.nCheckSum),i.nInitChip=t.isempty(a.nInitChip)?0:t.int64To32(a.nInitChip),i.minPlayer=t.isempty(a.nMinPlayer)?0:a.nMinPlayer,i.bReBuycount=t.isempty(a.nReBuyCount)?0:a.nReBuyCount,i.bReBuyValue=t.isempty(a.nReBuyValue)?0:t.int64To32(a.nReBuyValue),i.bReBuyChip=t.isempty(a.nReBuyChip)?0:t.int64To32(a.nReBuyChip),i.bReBuyLimitValue=t.isempty(a.nReBuyLimitValue)?0:t.int64To32(a.nReBuyLimitValue),i.bReBuyBlindClass=t.isempty(a.nReBuyBlindClass)?0:t.int64To32(a.nReBuyBlindClass),i.bRebuyTimeout=t.isempty(a.nRebuyTimeout)?0:a.nRebuyTimeout,i.bFinalAddOnTime=t.isempty(a.nFinalAddOnTime)?0:t.int64To32(a.nFinalAddOnTime),i.bFinalAddOnChip=t.isempty(a.nFinalAddOnChip)?0:t.int64To32(a.nFinalAddOnChip),i.bFinalAddOnValue=t.isempty(a.nFinalAddOnValue)?0:t.int64To32(a.nFinalAddOnValue),i.ticketMatchItemName=t.isempty(a.ticketMatchItemName)?"":a.ticketMatchItemName,i.ticketMatchItemId=t.isempty(a.ticketMatchItemId)?"":a.ticketMatchItemId,i.matchImg=t.isempty(a.szEntryShowUrl)?"":a.szEntryShowUrl,i.templateId=t.isempty(a.nTemplateID)?0:t.int64To32(a.nTemplateID),i.nLuckyID=t.isempty(a.nLuckyID)?0:t.int64To32(a.nLuckyID),i.nSignTicketNum=t.isempty(a.nSignTicketNum)?0:t.int64To32(a.nSignTicketNum),i.nCgzShowType=t.isempty(a.nCgzShowType)?0:a.nCgzShowType,i.nMatchMaxSignLaterBlindClass=t.isempty(a.nMatchMaxSignLaterBlindClass)?0:a.nMatchMaxSignLaterBlindClass,i.nMatchReentryCount=t.isempty(a.nMatchReentryCount)?0:a.nMatchReentryCount,a.szTemplateName&&(a.szTemplateName.position=0,i.szTempleName=a.szTemplateName?t.readMultiByte(a.szTemplateName,t.CoreData.Encode):""),i.cgzMinChip=a.cgzMinChip?t.int64To32(a.cgzMinChip):0,t.isempty(a.gameAddress)||(i.gameAddress=a.gameAddress);for(var o=0,r=a.BlindInfo;o<r.length;o++){var s=r[o],l=new t.TagBlindInfo;l.nBlindClass=s.BlindClass,l.nSmallBlind=t.int64To32(s.SmallBlind),l.nBigBlind=t.int64To32(s.BigBlind),l.nBlindTime=s.BlindTime,i.blindCollection.push(l)}for(var h=0,c=a.PreChipInfo;h<c.length;h++){var u=c[h],p=new t.TagPreChipInfo;p.nPrechipClass=u.PrechipClass,p.nPrechipValue=t.int64To32(u.PrechipValue),i.preCollection.push(p)}if(2==i.nMatchMode||3==i.nMatchMode){var d=this.getTagNormalDataByMatchId(i.szMatchID);if(!d){var m=this.getTagNormalDataByTagMatchData(i);this.normalData.push(m);var _=this.genTyNormalDataByTagNormalData(m);m.isTiYan_CGZ&&!this.lobbyData.tyNormalDataDic[_.templateId]&&(this.lobbyData.tyNormalDataDic[_.templateId]=_,this.normalData.push(_))}}else{var T=this.lobbyData.getTagMatchDataByMatchId(i.szMatchID);T||(this.matchData.push(i),t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_TAGDATA_UPDATA_ONE,i)))}},Object.defineProperty(a.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lobbyData",{get:function(){return this.commonData.lobby},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"normalData",{get:function(){return this.commonData.lobby.normalData},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"matchData",{get:function(){return this.commonData.lobby.matchData},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tyNormalDataDic",{get:function(){return this.commonData.lobby.tyNormalDataDic},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"myMatchData",{get:function(){return this.commonData.lobby.myMatchData},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"signedArray",{get:function(){return this.commonData.lobby.signedArray},set:function(t){this.commonData.lobby.signedArray=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"normalLimitData",{get:function(){return this.commonData.normalLimitData},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"curMatchPlayerInfo",{get:function(){return this.lobbyData.curSelectedMatchPlayerInfo},enumerable:!0,configurable:!0}),a.prototype.isSignedMatch=function(t){return-1!=this.signedArray.indexOf(t)},a.prototype.getTagNormalDataByMatchId=function(t){for(var e=0,a=this.normalData.length;a>e;e++)if(this.normalData[e].szMatchID==t)return this.normalData[e];return null},a.prototype.getTyNormalDataByMatchId=function(e){for(var a=0,i=this.lobbyData.tyNormalDataDic;a<i.length;a++){var n=i[a];if(n.szMatchID==t.TableLobbyConst.TyPrefix+e)return n}return null},a.prototype.getTagNormalDataByTagMatchData=function(e){var a=new t.TagNormalData;return a.szMatchID=e.szMatchID,a.szMatchName=e.szMatchName,a.nMatchStatus=e.nMatchStatus,a.nMatchMode=e.nMatchMode,a.nSmallBlind=this.getSmallBlind(e),a.nBigBlind=this.getBigBlind(e),a.nPreChip=this.getPreChip(e),a.nSignPlayer=e.nSignPlayer,a.nMaxPlayer=e.nMaxPlayer,a.dwCheckSum=e.dwCheckSum,a.hasPassWord=!1,a.flopRate=0,a.avgPool=0,a.mode=0,a.gameCountPerhour=0,a.allInFlag=e.allInFlag,a.templateId=e.templateId,a.isTiYan_CGZ=e.isTiYan_CGZ,a.nLuckyID=e.nLuckyID,a.nCgzShowType=e.nCgzShowType,a.isShowTiYan_CGZ=!1,a.szTempleName=e.szTempleName,a.displaySimilarTable=this.getDisplaySimilarTable(a),a.nMinBuyChip=e.cgzMinChip,a},a.prototype.genTyNormalDataByTagNormalData=function(e){var a=new t.TagNormalData;return a.szMatchID=t.TableLobbyConst.TyPrefix+e.szMatchID,a.szMatchName=t.getLang("test_table"),a.nMatchStatus=e.nMatchStatus,a.nMatchMode=e.nMatchMode,a.nSmallBlind=e.nSmallBlind,a.nBigBlind=e.nBigBlind,a.nPreChip=e.nPreChip,a.nSignPlayer=0,a.nMaxPlayer=e.nMaxPlayer,a.dwCheckSum=e.dwCheckSum,a.hasPassWord=!1,a.flopRate=0,a.avgPool=0,a.mode=0,a.gameCountPerhour=0,a.allInFlag=e.allInFlag,a.templateId=e.templateId,a.isTiYan_CGZ=e.isTiYan_CGZ,a.nLuckyID=e.nLuckyID,a.nCgzShowType=e.nCgzShowType,a.isShowTiYan_CGZ=!1,a},a.prototype.getBigBlind=function(t){return 0==t.blindCollection.length?0:t.blindCollection[t.nStartBlindClass].nBigBlind},a.prototype.getSmallBlind=function(t){return 0==t.blindCollection.length?0:t.blindCollection[t.nStartBlindClass].nSmallBlind},a.prototype.getPreChip=function(t){return t.preCollection.length>0?t.preCollection[0].nPrechipValue:0},a.prototype.matchlistSearchMatch=function(e){var a=e.data;t.log.debug("获取到列表数据：",a.templates.length,a.matches.length),this.parseData(a),this.commonData.initMatchComplete=!0,this.updateView(!0)},a.prototype.parseData=function(e){if(!this.matchDataEnabled){for(var a,i=[],n=[],o={},r=0,s=0,l=e.templates;s<l.length;s++)a=l[s],r=t.isempty(a.nTemplateID)?0:t.int64To32(a.nTemplateID),o[r]=a;for(var h=0,c=e.matches;h<c.length;h++){var u=c[h],p=new t.TagMatchData,d=t.readMultiByte(u.szMatchName,t.CoreData.Encode);p.szMatchID=t.isempty(u.szMatchID)?"":t.readMultiByte(u.szMatchID),p.dwCheckSum=t.isempty(u.dwCheckSum)?0:u.dwCheckSum,p.szMatchName=t.isempty(d)?"":d,p.dwGameServerIP=t.isempty(u.dwGameServerIP)?0:u.dwGameServerIP,p.dwGameServerPort=t.isempty(u.dwGameServerPort)?0:u.dwGameServerPort,p.nMatchStatus=t.isempty(u.nMatchStatus)?0:u.nMatchStatus,p.nSignPlayer=t.isempty(u.nSignPlayer)?0:u.nSignPlayer,p.nCreateTime=t.isempty(u.nCreateTime)?0:t.int64To32(u.nCreateTime),p.szStartTime=t.isempty(u.szStartTime)?"":t.readMultiByte(u.szStartTime),p.nDualTime=t.isempty(u.nDualTime)?0:u.nDualTime,p.nLuckyID=t.isempty(u.nLuckyID)?0:t.int64To32(u.nLuckyID),p.templateId=t.isempty(u.nTemplateID)?0:t.int64To32(u.nTemplateID),p.isAllRewWnd=u.isAllRewWnd,p.rewardTotalWnd=u.rewardTotalWnd?t.int64To32(u.rewardTotalWnd):0,t.isempty(u.gameAddress)||(p.gameAddress=u.gameAddress),a=o[p.templateId],t.log.debug("~~~比赛名:"+p.szMatchName,p.templateId,p.szMatchID),a&&(p.nMaxPlayer=t.isempty(a.nMaxPlayer)?0:a.nMaxPlayer,p.nGameType=t.isempty(a.nGameType)?0:a.nGameType,p.allInFlag=t.isempty(a.bAllInField)?!1:a.bAllInField,p.nSignFee=t.isempty(a.nSignFee)?0:t.int64To32(a.nSignFee),p.nCharge=t.isempty(a.nCharge)?0:t.int64To32(a.nCharge),p.bDoubleStack=t.isempty(a.bDoubleStack)?!1:a.bDoubleStack,p.bSuperStack=t.isempty(a.bSuperStack)?!1:a.bSuperStack,p.bTurbo=t.isempty(a.bTurbo)?!1:a.bTurbo,p.bSurperTurbo=t.isempty(a.bSurperTurbo)?!1:a.bSurperTurbo,p.nSpeMatchMode=t.isempty(a.nSpeMatchMode)?0:a.nSpeMatchMode,p.nMatchMode=t.isempty(a.nMatchMode)?0:a.nMatchMode,p.nTableMode=t.isempty(a.nTableMode)?0:a.nTableMode,p.bPlanetMatch=t.isempty(a.bPlanetMatch)?!1:a.bPlanetMatch,p.nSignMode=t.isempty(a.nSignMode)?0:a.nSignMode,p.nClassMode=t.isempty(a.nClassMode)?0:a.nClassMode,p.nStartBlindClass=t.isempty(a.nStartBlindClass)?0:a.nStartBlindClass,p.nMaxBlindClass=t.isempty(a.nMaxBlindClass)?0:a.nMaxBlindClass,p.nBlindTime=t.isempty(a.nBlindTime)?0:a.nBlindTime,p.nBlindClassToPreChip=t.isempty(a.nBlindClassToPreChip)?0:a.nBlindClassToPreChip,p.nMaxPrechipClass=t.isempty(a.nMaxPrechipClass)?0:a.nMaxPrechipClass,p.nBlindCount=t.isempty(a.nBlindCount)?0:a.nBlindCount,p.nPreChipCount=t.isempty(a.nPreChipCount)?0:a.nPreChipCount,p.nInitChip=t.isempty(a.nInitChip)?0:t.int64To32(a.nInitChip),p.minPlayer=t.isempty(a.nMinPlayer)?0:a.nMinPlayer,p.bReBuy=t.isempty(a.bReBuy)?!1:a.bReBuy,p.bReBuycount=t.isempty(a.nReBuyCount)?0:a.nReBuyCount,p.bReBuyValue=t.isempty(a.nReBuyValue)?0:t.int64To32(a.nReBuyValue),p.bReBuyChip=t.isempty(a.nReBuyChip)?0:t.int64To32(a.nReBuyChip),p.bReBuyLimitValue=t.isempty(a.nReBuyLimitValue)?0:t.int64To32(a.nReBuyLimitValue),p.bReBuyBlindClass=t.isempty(a.nReBuyBlindClass)?0:t.int64To32(a.nReBuyBlindClass),p.bRebuyTimeout=t.isempty(a.nRebuyTimeout)?0:a.nRebuyTimeout,p.bRebuyUseTicket=a.bRebuyUseTicket,p.bFinalAddOnTime=t.isempty(a.nFinalAddOnTime)?0:t.int64To32(a.nFinalAddOnTime),p.bFinalAddOnChip=t.isempty(a.nFinalAddOnChip)?0:t.int64To32(a.nFinalAddOnChip),p.bFinalAddOnValue=t.isempty(a.nFinalAddOnValue)?0:t.int64To32(a.nFinalAddOnValue),p.bFinalAddOnUseTicket=t.isempty(a.bFinalAddOnUseTicket)?0:a.bFinalAddOnUseTicket,a.ticketMatchItemName.position=0,p.ticketMatchItemName=t.isempty(a.ticketMatchItemName)?"":t.readMultiByte(a.ticketMatchItemName,t.CoreData.Encode),p.ticketMatchItemId=t.isempty(a.ticketMatchItemId)?"":t.readMultiByte(a.ticketMatchItemId),p.matchImg=t.isempty(a.szEntryShowUrl)?"":t.readMultiByte(a.szEntryShowUrl),p.isTiYan_CGZ=t.isempty(a.nIsTiYan_CGZ)?0:a.nIsTiYan_CGZ,p.nSignTicketNum=t.isempty(a.nSignTicketNum)?0:t.int64To32(a.nSignTicketNum),p.nCgzShowType=t.isempty(a.nCgzShowType)?0:a.nCgzShowType,p.nMatchMaxSignLaterBlindClass=t.isempty(a.nMatchMaxSignLaterBlindClass)?0:a.nMatchMaxSignLaterBlindClass,p.nMatchReentryCount=t.isempty(a.nMatchReentryCount)?0:a.nMatchReentryCount,p.cgzMinChip=a.cgzMinChip?t.int64To32(a.cgzMinChip):0,a.szTemplateName&&(a.szTemplateName.position=0,p.szTempleName=a.szTemplateName?t.readMultiByte(a.szTemplateName,t.CoreData.Encode):""));for(var m=0,_=a.BlindInfo;m<_.length;m++){var T=_[m],g=new t.TagBlindInfo;g.nBlindClass=T.BlindClass,g.nSmallBlind=t.int64To32(T.SmallBlind),g.nBigBlind=t.int64To32(T.BigBlind),g.nBlindTime=T.BlindTime,p.blindCollection.push(g),g=null}for(var f=0,y=a.PreChipInfo;f<y.length;f++){var b=y[f],E=new t.TagPreChipInfo;E.nPrechipClass=b.PrechipClass,E.nPrechipValue=t.int64To32(b.PrechipValue),p.preCollection.push(E),E=null}-1==i.indexOf(u.szMatchID)&&(i.push(u.szMatchID),n.push(p))}this.matchDataEnabled=!0,this.sendNormalData(n),this.sendMatchData(n),this.commonData.matchlistService.sendHeartBeat()}},a.prototype.getDisplaySimilarTable=function(t){var e;if(e=e||this.showTyTableFilter(t)||this.gameWithoutDirectFilter(t)&&this.gameWithoutFriendFilter(t)&&this.gameWithoutPreCoinFilter(t),!e)return!1;for(var a,i=this.commonData.normalLimitData,n=0;n<i.length;n++)if(a=this.commonData.normalLimitData[n],a.displaySimilarTable&&a.minBlind<=t.nBigBlind&&a.maxBlind>=t.nBigBlind)return!0;return!1},a.prototype.sendMatchData=function(e){for(var a=[],i=0,n=this.matchData.length;n>i;i++)a.push(this.matchData[i].szMatchID);for(var o=0,r=e.length;r>o;o++){var s=e[o];-1==a.indexOf(s.szMatchID)&&2!=s.nMatchMode&&3!=s.nMatchMode&&(a.push(s.szMatchID),this.matchData.push(s))}this.matchData.length>0&&t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_TAGDATA_UPDATA)),null!=this._myMatchListBytes&&this.praseMyInfo(this._myMatchListBytes)},a.prototype.sendNormalData=function(e){for(var a=[],i=0,n=this.normalData.length;n>i;i++)a.push(this.normalData[i].szMatchID);for(var o=0,r=e.length;r>o;o++){var s=e[o];if(-1==a.indexOf(s.szMatchID)&&(2==s.nMatchMode||3==s.nMatchMode)){a.push(s.szMatchID);var l=this.getTagNormalDataByTagMatchData(s);if(this.normalData.push(l),l.isTiYan_CGZ){var h=this.genTyNormalDataByTagNormalData(l);this.tyNormalDataDic[h.templateId]||(this.tyNormalDataDic[h.templateId]=h,a.push(h.szMatchID),this.normalData.push(h))}}}t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_MATCH_PLAYERNUM,this.normalData))},a.prototype.getMatchRewardLater=function(e){var a=e.data;if(a.nTotalCoin){var i=t.int64To32(a.nTotalCoin);i>0&&(this.commonData.currentUser.coins=i)}var n,o=t.DealMoneyUtil.getStrByComma;a.RewardName?(n=t.getLang("get_reward",a.MatchName,o(t.int64To32(a.nRewardCount)))+" "+a.RewardName+".",t.MessageDialog.showMsg(t.MessageDialog.NOTICE,n).setCallback(function(){})):(n=t.getLang("get_reward",a.MatchName,o(t.int64To32(a.nRewardCount)))+" "+t.getLang("coins")+".",t.MessageDialog.showMsg(t.MessageDialog.NOTICE,n).setCallback(function(){}))},a.prototype.getCgzNewActMatch=function(t){t.data},a.prototype.ackNoviceFieldModuleConfig=function(e){for(var a=e.data,i=[],n=0,o=this.normalData.length,r=a.stConfigList.reverse(),s=[],l=0,h=r.length;h>l;l++){var c=r[l],u=new t.NewComerReginVo;if(u.nTemplateID=t.int64To32(c.nTemplateID),u.nFieldType=c.nFieldType,u.nFieldID=c.nFieldID,u.sShowName=c.sShowName,u.sShowPic_URL=c.sShowPic_URL,u.tableName=c.sTemplateName,u.nBeShowPlyNum=c.nBeShowPlyNum,-1==s.indexOf(u.nFieldID)){s.push(u.nFieldID),i.push(u),n=u.nFieldType;for(var p=0;o>p;p++){var d=this.normalData[p];if(d.templateId==u.nTemplateID){u.nSmallBlind=d.nSmallBlind,u.nBigBlind=d.nBigBlind,u.nPreChip=d.nPreChip,u.nMinBuyChip=d.nMinBuyChip,u.playerCount=this.getPlayerCountByTemplateId(u.nTemplateID);break}}}}},a.prototype.getPlayerCountByTemplateId=function(t){for(var e=0,a=0,i=this.normalData.length;i>a;a++){var n=this.normalData[a];n.templateId==t&&(e+=n.nSignPlayer)}return e},Object.defineProperty(a.prototype,"lobbyProcessor",{get:function(){return this.commonData.matchlistService.matchlistProcessor},enumerable:!0,configurable:!0}),a.prototype.notSearchTableFilter=function(e){return 1==e.isTiYan_CGZ&&e.szMatchID.substr(0,2)!=t.TableLobbyConst.TyPrefix&&(e.isShowTiYan_CGZ=!1),!0},a.prototype.showTyTableFilter=function(t){return 1==t.isTiYan_CGZ},a.prototype.disPlayTyTableFilter=function(t){return 1!=t.isTiYan_CGZ},a.prototype.gameWithDirectFilter=function(t){return 1==t.nCgzShowType_BeWPT},a.prototype.gameShowInBxFieldFilter=function(t){return t.nCGZBeShowInBXField},a.prototype.gameWithFriendFilter=function(t){return 3==t.nMatchMode},a.prototype.gamePreCoinFilter=function(t){return 2==t.nCgzShowType},a.prototype.gameWithoutPreCoinFilter=function(t){return 2!=t.nCgzShowType},a.prototype.gameWithoutDirectFilter=function(t){return 0==t.nCgzShowType_BeWPT},a.prototype.gameWithoutFriendFilter=function(t){return 2==t.nMatchMode},a.prototype.gamePlayer2Filter=function(t){return 6!=t.nMaxPlayer&&9!=t.nMaxPlayer},a.prototype.gamePlayer6Filter=function(t){return 6==t.nMaxPlayer},a.prototype.isTyTableShowFilter=function(t){return 1!=t.isTiYan_CGZ||1==t.isTiYan_CGZ&&t.isShowTiYan_CGZ},a.prototype.gamePlayer9Filter=function(t){return 9==t.nMaxPlayer},a.prototype.gameHideEmptyFilter=function(t){return t.nSignPlayer>0||t.displaySimilarTable},a.prototype.gameHideFullFilter=function(t){return t.nSignPlayer<t.nMaxPlayer||t.displaySimilarTable},a.prototype.strReplaceAll=function(t,e,a){return t.split(e).join(a)},a.prototype.matchBtnSNGFilter=function(t){return 0==t.nMatchMode},a.prototype.matchBtnChampionFilter=function(t){return 1==t.nMatchMode},a.prototype.matchBtnSpecialFilter=function(t){return t.nTopIndex>0&&t.flag>0},a.prototype.matchCbSignFilter=function(t){return 1==t.nMatchStatus||2==t.nMatchStatus&&t.nMatchMaxSignLaterBlindClass>0&&t.curBlindClass<=t.nMatchMaxSignLaterBlindClass&&t.signMatchChip<=0&&t.nSignPlayer<t.nMaxPlayer&&(t.nMatchReentryCount>0||!t.isSigned)},a.prototype.matchCbProgressFilter=function(t){return 2==t.nMatchStatus},a.prototype.matchCbDoneFilter=function(t){return 3==t.nMatchStatus},a.prototype.updateNormalUserInfoData=function(e){for(var a=e.data,i=0,n=this.normalData.length;n>i;i++){var o=this.normalData[i];if(a.MatchID==o.szMatchID){o.flopRate=a.FlopRate,o.avgPool=t.int64To32(a.AvgPool),o.gameCountPerhour=a.GameCountPerHour,this.lobbyData.curSelectedNormalID==o.szMatchID;break}}},a.prototype.notifyMatchPlayer=function(e){for(var a=e.data,i=!1,n=0;n<this.matchData.length;n++){for(var o=this.matchData[n],r=0;r<a.MatchInfo.length;r++)if(o.szMatchID==a.MatchInfo[r].matchid){i=!0,o.nMaxPlayer=a.MatchInfo[r].nMaxPlayer,o.nSignPlayer=a.MatchInfo[r].nSignPlayer,o.szStartTime=a.MatchInfo[r].StartTime,o.nDualTime=a.MatchInfo[r].DualTime,o.nMatchStatus=a.MatchInfo[r].MatchStatus;var s={};s.szMatchID=a.MatchInfo[r].matchid,s.nMatchStatus=a.MatchInfo[r].MatchStatus;break}t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_MATCH_DATA,o))}i&&this.updateView(!1),i=!1;for(var l=[],h=0;h<this.normalData.length;h++)for(var c=0;c<a.MatchInfo.length;c++)if(this.normalData[h].szMatchID==a.MatchInfo[c].matchid){i=!0,this.normalData[h].nMaxPlayer=a.MatchInfo[c].nMaxPlayer,this.normalData[h].nSignPlayer=a.MatchInfo[c].nSignPlayer,l.push(this.normalData[h]);break}i&&(this.updateView(!1),t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_MATCH_PLAYERNUM,l))),i=!1;for(var u=0;u<this.myMatchData.length;u++)for(var p=0;p<a.MatchInfo.length;p++)if(this.myMatchData[u].szMatchID==a.MatchInfo[p].matchid){i=!0,this.myMatchData[u].szStartTime=a.MatchInfo[p].startTime,this.myMatchData[u].nMatchStatus=a.MatchInfo[p].matchStatus,this.myMatchData[u].nSignPlayer=a.MatchInfo[p].nSignPlayer,3==this.myMatchData[u].nMatchStatus&&this.myMatchData.splice(u,1);break}i&&this.updateView(!1)},a.prototype.revPlayInfo=function(e){this.lobbyData.curSelectedMatchPlayerInfo=e.data,t.sortOn(this.lobbyData.curSelectedMatchPlayerInfo.PlayerInfo,["Rank"]),t.dispatch(new t.WPTEvent(t.WPTEvent.GET_MATCHLIST_SENDREWARD,this.curMatchPlayerInfo))},a.prototype.isJoinMatch=function(e){if(!e||0==e.length)return!1;for(var a=0,i=e;a<i.length;a++){var n=i[a];if(t.CoreData.rolename==n.roleName)return!0}return!1},a.prototype.watchMatchWindow=function(e){this.lobbyData.curSelectedMatchSendReward=e.data,this.commonData.lobby.curTabSelectedIndex==t.TableLobbyConst.TAB_SITGO&&(this.lobbyData.tourModeSendRewards||(this.lobbyData.tourModeSendRewards=new t.Dictionary),this.lobbyData.tourModeSendRewards.add(e.data.MatchID,e.data)),t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_MATCHLIST_SENDREWARD,this.lobbyData.curSelectedMatchSendReward))},a.prototype.getTicketIdByMatchID=function(t){for(var e="",a=0;a<this.matchData.length;a++)if(this.matchData[a].szMatchID==t){e=this.matchData[a].ticketMatchItemId;break}return e},a.prototype.signMatch=function(e){t.log.debug("进入报名流程前的判断");var a=this.lobbyData.getTagMatchDataByMatchId(e);if(a){var i={};i.MatchID=e,i.Type=0,i.RoleName=this.commonData.currentUser.rolename,i.SignType=8;var n=new t.SignFeeVO;n.matchCoin=a.nSignFee+a.nCharge,n.matchScore=a.nSignFee+a.nCharge,n.accountCoin=this.commonData.currentUser.coins,n.accountScore=this.commonData.currentUser.score,n.nSignMode=a.nSignMode;var o=a.matchTypeFunc();if(n.matchTypeArr=o,n.matchTypeArr[2]&&(n.ticketMatchItemId=a.ticketMatchItemId,n.ticketMatchItemName=a.ticketMatchItemName,n.ticketNumb=this.commonData.getTicketNumById(n.ticketMatchItemId),n.nSignTicketNum=a.nSignTicketNum,"4008"==a.ticketMatchItemId&&this.commonData.getTicketNumById("4008")>0))return this.moneySign=!1,void this.lobbyProcessor.signMoney(e,16);if(a.nSignMode>0)if(n.matchScore=0,o[0])this.moneySign=!1,this.lobbyProcessor.signMoney(e,8);else{if(this.moneySign=!0,o[1]&&o[2])return t.log.debug("门票和万能豆报名"),void(this.commonData.getTicketNumById(a.ticketMatchItemId)>=a.nSignTicketNum?(t.dispatch(new t.WPTEvent(t.WPTEvent.OPEN_REGISTER_POPUP)),t.log.debug("门票够报名，发送弹出报名窗口")):a.nSignFee+a.nCharge<=this.commonData.currentUser.coins?(t.dispatch(new t.WPTEvent(t.WPTEvent.OPEN_REGISTER_POPUP)),t.log.debug("门票不够报名，发送弹出报名窗口")):t.play.js.toBuyGold(t.play.js.BUY_GOLD_FROM_BUYIN,a.nSignFee+a.nCharge-t.CommonData.getInstance().currentUser.coins));if(o[1]&&(t.log.debug("万能豆报名"),a.nSignFee+a.nCharge>this.commonData.currentUser.coins?t.play.js.toBuyGold(t.play.js.BUY_GOLD_FROM_BUYIN,a.nSignFee+a.nCharge-t.CommonData.getInstance().currentUser.coins):(t.dispatch(new t.WPTEvent(t.WPTEvent.OPEN_REGISTER_POPUP)),t.log.debug("万能豆报名，发送弹出报名窗口"))),o[2])if(t.log.debug("门票报名"),this.commonData.getTicketNumById(a.ticketMatchItemId)<a.nSignTicketNum){var r=t.getLang("no_enough_ticket",a.ticketMatchItemName);t.MessageDialog.showConfirm(r)}else t.dispatch(new t.WPTEvent(t.WPTEvent.OPEN_REGISTER_POPUP)),t.log.debug("门票报名，发送弹出报名窗口")}else 0==a.nSignMode&&(t.log.debug("tagMatchData.nSignMode==0"),n.matchCoin=0,a.nSignFee+a.nCharge==0?(this.moneySign=!1,this.lobbyProcessor.MATCHLIST_SIGNMATCH(i)):(this.moneySign=!0,a.nSignFee+a.nCharge>this.commonData.currentUser.score&&t.MessageDialog.showMsg(t.MessageDialog.STATE_STORE,t.getLang("no_enough_balance"))))}},a.prototype.signSucceed=function(e){var a=e.data,i="";if(0==a.result){t.int64To32(a.Coin)>=0&&(this.commonData.currentUser.coins=t.int64To32(a.Coin),this.commonData.currentUser.score=t.int64To32(a.Score)),-1!=t.int64To32(a.ticketCount)&&(i=this.getTicketIdByMatchID(a.MatchID),this.commonData.setTicketNumById(i,t.int64To32(a.ticketCount)));var n=this.lobbyData.getTagMatchDataByMatchId(a.MatchID);if(!n)return;if(0==a.Type){-1==this.signedArray.indexOf(a.MatchID)&&this.signedArray.push(a.MatchID),n.isSigned=!0,t.isempty(a.nCanReEntryCount)||(n.nMatchReentryCount=a.nCanReEntryCount);var o=new t.MySignVO;o.szMatchID=n.szMatchID,o.szMatchName=n.szMatchName,o.nCharge=n.nCharge,o.nSignFee=n.nSignFee,o.szStartTime=n.szStartTime,o.nMatchStatus=n.nMatchStatus,o.flag=n.flag,o.bReBuy=n.bReBuy,o.bReBuyBlindClass=n.bReBuyBlindClass,o.nMatchMode=n.nMatchMode,o.nSignMode=n.nSignMode,o.matchTypeArr=n.matchTypeFunc(),o.nMaxPlayer=n.nMaxPlayer,o.nSignPlayer=n.nSignPlayer,o.matchImg=n.matchImg,o.templateId=n.templateId,o.nSpeMatchMode=n.nSpeMatchMode,o.nMatchMaxSignLaterBlindClass=n.nMatchMaxSignLaterBlindClass,o.curBlindClass=n.curBlindClass,o.nMatchReentryCount=n.nMatchReentryCount,o.szMatchMinRew=n.szMatchMinRew,o.signMatchChip=n.nInitChip,n.signMatchChip=n.nInitChip,o.isSigned=n.isSigned,o.matchTypeArr[2]&&(o.ticketMatchItemName=n.ticketMatchItemName,o.ticketMatchItemId=n.ticketMatchItemId,o.ticketNumb=this.commonData.getTicketNumById(n.ticketMatchItemId),o.nSignTicketNum=n.nSignTicketNum);for(var r=!1,s=0;s<this.myMatchData.length;s++)if(this.myMatchData[s].szMatchID==o.szMatchID){r=!0,this.myMatchData[s]=o;break}r||this.myMatchData.push(o);var l={};l.szMatchID=n.szMatchID,l.nMatchStatus=n.nMatchStatus;var h="";if("4008"!=i&&(h=t.getLang("sign_success")),0==n.nMatchMode){var c=this.lobbyData.getTourDataByTempleteID(n.templateId);c&&((t.isempty(this.lobbyData.curSelectTourDataID)||c.id!=this.lobbyData.curSelectTourDataID)&&(t.log.debug("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~同一账号被两个浏览器登录，这里对curSelectTourDataID进行赋值了：赋值前，赋值后： ",this.lobbyData.curSelectTourDataID,c.id),this.lobbyData.curSelectTourDataID=c.id),t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_OPEN_WAIT_POPUP,!0)))}else this.lobbyData.isReEntry?(t.MessageDialog.showConfirm(h),this.commonData.lobby.isReEntry=!1):t.MessageDialog.showConfirm(h);var u={};u.somethingId=3,u.friendsNum=3,u.state=3,u.matchName=n.szMatchName}else if(1==a.Type){n.isSigned=!1,n.signMatchChip=0;for(var p=0;p<this.signedArray.length;p++)if(this.signedArray[p]==a.MatchID){this.signedArray.splice(p,1);break}for(var d=0;d<this.myMatchData.length;d++)if(a.MatchID==this.myMatchData[d].szMatchID){var m="";if(-1!=t.int64To32(a.ticketCount)){m=this.getTicketIdByMatchID(a.MatchID),this.commonData.setTicketNumById(m,t.int64To32(a.ticketCount));var _;_=this.commonData.lobby.curTabSelectedIndex==t.TableLobbyConst.TAB_SITGO?t.getLang("unregister_success_ticket_tourmode",this.lobbyData.curSelectedMatchData.ticketMatchItemName):t.getLang("unregister_success_ticket",this.lobbyData.curSelectedMatchData.nSignTicketNum+this.lobbyData.curSelectedMatchData.ticketMatchItemName),t.MessageDialog.showConfirm(_)}else if(this.myMatchData[d].nSignFee>0){var T=t.getLang("unregister_success",t.DealMoneyUtil.getStrByComma(n.nSignFee+n.nCharge));t.MessageDialog.showConfirm(T)}this.myMatchData.splice(d,1);break}0==n.nMatchMode&&(t.play.lobby.TourModeWait.isHideByGame=!1,t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_OPEN_WAIT_POPUP,!1)))}if(this.curMatchPlayerInfo&&this.curMatchPlayerInfo.matchID==a.MatchID){for(var g,f=!1,y=0,b=this.curMatchPlayerInfo.playerInfo.length;b>y;y++)if(g=this.curMatchPlayerInfo.playerInfo[y],g.roleName==this.commonData.currentUser.rolename){f=!0,1==a.Type&&this.curMatchPlayerInfo.playerInfo.splice(y,1);break}f||0==a.Type&&(g={},g.RoleName=this.commonData.currentUser.rolename,g.sCFUserName=this.commonData.currentUser.nickname,g.Coin=0,this.curMatchPlayerInfo.playerInfo.push(g))}this.updateView(!1),t.dispatch(new t.play.lobby.LobbyEvent(t.play.lobby.LobbyEvent.UPDATE_MATCH_DATA,this.lobbyData.curSelectedMatchData)),t.dispatch(new t.WPTEvent(t.WPTEvent.SELECT_MATCH_TABLE,this.lobbyData.curSelectedMatchData))}else if(1==a.result||2==a.result||3==a.result||4==a.result||5==a.result||6==a.result||7==a.result||8==a.result||9==a.result||10==a.result||11==a.result||12==a.result||13==a.result||14==a.result||15==a.result||16==a.result||17==a.result||19==a.result||20==a.result||21==a.result||22==a.result)if(this.commonData.lobby.curTabSelectedIndex!=t.TableLobbyConst.TAB_SITGO||0!=a.Type||16!=a.result&&17!=a.result&&4!=a.result&&12!=a.result&&2!=a.result&&1!=a.result){var E="";switch(a.result){case 20:1==a.nLaterSignType?E=t.getLang("sign_match_error20_1"):2==a.nLaterSignType&&(E=t.getLang("sign_match_error20_2"));break;default:E=t.getLang("sign_match_error"+a.result)}t.MessageDialog.showConfirm(E)}else t.log.debug("报名失败，原因："+a.result),t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_BUYIN_MATCH_FAILD,a.result));else if(18==a.result){var C=a.matchID,S=new egret.ByteArray,v={};v.MatchID=C,v.Type=0,v.RoleName=this.commonData.currentUser.rolename,v.SignType=8,v.writeExternal(S);var I=this.lobbyData.getTagMatchDataByMatchId(C);if(!I)return;var D=new t.SignFeeVO;D.matchCoin=I.nSignFee+I.nCharge,D.matchScore=I.nSignFee+I.nCharge,D.nSignMode=I.nSignMode;var A=I.matchTypeFunc();if(D.matchTypeArr=A,I.nSignMode>0){if(D.matchScore=0,A[0])this.moneySign=!1;else if(this.moneySign=!0,A[1]&&A[2])return}else 0==I.nSignMode&&(D.matchCoin=0,I.nSignFee+I.nCharge==0?this.moneySign=!1:this.moneySign=!0)}},a.prototype.myInfo=function(t){var e=t.data;this._myMatchListBytes=e,this.praseMyInfo(e)},a.prototype.praseMyInfo=function(e){this.signedArray=e.matchid;var a=[],i=[];t.log.debug("调试信息","自己比赛的数量："+this.signedArray.length);for(var n=0;n<this.signedArray.length;n++){for(var o=0,r=e.cUserMatchList;o<r.length;o++){var s=r[o];if(this.signedArray[n]==s.sMatchid){var l=this.lobbyData.getTagMatchDataByMatchId(s.sMatchid);l&&(l.nMatchStatus=s.nMatchStatus,t.isempty(s.nChip)||(l.signMatchChip=t.int64To32(s.nChip)))
}}for(var h=0,c=this.matchData.length;c>h;h++){var u=this.matchData[h];if(this.signedArray[n]==u.szMatchID){var p=new t.MySignVO;p.szMatchID=u.szMatchID,p.szMatchName=u.szMatchName,p.nCharge=u.nCharge,p.nSignFee=u.nSignFee,p.szStartTime=u.szStartTime,p.nMatchStatus=u.nMatchStatus,p.bReBuy=u.bReBuy,p.bReBuyBlindClass=u.bReBuyBlindClass,p.nMatchMode=u.nMatchMode,p.nSignMode=u.nSignMode,p.matchTypeArr=u.matchTypeFunc(),p.nMaxPlayer=u.nMaxPlayer,p.nSignPlayer=u.nSignPlayer,p.matchImg=u.matchImg,p.flag=u.flag,p.nSpeMatchMode=u.nSpeMatchMode,p.nMatchMaxSignLaterBlindClass=u.nMatchMaxSignLaterBlindClass,p.curBlindClass=u.curBlindClass,p.nMatchReentryCount=u.nMatchReentryCount,p.szMatchMinRew=u.szMatchMinRew,p.signMatchChip=u.signMatchChip,p.isSigned=u.isSigned=!0,p.matchTypeArr[2]&&(p.ticketMatchItemName=u.ticketMatchItemName,p.ticketMatchItemId=u.ticketMatchItemId,p.ticketNumb=this.commonData.getTicketNumById(u.ticketMatchItemId));for(var d=!0,m=0,_=this.myMatchData.length;_>m;m++)if(this.myMatchData[m].szMatchID==p.szMatchID){d=!1,this.myMatchData[m]=p;break}d&&(this.myMatchData.push(p),2==p.nMatchStatus&&a.push({szMatchID:p.szMatchID,szMatchName:p.szMatchName}),2==p.nMatchStatus&&p.signMatchChip>0&&i.push({szMatchID:p.szMatchID,szMatchName:p.szMatchName}))}}}if(this.updateView(!1),a.length>0){var T=this.lobbyData.getTagMatchDataByMatchId(a[0].szMatchID);T&&(t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_LOGIN_ENTER_GAME,T.templateId)),t.dispatch(new t.WPTEvent(t.WPTEvent.SELECT_MATCH_TABLE,T)),t.dispatch(new t.WPTEvent(t.WPTEvent.SELECTED_SIGNED_MATCH,a[0])))}this.FILTER_SIGNED_MATCH(null)},a.prototype.updateNewNotify=function(e){for(var a=e.data,i=a.MatchInfo.length,n=!1,o=!1,r=!1,s=[],l=0;i>l;l++){var h=a.MatchInfo[l],c=this.getTagNormalDataByMatchId(h.matchid);c&&(c.nMaxPlayer=h.nMaxPlayer,c.nSignPlayer=h.nSignPlayer,n=!0,s.push(c));var u=this.lobbyData.getTagMatchDataByMatchId(h.matchid);if(u){u.nMaxPlayer=h.nMaxPlayer,u.nSignPlayer=h.nSignPlayer,u.szStartTime=h.StartTime,u.nDualTime=h.DualTime,u.nMatchStatus=h.MatchStatus,u.isAllRewWnd=h.isAllRewWnd,u.rewardTotalWnd=t.int64To32(h.rewardTotalWnd),t.isempty(h.nCurBlindClass)||(u.curBlindClass=h.nCurBlindClass);var p={};p.szMatchID=h.matchid,p.nMatchStatus=h.MatchStatus,o=!0}for(var d=0;d<this.myMatchData.length;d++)if(this.myMatchData[d].szMatchID==h.matchid){this.myMatchData[d].szStartTime=h.StartTime,this.myMatchData[d].nMatchStatus=h.MatchStatus,t.isempty(h.nCurBlindClass)||(this.myMatchData[d].curBlindClass=h.nCurBlindClass),3==this.myMatchData[d].nMatchStatus&&this.myMatchData.splice(d,1),r=!0;break}}t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_MATCH_PLAYERNUM,s)),(n||o||r)&&this.updateView(!1)},a.prototype.select_SignedMatch_handler=function(t){var e=t.data;e&&this.lobbyProcessor.ENTERSIGNEDMATCH(e.szMatchID)},a.prototype.ENTER_SIMPLE_TABLE=function(e){!t.CoreData.isValidatedEmail&&this.commonData.currentUser.coins<1&&t.CoreData.checkUserStatus();var a=e.data,i=a.minBuyIn,n=this.commonData.currentUser.coins;return i>n?void t.play.js.toBuyGold(t.play.js.BUY_GOLD_FROM_BUYIN,i):(this.curWPTCgzPartionConfigVO=a,void this.lobbyProcessor.EnterSimilarTableReq2(this.commonData.currentUser.rolename,this.commonData.currentUser.coins,a.fieldType,a.fieldId,this.commonData.lobby.selectedFilterSeat))},a.prototype.LOOK_NORMAL=function(t){this.ENTER_NORMAL_TABLE(null),this.autoJoin=!1},a.prototype.ENTER_NORMAL_TABLE=function(e){this.autoJoin=!0,t.log.debug("准备加入常规桌"),this.lobbyData.curSelectedNormalID&&"-1"!=this.lobbyData.curSelectedNormalID?this.normalSign(this.lobbyData.curSelectedNormalID):t.log.debug("没有选择比赛")},a.prototype.normalSign=function(e,a){if(void 0===a&&(a=-1),-1!=a?this.lobbyData.curJoinTableArea=a:this.lobbyData.curJoinTableArea=this.getAreaFlagByTempleteIdOrMatchId(e,!1),-1==this.lobbyData.curJoinTableArea){var i=this.getTagNormalDataByMatchId(e);return void t.log.error("areaFlag为-1，检查normalLimit设置.nMatchMode,nCgzShowType,nBigBlind",i.nMatchMode,i.nCgzShowType,i.nBigBlind)}this.commonData.lobby.normalJoin=!0,this.lobbyProcessor.normalSign(this.lobbyData.curSelectedNormalID,this.lobbyData.curJoinTableArea),t.log.debug("请求进入常规桌",e,a)},a.prototype.startMatch=function(e,a){void 0===a&&(a=!1),this.commonData.lobby.normalJoin=!1,this.removePopUp();var i=e,n=this.lobbyData.getTagMatchDataByMatchId(a?i.szMatchid:i.matchid);if(n){var o=new t.StartGameVO;if(o.nMatchReentryCount=n.nMatchReentryCount,a&&!t.isempty(i.nCanReEntryCount)&&(n.nMatchReentryCount=i.nCanReEntryCount,o.nMatchReentryCount=n.nMatchReentryCount,t.log.debug("startMatch nMatchReentryCount",i.nCanReEntryCount)),i.gameAddress&&(n.gameAddress=i.gameAddress),o.gameAddress=n.gameAddress,o.GAMEID=t.CoreData.GAMEID,o.isShield=t.CoreData.isShield,o.destName=this.enterTableDestName,o.isPopupGame=this.commonData.isMultiplePlay,o.szMatchName=n.szMatchName,o.szStartTime=n.szStartTime,o.nSignFee=n.nSignFee,o.nCharge=n.nCharge,o.nMatchStatus=n.nMatchStatus,o.nStartBlindClass=n.nStartBlindClass,o.isAutoRebuy=this.commonData.isAutoRebuy,o.isAutoRefill=this.commonData.isAutoRefill,o.isLaterResiter=a,o.bReBuy=n.bReBuy,o.bReBuycount=n.bReBuycount,o.bReBuyValue=n.bReBuyValue,o.bReBuyChip=n.bReBuyChip,o.bReBuyLimitValue=n.bReBuyLimitValue,o.bReBuyBlindClass=n.bReBuyBlindClass,o.bRebuyTimeout=n.bRebuyTimeout,o.bFinalAddOnTime=n.bFinalAddOnTime,o.bFinalAddOnChip=n.bFinalAddOnChip,o.bFinalAddOnValue=n.bFinalAddOnValue,o.bRebuyUseTicket=n.bRebuyUseTicket,o.bFinalAddOnUseTicket=n.bFinalAddOnUseTicket,o.ticketMatchItemName=n.ticketMatchItemName,o.ticketMatchItemId=n.ticketMatchItemId,o.nSignMode=n.nSignMode,o.nMaxPlayer=n.nMaxPlayer,o.nSignPlayer=n.nSignPlayer,o.matchImg=n.matchImg,o.nMatchMode=n.nMatchMode,o.templateId=n.templateId,o.nTopIndex=n.nTopIndex,o.nSignTicketNum=n.nSignTicketNum,o.nSpeMatchMode=n.nSpeMatchMode,o.nMatchMaxSignLaterBlindClass=n.nMatchMaxSignLaterBlindClass,o.curBlindClass=n.curBlindClass,t.isempty(n.blindCollection))o.bigBlind=0,o.smallBlind=0;else{var r=n.blindCollection.length>=n.curBlindClass?n.curBlindClass:n.blindCollection.length-1;o.bigBlind=n.blindCollection[r].nBigBlind,o.smallBlind=n.blindCollection[r].nSmallBlind}o.szMatchMinRew=n.szMatchMinRew,o.signMatchChip=n.nInitChip,o.isSigned=n.isSigned,o.preBlindObj=n.getPreBlindList(),0==n.nMatchMode&&(n.nMatchStatus=2);var s;a?(t.log.debug("Match gameServerIP:"+i.nGameServerIP+"  gameServerPort:"+i.nGameServerPort),s=[this.processingServerIP(i.nGameServerIP),i.nGameServerPort]):(t.log.debug("Match gameServerIP:"+i.GameServerIP+"  gameServerPort:"+i.GameServerPort),s=[this.processingServerIP(i.GameServerIP),i.GameServerPort]);var l=s;o.cert=t.Base64.encodeByteArray(this.commonData.currentUser.cert),o.ip=l[0],o.szMatchID=a?i.szMatchid:i.matchid,o.port=l[1],o.tableID=a?i.bTableid:i.tableid,o.userIP=t.CoreData.IP,o.roleName=this.commonData.currentUser.rolename,o.nickName=this.commonData.currentUser.nickname,o.ourgameID=t.CoreData.ourgameID,o.hornCount=0,o.hornValue=0,o.mycoin=this.commonData.currentUser.coins,o.mygold=this.commonData.currentUser.gold,o.isVisitor="1"==t.CoreData.isYouke,o.isWatchGame=this.lobbyData.isWatchGame,o.tableSkinName="",o.isAccelerated=!0,o.sLangID=t.CoreData.Language,o.sIpParse=t.CoreData.sIpParse,o.userMasterInfo=this.commonData.currentUser.master,o.tableGiftList=this.commonData.tableGiftList,o.imgUrlList=this.commonData.imgUrlList,o.ticketNumb=this.commonData.getTicketNumById(n.ticketMatchItemId);var h=n.matchTypeFunc();o.ticketBool=h[2];var c=!1;if(!this.lobbyData.isWatchGame){for(var u=0;u<this.myMatchData.length;u++)if(this.myMatchData[u].szMatchID==o.szMatchID){c=!0,this.myMatchData[u]=o;break}c||this.myMatchData.push(o),this.updateView(!1)}t.log.debug("startMatch push(startGameVO)",this.lobbyData.isWatchGame,c,this.myMatchData.length),this.updateView(!1),0==o.nMatchMode&&t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_LOGIN_ENTER_GAME,o.templateId)),t.dispatch(new t.WPTEvent(t.WPTEvent.READY_START_MATCH,o)),this.lobbyData.isWatchGame=!1,this.enterTableDestName=null}else this.normalTableStart(i);a?t.log.debug("进入牌桌",i.szMatchid,i.bTableid,a):t.log.debug("进入牌桌",i.matchid,i.tableid,a)},a.prototype.normalTableStart=function(e){this.commonData.lobby.normalJoin=!0;var a,i,n,o;if(".MatchList_AckEnterNoviceMatch"==e.toString()){if(a=e,1==a.reslut)return t.log.debug("您的万能豆低于新手区限制！"),void t.MessageDialog.showConfirmNotice(t.getLang("newplayer_limit"));if(2==a.reslut)return t.log.debug("您的万能豆高于新手区限制！"),void t.MessageDialog.showConfirmNotice(t.getLang("newplayer_limit2"))}else if(".MatchList_NotifyStartMatch"==e.toString())i=e;else if(".MatchList_FastJoinAck"==e.toString()){if(n=e,0!=n.Reslut){var r=t.getLang("fast_join_error_unkown");switch(n.reason){case 1:r=t.getLang("fast_join_error_nochip");break;case 2:r=t.getLang("fast_join_error_noseat")}return void t.MessageDialog.showConfirmNotice(r)}this.commonData.lobby.normalJoin=!0,this.autoJoin=!0}else{if(".MatchList_EnterSimilarTableAck"!=e.toString())return void t.log.error("normalTableStart : "+e.toString()+" no func.");o=e}if(this.commonData.lobby.normalJoin){var s,l,h,c,u,p=this.lobbyData.curJoinTableArea,d=new t.NormalStartGameVO;d.destName=this.enterTableDestName,d.isPopupGame=this.commonData.isMultiplePlay,d.isAutoRebuy=this.commonData.isAutoRebuy,d.isAutoRefill=this.commonData.isAutoRefill,d.autoJoin=this.autoJoin,d.isShield=t.CoreData.isShield,d.GAMEID=t.CoreData.GAMEID,".MatchList_FastJoinAck"==e.toString()&&(d.isFastJoin=!0),a?(s=[this.processingServerIP(a.gameServerIP),a.gameServerPort],l=a.matchID,h=a.tableid,c=a.seat,d.isNoviceAreas=!0):n?(s=[this.processingServerIP(n.GameServerIP),n.GameServerPort],l=n.MatchID,h=n.Tableid,c=n.Seat,p=n.nField,n.gameAddress&&(u=n.gameAddress)):i?(t.log.debug("NoramlMatch gameServerIP:"+i.gameServerIP+"  gameServerPort:"+i.gameServerPort),s=[this.processingServerIP(i.gameServerIP),i.gameServerPort],l=i.matchid,h=i.tableid,c=-1,i.gameAddress&&(u=i.gameAddress)):o&&(l=t.readMultiByte(o.MatchID,t.CoreData.Encode),h=o.Tableid,c=o.Seat,s=[this.processingServerIP(o.GameServerIP),o.GameServerPort],p=o.nField,o.gameAddress&&(u=o.gameAddress));var m=this.getTagNormalDataByMatchId(l);if(!m)return;u&&(d.gameAddress=u),d.allInFlag=m.allInFlag;var _=s;d.ip=_[0],d.port=_[1],d.szMatchID=l,d.tableID=h,d.nTableId=m.nTableID,d.seatSet=c,d.roleName=this.commonData.currentUser.rolename,d.nickName=this.commonData.currentUser.nickname,d.ourgameID=t.CoreData.ourgameID,d.cert=t.Base64.encodeByteArray(this.commonData.currentUser.cert),d.szMatchName=m.szMatchName,d.servicePay=0,d.bigBlind=m.nBigBlind,d.minBlind=m.nSmallBlind,d.preBlind=m.nPreChip,d.nMatchMode=m.nMatchMode,d.nMaxPlayer=m.nMaxPlayer,d.nSignPlayer=m.nSignPlayer,d.userIP=t.CoreData.IP,d.mycoin=this.commonData.currentUser.coins,d.mygold=this.commonData.currentUser.gold,d.templateId=m.templateId,d.isTiYan_CGZ=m.isTiYan_CGZ,d.hornCount=this.commonData.currentUser.hornCount,d.nLuckyID=m.nLuckyID,d.nField=p,d.isGraduTable=m.isGraduTable,d.nGradu_Ball=m.nGradu_Ball,d.nGradu_Val=m.nGradu_Val,d.nGradu_PerPcomp=m.nGradu_PerPcomp,d.nGradu_MinPlayer=m.nGradu_MinPlayer,d.newOpenActState=m.newOpenActState,d.displaySimilarTable=this.isJoinSimpleTable(m),d.fieldType=this.getNormalFieldType(m),d.bigBlind>0&&(d.isFastJoin?(d.maxCoin=0,d.minCoin=0):(d.maxCoin=this.curWPTCgzPartionConfigVO.maxBuyIn,d.minCoin=this.curWPTCgzPartionConfigVO.minBuyIn)),d.isVisitor="1"==t.CoreData.isYouke,d.isCanChatOnObserve=this.commonData.currentUser.isCanChatOnObserve,d.userMasterInfo=this.commonData.currentUser.master,d.tableGiftList=this.commonData.tableGiftList,d.imgUrlList=this.commonData.imgUrlList,m.sCreater==this.commonData.currentUser.rolename?(d.isCreater=!0,d.hasPassWord=!1,d.passWord=""):(d.isCreater=!1,m.hasPassWord?(d.hasPassWord=!0,d.passWord=""):(d.hasPassWord=!1,d.passWord="")),1==d.isTiYan_CGZ,d.hornValue=this.lobbyData.mlConfigInfo.nHornValue,d.present_MaxCoin_Times=this.lobbyData.mlConfigInfo.nPresent_MaxCoin_Times,d.present_MaxTimes_Day=this.lobbyData.mlConfigInfo.nPresent_MaxTimes_Day,d.present_MaxTimes_User=this.lobbyData.mlConfigInfo.nPresent_MaxTimes_User,d.present_ChipToCoin=this.lobbyData.mlConfigInfo.nPresent_ChipToCoin,d.privateChatFlag=this.commonData.currentUser.privateChatFlag,d.nInsBuyFlagShow=this.commonData.currentUser.nInsBuyFlagShow,d.nInsBuyFlagOpen=this.commonData.currentUser.nInsBuyFlagOpen,d.tableSkinName="",d.isAccelerated=!0,d.sLangID=t.CoreData.Language,d.sIpParse=t.CoreData.sIpParse,t.dispatch(new t.WPTEvent(t.WPTEvent.READY_START_MATCH,d)),this.enterTableDestName=null}},a.prototype.getNormalFieldType=function(t){for(var e=0;e<this.commonData.lobby.cgzPartionConfigs.length;e++)if(t.nBigBlind>=this.commonData.lobby.cgzPartionConfigs[e].smBlind&&t.nBigBlind<=this.commonData.lobby.cgzPartionConfigs[e].bigBlind)return this.commonData.lobby.cgzPartionConfigs[e].fieldType;return-1},a.prototype.getCoinLimitById=function(t,e){var a=[];if(null==this.normalLimitData||0==this.normalLimitData.length)return a;for(var i=0;i<this.normalLimitData.length;i++)if(this.normalLimitData[i].limitId==e&&(5==e||this.normalLimitData[i].maxBlind>=t&&this.normalLimitData[i].minBlind<=t)){a.push(this.normalLimitData[i].maxCoin),a.push(this.normalLimitData[i].minCoin);break}return a},a.prototype.processingServerIP=function(t){var e=new egret.ByteArray;e.writeInt(t),e.position=0;var a=e.readUnsignedByte().toString(),i=e.readUnsignedByte().toString(),n=e.readUnsignedByte().toString(),o=e.readUnsignedByte().toString();return o+"."+n+"."+i+"."+a},a.prototype.getAreaFlagByTempleteIdOrMatchId=function(t,e){var a;if(e)for(var i=parseInt(t),n=0,o=this.normalData.length;o>n;n++){var r=this.normalData[n];if(r.templateId==i){a=r;break}}else a=this.getTagNormalDataByMatchId(t);if(!a)return-1;if(this.normalLimitData){if(3==a.nMatchMode)return 5;if(1==a.isTiYan_CGZ)return 2;for(var s=0,l=this.normalLimitData.length;l>s;s++){var h=this.normalLimitData[s];if(1==a.nCgzShowType&&h.limitId<11){if(h.minBlind<=a.nBigBlind&&a.nBigBlind<=h.maxBlind)return h.limitId}else if(2==a.nCgzShowType&&h.limitId>=11&&h.minBlind<=a.nBigBlind&&a.nBigBlind<=h.maxBlind)return h.limitId}}return-1},a.prototype.SELECT_TABLE_PLAYERINFO=function(t){var e=t.data;e&&(this.lobbyData.curSelectMatchTableInfo.tableInfo=e)},a.prototype.OGID_WPT_FASTJOIN=function(t){var e=t.data;this.normalTableStart(e)},a.prototype.SELECT_MATCH_TABLE_TOUR_CACHE=function(e){var a=e.data;if(a){if(this.commonData.lobby.curTabSelectedIndex==t.TableLobbyConst.TAB_SITGO&&this.lobbyData.tourModeSendRewards&&this.lobbyData.tourModeSendRewards.has(a.szMatchID))return this.lobbyData.curSelectedMatchSendReward=this.lobbyData.tourModeSendRewards.get(a.szMatchID),void t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_MATCHLIST_SENDREWARD,this.lobbyData.curSelectedMatchSendReward));this.lobbyProcessor.sendEnterMatchMessage(a.szMatchID),this.lobbyData.curSelectedMatchID&&this.lobbyData.curSelectedMatchID!=a.szMatchID&&this.lobbyProcessor.sendLeaveMatchMessage(this.lobbyData.curSelectedMatchID),this.lobbyData.curSelectedMatchID=a.szMatchID}},a.prototype.SELECT_MATCH_TABLE=function(t){var e=t.data;e&&(this.lobbyProcessor.sendEnterMatchMessage(e.szMatchID),this.lobbyData.curSelectedMatchID&&this.lobbyData.curSelectedMatchID!=e.szMatchID&&this.lobbyProcessor.sendLeaveMatchMessage(this.lobbyData.curSelectedMatchID),this.lobbyData.curSelectedMatchData=e,this.lobbyData.curSelectedMatchID=e.szMatchID)},a.prototype.updateView=function(e){t.dispatch(new t.WPTEvent(t.WPTEvent.MATCHLIST_UPDATEVIEW,e))},a.prototype.removePopUp=function(){},a.prototype.FILTER_SIGNED_MATCH=function(t){for(var e,a=this.signedArray.length,i=a-1;i>=0;i--)e=this.lobbyData.getTagMatchDataByMatchId(this.signedArray[i]),e&&(e.signMatchChip<=0&&2==e.nMatchStatus||3==e.nMatchStatus)&&this.signedArray.splice(i,1)},a.prototype.OGID_WPT_GETUSERCOININFO=function(t){this.commonData.isMatching},a.prototype.isJoinSimpleTable=function(t){return!1},a}(t.Meditor);t.MatchListMeditor=e,__reflect(e.prototype,"wpt.MatchListMeditor")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=0),this.buffer=new egret.ByteArray}return Object.defineProperty(t.prototype,"connected",{get:function(){return null==this.socket?!1:this.socket.connected},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this._port},enumerable:!0,configurable:!0}),t.prototype.connectByUrl=function(t){this._host=t,this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_BINARY,null!=t&&(this.socket.addEventListener(egret.Event.CONNECT,this.onEvent,this,!1,0),this.socket.addEventListener(egret.Event.CLOSE,this.onEvent,this,!1,0),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onEvent,this,!1,0),this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onEvent,this,!1,0),this.socket.connectByUrl(t))},t.prototype.send=function(t){this.socket&&this.socket.connected&&(null==this.resolver?this.socket.writeBytes(t.read()):this.socket.writeBytes(this.resolver.pack(t)),this.socket.flush(),this.handler&&this.handler.onFlush(t))},t.prototype.push=function(t){this.socket.connected&&(null==this.resolver?this.read(t.read()):this.read(this.resolver.pack(t)))},t.prototype.close=function(){null!=this.socket&&this.socket.connected&&(this.handler&&this.handler.onClose(),this.socket.removeEventListener(egret.Event.CONNECT,this.onEvent,this,!1),this.socket.removeEventListener(egret.Event.CLOSE,this.onEvent,this,!1),this.socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onEvent,this,!1),this.socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onEvent,this,!1),this.socket.close(),this.buffer.clear())},t.prototype.toString=function(){return"[SocketClient("+this.host+":"+this.port+")]"},t.prototype.onEvent=function(t){switch(t.type){case egret.Event.CONNECT:null!=this.handler&&this.handler.onConnect();break;case egret.Event.CLOSE:null!=this.handler&&this.handler.onDisconnect();break;case egret.IOErrorEvent.IO_ERROR:null!=this.handler&&this.handler.onIoError();break;case egret.ProgressEvent.SOCKET_DATA:var e=new egret.ByteArray;this.socket.readBytes(e),this.read(e)}},t.prototype.read=function(t){if(this.socket.connected){if(null==this.resolver)return void this.handler.onRecive(t);var e=this.buffer.position;for(this.buffer.position=this.buffer.length,this.buffer.writeBytes(t),this.buffer.position=e;this.resolver.isContains(this.buffer);){var a=this.resolver.parse(this.buffer);null!=this.handler&&this.handler.onRecive(a)}this.buffer.bytesAvailable<=0&&this.buffer.clear()}},t}();t.BaseSocket=e,__reflect(e.prototype,"wpt.BaseSocket")}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function e(){}return e.getTourMode=function(a){return t.CoreData.isDebugData()?e.HTTPTYPE="http://":e.HTTPTYPE=http_type,e.HTTPTYPE+t.CoreData.tourmodeUri+a},e.TOURMODE_MATCHLIST=function(){return this.getTourMode("tourmodelist")},e.TOURMODE_WIN=function(){return this.getTourMode("tourmodewin")},e.TOURMODE_COIN_UNLOCK=function(){return this.getTourMode("tourmodeunlock")},e.getHttpUrl=function(a){return t.CoreData.isDebugData()?e.HTTPTYPE="http://":e.HTTPTYPE=http_type,e.HTTPTYPE+a},e.GET_FLASH_VAR=function(){return this.getHttpUrl(t.CoreData.flashvarApi)},e.SEND_SERVICE_LOG=function(){return this.getHttpUrl(t.CoreData.ReportLogURL)},e}();e.HTTPTYPE="",e.TEST=e.HTTPTYPE+"47.94.173.207:4002/right/api/test/powerstation",t.HttpMessageType=e,__reflect(e.prototype,"wpt.HttpMessageType")}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.req_get_test=function(){this.get(t.HttpMessageType.TEST,null)},a.prototype.req_tourMode_listData=function(){t.CoreData.isDebugData()?this.get(t.HttpMessageType.TOURMODE_MATCHLIST(),null):this.postByJS(t.HttpMessageType.TOURMODE_MATCHLIST(),null)},a.prototype.req_tourMode_win=function(e,a){var i={};i.matchId=e,i.rank=a,t.CoreData.isDebugData()?this.get(t.HttpMessageType.TOURMODE_WIN(),i):(this.postByJS(t.HttpMessageType.TOURMODE_WIN(),i),t.log.debug("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~告诉后端tourmode比赛结果~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~",e,a))},a.prototype.req_tourUnlock=function(e){var a={};a.templetId=e,t.CoreData.isDebugData()?this.get(t.HttpMessageType.TOURMODE_COIN_UNLOCK(),a):this.postByJS(t.HttpMessageType.TOURMODE_COIN_UNLOCK(),a)},a.prototype.req_falsh_var=function(){t.CoreData.isDebugData()?this.get(t.HttpMessageType.GET_FLASH_VAR(),null):this.postByJS(t.HttpMessageType.GET_FLASH_VAR(),null)},a.prototype.send_service_log=function(e){t.CoreData.isDebugData()?this.get(t.HttpMessageType.SEND_SERVICE_LOG(),e):this.postByJS(t.HttpMessageType.SEND_SERVICE_LOG(),e)},a}(t.BaseHttpProcessor);e.HttpProcessor=a,__reflect(a.prototype,"wpt.net.HttpProcessor")}(e=t.net||(t.net={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){function i(e,i){if(void 0===e&&(e=null),void 0===i&&(i=!1),!t.CoreData.isDebugData()){var n=a.SHOW_STORE_TAB_OGID,o=e;e==a.SHOW_STORE_TAB_REWARDPOINTS?(n=e,o=""):null==o?o="":n=a.SHOW_STORE_TAB_ITEMS,t.log.debug("调用js打开商城",n,o,i),showDialog("show_store",o,n,i)}}function n(){t.CoreData.isDebugData()||(t.log.debug("调用js打开金币商城"),showDialog("show_goldStore"))}function o(e){t.CoreData.isDebugData()||(t.log.debug("打开促销:",e),showTimedPromotion(e))}function r(e){t.CoreData.isDebugData()||(t.log.debug("调用js开关lobby按钮:",e),isTourMode(e))}function s(){t.log.debug("js商城回调")}function l(e){try{t.log.debug("更新金币数量",e,updateCoinStr),updateCoinStr(e)}catch(a){}}function h(e){try{t.log.debug("更新大师分数量",e,updateRewards),updateRewards(e)}catch(a){}}function c(){t.log.debug("打开个人中心窗口"),t.CoreData.isDebugData()||showDialog("show_person")}function u(){t.log.debug("打开排行榜"),t.CoreData.isDebugData()||showDialog("show_leaderboard")}function p(){t.log.debug("打开背包"),t.CoreData.isDebugData()||showDialog("show_inventory")}function d(){t.log.debug("礼包码redeem"),t.CoreData.isDebugData()||showDialog("show_promotion")}function m(){t.log.debug("登出"),t.CoreData.isDebugData()||logOut()}function _(){t.log.debug("打开登录窗口"),showDialog("show_login")}function T(){t.log.debug("打开视频窗口"),t.CoreData.isDebugData()||openVideo()}function g(){t.log.debug("关闭视频窗口"),t.CoreData.isDebugData()||closeVideo()}function f(e){try{t.log.debug("check_game：",e),e?t.CommonData.getInstance().player_location=t.TableLobbyConst.PLAYER_TABLE:t.CommonData.getInstance().player_location=t.TableLobbyConst.PLAYER_LOBBY,checkGame(e)}catch(a){}}function y(e){t.log.debug("打开支付窗口,channelType:",t.CoreData.channelType),openPay(e)}function b(){var e=stylePay();if(t.log.debug("判断是WEB端还是FB嵌入",e),null!=e){var a=e.toString();a=a.replace(" ","");var i=parseInt(a);t.log.debug("result:",i,"end"),0==i&&(t.CoreData.channelType=2)}}function E(){t.CoreData.isDebugData()||(t.log.debug("validateGame"),validateEmail())}function C(){t.log.debug("关闭商城回调"),t.dispatch(new e.spin.SpinEvent(e.spin.SpinEvent.REQ_RESET_GAME,{type:2}))}function S(){t.log.debug("关闭支付回调"),t.dispatch(new e.spin.SpinEvent(e.spin.SpinEvent.PAY_CLOSED))}function v(){t.log.debug("支付成功回调"),t.dispatch(new e.spin.SpinEvent(e.spin.SpinEvent.PAY_SUCCESS))}function I(a){void 0===a&&(a=null),t.log.debug("促销领取奖励动画"),t.dispatch(new e.top.TopEvent(e.top.TopEvent.PROMO_PRIZE_ANIMATION,a))}function D(){t.log.debug("更新头像回调"),t.dispatch(new t.ToTableEvent(t.ToTableEvent.TO_TABLE_UPDATE_HEAD)),t.dispatch(new t.commonhead.HeadEvent(t.commonhead.HeadEvent.TO_UPDATE_HEAD,null))}function A(e){t.log.debug("req_func回调 ",e),t.dispatch(new t.WPTEvent(t.WPTEvent.JS_REQ_FUNC,e))}function O(){t.log.debug("js callback clickBackBtn"),t.dispatch(new t.ToTableEvent(t.ToTableEvent.TO_TABLE_EXIT_GAME,null))}function M(){t.log.debug("js callback toGameUpdateCoin"),t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_COINS_DATA))}function P(e,i){if(void 0===i&&(i=null),!t.CoreData.isDebugData()){if(t.log.debug("js toFB_Q"),t.isempty(i))switch(e){case a.STATISTICS_RING_CLICK:case a.STATISTICS_PLAYNOW_CLICK:case a.STATISTICS_SITGO_CLICK:case a.STATISTICS_TOURNAMENT_CLICK:case a.STATISTICS_PROMO_CLICK:case a.STATISTICS_STORE_CLICK:case a.STATISTICS_SPIN_CLICK:i=a.LOBBY_EVENTCATEGORY;break;case a.STATISTICS_SPIN_TICKET:case a.STATISTICS_SPIN_DOLLAR:case a.STATISTICS_SPIN_FREE:i=a.SPIN_EVENTCATEGORY;break;case a.STATISTICS_TOURMODE_RESULT_VIEW:case a.STATISTICS_TOURMODE_RESULT_CLOSE:case a.STATISTICS_TOURMODE_RESULT_PLAYNOW:case a.STATISTICS_TOURMODE_RESULT_BUYIN:i=a.TOURMODE_EVENTCATEGORY}fbPixel(e,i)}}function R(e,a){void 0===a&&(a=0),t.log.debug("js toBuyGold",t.CoreData.isDebugData()),t.CoreData.isDebugData()||(t.log.debug("js toBuyGold,buyin: ",a),showRecharge(e,a))}function w(t){switch(t){case a.BUY_GOLD_FROM_TABLE:O()}}function L(){t.dispatch(new t.WPTEvent(t.WPTEvent.REFRESH_GET_FLASHVARS))}function N(){if(!t.CoreData.isDebugData()){var e=isFBFirstLogin();t.CoreData.isLoginFirst=e,t.log.debug("getIsFirstLogin:",e,"****:",t.CoreData.isLoginFirst)}}function B(){t.dispatch(new e.lobby.LobbyEvent(e.lobby.LobbyEvent.QUICK_START,null))}function G(t,e,a,i,n,o){HTTP_GET(t,e,a,i,n,o)}function k(t,e,a,i,n,o){HTTP_POST(t,e,a,i,n,o)}function U(){t.log.debug("close_videoCallback"),e.table.TableData.isShowVideo=!1,t.dispatch(new t.BaseEvent("table_func_close","video"))}function x(e){void 0===e&&(e=!0),t.CoreData.isDebugData()||showGoldBonus(e)}a.SHOW_STORE_TAB_OGID="gold",a.SHOW_STORE_TAB_ITEMS="items",a.SHOW_STORE_TAB_REWARDPOINTS="masterPoint",a.SHOW_STORE_TAB_SPINTICKET=!0,a.SHOW_STORE_TAB_AVATARS="avatars",a.SHOW_STORE_TAB_CHARMS="charms",a.SHOW_STORE_TAB_EMOJIS="emojis",a.SHOW_STORE_TAB_OTHER="other",a.FUNC_LIST_SELECTED_TAB3=1,a.FUNC_LIST_SELECTED_TAB2=4,a.FUNC_OPEN_MASTER=2,a.FUNC_OPEN_SETTING=3,a.askOpenStore=i,a.askOpenGoldStore=n,a.askOpenPromo=o,a.showLobbyBtn=r,a.revOpenStore=s,a.updateCoin=l,a.updateMasterScore=h,a.openPerson=c,a.openLeaderBoard=u,a.openInventory=p,a.openRedeem=d,a.openLogOut=m,a.openLogin=_,a.showvideo=T,a.closevideo=g,a.checkgame=f,a.askOpenPay=y,a.getChannelType=b,a.validatedEmail=E,a.close_shop=C,a.close_pay=S,a.pay_success=v,a.promo_prize=I,a.revUpdateHead=D,a.req_func=A,a.clickBackBtn=O,a.toGameUpdateCoin=M,a.STATISTICS_LOBBY_VIEW="view",a.STATISTICS_RING_CLICK="ring_table_click",a.STATISTICS_PLAYNOW_CLICK="play_now_click",a.STATISTICS_SITGO_CLICK="sitgos_click",a.STATISTICS_TOURNAMENT_CLICK="tournament_click",a.STATISTICS_SPIN_VIEW="view",a.STATISTICS_SPIN_TICKET="spin_ticket_click",a.STATISTICS_SPIN_DOLLAR="spin_dollar_click",a.STATISTICS_SPIN_FREE="free_spin_click",a.STATISTICS_SPIN_CLICK="spin_click",a.STATISTICS_PROMO_CLICK="promo_click",a.STATISTICS_STORE_CLICK="store_click",a.SPIN_EVENTCATEGORY="spin",a.LOBBY_EVENTCATEGORY="poker_lobby",a.TOURMODE_EVENTCATEGORY="tourmode",a.STATISTICS_TOURMODE_RESULT_VIEW="winner_view",a.STATISTICS_TOURMODE_RESULT_CLOSE="winner_close_click",a.STATISTICS_TOURMODE_RESULT_PLAYNOW="winner_playnow_click",a.STATISTICS_TOURMODE_RESULT_BUYIN="Tokyo_winner_buyin_click",a.toFB_Q=P,a.BUY_GOLD_FROM_TABLE=1,a.BUY_GOLD_FROM_UNLOCK=2,a.BUY_GOLD_FROM_BUYIN=3,a.BUY_GOLD_FROM_MINIGAME=4,a.toBuyGold=R,a.closeToBuyGold=w,a.againLoginGame=L,a.getIsFirstLogin=N,a.playNow=B,a.httpGet=G,a.httpPost=k,a.close_videoCallback=U,a.gameLoadComplete=x}(a=e.js||(e.js={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(e){function a(a){var i=e.call(this,a)||this;return i.cast[t.OGJSSProtocol.OGID_JSS_LOGIN+1]=i.ON_LOGIN.bind(i),i.cast[t.OGJSSProtocol.Req_Ack_RankList_Time]=i.ON_Ack_RankList_Time.bind(i),i.cast[t.OGJSSProtocol.Req_Ack_UserRankList]=i.ON_Ack_RankList.bind(i),i.cast[t.OGJSSProtocol.ACK|t.OGJSSProtocol.OGID_MASTER_CONFIG]=i.ON_CONFIG.bind(i),i.cast[t.OGJSSProtocol.ACK|t.OGJSSProtocol.OGID_MASTER_INFO]=i.ON_UPDATE.bind(i),i.cast[t.OGJSSProtocol.OGID_MASTER_INFO]=i.ON_MASTER_INFO.bind(i),i.cast[t.OGJSSProtocol.Ntf_UserMLevUpGrade]=i.ON_Ntf_UserMLevUpGrade.bind(i),i.cast[t.OGJSSProtocol.NTF_MASTER_CHANGE]=i.ON_MASTER_SCORE.bind(i),i.cast[t.OGJSSProtocol.Req_Ack_GiveTableGift]=i.ON_ReqGiveTableGift.bind(i),i.cast[t.OGJSSProtocol.Req_Ack_TableGiftList]=i.ON_ReqTableGiftList.bind(i),i.cast[t.OGJSSProtocol.ACK_TICKETLIST]=i.ackTicketList.bind(i),i.cast[t.OGJSSProtocol.ACK_BUYTICKETFROMSHOP]="TicketInfo",i.cast[t.OGJSSProtocol.ReqUserMaxCGZUnlockValue]=i.ON_AckUserMaxCGZUnlockValue.bind(i),i.cast[t.OGJSSProtocol.ReqUpdateMaxCGZUnlockValue]=i.ON_AckUpdateMaxCGZUnlockValue.bind(i),i.cast[t.OGJSSProtocol.ACK_ENTERTABLE_QUERYPLAYERGIFT]="ACK_EnterTableQueryPlayerStatus",i.cast[t.OGJSSProtocol.Ack_ItemConfigs]=i.ack_NbCardUrl.bind(i),i.cast[t.OGJSSProtocol.PLAYEREXPRESSION]=i.ON_RECIVE_SFITEM.bind(i),i}return __extends(a,e),a.prototype.LOGIN=function(){var e=new TextEncoding.TextEncoder(t.CoreData.Encode),a=e.encode(t.CoreData.username).buffer,i=this.getProtoClassObj("REQ_LoginJSS");i.rolename=a,i.cert=t.CommonData.getInstance().currentUser.cert.buffer,i.LoginMode=1,i.comfromid=t.CoreData.channelID,i.userip=t.CoreData.IP,i.isVisitor=0,i.szSpeIP=e.encode("").buffer,i.sLangID=t.CoreData.Language,i.product=3,t.log.debug("JSS Socket","发送登录请求",i),this.send(t.OGJSSProtocol.OGID_JSS_LOGIN,i)},a.prototype.reqRank=function(){var e=this.getProtoClassObj("Jss_ReqUserRankList");t.log.debug("JSS Socket","请求排行榜列表"),this.send(t.OGJSSProtocol.Req_Ack_UserRankList,e)},a.prototype.reqRankListTime=function(){var e=new TextEncoding.TextEncoder(t.CoreData.Encode),a=this.getProtoClassObj("Req_RankListInfo");a.roleName=e.encode(t.CoreData.username).buffer,t.log.debug("JSS Socket","请求排行榜倒计时",a),this.send(t.OGJSSProtocol.Req_Ack_RankList_Time,a)},a.prototype.REQ_SEND_FACE=function(e){var a=this.getProtoClassObj("REQ_Send_Face");a.faceType=0,a.faceContent=e,a.matchID=t.play.table.TableData.gameinfo.getGameInfo().mathId,a.tableID=t.play.table.TableData.gameinfo.getGameInfo().tableId,t.log.debug("JSS Socket","发送表情",a),this.send(t.OGJSSProtocol.REQ_SEND_FACE,a)},a.prototype.REQ_ENTERTABLE_QUERYPLAYERGIFT=function(e){for(var a=[],i=0,n=e.length;n>i;i++)a.push(t.writeMultiByte(e[i],t.CoreData.Encode));var o=this.getProtoClassObj("REQ_EnterTableQueryPlayerStatus");o.roleName=t.writeMultiByte(t.play.table.TableData.userData.currentName,t.CoreData.Encode),o.queryNames=a,o.matchID=t.play.table.TableData.matchID,t.log.debug("JSS Socket","请求用户礼物",o),this.send(t.OGJSSProtocol.REQ_ENTERTABLE_QUERYPLAYERGIFT,o)},a.prototype.reqTableGiftList=function(){var e=this.getProtoClassObj("Req_TableGiftList"),a=new TextEncoding.TextEncoder(t.CoreData.Encode),i=a.encode(t.CoreData.username).buffer;e.roleName=i,t.log.debug("JSS Socket","请求获取牌桌礼物列表",e),this.send(t.OGJSSProtocol.Req_Ack_TableGiftList,e)},a.prototype.reqGiveTableGift=function(e,a){var i=this.getProtoClassObj("Req_GiveTableGift"),n=new TextEncoding.TextEncoder(t.CoreData.Encode),o=n.encode(t.play.table.TableData.userData.currentName).buffer,r=n.encode(t.play.table.TableData.userData.currentNickName).buffer;i.roleName=o,i.userName=r,i.code=e,i.targets=a,i.matchID=t.play.table.TableData.gameinfo.getGameInfo().mathId,t.log.debug("JSS Socket","请求赠送牌桌礼物",i),this.send(t.OGJSSProtocol.Req_Ack_GiveTableGift,i)},a.prototype.reqItemPack=function(e){void 0===e&&(e=2);var a=this.getProtoClassObj("REQ_PACK");a.type=e,this.send(t.OGJSSProtocol.REQ_PACK,a)},a.prototype.sendPlayerSitDownState=function(e,a,i){var n=this.getProtoClassObj("REQ_BroadcastPlayerStatus");null==i&&(i=t.play.table.TableData.userData.currentName),n.roleName=t.writeMultiByte(i,t.CoreData.Encode),n.matchID=e,n.tableID=a,t.log.debug("JSS Socket","请求jss玩家坐下",n),this.send(t.OGJSSProtocol.REQ_BROADCASTPLAYERSTATUS,n)},a.prototype.ON_LOGIN=function(e){var a=this.getProtoClassObj("ACK_LoginResult",e.body.buffer);return t.log.debug("JSS Socket","收到登录应答",a.result),1==a.result&&t.log.debug("JSS Socket","登录成功"),this.CONFIG(),this.reqItemPack(2),this.reqTableGiftList(),this.ReqUserMaxCGZUnlockValue(),a},a.prototype.ack_NbCardUrl=function(e){var a=this.getProtoClassObj("Jss_Ack_ItemConfigs",e.body.buffer);
return t.CommonData.getInstance().imgUrlList=a.itemConfigs,t.dispatch(new t.ToTableEvent(t.ToTableEvent.TO_TABLE_UPDATE_CARDLIST,{imgUrlList:a.cards})),a},a.prototype.ON_Ack_RankList_Time=function(e){var a=this.getProtoClassObj("Ack_RankListInfo",e.body.buffer);return t.log.debug("JSS Socket","收到排行榜发奖倒计时 ",a),a},a.prototype.ON_Ack_RankList=function(e){var a=this.getProtoClassObj("Jss_AckUserRankList",e.body.buffer);return t.log.debug("JSS Socket","收到排行榜列表 ",a),a},a.prototype.ON_ReqTableGiftList=function(e){var a=this.getProtoClassObj("Ack_TableGiftList",e.body.buffer);return t.log.debug("JSS Socket","收到牌桌礼物列表",a),a},a.prototype.ON_ReqGiveTableGift=function(e){var a=this.getProtoClassObj("Ack_GiveTableGift",e.body.buffer);return t.log.debug("JSS Socket","收到赠送牌桌礼物结果",a),a},a.prototype.ON_RECIVE_SFITEM=function(e){var a=this.getProtoClassObj("ACK_Player_Expression",e.body.buffer);t.log.debug("JSS Socket","收到收费道具信息",a.expression,"表情CODE");var i=a.expression.trim();if(!t.isempty(i)){var n=i.split(",");t.CommonData.getInstance().currentUser.sfItem=n}return a},a.prototype.ackTicketList=function(e){var a=this.getProtoClassObj("ACK_TICKETLIST",e.body.buffer);return t.log.debug("JSS Socket","收到门票列表"),a},a.prototype.ReqUserMaxCGZUnlockValue=function(){var e=this.getProtoClassObj("JssWPTReqUserMaxCGZUnlockValue"),a=new TextEncoding.TextEncoder(t.CoreData.Encode);e.roleName=a.encode(t.CoreData.rolename).buffer,this.send(t.OGJSSProtocol.ReqUserMaxCGZUnlockValue,e)},a.prototype.ON_AckUserMaxCGZUnlockValue=function(e){var a=this.getProtoClassObj("JssWPTAckUserMaxCGZUnlockValue",e.body.buffer);if(this.commonData.currentUser.rolename==t.readMultiByte(a.roleName,t.CoreData.Encode)){this.commonData.lobby.isGetedUnlockValue=!0;var i=t.int64To32(a.maxCGZUnlockValue);t.log.debug("获取该用户当前常规桌最大解锁值:"+i),t.CoreData.isLoginFirst&&i<t.CoreData.MAXCGZUnlockValue&&(i=t.CoreData.MAXCGZUnlockValue),this.commonData.lobby.maxCGZUnlockValue=i,t.SharedObjectUtil.write(t.LobbyData.key_maxCGZUnlockValue,i.toString()),t.log.debug("获取该用户当前常规桌最大解锁值:"+this.commonData.lobby.maxCGZUnlockValue)}return this.commonData.UpdateMaxCGZUnlockValue()||t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_UNLOCK_VIEW,this.commonData.lobby.maxCGZUnlockValue)),a},a.prototype.ReqUpdateMaxCGZUnlockValue=function(e){var a=this.getProtoClassObj("JssWPTReqUpdateMaxCGZUnlockValue"),i=new TextEncoding.TextEncoder(t.CoreData.Encode);a.roleName=i.encode(t.CoreData.rolename).buffer,a.maxCGZUnlockValue=e,this.send(t.OGJSSProtocol.ReqUpdateMaxCGZUnlockValue,a)},a.prototype.ON_AckUpdateMaxCGZUnlockValue=function(e){var a=this.getProtoClassObj("JssWPTAckUpdateMaxCGZUnlockValue",e.body.buffer);return this.commonData.currentUser.rolename==t.readMultiByte(a.roleName,t.CoreData.Encode)&&(0==a.result?(this.commonData.lobby.maxCGZUnlockValue=t.int64To32(a.maxCGZUnlockValue),t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_UNLOCK_VIEW,this.commonData.lobby.maxCGZUnlockValue)),t.log.debug("用户更新常规桌最大解锁值:"+this.commonData.lobby.maxCGZUnlockValue)):t.log.warn("JssWPTAckUpdateMaxCGZUnlockValue fail , reason:"+a.reason)),a},a.prototype.ON_CONFIG=function(e){var a=this.getProtoClassObj("Jss_AckUserMLev_Config",e.body.buffer);t.log.debug("JSS Socket","收到大师配置信息",a),t.CommonData.getInstance().masterConfigs=[];var i;for(i in a.cMLevConfigs)t.CommonData.getInstance().masterConfigs.push(a.cMLevConfigs[i]);return a},a.prototype.ON_UPDATE=function(e){var a=this.getProtoClassObj("Jss_AckUserMLevInfo",e.body.buffer);return t.log.debug("JSS Socket","收到大师分信息",a),t.CommonData.getInstance().currentUser.master.currentLevel=a.nMMLev,t.CommonData.getInstance().currentUser.master.currentLevelExperience=a.nMMLevExpScore,t.CommonData.getInstance().currentUser.master.currentTitle=a.nYMLev,t.CommonData.getInstance().currentUser.master.currentTitleExperience=a.nYMLevExpScore,t.CommonData.getInstance().currentUser.master.forceRate=a.nMMLevForceMttRate,t.CommonData.getInstance().currentUser.master.forceRateEndTime=a.szMMLevForceMttRateEndTime,t.CommonData.getInstance().currentUser.master.titleTime=a.szYMLevGetTime,t.CommonData.getInstance().currentUser.master.currentMissionExperience=a.nYMLevExpScoreMonth,t.CommonData.getInstance().currentUser.master.titleFailedCount=a.nYMLevFailTaskNum,a},a.prototype.ON_MASTER_INFO=function(e){var a=this.getProtoClassObj("Ack_PlayerMasterTicketLevInfo",e.body.buffer);return t.log.debug("JSS Socket","收到大师经验变化信息",a),this.UPDATE(),a},a.prototype.ON_Ntf_UserMLevUpGrade=function(e){var a=this.getProtoClassObj("Jss_NtfUserMLevUpGrade",e.body.buffer);return t.log.debug("JSS Socket","收到大师升级信息",a),this.UPDATE(),a},a.prototype.ON_MASTER_SCORE=function(e){var a=this.getProtoClassObj("Ntf_MasterTicketChange",e.body.buffer);return t.log.debug("JSS Socket","收到大师分变化信息",a),t.CommonData.getInstance().currentUser&&t.CommonData.getInstance().currentUser.master&&(t.CommonData.getInstance().currentUser.master.masterScore=a.total.toNumber()),t.play.table.TableData.userData&&t.play.table.TableData.userData.userMasterInfo&&(t.play.table.TableData.userData.userMasterInfo.masterScore=a.total.toNumber()),a},a.prototype.CONFIG=function(){var e=new TextEncoding.TextEncoder(t.CoreData.Encode),a=e.encode(t.CoreData.rolename).buffer,i=this.getProtoClassObj("Jss_ReqUserMLev_Config");i.szRoleName=a,t.log.debug("JSS Socket","请求大师配置信息",i),this.send(t.OGJSSProtocol.REQ|t.OGJSSProtocol.OGID_MASTER_CONFIG,i)},a.prototype.UPDATE=function(){var e=new TextEncoding.TextEncoder(t.CoreData.Encode),a=e.encode(t.CoreData.rolename).buffer,i=this.getProtoClassObj("Jss_ReqUserMLevInfo");i.szRoleName=a,t.log.debug("JSS Socket","请求大师分信息",i),this.send(t.OGJSSProtocol.REQ|t.OGJSSProtocol.OGID_MASTER_INFO,i)},a}(t.BaseMessageProcessor);e.JSSProcessor=a,__reflect(a.prototype,"wpt.net.JSSProcessor")}(e=t.net||(t.net={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(a){function i(){var i=a.call(this)||this;return i.setProto(t.ResConst.PROTO_NAME_JSS),i.jssProcessor=new e.JSSProcessor(i),i.registerMsg(i.jssProcessor),i.setHeartBeat(2e4),i}return __extends(i,a),i.prototype.HEART_BEAT=function(e){void 0===e&&(e=null),this.send(t.OGJSSProtocol.IDLE_MESSAGE,null)},i}(t.SocketService);e.JSSService=a,__reflect(a.prototype,"wpt.net.JSSService")}(e=t.net||(t.net={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(e){function a(a){var i=e.call(this,a)||this;return i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_CONFIRMCONNECT]="MatchList_SendMatchlistSvrInfo",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_LOGIN]=i.ON_LOGIN.bind(i),i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_IDLE]=i.ON_HEART_BEAT.bind(i),i}return __extends(a,e),a.prototype.Login=function(){t.CoreData.isShield?(t.log.debug("使用安全盾登录"),this.LOGIN_SHIELD()):this.OGID_TEXASPOKER_MATCHLIST_CONFIRMCONNECT(1,t.CoreData.Language)},a.prototype.LOGIN_SHIELD=function(){var e=this.getProtoClassObj("OGShield_LoginList");e.letterType=1,e.Letter=t.Base64.decodeToByteArray(t.Base64.decode(t.CoreData.IDCertificate)),e.nModifyDisName=1,e.sLangID="en",e.isGBK=t.CoreData.isGBK,e.product=t.CoreData.product;var a=t.CoreData.clientType;e.clientType=a;var i=new TextEncoding.TextEncoder(t.CoreData.Encode);i.encode(t.CoreData.username).buffer;e.loginUserName=i.encode(t.CoreData.username).buffer,t.log.debug("MatchList Socket","请求用户登录",e),this.send(t.OGLobbyProtocol.OGID_OGSHIELD_LOGINLIST,e)},a.prototype.OGID_TEXASPOKER_MATCHLIST_CONFIRMCONNECT=function(e,a){var i=this.getProtoClassObj("MatchList_ReqConnect");i.nModifyDisName=e,i.sLangID=a,i.product=t.CoreData.product,i.clientType=t.CoreData.clientType,i.isGBK=t.CoreData.isGBK,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_CONFIRMCONNECT,i)},a.prototype.LOGIN=function(){t.log.debug("Login"),t.log.debug("长证书登录:"+t.CoreData.username+" , IDCertificate:"+t.CoreData.IDCertificate);var e=new TextEncoding.TextEncoder(t.CoreData.Encode),a=e.encode(t.CoreData.username).buffer,i=this.getProtoClassObj("OGMatchList_AuthLongCertLogin");i.LoginMode=1,i.Letter=t.Base64.decodeToByteArray(t.Base64.decode(t.CoreData.IDCertificate)),i.username=a,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_AUTHLONGCERTLOGIN,i)},a.prototype.ON_LOGIN=function(e){var a=this.getProtoClassObj("MatchList_AckLogin",e.body.buffer);t.log.debug("收到登录结果",a);var i=this;if(0==a.result){i.commonData.stamp.start();var n=i.commonData.currentUser;n.rolename=a.rolename,n.cert=new egret.ByteArray(t.getArrayBuffer(a.cert)),n.nickname=a.szCFUserName,t.CoreData.ourgameID=a.ourgameid,i.commonData.currentUser=n}return this.socket.matchlistProcessor.GET_USER_COIN(),this.socket.matchlistProcessor.OGID_MATCHLIST_WPTCGZPARTIONCONFIG(),a},a.prototype.ON_HEART_BEAT=function(e){var a;return t.log.debug("Main Socket","收到心跳回复  ping:"+a),a},a}(t.BaseMessageProcessor);e.MatchListLoginProcessor=a,__reflect(a.prototype,"wpt.net.MatchListLoginProcessor")}(e=t.net||(t.net={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(e){function a(a){var i=e.call(this,a)||this;return i.isWatchGame=!1,i.cast[t.OGLobbyProtocol.OGID_WPT_FASTJOIN]=i.ON_QUICK_START.bind(i),i.cast[t.OGLobbyProtocol.OGID_WPT_GETUSERCOININFO]=i.ON_GET_USER_COIN.bind(i),i.cast[t.OGLobbyProtocol.OGID_MATCHLIST_SHOWLABLE_CONFIG]="MatchList_AckMatchShowLableConfig",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_MATCHINFO]="OGMatchList_MatchInfos",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_CGZENTERLIMITINFOLIST]=i.ON_TEXASPOKER_MATCHLIST_CGZENTERLIMITINFOLIST.bind(i),i.cast[t.OGLobbyProtocol.OGID_MATCHLIST_NTF_ADDNEWMATCH]="MatchList_Ntf_AddNewMatch",i.cast[t.OGLobbyProtocol.OGID_MATCHLIST_NTF_MATCHSPEINFO]="MatchList_Ntf_MatchSpeInfo",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_DELMATCH]="MatchList_DelMatch",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SEARCHMATCH_NEW]="Ack_MatchList_SearchMatch",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_REQ_CGZNEWACTMATCH]="MatchList_AckCgzNewActMatchs",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_GETGAMEUSERINFO]="MatchList_AckGetGameUserInfo",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_NOTIFYMATCHPLAYER]="MatchList_NotifyMatchPlayer",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDPLAYERINFO]="MatchList_SendPlayerInfo",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDREWARD]="MatchList_SendReward",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SIGNMATCH]="MatchList_AckSignMatch",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_NEWNOTIFYPLAYER]="MatchList_NotifyMatchPlayer",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_STARTMATCH]="MatchList_NotifyStartMatch",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDMATCHTOPINFO]="MatchList_MatchTopInfoListV2",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDSIGNINFO]="MatchList_SendSignInfo",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_NOTIFYMATCHSTATUS]="MatchList_NotifyMatchStatus",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_GETROLERESULT]="ByteArray",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDCHANGEINFO]="MatchList_SendMatchChangeInfo",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDMATCHCOININFO]="MatchList_SendMatchCoinInfo",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDTABLEINFO]="MatchList_SendTableInfo",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SENDSERVERTIME]="MatchList_SendServerTime",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_ENTER_SIMILAR_TABLE]="MatchList_EnterSimilarTableAck",i.cast[t.OGLobbyProtocol.OGID_MATCHLIST_NTF_MATCHSTART_SIGNLATER]="MatchList_NtfMatchStartSignLater",i.cast[t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_MATCHREWARDLATER]="OGMatchList_SendMatchReward",i.cast[t.OGLobbyProtocol.OGID_MATCHLIST_WPTCGZPARTIONCONFIG]=i.ON_OGID_MATCHLIST_WPTCGZPARTIONCONFIG.bind(i),i}return __extends(a,e),a.prototype.GET_USER_COIN=function(){var e=this.getProtoClassObj("MatchList_GetUserCoinInfo");e.rolename=t.CommonData.getInstance().currentUser.rolename,t.CommonData.getInstance().currentUser.nickname&&(e.sCFUserName=t.CommonData.getInstance().currentUser.nickname),t.log.debug("请求用户信息",e),this.send(t.OGLobbyProtocol.OGID_WPT_GETUSERCOININFO,e)},a.prototype.ON_GET_USER_COIN=function(e){var a;return a=this.getProtoClassObj("MatchList_AckGetUserCoinInfo",e.body.buffer),t.log.debug("收到用户数据",a),this.commonData.currentUser.coins=t.getProtoNumber(a.Coin),this.commonData.currentUser.chips=t.getProtoNumber(a.GameCoin),a},a.prototype.QUICK_START=function(e){void 0===e&&(e=0/0),t.log.debug("请求快速开始");var a=this.getProtoClassObj("MatchList_FastJoinReq");a.RoleName=this.commonData.currentUser.rolename,a.Coin=this.commonData.currentUser.coins,isNaN(e)||(a.nTemplateID=e),a.wptMaxCGZUnlockValue=this.commonData.lobby.maxCGZUnlockValue,this.send(t.OGLobbyProtocol.OGID_WPT_FASTJOIN,a)},a.prototype.ON_QUICK_START=function(e){t.log.debug("收到快速开始数据");var a=this.getProtoClassObj("MatchList_FastJoinAck",e.body.buffer);return a},a.prototype.REQ_USER_RANK_DATA=function(){},a.prototype.ON_USER_RANK_DATA=function(e){t.log.debug("收到排行榜数据");var a;return a},a.prototype.ON_TEXASPOKER_MATCHLIST_CGZENTERLIMITINFOLIST=function(e){var a=this.getProtoClassObj("MatchList_CGZEnterLimitInfo",e.body.buffer);t.CommonData.getInstance().normalLimitData=[];var i=[];i=a.LimitDataList;for(var n=0;n<i.length;n++){var o=i[n],r=new t.NormalLimitInfo;r.limitId=o.LimitID,r.minBlind=t.int64To32(o.MinBlind),r.maxBlind=t.int64To32(o.MaxBlind),r.minCoin=t.int64To32(o.MinCoin),r.maxCoin=t.int64To32(o.MaxCoin),r.tip=o.Tip,r.displaySimilarTable=!0,t.log.info("MatchList_CGZEnterLimitInfo:"+r.limitId,r.minBlind,r.maxBlind,o.displaySimilarTable),t.CommonData.getInstance().normalLimitData.push(r)}return a},a.prototype.OGID_MATCHLIST_SHOWLABLE_CONFIG=function(){this.send(t.OGLobbyProtocol.OGID_MATCHLIST_SHOWLABLE_CONFIG)},a.prototype.OGID_TEXASPOKER_MATCHLIST_SEARCHMATCH=function(){this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SEARCHMATCH_NEW)},a.prototype.OGID_TEXASPOKER_MATCHLIST_PROPERTY=function(t){},a.prototype.MATCHLIST_SIGNMATCH=function(e){this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SIGNMATCH,e)},a.prototype.getTagMatchDataByMatchId=function(t){return null},a.prototype.signMoney=function(e,a){void 0===a&&(a=1);var i=this.getProtoClassObj("MatchList_SignMatch");i.MatchID=e,i.Type=0,i.RoleName=t.CommonData.getInstance().currentUser.rolename,i.SignType=a,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SIGNMATCH,i)},a.prototype.cancelSigned=function(e){var a=this.getProtoClassObj("MatchList_SignMatch");a.MatchID=e,a.SignType=0,a.RoleName=t.CommonData.getInstance().currentUser.rolename,a.Type=1,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_SIGNMATCH,a)},a.prototype.OGID_TEXASPOKER_MATCHLIST_REQ_CGZNEWACTMATCH=function(){},a.prototype.OGID_TEXASPOKER_MATCHLIST_OPENUPFIELD_MODULECONFIG=function(){},a.prototype.sendMessageUserInfo=function(e){var a=this.getProtoClassObj("MatchList_GetGameUserInfo");a.matchID=e,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_GETGAMEUSERINFO,a)},a.prototype.normalSign=function(e,a){if(void 0===a&&(a=-1),-1!=a)if(e){var i=this.getProtoClassObj("MatchList_WatchMatch");i.matchid=e,i.tableid=0,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_WATCHMATCH,i)}else t.log.info("没有选择比赛，不能加入")},a.prototype.sendEnterMatchMessage=function(e){var a=this.getProtoClassObj("MatchList_EnterMatch");a.MatchID=e,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_ENTERMATCH,a)},a.prototype.sendLeaveMatchMessage=function(e){var a=this.getProtoClassObj("MatchList_LeaveMatch");a.MatchID=e,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_LEAVEMATCH,a)},a.prototype.ENTERSIGNEDMATCH=function(e){var a=this.getProtoClassObj("MatchList_SendEnterSignedMatch");a.matchid=e,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_ENTERSIGNEDMATCH,a)},a.prototype.watchMatch=function(e,a){this.isWatchGame=!0;var i=this.getProtoClassObj("MatchList_WatchMatch");i.matchid=e,i.tableid=a,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_WATCHMATCH,i)},a.prototype.EnterSimilarTableReq=function(e,a,i){var n=this.getProtoClassObj("MatchList_EnterSimilarTableReq"),o=t.writeMultiByte(e,t.CoreData.Encode);n.rolename=o,n.chips=a,n.templateID=i,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_ENTER_SIMILAR_TABLE,n)},a.prototype.EnterSimilarTableReq2=function(e,a,i,n,o){var r=this.getProtoClassObj("MatchList_EnterSimilarTableReq"),s=t.writeMultiByte(e,t.CoreData.Encode);r.rolename=s,r.chips=a,r.templateID=0,r.excludedMatchID=t.writeMultiByte("0",t.CoreData.Encode),r.wptFieldType=i,r.wptFieldId=n,this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_ENTER_SIMILAR_TABLE,r)},a.prototype.OGID_MATCHLIST_WPTCGZPARTIONCONFIG=function(){var e=this.getProtoClassObj("MatchList_AckWPTCgzPartionConfig");this.send(t.OGLobbyProtocol.OGID_MATCHLIST_WPTCGZPARTIONCONFIG,e)},a.prototype.ON_OGID_MATCHLIST_WPTCGZPARTIONCONFIG=function(e){var a=this.getProtoClassObj("MatchList_AckWPTCgzPartionConfig",e.body.buffer);t.log.info("服务器返回 常规桌分级区间配置 "),this.commonData.lobby.cgzPartionConfigs=[];for(var i=0;i<a.cgzPartionConfigs.length;i++){var n=new t.WPTCgzPartionConfigVO;n.fieldType=a.cgzPartionConfigs[i].fieldType,n.fieldId=a.cgzPartionConfigs[i].fieldId,n.showName=t.readMultiByte(a.cgzPartionConfigs[i].showName,t.CoreData.Encode),n.bigBlind=t.int64To32(a.cgzPartionConfigs[i].bigBlind),n.smBlind=t.int64To32(a.cgzPartionConfigs[i].smBlind),n.bankRoll=t.int64To32(a.cgzPartionConfigs[i].bankRoll),n.minBuyIn=t.int64To32(a.cgzPartionConfigs[i].minBuyIn),n.maxBuyIn=t.int64To32(a.cgzPartionConfigs[i].maxBuyIn),t.CoreData.exclude_tables&&-1==t.CoreData.exclude_tables.indexOf(n.minBuyIn)&&this.commonData.lobby.cgzPartionConfigs.push(n)}return a},a}(t.BaseMessageProcessor);e.MatchListProcessor=a,__reflect(a.prototype,"wpt.net.MatchListProcessor")}(e=t.net||(t.net={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(a){function i(){var i=a.call(this)||this;return i._totalTime=0,i.setProto(t.ResConst.PROTO_NAME_MATCHLIST),i.loginProcessor=new e.MatchListLoginProcessor(i),i.registerMsg(i.loginProcessor),i.matchlistProcessor=new e.MatchListProcessor(i),i.registerMsg(i.matchlistProcessor),i.setHeartBeat(2e4),i}return __extends(i,a),i.prototype.HEART_BEAT=function(t){void 0===t&&(t=null),this.sendHeartBeat()},i.prototype.sendHeartBeat=function(){this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_IDLE,null),t.log.debug("MatchListService ---------------HEART_BEAT",t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_IDLE),this.send(t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_NEWNOTIFYPLAYER,null)},i}(t.SocketService);e.MatchListService=a,__reflect(a.prototype,"wpt.net.MatchListService")}(e=t.net||(t.net={}))}(wpt||(wpt={}));var wpt;!function(t){var e=16128,a=15872,i=16288,n=29760,o=16640,r=function(){function t(){}return t}();r.OGID_WPT_FASTJOIN=e+69,r.OGID_TEXASPOKER_MATCHLIST_IDLE=e+6,r.OGID_TEXASPOKER_MATCHLIST_CONFIRMCONNECT=e+1,r.OGID_TEXASPOKER_MATCHLIST_LOGIN=e+2,r.OGID_TEXASPOKER_MATCHLIST_AUTHLONGCERTLOGIN=e+82,r.OGID_OGSHIELD_LOGINLIST=e+107,r.OGID_TEXASPOKER_MATCHLIST_SIGNMATCH=e+16,r.OGID_TEXASPOKER_MATCHLIST_ENTERMATCH=e+4,r.OGID_TEXASPOKER_MATCHLIST_STARTMATCH=e+18,r.OGID_TEXASPOKER_MATCHLIST_SENDREWARD=e+11,r.OGID_TEXASPOKER_MATCHLIST_SENDCHANGEINFO=e+12,r.OGID_MATCHLIST_NTFMATCHREBUYADDONREENTRYCOUNT=e+106,r.OGID_TEXASPOKER_MATCHLIST_LEAVEMATCH=e+5,r.OGID_TEXASPOKER_MATCHLIST_NEWNOTIFYMATCHPLAYER=e+30,r.OGID_TEXASPOKER_MATCHLIST_NOTIFYMATCHPLAYER=e+19,r.OGID_TEXASPOKER_MATCHLIST_NOTIFYMATCHSTATUS=e+24,r.OGID_WPT_GETUSERCOININFO=e+28,r.OGID_TEXASPOKER_MATCHLIST_GETROLERESULT=e+33,r.OGID_TEXASPOKER_MATCHLIST_ENTER_SIMILAR_TABLE=e+7,r.OGID_TEXASPOKER_MATCHLIST_GETMATCHINFOINTIME=e+29,r.OGID_TEXASPOKER_MATCHLIST_BROADCASTMSG=e+31,r.OGID_TEXASPOKER_MATCHLIST_GETGAMEUSERINFO=e+37,r.OGID_TEXASPOKER_MATCHLIST_NEWNOTIFYPLAYER=e+38,r.OGID_TEXASPOKER_MATCHLIST_MODIFYCONFIG=e+40,r.OGID_TEXASPOKER_MATCHLIST_SENDMATCHCOININFO=e+13,r.OGID_TEXASPOKER_MATCHLIST_SENDPLAYERINFO=e+14,r.OGID_TEXASPOKER_MATCHLIST_SENDTABLEINFO=e+15,r.OGID_TEXASPOKER_MATCHLIST_SEARCHMATCH=e+3,r.OGID_TEXASPOKER_MATCHLIST_SEARCHMATCH_NEW=e+20,r.OGID_TEXASPOKER_MATCHLIST_WATCHMATCH=e+23,r.OGID_TEXASPOKER_MATCHLIST_SENDSERVERTIME=e+26,r.OGID_TEXASPOKER_MATCHLIST_SENDONLINECOUNT=e+27,r.OGID_TEXASPOKER_MATCHLIST_GETBROADCASTMSG=e+32,r.OGID_TEXASPOKER_MATCHLIST_NOTIFYNEWMATCH=e+25,r.OGID_TEXASPOKER_MATCHLIST_DELMATCH=e+36,r.OGID_TEXASPOKER_MATCHLIST_SENDSIGNINFO=e+22,r.OGID_TEXASPOKER_MATCHLIST_MATCHINFO=e+41,r.OGID_TEXASPOKER_MATCHLIST_CONFIGINFO=e+48,r.OGID_TEXASPOKER_MATCHLIST_GIVEGIFT=e+49,r.OGID_TEXASPOKER_MATCHLIST_GIVEITEM=e+50,r.OGID_WPT_RNK_LIST_REQ=e+51,r.OGID_WPT_RNK_LIST_ACK=e+52,r.OGID_TEXASPOKER_MATCHLIST_BROADCAST_NEWS_REQ=e+53,r.OGID_TEXASPOKER_MATCHLIST_BROADCAST_NEWS_ACK=e+54,r.OGID_TEXASPOKER_MATCHLIST_SENDMATCHTOPINFO=e+39,r.OGID_TEXASPOKER_MATCHLIST_CGZENTERLIMITINFOLIST=e+55,r.OGID_TEXASPOKER_MATCHLIST_ENTERNOVICE=e+56,r.OGID_TEXASPOKER_MATCHLIST_NOVICEONLINEPLYCNT=e+57,r.OGID_TEXASPOKER_MATCHLIST_CFUSERNAME=e+58,r.OGID_TEXASPOKER_MATCHLIST_PROPERTY=e+59,r.OGID_TEXASPOKER_MATCHLIST_ENTERSIGNEDMATCH=e+60,r.OGID_TEXASPOKER_MATCHLIST_ALLINMATCHLIST=e+61,r.OGID_TEXASPOKER_MATCHLIST_MATCHSTATEINFO=e+63,r.OGID_TEXASPOKER_MATCHLIST_SELFTABLEID=e+64,r.OGID_TEXASPOKER_MATCHLIST_QOS=e+72,r.OGID_TEXASPOKER_MATCHLIST_INSRANK=e+74,r.OGID_TEXASPOKER_MATCHLIST_BEINSHOWNICKNAMELIST=e+75,r.OGID_TEXASPOKER_MATCHLIST_TESTNETSPEED=e+76,r.OGID_TEXASPOKER_MATCHLIST_OPENUPFIELD_MODULECONFIG=e+77,r.OGID_TEXASPOKER_MATCHLIST_MATCHREWARDLATER=e+83,r.OGID_TEXASPOKER_MATCHLIST_REQ_CGZNEWACTMATCH=e+86,r.OGID_TEXASPOKER_MATCHLIST_NTF_BOG=e+87,r.OGID_TEXASPOKER_MATCHLIST_GETCREATETYCGZ=e+91,r.OGID_TEXASPOKER_MATCHLIST_GETTYCGZSTATE=e+92,r.OGID_MATCHLIST_NTFSTARSIGNMATCHAUTOQUIT=e+93,r.OGID_MATCHLIST_NTFBEKIT=e+96,r.OGID_MATCHLIST_SHOWLABLE_CONFIG=e+101,r.OGID_MATCHLIST_NTF_MATCHSTART_SIGNLATER=e+102,r.OGID_MATCHLIST_NTF_MATCHSPEINFO=e+103,r.OGID_MATCHLIST_NTF_ADDNEWMATCH=e+104,r.OGID_MATCHLIST_WPTCGZPARTIONCONFIG=e+118,t.OGLobbyProtocol=r,__reflect(r.prototype,"wpt.OGLobbyProtocol");var s=function(){function t(){}return t}();s.REQ=0,s.ACK=134217728,s.IDLE_MESSAGE=i+23,s.REQ_PACK=i+5,s.OGID_JSS_LOGIN=i+1,s.OGID_MASTER_CONFIG=i+48,s.OGID_MASTER_INFO=i+47,s.PLAYEREXPRESSION=i+14,s.REQ_ENTERTABLE_QUERYPLAYERGIFT=i+8,s.ACK_ENTERTABLE_QUERYPLAYERGIFT=i+9,s.REQ_BROADCASTPLAYERSTATUS=i+10,s.REQ_SEND_FACE=i+12,s.Ntf_UserMLevUpGrade=i+87|134217728,s.ACK_TICKETLIST=i+21,s.ACK_BUYTICKETFROMSHOP=i+22,s.ACK_NOBLECARDURL=i+25,s.NTF_MASTER_CHANGE=i+40,s.Req_Ntf_INSConfig=i+42,s.Req_Ack_GetBuyInsScheme=i+43,s.Req_Ack_ChangeBuyInsScheme=i+44,s.Req_Ack_UserRankList=i+61,s.Req_UserInsFlag=i+81,s.Ack_UserInsFlag=i+81|134217728,s.Req_ModifyUserInsFlag=i+82,s.Ack_ModifyUserInsFlag=i+82|134217728,s.Req_Ack_TableGiftList=i+89,s.Req_Ack_GiveTableGift=i+90,s.Req_Ack_RankList_Time=i+91,s.ReqUserMaxCGZUnlockValue=i+114,s.ReqUpdateMaxCGZUnlockValue=i+115,s.Ack_ItemConfigs=i+103,t.OGJSSProtocol=s,__reflect(s.prototype,"wpt.OGJSSProtocol");var l=function(){function t(){}return t}();l.OGID_WPT_CHATMSG=a+112,l.OGID_WPT_HORN=a+114,l.OGID_GIVEGIFT=a+134,l.OGID_TEXASPOKER_PUSHBLINDCOIN=a+33,l.OGID_TEXASPOKER_PUSHPRECOIN=a+32,l.OGID_TEXASPOKER_LEAVETABLE=a+31,l.OGID_TEXASPOKER_SENDRESTTIME=a+30,l.OGID_TEXASPOKER_BLINDINFO=a+29,l.OGID_TEXASPOKER_BLINDCHANGE=a+28,l.OGID_TEXASPOKER_SENDUSERRANK=a+27,l.OGID_TEXASPOKER_MATCHCHIP=a+26,l.OGID_TEXASPOKER_LEAVESEAT=a+25,l.OGID_TEXASPOKER_USEDELAYTIME=a+24,l.OGID_TEXASPOKER_SHOWCARD=a+23,l.OGID_TEXASPOKER_REPORTPLAYER=a+22,l.OGID_TEXASPOKER_SENDGAMEINFO=a+21,l.OGID_TEXASPOKER_CHANGETABLE=a+20,l.OGID_TEXASPOKER_RESTMATCH=a+19,l.OGID_TEXASPOKER_SENDRANK=a+18,l.OGID_TEXASPOKER_SENDUSERINFO=a+17,l.OGID_TEXASPOKER_LEAVEGAME=a+16,l.OGID_TEXASPOKER_TESTRESULT=a+15,l.OGID_TEXASPOKER_SENDOVERTURN=a+13,l.OGID_TEXASPOKER_RIVERCARD=a+12,l.OGID_TEXASPOKER_TURNCARD=a+11,l.OGID_TEXASPOKER_FLOPCARD=a+10,l.OGID_TEXASPOKER_CHECKBET=a+9,l.OGID_TEXASPOKER_FOLDBET=a+8,l.OGID_TEXASPOKER_FOLLOWBET=a+7,l.OGID_TEXASPOKER_RAISEBET=a+6,l.OGID_TEXASPOKER_GAMECONFIRMCONNECT=a+1,l.OGID_TEXASPOKER_LOGINGAME=a+2,l.OGID_OGSHIELD_LOGINGAME=a+288,l.OGID_TEXASPOKER_ENTERMATCH=a+3,l.OGID_TEXASPOKER_INITCARD=a+5,l.OGID_TEXASPOKER_IDLE=a+14,l.OGID_TEXASPOKER_NOWELTER=a+98,l.OGID_TEXASPOKER_SITDOWN=a+99,l.OGID_TEXASPOKER_BUYCHIP=a+100,l.OGID_TEXASPOKER_NEETBUYCHIP=a+101,l.OGID_TEXASPOKER_LIVE=a+102,l.OGID_TEXASPOKER_GAMERULE=a+103,l.OGID_TEXASPOKER_WAITBLING=a+104,l.OGID_TEXASPOKER_NEXTBIGBLINGWATCH=a+105,l.OGID_TEXASPOKER_CHATMSG=a+112,l.OGID_TEXASPOKER_DEALCARD=a+139,l.OGID_TEXASPOKER_HORN=a+114,l.OGID_TEXASPOKER_EXCHANGEHYD=a+115,l.OGID_TEXASPOKER_CHANGEHYD=a+116,l.OGID_TEXASPOKER_PRESENTCOINS=a+117,l.OGID_TEXASPOKER_PRIVATECHAT=a+118,l.OGID_TEXASPOKER_ABLEORUNABLECHAT=a+119,l.OGID_TEXASPOKER_KICK=a+120,l.OGID_TEXASPOKER_USERLIST=a+121,l.OGID_TEXASPOKER_MODIFYCONFIG=a+128,l.OGID_TEXASPOKER_UNABLECHATLIST=a+129,l.OGID_TEXASPOKER_SHOWPICTRUE=a+130,l.OGID_TEXASPOKER_ADDUSER=a+131,l.OGID_TEXASPOKER_DELETEUSER=a+132,l.OGID_BROADCAST_PLAYER_GIFT_STATUS=a+133,l.OGID_BROADCAST_FACE=a+135,l.OGID_REBUY=a+136,l.OGID_GIVEITEM=a+137,l.OGID_BROADCAST_MATCHRANK=a+138,l.OGID_TEXASPOKER_CURMAXCARDTYPEDATA=a+140,l.OGID_INS_Req_AckCompensationRates=a+141,l.OGID_INS_UserCanBuyIns=a+142,l.OGID_INS_Req_AckBuyIns=a+143,l.OGID_INS_Ntf_OutsdelRes=a+144,l.OGID_INS_Ntf_InsInfo_EnterMatch=a+145,l.OGID_TEXASPOKER_TIYAN_MAXTIYANNUM=a+146,l.OGID_TEXASPOKER_TIYAN_NEWGAMESTART=a+147,l.OGID_TEXASPOKER_TIYAN_NTF_NEWGAMESTART=a+148,l.OGID_TEXASPOKER_SUP_NTF_GETSUPERGAME=a+149,l.OGID_TEXASPOKER_INS_USERENDINSTEACH=a+150,l.OGID_TEXASPOKER_CGZ_REPLACEBYSELF=a+151,l.OGID_TEXASPOKER_TESTNETSPEED=a+152,l.OGID_TEXASPOKER_CGZ_ADDMTTLEVCONFIG=a+153,l.OGID_TEXASPOKER_ACT_CURACTIDLIST=a+262,l.OGID_TEXASPOKER_LUCKYSZ_CURBUYRECORD=a+263,l.OGID_TEXASPOKER_LUCKYSZ_REQACKBUY=a+264,l.OGID_TEXASPOKER_LUCKYSZ_NTFBUYRESULT=a+265,l.OGID_TEXASPOKER_LUCKYSZ_NTFBACKBUY=a+266,l.OGID_TEXASPOKER_LUCKYSZ_NTFCURBUYID=a+267,l.OGID_TEXASPOKER_GRADU_BUYBALL=a+268,l.OGID_TEXASPOKER_GRADU_NTFLEAVETABLE=a+269,l.OGID_TEXASPOKER_NEWFULL_CURACTSTATE=a+270,l.OGID_TEXASPOKER_NEWFULL_CURPROGRESS=a+271,l.OGID_TEXASPOKER_NEWFULL_NTFACTSTATE=a+272,l.OGID_TEXASPOKER_NTF_BOG=a+273,l.OGID_TEXASPOKER_REQ_ACK_CurMatchRecord=a+274,l.OGID_TEXASPOKER_NtfCurPanComInfo=a+275,l.OGID_TEXASPOKER_NtfUserGetSuperCom=a+276,l.OGID_TEXASPOKER_CGZINITBUYCHIP=a+277,l.OGID_TEXASPOKER_NTFUSERWND=a+278,l.OGID_TEXASPOKER_TYCGZPSW=a+279,l.OGID_TEXASPOKER_NTFLOOKONUSERLEAVETABLE=a+280,l.OGID_TEXASPOKER_NTFBEKIT=a+281,l.OGID_TEXASPOKER_LATERSIGN_NTF_RESULTLATER=a+282,l.OGID_TEXASPOKER_NTFADDONTIME=a+283,l.OGID_TEXASPOKER_LATERSIGN_NTF_NEWPLAYERENTERTABLE=a+284,l.ACT_REQ_CONFIG=i+27,l.ACT_CONFIG=i+28,l.ACT_REQ_PROGRESS=i+29,l.ACT_PROGRESS=i+30,l.ACT_REQ_GET_REWARD=i+31,l.ACT_GET_REWARD=i+32,l.ACT_CHANGE_PROGRESS=i+33,l.ACT_CHANGE_BROADCAST=i+34,l.Req_Ntf_INSConfig=i+42,l.Req_Ack_GetBuyInsScheme=i+43,l.Req_Ack_ChangeBuyInsScheme=i+44,l.Req_Ack_LUCKYSZ_ComRateList=i+49,l.Req_Ack_LUCKYSZ_ConfigInfo=i+50,l.Req_Ack_LUCKYSZ_SystemComCount=i+69,l.Req_Ack_LUCKYSZ_UserComRank=i+70,l.Req_Ack_LUCKYSZ_UserBuyRecord=i+71,l.OGID_TEXASPOKER_MATCHLIST_INSRANK=e+74,l.OGID_TEXASPOKER_MATCHLIST_MATCHREWARDLATER=e+83,l.OGID_CHAT_IDLE=n+0,l.OGID_CHAT_LOGIN=n+1,l.OGID_CHAT_GET_CHATSVR_LIST=n+50,l.OGID_CHAT_SYSMSG=n+51,l.OGID_TEXASPOKER_GIVETABLEGIFT=a+290,t.OGTableProtocol=l,__reflect(l.prototype,"wpt.OGTableProtocol");var h=function(){function t(){}return t}();h.LOGIN=o+1,h.RESET_GAME=o+2,h.START_GAME=o+3,h.IDLE=o+4,h.PAYMENT=o+5,t.OGSpinProtocol=h,__reflect(h.prototype,"wpt.OGSpinProtocol")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.spMask=new egret.Shape,t.configUI(),t}return __extends(a,e),a.prototype.configUI=function(){this.width=t.Screen.WIN_WIDTH,this.height=t.Screen.WIN_HEIGHT,this.setMask(),this.bonesLayout=new t.DragonBonesPlayer,this.bonesLayout.setDataSimple(a.ANIMATION_NAME,a.ANIMATION_NAME+t.ResConst.EFFECT_SUFFIX),this.bonesLayout.playTimes=0,this.bonesLayout.loadData(),this.bonesLayout.x=this.width/2,this.bonesLayout.y=this.height/2,this.addChild(this.bonesLayout)},a.prototype.setMask=function(){this.spMask.graphics.clear(),this.spMask.graphics.beginFill(0,.3),this.spMask.graphics.drawRect(0,0,this.width,this.height),this.spMask.graphics.endFill(),null==this.spMask.parent&&this.addChild(this.spMask)},a}(egret.Sprite);e.ANIMATION_NAME="loading",t.LoadingEffect=e,__reflect(e.prototype,"wpt.LoadingEffect")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.configUI(),t}return __extends(a,e),a.prototype.configUI=function(){this.width=t.Screen.WIN_WIDTH,this.height=t.Screen.WIN_HEIGHT,this.bgImg=new eui.Image("resource/stopServer.jpg"),this.addChild(this.bgImg)},a}(egret.Sprite);t.LoadingStopServerImg=e,__reflect(e.prototype,"wpt.LoadingStopServerImg")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.configUI(),t}return __extends(a,e),a.prototype.configUI=function(){this.width=t.Screen.WIN_WIDTH,this.height=t.Screen.WIN_HEIGHT,this.bgImg=new eui.Image("resource/load_bg.jpg"),this.addChild(this.bgImg);var e=new eui.Image("resource/loading/loading-02.png");this.addChild(e),e.x=(this.width-719)/2,e.y=this.height-e.height-100,this.progress=new t.MaskScaleShape,this.progress.source="resource/loading/loading-01.png",this.addChild(this.progress),this.progress.x=e.x,this.progress.y=e.y,this.textField=new egret.TextField,this.addChild(this.textField),this.textField.width=480,this.textField.height=100,this.textField.textAlign="center",this.textField.textColor=16777215,this.textField.x=(t.Screen.WIN_WIDTH-this.textField.width)/2,this.textField.y=e.y+10},a.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e,this.progress.width=Math.max(t/e*719)},a}(egret.Sprite);t.LoadingUI=e,__reflect(e.prototype,"wpt.LoadingUI")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var a=e.call(this)||this;return a.btnAllNames=[],a.btnAllInstance={},a.setType(t.DialogType.Modal),a}return __extends(a,e),a.prototype.partAdded=function(a,i){e.prototype.partAdded.call(this,a,i),i instanceof t.WebButton&&(this.btnAllNames.push(a),this.btnAllInstance[a]=i)},a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.closeBtn&&this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),this.storeBtn&&this.storeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.storeBtnClick,this)},a.prototype.storeBtnClick=function(e){t.play.js.askOpenStore(null,this.data),this.remove()},a.prototype.closeBtnClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.remove(),this.currentState==a.STATE_STORE&&this.callback(this.onCancel)},a.showConfirm=function(t,e,i){return void 0===e&&(e=null),void 0===i&&(i=0),a.showCommonMsg(a.SKIN_CONFIRM,null,null,t,e,i)},a.showConfirmNotice=function(t,e,i){return void 0===e&&(e=null),void 0===i&&(i=0),a.showCommonMsg(a.SKIN_CONFIRM,a.STATE_NOTICE,null,t,e,i)},a.showMsg=function(t,e,i,n,o){return void 0===i&&(i=null),void 0===n&&(n=0),void 0===o&&(o=null),null==o&&(o=a["TITLE_"+t]),a.showCommonMsg(a.SKIN_MESSAGE,t,o,e,i,n)},a.showNotice=function(t){return a.showCommonMsg(a.SKIN_NOTICE,null,null,t)},a.hide=function(){t.DisplayUtil.removeAllChild(t.Context.getInstance().screen.popupLayout)},a.showCommonMsg=function(e,i,n,o,r,s){void 0===r&&(r=null),void 0===s&&(s=0),t.dispatch(new t.UIEvent(t.UIEvent.ShowBlackBra,!1));var l=new a;return l.skinName=e,null!=i&&(l.currentState=i),l.setData(n,o,r,s),t.DialogManager.getInstance().add(t.Context.getInstance().screen.popupLayout,l),l.addBtnEventByName.apply(l,l.btnAllNames),l},a.prototype.addBtnEventByName=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var a,i=0;i<t.length;i++)a=this.btnAllInstance[t[i]],a.isOverMusic=!0,void 0!=a&&(-1!=t[i].indexOf("okBtn_")?a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.okBtnClick,this,!1):-1!=t[i].indexOf("cancelBtn_")&&a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cancelBtnClick,this,!1))
},a.prototype.okBtnClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.callback(this.onConfirm),this.remove()},a.prototype.cancelBtnClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.callback(this.onCancel),this.remove()},a.prototype.setData=function(t,e,a,i){void 0===a&&(a=null),void 0===i&&(i=0),this.titleTxt&&t&&(this.titleTxt.text=t),this.contentTxt.text=e,this.data=a,this.delay=i},a.prototype.onAdd=function(){e.prototype.onAdd.call(this)},a.prototype.onRemove=function(){e.prototype.onRemove.call(this);for(var t=0;t<this.btnAllNames.length;t++)this[this.btnAllNames[t]]&&this[this.btnAllNames[t]].removeEventListener(egret.TouchEvent.TOUCH_TAP,this[this.btnAllNames[t]+"Click"],this,!1)},a}(t.Dialog);e.SKIN_MESSAGE="wpt.play.MsgDialogSkin",e.SKIN_CONFIRM="wpt.play.MsgConfirmSkin",e.SKIN_NOTICE="wpt.play.MsgNoticeSkin",e.STATE_NOTICE="notice",e.STATE_YESNO="yesno",e.STATE_STORE="store",e.TITLE_notice="Notice",e.TITLE_register="Register",e.CONGRATULATIONS="Congratulations",e.WARNING="WARNING",e.ADD_ON_FAILED="ADD_ON_FAILED",e.ADD_ON_INFO="ADD_ON_INFO",e.ADD_ON_INFORMATION="ADD_ON_INFORMATION",e.ADD_ON_SUCCESS="ADD_ON_SUCCESS",e.BUYIN="BUYIN",e.EMAIL_VALIDATION="EMAIL_VALIDATION",e.INSURFICIENT_BALANCE="INSURFICIENT_BALANCE",e.INSURFICIENT_FUNDS="INSURFICIENT_FUNDS",e.INSURFICIENT_FUNDS_NOSTORE="INSURFICIENT_FUNDS_NOSTORE",e.NOTICE="NOTICE",e.PROCESSING="PROCESSING",e.REBUY_FAILED="REBUY_FAILED",e.REBUY_INFO="REBUY_INFO",e.REBUY_SUCCESS="REBUY_SUCCESS",e.REBUY="REBUY",e.REENTRY_FAILED="REENTRY_FAILED",e.REENTRY_SUCCESS="REENTRY_SUCCESS",e.REENTRY="REENTRY",e.RETURN_LOBBY="RETURN_LOBBY",e.THANKS="THANKS",e.TICKET_EXPIRED="TICKET_EXPIRED",e.TOOLTIP="TOOLTIP",e.TOURNAMENT_RESULT="TOURNAMENT_RESULT",e.UNREGISTER_SUCCESS="UNREGISTER_SUCCESS",e.REGISTRATION_SUCCESS="REGISTRATION_SUCCESS",t.MessageDialog=e,__reflect(e.prototype,"wpt.MessageDialog")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.configUI(),t}return __extends(a,e),a.prototype.configUI=function(){this.initLearderBoard()},a.prototype.initLearderBoard=function(){this.leaderBoardLayout=new t.DragonBonesPlayer,this.leaderBoardLayout.setDataSimple(a.ANIMATION_NAME+"_ske",a.ANIMATION_NAME+"_tex","Armature"),this.leaderBoardLayout.playTimes=0,this.leaderBoardLayout.addEventListener(t.UIEvent.DragonBonesDataLoadComplete,this.bonesComplete,this),this.leaderBoardLayout.loadData(),this.leaderBoardLayout.setTouchEnabled(!0),this.leaderBoardLayout.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeaderBoardClick,this),this.addChild(this.leaderBoardLayout)},a.prototype.bonesComplete=function(){this.width=this.leaderBoardLayout.armature.display.width,this.y=252,this.x=t.Screen.WIN_WIDTH-this.width},a.prototype.onLeaderBoardClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.play.js.openLeaderBoard()},a}(egret.Sprite);e.ANIMATION_NAME="paihangbangtubiao",t.RightUI=e,__reflect(e.prototype,"wpt.RightUI")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.isOnSound=!1,t.isOnMusic=!1,t.skinName="wpt.skins.SettingSkin",t}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},a.prototype.init=function(){this.okBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.okBtnClick,this),this.initSwitch()},a.prototype.initSwitch=function(){this.isOnMusic=this.musicTbtn.selected=t.SoundManager.getInstance().isOnMusic,this.isOnSound=this.soundTbtn.selected=t.SoundManager.getInstance().isOnAudio,this.musicTbtn.addEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),this.soundTbtn.addEventListener(eui.UIEvent.CHANGE,this.changeHandler,this)},a.prototype.changeHandler=function(e){var a=e.target;switch(a.name){case"soundTbtn":this.isOnSound=a.selected,t.SoundManager.getInstance().isOnAudio=this.isOnSound;break;case"musicTbtn":this.isOnMusic=a.selected,t.SoundManager.getInstance().isOnMusic=this.isOnMusic}},a.prototype.okBtnClick=function(){this.hide(),t.SoundManager.getInstance().isOnMusic=this.isOnMusic,t.SoundManager.getInstance().isOnAudio=this.isOnSound},a}(t.BasePanel);t.SettingPanel=e,__reflect(e.prototype,"wpt.SettingPanel")}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.showState=!1,t}return __extends(a,e),a.prototype.setTextField=function(t,e){this._targetTxt=t,this._maxLen=e,this.update()},a.prototype.showTips=function(t){if(t){if(this.showState)return;this.addEvent()}else this.update()},a.prototype.update=function(){if(this._maxLen<0)return void this.addEvent();this.tipStr=this._targetTxt.text;var e=this.getStringLength(this.tipStr);if(e>this._maxLen){for(var a="",i=0,n=0;n<this.tipStr.length;n++)if(a+=this.tipStr.charAt(n),i+=t.StringUtil.byteNums(this.tipStr.charAt(n)),i>=this._maxLen-3){this._targetTxt.text=a+"...";break}this.addEvent(),this.bgmc&&this.bgmc.parent&&this.setTipTxt(this.tipStr)}else this.removeEvent()},a.prototype.getStringLength=function(e){for(var a=0,i=0;i<this.tipStr.length;i++)e+=this.tipStr.charAt(i),a+=t.StringUtil.byteNums(this.tipStr.charAt(i));return a},a.prototype.setTxt=function(t){this._targetTxt.text=t,this.update()},a.prototype.setTips=function(t){this.tipStr=t},Object.defineProperty(a.prototype,"visible",{get:function(){return this._targetTxt.visible},set:function(t){this._targetTxt.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"alpha",{get:function(){return this._targetTxt.alpha},set:function(t){this._targetTxt.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"text",{set:function(t){this.setTxt(t)},enumerable:!0,configurable:!0}),a.prototype.addEvent=function(){this._targetTxt&&(this._targetTxt.touchEnabled=!0,this._targetTxt.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.MOUSE_MOVEHandler,this,!1),this._targetTxt.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.ROLL_OUT,this,!1),this.showState=!0)},a.prototype.ROLL_OUT=function(e){this.bgmc&&this.bgmc.parent&&t.DisplayUtil.remove(this.bgmc)},a.prototype.removeEvent=function(){this._targetTxt&&(this._targetTxt.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.MOUSE_MOVEHandler,this,!1),this._targetTxt.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.ROLL_OUT,this,!1),this._targetTxt.touchEnabled=!1,this.showState=!1),this.bgmc&&this.bgmc.parent&&t.DisplayUtil.remove(this.bgmc)},a.prototype.MOUSE_MOVEHandler=function(e){if(!this.tipStr)return void this.removeEvent();(null==this.bgmc||void 0==this.bgmc)&&(this.bgmc=new t.Tips),null==this.bgmc.parent&&t.DisplayUtil.addChild(t.Context.getInstance().screen.tipsLayout,this.bgmc),this.setTipTxt(this.tipStr);var a;a=null!=this._targetTxt.parent&&void 0!=this._targetTxt.parent?this._targetTxt.parent.localToGlobal(this._targetTxt.x,this._targetTxt.y):t.Context.getInstance().screen.tipsLayout.globalToLocal(e.stageX,e.stageY),this.bgmc.x=a.x,this.bgmc.y=a.y-40,this.bgmc.x+this.bgmc.width>t.Screen.WIN_WIDTH&&(this.bgmc.x=t.Screen.WIN_WIDTH-this.bgmc.width)},a.prototype.setTipTxt=function(t){this.bgmc&&this.bgmc.txt.text!=t&&(this.bgmc.txt.text=t,this.bgmc.bg.width=this.bgmc.txt.width+8)},a}(t.View);t.TextFieldTips=e,__reflect(e.prototype,"wpt.TextFieldTips")}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="wpt.skins.TipSkin",e.touchChildren=!1,e.$touchEnabled=!1,e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.updateDisplayList=function(e,a){t.prototype.updateDisplayList.call(this,e,a),this.bg.width=this.txt.width+20},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.Component);t.Tips=e,__reflect(e.prototype,"wpt.Tips",["eui.UIComponent","egret.DisplayObject"])}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.skinName="resource/play/skins/common/TipsToolSkin.exml",t}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.touchChildren=!1},Object.defineProperty(a.prototype,"text",{set:function(t){this.tips.txt.text=t},enumerable:!0,configurable:!0}),a.prototype.setTarget=function(t){this._target=t,this.width=t.width,this.height=t.height,this._target.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this,!1),this._target.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOut,this,!1)},a.prototype.onOver=function(e){var a;a=null!=this._target.parent&&void 0!=this._target.parent?this._target.parent.localToGlobal(this._target.x,this._target.y):t.Context.getInstance().screen.tipsLayout.globalToLocal(e.stageX,e.stageY),this.x=a.x,this.y=a.y,null==this.parent&&t.DisplayUtil.addChild(t.Context.getInstance().screen.tipsLayout,this)},a.prototype.onOut=function(e){t.DisplayUtil.remove(this)},a.prototype.clear=function(){this._target&&(this._target.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this,!1),this._target.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOut,this,!1),this._target=null)},a}(eui.Component);e.TipsTool=a,__reflect(a.prototype,"wpt.play.lobby.TipsTool")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(t){function e(e,a){return void 0===a&&(a=null),t.call(this,e,a)||this}return __extends(e,t),e}(t.BaseEvent);e.PlayEvent=a,__reflect(a.prototype,"wpt.play.PlayEvent")}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(t){function e(e,a){return t.call(this,e,a)||this}return __extends(e,t),e}(t.BaseEvent);a.BASE=egret.getQualifiedClassName(a)+":",a.OPEN_MASTER=a.BASE+"OPEN_MASTER",a.TO_UPDATE_HEAD=a.BASE+"TO_UPDATE_HEAD",a.OPEN_SETTING=a.BASE+"OPEN_SETTING",a.SHOW_DETAIL=a.BASE+"SHOW_DETAIL",e.HeadEvent=a,__reflect(a.prototype,"wpt.commonhead.HeadEvent")}(e=t.commonhead||(t.commonhead={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.isLaterV=!0,t.skinName="wpt.HeadDetailSkin",t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){2==t.CoreData.channelType&&(this.img_bg.height-=this.g_logout.height,this.g_logout.visible=!1),this.initLabel(),this.initBtn()},i.prototype.initLabel=function(){},i.prototype.initBtn=function(){this.l_account.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAccount,this),this.l_inventory.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openInventory,this),this.l_setting.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSetting,this),this.l_redeem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openRedeem,this),this.l_logout.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openLogOut,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOut,this)},i.prototype.onOver=function(){t.log.debug("onOver"),this.isLaterV=!0},i.prototype.onOut=function(){t.log.debug("onOut"),this.isLaterV=!1,egret.clearTimeout(this.isLaterNum),this.isLaterNum=egret.setTimeout(function(){!this.isLaterV&&this.visible&&(this.isLaterV=!1,this.visible=!1)},this,2e3)},i.prototype.openAccount=function(){t.play.js.openPerson()},i.prototype.openInventory=function(){t.play.js.openInventory()},i.prototype.openSetting=function(){t.dispatch(new e.HeadEvent(e.HeadEvent.OPEN_SETTING,null))},i.prototype.openRedeem=function(){t.play.js.openRedeem()},i.prototype.openLogOut=function(){t.play.js.openLogOut()},i}(t.View);e.HeadDetailView=a,__reflect(a.prototype,"wpt.commonhead.HeadDetailView")}(e=t.commonhead||(t.commonhead={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.offset_X=0,t.skinName="wpt.HeadViewSkin",t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.initLabel(),this.initBtn()},i.prototype.initLabel=function(){this.offset_X=this.g_offset.width+this.g_offset.x,this.l_gold.text="",this.l_masterPoint.text="",this.l_name.text="",this.icon.source="";var t=new egret.Shape;this.addChild(t),t.x=this.headbg.x+3,t.y=this.headbg.y,t.graphics.beginFill(16711680,1),t.graphics.drawRect(0,0,40,40),t.graphics.endFill(),this.icon.mask=t},i.prototype.initBtn=function(){this.storeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.storeBtnClick,this),this.g_gold.addEventListener(egret.TouchEvent.TOUCH_TAP,this.storeBtnClick,this),this.icon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openInventory,this),this.l_name.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAccount,this),this.img_detail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openDetail,this),this.g_masterPoint.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openMasterClick,this)},i.prototype.storeBtnClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.play.js.askOpenStore()},i.prototype.openMasterClick=function(){t.log.debug("openMasterClick"),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new e.HeadEvent(e.HeadEvent.OPEN_MASTER,null))},i.prototype.updateGroupX=function(){this.g_offset.x=this.offset_X-this.g_offset.width},i.prototype.openAccount=function(){t.play.js.openPerson()},i.prototype.openInventory=function(){t.play.js.openInventory()},i.prototype.openDetail=function(){t.dispatch(new e.HeadEvent(e.HeadEvent.SHOW_DETAIL,null))},i}(t.View);e.HeadView=a,__reflect(a.prototype,"wpt.commonhead.HeadView")}(e=t.commonhead||(t.commonhead={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.isFirstRoleName=!1,t}return __extends(i,a),i.prototype.init=function(){eui.Binding.bindHandler(this.commonData.currentUser,["coins"],this.watchGoldHandler,this),eui.Binding.bindHandler(this.commonData.currentUser.master,["masterScore"],this.watchMasterScoreHandler,this),eui.Binding.bindHandler(t.CoreData,["rolename"],this.watchRoleHandler,this),t.addCommand(e.HeadEvent.TO_UPDATE_HEAD,this.update_head,this),t.addCommand(e.HeadEvent.SHOW_DETAIL,this.SHOW_DETAIL,this)},i.prototype.watchRoleHandler=function(e){this.view.l_name.text=e,this.view.updateGroupX(),this.isFirstRoleName||t.isempty(t.CoreData.rolename)||(this.isFirstRoleName=!0,this.update_head())},i.prototype.update_head=function(){this.getHandImgAry([t.CoreData.rolename])},i.prototype.getHandImgAry=function(e){t.play.HeaderImageManager.instance.getHeaderImagesByRoleName(e,[],this.userHeaderGetted.bind(this),[[],e])},i.prototype.userHeaderGetted=function(e,a,i){for(var n=0;n<e.length;n++)if(e[n].roleName==t.CoreData.rolename){(t.isempty(e[n].image)||!RES.hasRes(e[n].image+"_json"))&&(e[n].image=t.play.table.TableData.getRandomRoleIDSkin(e[n].roleName)),this.view.icon.source=e[n].image+"_json."+t.play.table.Player.ROLE_FRONT;break}},i.prototype.watchGoldHandler=function(e){this.view.l_gold.text=t.DealMoneyUtil.getStrByComma(e),this.commonData.UpdateMaxCGZUnlockValue()},i.prototype.watchMasterScoreHandler=function(e){t.log.debug("大师分更新数据"+t.int64To32(e)),this.view.l_masterPoint.text=t.DealMoneyUtil.getStrByComma(t.int64To32(e))},i.prototype.SHOW_DETAIL=function(){t.isempty(this.detailView.parent)&&(t.DisplayUtil.addChild(t.Context.getInstance().screen.uiLayout,this.detailView),this.detailView.y=this.view.y+this.view.height,this.detailView.x=this.view.img_detail.x+this.view.img_detail.width-this.detailView.width+15),this.detailView.visible=!0},Object.defineProperty(i.prototype,"detailView",{get:function(){return null==this._detailView&&(this._detailView=new e.HeadDetailView),this._detailView},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"view",{get:function(){return this.moduleStarter.headView},enumerable:!0,configurable:!0}),i}(t.Meditor);e.HeadMeditor=a,__reflect(a.prototype,"wpt.commonhead.HeadMeditor")}(e=t.commonhead||(t.commonhead={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.isConnect=!1,t}return __extends(n,i),n.prototype.initOnce=function(){this.addBottomView(new a.ConnMatchListServerView)},n.prototype.initListeners=function(){t.addCommand(t.SocketEvent.CONNECT_SUCCESS(t.net.MatchListService),this.CONNECT_SUCCESS,this),t.addCommand(t.SocketEvent.CONNECT_ERROR(t.net.MatchListService),this.CONNECT_ERROR,this),t.addCommand(t.SocketEvent.DISCONNECT(t.net.MatchListService),this.DISCONNECT,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_CONFIRMCONNECT),this.OGID_MATCHLIST_CONFIRMCONNECT,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_TEXASPOKER_MATCHLIST_LOGIN),this.OGID_USER_LOGIN,this),t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.ReqUserMaxCGZUnlockValue),this.ReqUserMaxCGZUnlockValue,this),t.addCommand(t.WPTEvent.REFRESH_GET_FLASHVARS,this.getFlashVars,this),t.addCommand(e.table.TableEvent.EXITGAME,this.exitGame,this),t.addCommand(t.HttpMessageType.GET_FLASH_VAR(),this.getFlashVarsResult,this)},n.prototype.removeListeners=function(){},n.prototype.clear=function(){i.prototype.clear.call(this),t.log.debug("ConnectMatchListServerController.clear")},n.prototype.start=function(){i.prototype.start.call(this),this.getUserInfo()},n.prototype.getUserInfo=function(){t.CoreData.isDebugData()?this.connect():this.requestFlashVar()},n.prototype.getFlashVars=function(){t.MessageDialog.hide(),this.getUserInfo(),e.js.getIsFirstLogin()},n.prototype.exitGame=function(){this.isConnect||(t.MessageDialog.hide(),t.MessageDialog.showConfirmNotice(t.getLang("disconnect")).setCallback(this.disConnectCallback.bind(this)))},Object.defineProperty(n.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),n.prototype.requestFlashVar=function(){this.commonData.httpProcessor.req_falsh_var()},n.prototype.getFlashVarsResult=function(a){var i=a.data;return t.log.debug("**********getFlashVarsResult:",i),t.isempty(i)?void t.MessageDialog.showConfirmNotice(t.getLang("error_getFlashvar")):t.isempty(i.Value)?void e.js.openLogin():(e.js.getChannelType(),t.CoreData.setFlashVar(i),void this.connect())},n.prototype.CONNECT_ERROR=function(e){t.log.debug("CONNECT_ERROR"),this.isConnect=!1,t.MessageDialog.hide(),t.MessageDialog.showConfirmNotice(t.getLang("login_failed")).setCallback(this.connectErrorMsgCallback.bind(this))},n.prototype.DISCONNECT=function(e){t.log.debug("ConnectMatchListServerStart DISCONNECT"),this.isConnect=!1,this.commonData.player_location!=t.TableLobbyConst.PLAYER_TABLE&&(t.MessageDialog.hide(),t.MessageDialog.showConfirmNotice(t.getLang("disconnect")).setCallback(this.disConnectCallback.bind(this)))},n.prototype.disConnectCallback=function(){this.commonData.serverModel.checkStopServer(this.connect.bind(this))},n.prototype.connectErrorMsgCallback=function(){this.connect()},n.prototype.CONNECT_SUCCESS=function(e){t.log.debug("Matchlist  CONNECT_SUCCESS"),this.isConnect=!0,t.MessageDialog.showNotice(t.getLang("login")),this.commonData.matchlistService.loginProcessor.Login()},n.prototype.OGID_MATCHLIST_CONFIRMCONNECT=function(e){var a=e.data;t.log.debug("登录列表服务器回调 result:"+a.result),0==a.result?(t.log.debug("准备登录"),this.commonData.matchlistService.loginProcessor.LOGIN()):t.MessageDialog.showConfirmNotice(t.getLang("登录服务器列表失败"))},n.prototype.OGID_USER_LOGIN=function(a){var i=t.SharedObjectUtil.read(t.LobbyData.key_maxCGZUnlockValue);t.log.debug("**********CoreData.isLoginFirst:",t.CoreData.isLoginFirst,"********LobbyData.key_maxCGZUnlockValue:",i),t.CoreData.isLoginFirst?this.setMaxCGUnlockValue(t.CoreData.MAXCGZUnlockValue):t.isempty(i)||this.setMaxCGUnlockValue(i);var n=a.data;switch(n.result){case 0:t.log.debug("玩家登录成功"),t.SoundManager.getInstance().playMusic(t.ResConst.SOUND_BACKGROUND,0),e.js.gameLoadComplete(),this.enterLobby(),this.commonData.jssService.connect(t.CoreData.JSSServerConfig.serverHost),t.dispatch(new e.spin.SpinEvent(e.spin.SpinEvent.GET_SPIN_TIME));break;default:t.MessageDialog.showConfirmNotice(t.getLang("login_failed")).setCallback(this.connect.bind(this))}},n.prototype.setMaxCGUnlockValue=function(e){this.removeGetUserMaxCGUnlockValue(),t.MessageDialog.hide(),this.commonData.lobby.maxCGZUnlockValue=e},n.prototype.connect=function(){t.MessageDialog.showNotice(t.getLang("connect")),t.log.debug("MatchListServeice connect"),this.commonData.matchlistService.connect(t.CoreData.MatchListConfig.serverHost)},n.prototype.enterLobby=function(){this.loadModule(e.ModuleName.LOBBY)},n.prototype.ReqUserMaxCGZUnlockValue=function(){t.MessageDialog.hide()},n.prototype.removeGetUserMaxCGUnlockValue=function(){t.removeCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.ReqUserMaxCGZUnlockValue),this.ReqUserMaxCGZUnlockValue,this)},n}(t.ModuleStarter);a.ConnectMatchListServerStart=i,__reflect(i.prototype,"wpt.play.lobby.ConnectMatchListServerStart")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var a=e.call(this)||this;return a.cnt=3,a.skinName="wpt.play.lobby.ConnMatchListServerSkin",a.bg=new egret.Shape,t.DisplayUtil.addBottom(a,a.bg),a.bg.graphics.beginFill(0,1),a.bg.graphics.drawRect(0,0,t.Screen.WIN_WIDTH,t.Screen.WIN_HEIGHT),a.bg.graphics.endFill(),a}return __extends(a,e),a.prototype.onRemove=function(){},a.prototype.onAdd=function(){},a}(t.View);e.ConnMatchListServerView=a,__reflect(a.prototype,"wpt.play.lobby.ConnMatchListServerView")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){return t.call(this)||this}return __extends(a,t),a.prototype.initOnce=function(){this.addMeditor(new e.DetailspopupMeditor)},a.prototype.initListeners=function(){},a.prototype.clear=function(){t.prototype.clear.call(this)},a}(t.ModuleStarter);e.DetailspopupStarter=a,__reflect(a.prototype,"wpt.play.detailspopup.DetailspopupStarter")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(e,a){return t.call(this,e,a)||this}return __extends(e,t),e}(t.BaseEvent);a.BASE=egret.getQualifiedClassName(a)+":",a.POPUP_CLOSE=a.BASE+"POPUP_CLOSE",e.DetailspopupEvent=a,__reflect(a.prototype,"wpt.play.detailspopup.DetailspopupEvent")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return a.call(this)||this}return __extends(i,a),Object.defineProperty(i.prototype,"view",{get:function(){return null==this._view&&(this._view=new e.DetailPopup),this._view},enumerable:!0,configurable:!0}),i.prototype.init=function(){t.addCommand(t.WPTEvent.OPEN_DETAILS_POPUP,this.opendetailspopupClick,this),t.addCommand(t.WPTEvent.UPDATE_MATCH_DATA,this.UPDATE_MATCH_DATA,this),t.addCommand(t.WPTEvent.GET_MATCHLIST_SENDREWARD,this.GET_MATCHLIST_REVPLAYERS,this),t.addCommand(e.DetailspopupEvent.POPUP_CLOSE,this.POPUP_CLOSE,this)},Object.defineProperty(i.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lobbyData",{get:function(){return this.commonData.lobby},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"normalData",{get:function(){return this.commonData.lobby.normalData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"matchData",{get:function(){return this.commonData.lobby.matchData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tyNormalDataDic",{get:function(){return this.commonData.lobby.tyNormalDataDic},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"myMatchData",{get:function(){return this.commonData.lobby.myMatchData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"signedArray",{get:function(){return this.commonData.lobby.signedArray},set:function(t){this.commonData.lobby.signedArray=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"normalLimitData",{get:function(){return this.commonData.normalLimitData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"curMatchPlayerInfo",{get:function(){return this.lobbyData.curSelectedMatchPlayerInfo},enumerable:!0,configurable:!0}),i.prototype.GET_MATCHLIST_REVPLAYERS=function(t){this.view.homeItem.GET_MATCHLIST_REVPLAYERS(t.data)},i.prototype.POPUP_CLOSE=function(t){this.view.remove()},i.prototype.UPDATE_MATCH_DATA=function(t){null!=this.view.parent&&this.view.updateData(this.commonData)},i.prototype.opendetailspopupClick=function(t){this.view.show(),this.view.updateData(this.commonData)},i.prototype.clear=function(){t.removeCommand(t.WPTEvent.OPEN_DETAILS_POPUP,this.opendetailspopupClick,this)},i}(t.Meditor);e.DetailspopupMeditor=a,__reflect(a.prototype,"wpt.play.detailspopup.DetailspopupMeditor")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.blindlistData=new eui.ArrayCollection,t.skinName="wpt.play.detailspopup.DetailsPopupViewSkin",t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.initBtn(),this.initList()},i.prototype.initBtn=function(){this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.registerBtnClick,this,!1),this.unregisterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.unregisterBtnClick,this,!1)},i.prototype.initList=function(){this.blindsScoll.DIS=2,this.blindsList.itemRenderer=e.DetailsBlindListItem,this.blindsList.dataProvider=this.blindlistData},i.prototype.tabChange=function(){0==this._data.nMatchMode?t.DisplayUtil.remove(this.tab3):1==this._data.nMatchMode&&t.DisplayUtil.addChild(this.viewStack,this.tab3)},i.prototype.hide=function(){this.remove()},i.prototype.updateBlindList=function(){this.chipsTxt.text=t.DealMoneyUtil.getStrByComma(t.int64To32(this._data.nInitChip));var e=this._data.getBlindList();this.blindlistData.source=e,this.blindsList.height!=33*e.length&&(this.blindsList.height=33*e.length,this.blindsScoll.reSize(),this.blindsScoll.resetPos())},i.prototype.updateData=function(e){if(this.commondata=e,this.lobbydata=e.lobby,this._data=this.lobbydata.curSelectedMatchData,this.rewardInfo=this.lobbydata.curSelectedMatchSendReward,this.reentry=this._data.nMatchReentryCount>0,this.bLaterSign=this._data.nMatchMaxSignLaterBlindClass>0,this.rebuy=this._data.bReBuy,this.game_name.text=this._data.szMatchName,this.tabChange(),this.homeItem.setData(this._data),this.tableItem.setData(this.lobbydata),1==this._data.nMatchStatus)this.stateIcon.setStatus(1),this.runningtimeTxt.visible=!1,this.runningTxt.visible=!1;else if(2==this._data.nMatchStatus){if(this.runningtimeTxt.visible=!0,this.runningTxt.visible=!0,this._data.nMatchMaxSignLaterBlindClass>0&&this._data.nMatchMaxSignLaterBlindClass>=this._data.curBlindClass?this.stateIcon.setStatus(4):this.stateIcon.setStatus(2),1==this._data.nMatchMode){this.runningTxt.text=t.getLang("running");var a=this._data.nDualTime>1?t.getLang("running_times",this._data.nDualTime):t.getLang("running_time",this._data.nDualTime);this.runningtimeTxt.text=a}}else 3==this._data.nMatchStatus&&(this.stateIcon.setStatus(3),this.runningtimeTxt.visible=!1,this.runningTxt.visible=!1);var i,n=this._data.matchTypeFunc();0==this._data.curBlindClass&&(this._data.curBlindClass=1),n[1]?(this.buyinTxt.iconSource=t.ResConst.ICON_GOLD,this.buyinTxt.x=106,this.buyinTxt.iconwidth=40,this.buyinTxt.iconheight=40,i=t.DealMoneyUtil.getStrByWptRule(this._data.nSignFee)+"+"+t.DealMoneyUtil.getStrByWptRule(this._data.nCharge)):n[2]?(this.buyinTxt.iconSource=t.ResConst.ICON_TICKEY,this.buyinTxt.x=109,this.buyinTxt.iconwidth=43,this.buyinTxt.iconheight=26,i=t.getLang("Ticket")):(this.buyinTxt.x=106,this.buyinTxt.iconwidth=0,this.buyinTxt.iconheight=0,i=t.getLang("Freeroll")),this.buyinTxt.textcolor=16775300,this.buyinTxt.label=i,this.pricepoolTxt.textcolor=16775300,this.poolReward=this._data.szMatchMinRew;var o=this._data.rewardTotalWnd,r=/^[0-9]*$/,s=""==this.poolReward?0:r.test(this.poolReward)?parseFloat(this._data.szMatchMinRew):0;o>0?(this.pricepoolTxt.iconSource=t.ResConst.ICON_GOLD,this.pricepoolTxt.iconwidth=40,this.pricepoolTxt.iconheight=40,this.poolReward=t.DealMoneyUtil.getStrByWptRule(o)):""==this.poolReward?(this.pricepoolTxt.iconSource="",this.pricepoolTxt.iconwidth=0,this.pricepoolTxt.iconheight=0,this.poolReward="--"):s>0&&(this.pricepoolTxt.iconSource=t.ResConst.ICON_GOLD,this.pricepoolTxt.iconwidth=40,this.pricepoolTxt.iconheight=40,this.poolReward=t.DealMoneyUtil.getStrByWptRule(s)),this.pricepoolTxt.label=this.poolReward;var l;if(l=2==this._data.nMatchStatus?this.updateTableInfo(this.lobbydata.curSelectMatchTableInfo):this._data.nSignPlayer,1==this._data.nMatchMode&&(this.playerNumTxt.text=2==this._data.nMatchStatus?l+"/"+this._data.nSignPlayer:l.toString()),0==this._data.nMatchMode){var h;1==this._data.nMatchStatus&&(h=this._data.nSignPlayer+" / "+this._data.nMaxPlayer),2==this._data.nMatchStatus&&(h=l+" / "+this._data.nMaxPlayer),3==this._data.nMatchStatus&&(h=this._data.nSignPlayer.toString()),this.playerNumTxt.text=h}this.updateBlindList(),this.showRegisterBtn()},i.prototype.showRegisterBtn=function(){if(1==this._data.nMatchStatus?(this.registerBtn.visible=!this._data.isSigned,this.unregisterBtn.visible=this._data.isSigned):2==this._data.nMatchStatus?this._data.nMatchMaxSignLaterBlindClass>0&&this._data.nMatchMaxSignLaterBlindClass>=this._data.curBlindClass?(this._data.signMatchChip>0?(this.registerBtn.visible=!1,this.unregisterBtn.visible=!1):(this.registerBtn.visible=!0,this.unregisterBtn.visible=!1),1==this.commondata.playerStatus?(this.registerBtn.visible=!0,this.unregisterBtn.visible=!1):2==this.commondata.playerStatus&&(this.registerBtn.visible=!1,this.unregisterBtn.visible=!1)):(this.registerBtn.visible=!1,this.unregisterBtn.visible=!1):3==this._data.nMatchStatus?(this.registerBtn.visible=!1,this.unregisterBtn.visible=!1):(this.registerBtn.visible=!1,this.unregisterBtn.visible=!1),1==this.registerBtn.visible){var e=this._data.isAnnounced();this.registerBtn.touchEnabled=!e,t.ColorUtil.setColorState(this.registerBtn,e?t.ColorUtil.DISABLE:t.ColorUtil.DEFAULT)}},i.prototype.updateTableInfo=function(t){if(null==t||t.MatchID!=this.lobbydata.curSelectedMatchID)return 0;for(var e=0,a=0,i=t.TableInfo.length;i>a;a++){var n=t.TableInfo[a];e+=n.PlayerCount}return e},i.prototype.registerBtnClick=function(e){t.dispatch(new t.WPTEvent(t.WPTEvent.SIGNUP_MATCH,this._data))},i.prototype.unregisterBtnClick=function(e){t.dispatch(new t.play.lobby.LobbyEvent(t.play.lobby.LobbyEvent.MATCH_INFO_UNREGISTER,this._data))},i}(t.BasePanel);e.DetailPopup=a,__reflect(a.prototype,"wpt.play.detailspopup.DetailPopup")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},a.prototype.dataChanged=function(){this.bg1&&(this.itemIndex%2==0?(this.bg1.visible=!0,this.bg2.visible=!1):(this.bg1.visible=!1,this.bg2.visible=!0)),this.tf_level&&(this.tf_level.text=this.data.lv),this.tf_blinds&&(this.tf_blinds.text=t.DealMoneyUtil.getStrByComma(t.int64To32(this.data.smallBlind))+" / "+t.DealMoneyUtil.getStrByComma(t.int64To32(this.data.bigBlind))),this.tf_ante&&(this.tf_ante.text=t.DealMoneyUtil.getStrByComma(t.int64To32(this.data.preBlind))),this.tf_mins&&(this.tf_mins.text=this.data.BlindTime)
},a}(eui.ItemRenderer);e.DetailsBlindListItem=a,__reflect(a.prototype,"wpt.play.detailspopup.DetailsBlindListItem")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.ranklistData=new eui.ArrayCollection,t.pricelistData=new eui.ArrayCollection,t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.initList()},i.prototype.setData=function(e){this.data=e,this.currentType=e.nMatchStatus,this.matchType=e.nMatchMode,this.prizepoolTxt.textcolor=16775300,this.poolReward=this.data.szMatchMinRew;var a=this.data.rewardTotalWnd,i=/^[0-9]*$/,n=""==this.poolReward?0:i.test(this.poolReward)?parseFloat(this.data.szMatchMinRew):0;a>0?(this.prizepoolTxt.iconSource=t.ResConst.ICON_GOLD,this.prizepoolTxt.iconwidth=30,this.prizepoolTxt.iconheight=30,this.poolReward=t.DealMoneyUtil.getStrByWptRule(a)):""==this.poolReward?(this.prizepoolTxt.iconSource="",this.prizepoolTxt.iconwidth=0,this.prizepoolTxt.iconheight=0,this.poolReward="--"):n>0&&(this.prizepoolTxt.iconSource=t.ResConst.ICON_GOLD,this.prizepoolTxt.iconwidth=30,this.prizepoolTxt.iconheight=30,this.poolReward=t.DealMoneyUtil.getStrByWptRule(n)),this.prizepoolTxt.label=this.poolReward,this.rewardInfo=t.CommonData.getInstance().lobby.curSelectedMatchSendReward,this.rewardInfo.Reward&&null!=this.rewardInfo.Reward?(this.placepaidTxt.text=this.rewardInfo.Reward.length.toString(),this.updatePriceList()):this.placepaidTxt.text="--",this.homeLeftSelect(),this.updateRankList()},i.prototype.updateRankList=function(){if(3==this.currentType){this.home_rankList.itemRenderer=e.DetailsWinnerListItem;var a=this.getHomeRewardList();this.ranklistData.replaceAll(a),this.home_rankList.dataProvider=this.ranklistData}else{var a=t.CommonData.getInstance().lobby.curSelectedMatchPlayerInfo.PlayerInfo;this.ranklistData.replaceAll(a.concat([])),this.home_rankList.dataProvider=this.ranklistData}this.home_rankList.height!=33*a.length&&(this.home_rankList.height=33*a.length,this.homerankScoll.reSize(),this.homerankScoll.resetPos())},i.prototype.getHomeRewardList=function(){for(var e=[],a=t.CommonData.getInstance().lobby.curSelectedMatchSendReward.Reward,i=t.CommonData.getInstance().lobby.curSelectedMatchPlayerInfo.PlayerInfo,n=0;n<i.length;n++)if(null!=i[n]){var o={};o.Rank=i[n].Rank,o.sCFUserName=i[n].sCFUserName,o.reward=t.getLang("finished"),e.push(o)}for(var r=0;r<e.length;r++)a[r]&&(1!=a[r].Type?e[r].reward=a[r].RewardName+"×"+t.int64To32(a[r].Value):e[r].reward=t.DealMoneyUtil.getStrByComma(t.int64To32(a[r].Value)));return e},i.prototype.GET_MATCHLIST_REVPLAYERS=function(t){t&&this.data&&this.data.szMatchID==t.MatchID&&(void 0==this.ranklistData?(this.ranklistData=new eui.ArrayCollection(t.PlayerInfo),this.home_rankList.dataProvider=this.ranklistData):this.ranklistData.replaceAll(t.PlayerInfo),this.home_rankList.height!=33*t.PlayerInfo.length&&(this.home_rankList.height=33*t.PlayerInfo.length,this.homerankScoll.reSize(),this.homerankScoll.resetPos()))},i.prototype.updatePriceList=function(){var e=t.CommonData.getInstance().lobby.curSelectedMatchSendReward.Reward;this.pricelistData.replaceAll(e.concat([])),this.home_priceList.dataProvider=this.pricelistData,this.home_priceList.height!=33*e.length&&(this.home_priceList.height=33*e.length,this.homepriceScoll.reSize(),this.homepriceScoll.resetPos())},i.prototype.initList=function(){this.homepriceScoll.DIS=2,this.home_priceList.itemRenderer=e.DetailsPayoutListItem,this.homerankScoll.DIS=2,this.home_rankList.itemRenderer=e.DetailsRankListItem},i.prototype.leftTimeToStart=function(e){if(e.szStartTime){var a=t.DateUtils.parseStringToDateByZone(e.szStartTime,t.CoreData.TimeZone);return a=t.CommonData.getInstance().stamp.serverToLocalDate(a),this.leftToCurTime(a)}},i.prototype.leftTimeToRegister=function(e){if(e.szStartTime){var a=t.DateUtils.parseStringToDateByZone(e.szStartTime,t.CoreData.TimeZone);a=t.CommonData.getInstance().stamp.serverToLocalDate(a);var i=new Date;return i.setTime(a.getTime()-60*t.CoreData.Match_Sign_Minute*1e3),this.leftToCurTime(i)}},i.prototype.leftToCurTime=function(e){var a="",i=t.DateUtils.switchTimeZone(t.CommonData.getInstance().stamp.serverTime,t.CoreData.TimeZone),n=e.getTime()-i.getTime();n=Math.max(0,n);var o=n/1e3/60,r=Math.floor(o/1440),s=Math.floor(o%1440/60),l=Math.round(o%60);return r>0&&(a=" "+(10>r?"0":"")+r+"d"),s>0&&(a+=" "+(10>s?"0":"")+s+"h"),a+=" "+(10>l&&l>0?"0":"")+l+"m"},i.prototype.setLaterMin=function(t,e){if(void 0===e&&(e=-1),null==t)return null;var a=t.nMatchMaxSignLaterBlindClass,i=t.curBlindClass;if(e=-1==e?t.nBlindTime:e,a>0&&a>=i){var n=a>i?(a-i)*t.nBlindTime+e:e;return this.signLastMinString=n>1?n+" minutes":n+" minute",this.signLastMinString}return"0 minute"},i.prototype.onRemove=function(){this.home_rankList.dataProvider=null,this.home_priceList.dataProvider=null,this.complete_startedInfoTxt.text="",this.complete_rebuyTxt.text="",this.complete_rebuyInfoTxt_1.text="",this.complete_rebuyInfoTxt_2.text="",this.complete_rebuyInfoTxt_3.text="",this.complete_addonTxt.text="",this.complete_addonInfoTxt.text="",this.running_lateInfoTxt.text="",this.running_largestTxt.text="",this.running_averageTxt.text="",this.running_smallestTxt.text="",this.running_currentLevelTxt.text="",this.running_nextLevelTxt.text="",this.running_rebuyTxt.text="",this.running_rebuyInfoTxt_1.text="",this.running_rebuyInfoTxt_2.text="",this.running_rebuyInfoTxt_3.text="",this.running_addonTxt.text="",this.running_addonInfoTxt.text="",this.register_rebuyTxt.text="",this.register_rebuyInfoTxt_1.text="",this.register_rebuyInfoTxt_2.text="",this.register_rebuyInfoTxt_3.text="",this.register_addonTxt.text="",this.register_addonInfoTxt.text="",this.mtt_register_startsTxt.text="",this.mtt_register_inTxt.text="",this.sng_register_infoTxt.text="",this.prizepoolTxt.label="",this.placepaidTxt.text="",this.ranklistData.removeAll(),this.pricelistData.removeAll()},i.prototype.homeLeftSelect=function(){if(this.home_rewards.visible=!1,this.home_chips.visible=!1,0==this.data.curBlindClass&&(this.data.curBlindClass=1),2==this.currentType){if(null==t.CommonData.getInstance().lobby.curSelectedMatchChangeInfo||null==t.CommonData.getInstance().lobby.curSelectedMatchCoinInfo)return void console.debug("退出比赛返回大厅直接打开比赛详情弹窗时如果数据为空");this.currentMatch=t.CommonData.getInstance().lobby.curSelectedMatchChangeInfo,this.macthCoin=t.CommonData.getInstance().lobby.curSelectedMatchCoinInfo}this.reentry=this.data.nMatchReentryCount>0,this.bLaterSign=this.data.isLaterRegister(),this.rebuy=this.data.bReBuy;var e,a,i,n=this.data.getBlindInfoByLevel(this.data.curBlindClass);i=n.preBlind;var o=t.DealMoneyUtil.getStrByWptRule(i);if(this.data.curBlindClass==this.data.getBlindList()[this.data.getBlindList().length-1].lv?(a=n,e=o):(a=this.data.getBlindInfoByLevel(this.data.curBlindClass+1),e=t.DealMoneyUtil.getStrByWptRule(a.preBlind)),1==this.matchType&&1==this.currentType)this.currentState="register",this.home_chips.visible=!0,this.data.isAnnounced()?(this.mtt_register_startsTxt.textFlow=(new egret.HtmlTextParser).parser("<font color='#9EA5B1'>"+t.getLang("details_announced_starts")+"</font><font color = '#FFF884'> "+this.leftTimeToStart(this.data)+"</font>"),this.mtt_register_inTxt.textFlow=(new egret.HtmlTextParser).parser("<font color='#9EA5B1'>"+t.getLang("details_announced_register")+"</font><font color = '#FFF884'> "+this.leftTimeToRegister(this.data)+"</font>")):(this.mtt_register_startsTxt.textFlow=(new egret.HtmlTextParser).parser("<font color='#9EA5B1'>"+t.getLang("details_starts")+"</font><font color = '#FFF884'> "+t.DateUtils.formatDateStr(this.data.szStartTime,"MM.dd hh:mm tt")+"</font>"),this.mtt_register_inTxt.textFlow=(new egret.HtmlTextParser).parser("<font color='#9EA5B1'>"+t.getLang("details_in")+"</font><font color = '#FFF884'> "+this.leftTimeToStart(this.data)+"</font>")),this.reentry?(this.register_rebuyTxt.text=t.getLang("details_reentry"),this.register_rebuyInfoTxt_1.text=t.getLang("Re_entry Info_txt",(this.data.nMatchMaxSignLaterBlindClass*this.data.nBlindTime).toString())):this.rebuy&&(this.register_rebuyTxt.text=t.getLang("details_rebuy"),this.register_rebuyInfoTxt_1.text=t.getLang("details_rebuy_info_1",this.data.bReBuyValue,this.data.bReBuyChip),this.register_rebuyInfoTxt_2.text=t.getLang("details_rebuy_info_2",this.data.bReBuyBlindClass*this.data.nBlindTime),this.register_rebuyInfoTxt_3.text=t.getLang("details_rebuy_info_3",this.data.bReBuyLimitValue),this.register_addonTxt.text=t.getLang("details_addon"),this.register_addonInfoTxt.text=t.getLang("details_rebuy_info_1",this.data.bFinalAddOnValue,this.data.bFinalAddOnChip));else if(1==this.matchType&&2==this.currentType){if(this.home_chips.visible=!0,this.currentState="running",null==this.macthCoin)return;var r;if(2==this.data.nMatchStatus&&this.data.nMatchMaxSignLaterBlindClass>0&&this.data.nMatchMaxSignLaterBlindClass>=this.data.curBlindClass&&(r=t.getLang("Ends in ")+this.setLaterMin(this.data,t.CommonData.getInstance().lobby.curSelectedMatchChangeInfo.BlindTime),this.running_lateInfoTxt.textFlow=(new egret.HtmlTextParser).parser("<font color='#9EA5B1'>"+t.getLang("Late register:")+"</font><font color = '#FFF884'> "+r+"</font>")),null==this.macthCoin)return;this.running_largestTxt.text=t.DealMoneyUtil.getStrByWptRule(t.int64To32(this.macthCoin.MaxCoin)),this.running_averageTxt.text=t.DealMoneyUtil.getStrByWptRule(t.int64To32(this.macthCoin.AvgCoin)),this.running_smallestTxt.text=t.DealMoneyUtil.getStrByWptRule(t.int64To32(this.macthCoin.MinCoin));var s=t.DealMoneyUtil.getStrByWptRule(n.smallBlind)+"/"+t.DealMoneyUtil.getStrByWptRule(n.bigBlind),l=t.DealMoneyUtil.getStrByWptRule(a.smallBlind)+"/"+t.DealMoneyUtil.getStrByWptRule(a.bigBlind);this.running_currentLevelTxt.textFlow=(new egret.HtmlTextParser).parser("<font color='#9EA5B1'>"+t.getLang("details_currentLevel",this.data.curBlindClass)+"</font><font color = '#FFF884'> "+(0==i?s:s+t.getLang("details_ante",o))+"</font>");var h=this.currentMatch.BlindTime>1?t.getLang("details_nextLeveltimes",this.currentMatch.BlindTime):t.getLang("details_nextLeveltime",this.currentMatch.BlindTime),c=0==a.preBlind?l:l+t.getLang("details_ante",e);this.running_nextLevelTxt.textFlow=(new egret.HtmlTextParser).parser("<font color='#9EA5B1'>"+h+"</font><font color = '#FFF884'> "+c+"</font>"),this.reentry?(this.running_rebuyTxt.text=t.getLang("details_reentry"),this.running_rebuyInfoTxt_1.text=t.getLang("Re_entry Info_txt",(this.data.nMatchMaxSignLaterBlindClass*this.data.nBlindTime).toString())):this.rebuy&&(this.running_rebuyTxt.text=t.getLang("details_rebuy"),this.running_rebuyInfoTxt_1.text=t.getLang("details_rebuy_info_1",this.data.bReBuyValue,this.data.bReBuyChip),this.running_rebuyInfoTxt_2.text=t.getLang("details_rebuy_info_2",this.data.bReBuyBlindClass*this.data.nBlindTime),this.running_rebuyInfoTxt_3.text=t.getLang("details_rebuy_info_3",this.data.bReBuyLimitValue),this.running_addonTxt.text=t.getLang("details_addon"),this.running_addonInfoTxt.text=t.getLang("details_rebuy_info_1",this.data.bFinalAddOnValue,this.data.bFinalAddOnChip))}else if(1==this.matchType&&3==this.currentType)this.currentState="completed",this.home_rewards.visible=!0,null!=this.data.szStartTime&&(this.complete_startedInfoTxt.text=t.DateUtils.formatDateStr(this.data.szStartTime,"MM.dd hh:mm tt"),this.reentry?(this.complete_rebuyTxt.text=t.getLang("details_reentry"),this.complete_rebuyInfoTxt_1.text=t.getLang("Re_entry Info_txt",(this.data.nMatchMaxSignLaterBlindClass*this.data.nBlindTime).toString())):this.rebuy&&(this.complete_rebuyTxt.text=t.getLang("details_rebuy"),this.complete_rebuyInfoTxt_1.text=t.getLang("details_rebuy_info_1",this.data.bReBuyValue,this.data.bReBuyChip),this.complete_rebuyInfoTxt_2.text=t.getLang("details_rebuy_info_2",this.data.bReBuyBlindClass*this.data.nBlindTime),this.complete_rebuyInfoTxt_3.text=t.getLang("details_rebuy_info_3",this.data.bReBuyLimitValue),this.complete_addonTxt.text=t.getLang("details_addon"),this.complete_addonInfoTxt.text=t.getLang("details_rebuy_info_1",this.data.bFinalAddOnValue,this.data.bFinalAddOnChip)));else if(0==this.matchType&&1==this.currentType)this.currentState="register",this.home_chips.visible=!0,this.sng_register_infoTxt.text=t.getLang("match_play_need",this.data.nMaxPlayer);else if(0==this.matchType&&2==this.currentType){if(this.currentState="running",this.home_chips.visible=!0,null==this.macthCoin)return;this.running_largestTxt.text=t.DealMoneyUtil.getStrByWptRule(t.int64To32(this.macthCoin.MaxCoin)),this.running_averageTxt.text=t.DealMoneyUtil.getStrByWptRule(t.int64To32(this.macthCoin.AvgCoin)),this.running_smallestTxt.text=t.DealMoneyUtil.getStrByWptRule(t.int64To32(this.macthCoin.MinCoin));var s=t.DealMoneyUtil.getStrByWptRule(n.smallBlind)+"/"+t.DealMoneyUtil.getStrByWptRule(n.bigBlind),l=t.DealMoneyUtil.getStrByWptRule(a.smallBlind)+"/"+t.DealMoneyUtil.getStrByWptRule(a.bigBlind);this.running_currentLevelTxt.textFlow=(new egret.HtmlTextParser).parser("<font color='#9EA5B1'>"+t.getLang("details_currentLevel",this.data.curBlindClass)+"</font><font color = '#FFF884'> "+(0==i?s:s+t.getLang("details_ante",o))+"</font>");var h=this.currentMatch.BlindTime>1?t.getLang("details_nextLeveltimes",this.currentMatch.BlindTime):t.getLang("details_nextLeveltime",this.currentMatch.BlindTime),c=0==a.preBlind?l:l+t.getLang("details_ante",e);this.running_nextLevelTxt.textFlow=(new egret.HtmlTextParser).parser("<font color='#9EA5B1'>"+h+"</font><font color = '#FFF884'> "+c+"</font>")}else 0==this.matchType&&3==this.currentType&&(this.currentState="completed",this.home_rewards.visible=!0,null!=this.data.szStartTime&&(this.complete_startedInfoTxt.text=t.DateUtils.formatDateStr(this.data.szStartTime,"MM.dd hh:mm tt")))},i}(t.View);e.DetailsHomeView=a,__reflect(a.prototype,"wpt.play.detailspopup.DetailsHomeView")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.chipsTips=new t.TextFieldTips,this.chipsTips.setTextField(this.tf_chips,9)},a.prototype.dataChanged=function(){this.bg1&&(this.itemIndex%2==0?(this.bg1.visible=!0,this.bg2.visible=!1):(this.bg1.visible=!1,this.bg2.visible=!0)),this.tf_rank&&(this.tf_rank.text=this.data.Rank.toString()),1!=this.data.Type?this.tf_chips&&(this.chipsTips.text=this.data.RewardName+"×"+t.int64To32(this.data.Value)):this.tf_chips&&(this.chipsTips.text=t.DealMoneyUtil.getStrByWptRule(t.int64To32(this.data.Value)))},a}(eui.ItemRenderer);e.DetailsPayoutListItem=a,__reflect(a.prototype,"wpt.play.detailspopup.DetailsPayoutListItem")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.nameTips=new t.TextFieldTips,this.nameTips.setTextField(this.tf_name,9),this.priceTips=new t.TextFieldTips,this.priceTips.setTextField(this.tf_price,9)},a.prototype.dataChanged=function(){this.bg1&&(this.itemIndex%2==0?(this.bg1.visible=!0,this.bg2.visible=!1):(this.bg1.visible=!1,this.bg2.visible=!0)),this.tf_rank&&(0==this.data.Rank?this.tf_rank.text="--":this.tf_rank.text=this.data.Rank.toString()),this.tf_name&&(this.nameTips.text=this.data.sCFUserName),this.tf_price&&(0==this.data.Rank?this.priceTips.text="--":this.priceTips.text=t.DealMoneyUtil.getStrByWptRule(t.int64To32(this.data.Coin)))},a}(eui.ItemRenderer);e.DetailsRankListItem=a,__reflect(a.prototype,"wpt.play.detailspopup.DetailsRankListItem")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(a){function i(){return a.call(this)||this}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.largestTips=new t.TextFieldTips,this.largestTips.setTextField(this.tf_largest,9),this.smallestTips=new t.TextFieldTips,this.smallestTips.setTextField(this.tf_smallest,9),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this,!1)},i.prototype.partAdded=function(t,e){a.prototype.partAdded.call(this,t,e)},i.prototype.clickHandler=function(a){t.dispatch(new t.play.lobby.LobbyEvent(e.lobby.LobbyEvent.SELECT_ONETABLE_PLAYERINFO,this.data))},i.prototype.dataChanged=function(){this.bg1&&(this.itemIndex%2==0?(this.bg1.visible=!0,this.bg2.visible=!1):(this.bg1.visible=!1,this.bg2.visible=!0)),this.tf_table&&(this.tf_table.text=this.data.Talbe.toString()),this.tf_players&&(this.tf_players.text=this.data.PlayerCount),this.tf_largest&&(this.largestTips.text=t.DealMoneyUtil.getStrByWptRule(t.int64To32(this.data.MaxCoin))),this.tf_smallest&&(this.smallestTips.text=t.DealMoneyUtil.getStrByWptRule(t.int64To32(this.data.MinCoin)))},i}(eui.ItemRenderer);a.DetailsTableListItem=i,__reflect(i.prototype,"wpt.play.detailspopup.DetailsTableListItem")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.playerTips=new t.TextFieldTips,this.playerTips.setTextField(this.tf_player,9),this.chipsTips=new t.TextFieldTips,this.chipsTips.setTextField(this.tf_chips,9)},a.prototype.dataChanged=function(){this.bg1&&(this.itemIndex%2==0?(this.bg1.visible=!0,this.bg2.visible=!1):(this.bg1.visible=!1,this.bg2.visible=!0)),this.tf_player&&(this.playerTips.text=this.data.sCFUserName),this.tf_chips&&(0!=t.int64To32(this.data.Coin)?this.chipsTips.text=t.DealMoneyUtil.getStrByWptRule(t.int64To32(this.data.Coin)):this.chipsTips.text=t.getLang("finished"))},a}(eui.ItemRenderer);e.DetailsTablePlayerListItem=a,__reflect(a.prototype,"wpt.play.detailspopup.DetailsTablePlayerListItem")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.tablelistData=new eui.ArrayCollection,t.playerlistData=new eui.ArrayCollection,t.ranklistData=new eui.ArrayCollection,t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.initList(),this.observeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.observeBtnClick,this,!1),t.addCommand(t.play.lobby.LobbyEvent.SELECT_ONETABLE_PLAYERINFO,this.SELECT_ONETABLE_PLAYERINFO,this)},i.prototype.initList=function(){this.tablerankScoll.DIS=2,this.table_rankList.itemRenderer=e.DetailsRankListItem,this.tableScoll.DIS=2,this.table_tableList.itemRenderer=e.DetailsTableListItem,this.playScoll.DIS=2,this.playerList.itemRenderer=e.DetailsTablePlayerListItem,this.table_rankList.dataProvider=this.ranklistData,this.table_tableList.dataProvider=this.tablelistData,this.playerList.dataProvider=this.playerlistData},i.prototype.setData=function(e){this.data=e,this.currentType=e.curSelectedMatchData.nMatchStatus,this.matchType=e.curSelectedMatchData.nMatchMode,1==this.currentType?(this.setUIState("registering"),this.register_tf_info.text=t.getLang("match_is_registering")):2==this.currentType?(this.setUIState("running"),this.getTableList()):3==this.currentType&&(this.setUIState("completed"),this.completed_tf_info.text=t.getLang("match_is_completed"))},i.prototype.getTableList=function(){null==this.tablerankScoll.viewport&&(this.tablerankScoll.viewport=this.rankScollGroup),null==this.tableScoll.viewport&&(this.tableScoll.viewport=this.tableScollGroup);var e=this.data.curSelectedMatchPlayerInfo.PlayerInfo;this.ranklistData.replaceAll(e.concat([])),this.table_rankList.height!=33*e.length&&(this.table_rankList.height=33*e.length,this.tablerankScoll.reSize(),this.tablerankScoll.resetPos());var a=this.data.curSelectMatchTableInfo.TableInfo;this.tablelistData.replaceAll(a.concat([])),this.table_tableList.height!=33*a.length&&(this.table_tableList.height=33*a.length,this.tableScoll.reSize(),this.tableScoll.resetPos()),t.dispatch(new t.play.lobby.LobbyEvent(t.play.lobby.LobbyEvent.SELECT_ONETABLE_PLAYERINFO,a[0]))},i.prototype.SELECT_ONETABLE_PLAYERINFO=function(e){var a=e.data;a&&(t.CommonData.getInstance().lobby.curSelectMatchTablePlayerInfo=a,this.playerlistData.source=a.PlayerInfo)},i.prototype.observeBtnClick=function(a){null!=t.CommonData.getInstance().lobby.curSelectedMatchID&&null!=t.CommonData.getInstance().lobby.curSelectMatchTablePlayerInfo&&(t.dispatch(new t.WPTEvent(t.WPTEvent.WATCH_MATCH,[t.CommonData.getInstance().lobby.curSelectedMatchID,t.CommonData.getInstance().lobby.curSelectMatchTablePlayerInfo.Talbe])),t.dispatch(new e.DetailspopupEvent(e.DetailspopupEvent.POPUP_CLOSE,null)))},i.prototype.onAdd=function(){},i.prototype.onRemove=function(){this.ranklistData.removeAll(),this.tablelistData.removeAll(),this.playerlistData.removeAll()},i}(t.View);e.DetailsTableView=a,__reflect(a.prototype,"wpt.play.detailspopup.DetailsTableView")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.nameTips=new t.TextFieldTips,this.nameTips.setTextField(this.tf_name,9),this.priceTips=new t.TextFieldTips,this.priceTips.setTextField(this.tf_price,9)},a.prototype.dataChanged=function(){this.bg1&&(this.itemIndex%2==0?(this.bg1.visible=!0,this.bg2.visible=!1):(this.bg1.visible=!1,this.bg2.visible=!0)),this.tf_rank&&(this.tf_rank.text=this.data.Rank.toString()),this.tf_name&&(this.nameTips.text=this.data.sCFUserName),this.tf_price&&(this.priceTips.text=this.data.reward)},a}(eui.ItemRenderer);e.DetailsWinnerListItem=a,__reflect(a.prototype,"wpt.play.detailspopup.DetailsWinnerListItem")}(a=e.detailspopup||(e.detailspopup={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(e,a){return t.call(this,e,a)||this}return __extends(e,t),e}(t.BaseEvent);a.BASE=egret.getQualifiedClassName(a)+":",a.INVENTORY_CHOOSE＿ITEM=a.BASE+"INVENTORY_CHOOSE＿ITEM",e.InventoryEvent=a,__reflect(a.prototype,"wpt.play.inventory.InventoryEvent")}(a=e.inventory||(e.inventory={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t}();e.INVENTORY_CHARM="INVENTORY_CHARM",e.INVENTORY_AVATAR="INVENTORY_AVATAR",t.InventoryConst=e,__reflect(e.prototype,"wpt.play.inventory.InventoryConst")}(e=t.inventory||(t.inventory={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){var e=t.call(this)||this;return e.skinName="play.inventory.InventorySkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){},e}(t.BasePanel);e.InventoryPanel=a,__reflect(a.prototype,"wpt.play.inventory.InventoryPanel")}(a=e.inventory||(e.inventory={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),Object.defineProperty(a.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),a.prototype.init=function(){},a}(t.Meditor);e.InventoryMeditor=a,__reflect(a.prototype,"wpt.play.inventory.InventoryMeditor")}(a=e.inventory||(e.inventory={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(t){function a(){var e=t.call(this)||this;return e.skinName="play.inventory.Inventory_Player",e}return __extends(a,t),a.prototype.setIcon=function(t){this.icon.source=t+"_json."+e.table.Player.ROLE_FRONT},a.prototype.setCharm=function(t){this.charm.source="luck_"+t+"_png"},a}(t.View);i.TYPE_AVATAR="TYPE_AVATAR",i.TYPE_EMOJI="TYPE_EMOJI",i.TYPE_CHARM="TYPE_CHARM",a.Inventory_Player=i,__reflect(i.prototype,"wpt.play.inventory.Inventory_Player")}(a=e.inventory||(e.inventory={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){var e=t.call(this)||this;return e.skinName="play.inventory.Inventory_Tab_TicketSkin",e}return __extends(a,t),a.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},a.prototype.init=function(){this.initList()},a.prototype.initList=function(){this.listData=new eui.ArrayCollection,this.list.itemRenderer=e.InventoryListItemRender,this.updateListData()},a.prototype.updateListData=function(){for(var t=[],a=0;20>a;a++)19==a?t.push({type:e.InventoryConst.INVENTORY_AVATAR,list:[1001,1002]}):t.push({type:e.InventoryConst.INVENTORY_AVATAR,list:[4002,4003,4023,4014]});this.listData.replaceAll(t),this.list.dataProvider=this.listData,this.list.height=167*this.listData.length,this.scroll.SCROLL_DIS=167},a}(t.View);e.Inventory_Tab_Avatar=a,__reflect(a.prototype,"wpt.play.inventory.Inventory_Tab_Avatar")}(a=e.inventory||(e.inventory={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){var e=t.call(this)||this;return e.skinName="play.inventory.Inventory_Tab_TicketSkin",e}return __extends(a,t),a.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},a.prototype.init=function(){this.initList()},a.prototype.initList=function(){this.listData=new eui.ArrayCollection,this.list.itemRenderer=e.InventoryListItemRender,this.updateListData()},a.prototype.updateListData=function(){for(var t=[],a=0;20>a;a++)19==a?t.push({type:e.InventoryConst.INVENTORY_CHARM,list:[41010,41011]}):t.push({type:e.InventoryConst.INVENTORY_CHARM,list:[41001,41002,41003,41004]});this.listData.replaceAll(t),this.list.dataProvider=this.listData,this.list.height=167*this.listData.length,this.scroll.SCROLL_DIS=167},a}(t.View);e.Inventory_Tab_Charm=a,__reflect(a.prototype,"wpt.play.inventory.Inventory_Tab_Charm")}(a=e.inventory||(e.inventory={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){var e=t.call(this)||this;return e.skinName="play.inventory.Inventory_Tab_TicketSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){},e}(t.View);e.Inventory_Tab_Emoji=a,__reflect(a.prototype,"wpt.play.inventory.Inventory_Tab_Emoji")}(a=e.inventory||(e.inventory={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){var e=t.call(this)||this;return e.skinName="play.inventory.Inventory_Tab_TicketSkin",e}return __extends(a,t),a.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},a.prototype.init=function(){this.initList()},a.prototype.initList=function(){this.listData=new eui.ArrayCollection,this.list.itemRenderer=e.InventoryTicketListItemRender,this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listChangeHandler,this),this.updateListData()},a.prototype.listChangeHandler=function(t){},a.prototype.updateListData=function(){var t=[1,2,3,4,5,6,7,8,8,8,9];this.listData.replaceAll(t),this.list.dataProvider=this.listData,this.list.height=65*this.listData.length,this.scroll.SCROLL_DIS=65},a}(t.View);e.Inventory_Tab_Ticket=a,__reflect(a.prototype,"wpt.play.inventory.Inventory_Tab_Ticket")}(a=e.inventory||(e.inventory={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.avatar_suffix="_json."+e.table.Player.ROLE_FRONT,t.charm_prefix="luck_",t.skinName="play.inventory.InventoryListItemRenderSkin",t}return __extends(n,i),n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this)},n.prototype.dataChanged=function(){t.log.debug("-----------------:"+this.data);var e=this.data.type,i="icon",n="charm";e==a.InventoryConst.INVENTORY_CHARM&&(i="charm",n="icon");for(var o=this.data.list,r=0;!t.isempty(this[i+r]);){if(r<o.length){this["group"+r].visible=!0;var s=this[i+r],l=this[n+r];t.isempty(s)||(e==a.InventoryConst.INVENTORY_CHARM?s.source=this.charm_prefix+this.data+"_png":s.source=this.data+this.avatar_suffix,s.visible=!0,s.name=r.toString(),s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)),t.isempty(l)||(l.visible=!1),this["select"+r].visible=!1}else this["group"+r].visible=!1;r++}},n.prototype.onClick=function(e){var i=e.currentTarget,n=i.name,o=this.data[n];t.dispatch(new a.InventoryEvent(a.InventoryEvent.INVENTORY_CHOOSE＿ITEM,o))},n}(t.ItemRenderView);a.InventoryListItemRender=i,__reflect(i.prototype,"wpt.play.inventory.InventoryListItemRender")}(a=e.inventory||(e.inventory={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.skinName="play.inventory.InventoryTicketListItemRenderSkin",t}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},a.prototype.dataChanged=function(){t.log.debug("-----------------:"+this.data)},a}(t.ItemRenderView);e.InventoryTicketListItemRender=a,__reflect(a.prototype,"wpt.play.inventory.InventoryTicketListItemRender")}(a=e.inventory||(e.inventory={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.masterlistData=new eui.ArrayCollection,t.tf_XP="",t.tf_Annual_xp="",t.tf_Monthly_xp="",t.skinName="resource/play/skins/master/MasterSkin.exml",t}return __extends(n,i),n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.isBgMask=!0,this.initBtn(),this.initPanel(),t.dispatch(new t.WPTEvent(t.WPTEvent.JSS_UPDATE)),t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.ACK|t.OGJSSProtocol.OGID_MASTER_INFO),this.OGID_MASTER_INFO,this),t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.NTF_MASTER_CHANGE),this.OGID_MASTER_CHANGE,this),this.baseGroup_xp.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.masterXPMsOverHandler,this),this.baseGroup_xp.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.masterXPMsOutHandler,this),this.baseGroup_Annual_xp.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.masterXPMsOverHandler,this),this.baseGroup_Annual_xp.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.masterXPMsOutHandler,this),this.baseGroup_Monthly_xp.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.masterXPMsOverHandler,this),this.baseGroup_Monthly_xp.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.masterXPMsOutHandler,this)},n.prototype.masterXPMsOverHandler=function(t){t.currentTarget==this.baseGroup_xp?this.xp_txt.visible=!0:t.currentTarget==this.baseGroup_Annual_xp?this.annual_xp_txt.visible=!0:t.currentTarget==this.baseGroup_Monthly_xp&&(this.monthXP_txt.visible=!0)},n.prototype.masterXPMsOutHandler=function(t){this.annual_xp_txt.visible=!1,this.xp_txt.visible=!1,this.monthXP_txt.visible=!1},n.prototype.initBtn=function(){this.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this,!1),this.btn_what.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMoreFaqs,this,!1),this.btn_what.textFlow=new Array({text:t.getLang("master_popup_howdoes"),style:{href:"event:click",underline:!0}}),this.rewardStoreBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openRewardStore,this),this.rewardStoreBtn.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRewardStoreOver,this),this.rewardStoreBtn.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRewardStoreOut,this)
},n.prototype.openRewardStore=function(){e.js.askOpenStore(e.js.SHOW_STORE_TAB_REWARDPOINTS)},n.prototype.onRewardStoreOver=function(){this.g_master_tip.visible=!0},n.prototype.onRewardStoreOut=function(){this.g_master_tip.visible=!1},n.prototype.OGID_MASTER_INFO=function(t){this.update()},n.prototype.OGID_MASTER_CHANGE=function(t){this.update()},n.prototype.initPanel=function(){this.tf_TitleIntroduction1.text=t.getLang("master_reward"),this.tf_TitleIntroduction1.height=this.tf_TitleIntroduction1.textHeight+10,this.baseGroup_list.y=this.tf_TitleIntroduction1.y+this.tf_TitleIntroduction1.height,this.initList();var e=t.CommonData.getInstance().masterConfigs[t.CommonData.getInstance().masterConfigs.length-1],a=t.CommonData.getInstance().getConfigByMasterLevel(t.CommonData.getInstance().getMasterMaxLevel());this.tf_TitleIntroduction2.text=t.getLang("master_reward1",a.nLev,e.nGetMttRate,e.nTaskExpMonth,e.nNoFinishTaskNumYear,a.nLev,e.nMinExpScore,a.nLev),this.tf_TitleIntroduction2.height=this.tf_TitleIntroduction2.textHeight+10,this.tf_TitleIntroduction2.y=this.baseGroup_list.y+this.baseGroup_list.height+25},n.prototype.initList=function(){this.master_list.itemRenderer=a.MasterListItem,this.master_list.dataProvider=this.masterlistData;var e=t.CommonData.getInstance().getConfigArrayList();this.masterlistData.replaceAll(e),this.master_list.dataProvider=this.masterlistData,this.master_list.width=558,this.master_list.height=43*e.length,this.master_list.y=this.baseGroup_list.y+47,this.master_scale_bg.height=this.master_list.height+12,this.baseGroup_list.height=this.master_list.height+47},n.prototype.onMoreFaqs=function(t){this.baseGroup_howdoes.visible=!0,this.btn_back.visible=!0,this.baseGroup_levelpro.visible=!1},n.prototype.onBack=function(t){this.baseGroup_howdoes.visible=!1,this.baseGroup_levelpro.visible=!0,this.btn_back.visible=!1},n.prototype.update=function(){(t.CommonData.getInstance().currentUser.master.currentTitle>0||t.CommonData.getInstance().currentUser.master.currentLevel>100)&&t.CommonData.getInstance().masterConfigs.length>0?this.showTitle():this.showLevel();var e=t.CommonData.getInstance().currentUser.master.masterScore;1e3>e?this.tf_masterPoint.size=80:1e4>e&&e>=1e3?this.tf_masterPoint.size=53:1e5>e&&e>=1e4?this.tf_masterPoint.size=45:1e6>e&&e>=1e5?this.tf_masterPoint.size=37:e>=1e6&&(this.tf_masterPoint.size=30),this.tf_masterPoint.text=t.DealMoneyUtil.getStrByComma(t.int64To32(t.CommonData.getInstance().currentUser.master.masterScore)),this.updateMultiple(this.mpIndexTxt);var a=t.CommonData.getInstance().getMasterMaxLevel();if(t.CommonData.getInstance().currentUser.master.currentLevel>=a||t.CommonData.getInstance().currentUser.master.currentTitle>0||t.CommonData.getInstance().currentUser.master.currentLevel>100)this.level_1.setDescByLevel(a-1),this.level_2.setDescByLevel(a),this.level_3.setDescByLevel(101);else if(t.CommonData.getInstance().currentUser.master.currentLevel<=2)this.level_1.setDescByLevel(1),this.level_2.setDescByLevel(2),this.level_3.setDescByLevel(3);else{var i=t.CommonData.getInstance().currentUser.master.currentLevel;this.level_1.setDescByLevel(i-1),this.level_2.setDescByLevel(i),this.level_3.setDescByLevel(i+1)}},n.prototype.showTitle=function(){this.baseGroup_Masterprogress.visible=!1,this.baseGroup_Master.visible=!0;var e=t.CommonData.getInstance().masterConfigs[t.CommonData.getInstance().masterConfigs.length-1],a=(t.CommonData.getInstance().getConfigByMasterLevel(t.CommonData.getInstance().currentUser.master.currentLevel+1),new Date),i=Date.parse(t.DateUtils.convertDateStr(t.readMultiByte(t.CommonData.getInstance().currentUser.master.titleTime)));a.setTime(i);var n=Math.ceil((new Date).getFullYear()-a.getFullYear()),o=e.nNoFinishTaskNumYear-t.CommonData.getInstance().currentUser.master.titleFailedCount;if(this.yearMaster_lv.text=o+"",0==n)this.baseGroup_yearMaster.visible=!0,this.baseGroup_nextyearMaster.visible=!1;else{this.baseGroup_yearMaster.visible=!1,this.baseGroup_nextyearMaster.visible=!0;var r=t.CommonData.getInstance().currentUser.master.currentMissionExperience,s=null==e?r:e.nTaskExpMonth;r=r>s?s:r,this.Monthly_bar.visible=r>0,this.Monthly_bar.width=Math.max(2,Math.min(152,r/s*152)),this.yearMaster_prigress.text=Math.max(0,Math.min(100,Math.floor(r/s*1e3)/10))+"%"}this.monthXP_txt.text=r+" / "+s,this.tf_TitleIntroduction.text=t.getLang("master_title_introduction",e.nGetMttRate.toString())},n.prototype.showLevel=function(){if(this.baseGroup_Master.visible=!1,this.baseGroup_Masterprogress.visible=!0,!(t.CommonData.getInstance().masterConfigs.length<=0)){var e=t.CommonData.getInstance().masterConfigs[t.CommonData.getInstance().masterConfigs.length-1],a=(t.CommonData.getInstance().getConfigByMasterLevel(t.CommonData.getInstance().currentUser.master.currentLevel),t.CommonData.getInstance().getConfigByMasterLevel(t.CommonData.getInstance().currentUser.master.currentLevel+1));this.tf_lv.text=t.CommonData.getInstance().currentUser.master.currentLevel.toString();var i=t.CommonData.getInstance().currentUser.master.currentLevelExperience,n=null==a?i:a.nMinExpScore,o=0==n?1:i/n;this.XP_bar.visible=i>0||o>0,this.XP_bar.width=Math.max(2,Math.min(303,303*o)),this.tf_xp_prcent.text=Math.max(0,Math.min(100,Math.floor(1e3*o)/10))+"%";var r=t.CommonData.getInstance().currentUser.master.currentTitleExperience,s=null==e?r:e.nMinExpScore,l=0==s?1:r/s;this.Annual_bar.visible=r>0||l>0,this.Annual_bar.width=Math.max(2,Math.min(303,303*l)),this.tf_annualXp_prcent.text=Math.max(0,Math.min(100,Math.floor(1e3*l)/10))+"%",this.xp_txt.text=i+" / "+n,this.annual_xp_txt.text=r+" / "+s,this.tf_TitleIntroduction.text=t.getLang("master_title_introduction",e.nGetMttRate.toString())}},n.prototype.updateMultiple=function(e){var a=t.CommonData.getInstance().currentUser.master.currentTitle>0||t.CommonData.getInstance().currentUser.master.currentLevel>100?t.CommonData.getInstance().currentUser.master.currentTitle:t.CommonData.getInstance().currentUser.master.currentLevel,i=t.CommonData.getInstance().getConfigByMasterLevel(a),n=(new Date,Date.parse(t.DateUtils.convertDateStr(t.readMultiByte(t.CommonData.getInstance().currentUser.master.forceRateEndTime,t.CoreData.Encode)))),o=Math.ceil((n-(new Date).getTime())/864e5),r=!isNaN(t.CommonData.getInstance().currentUser.master.forceRate)&&o>0&&t.CommonData.getInstance().currentUser.master.forceRate>i.nGetMttRate,s=r?t.CommonData.getInstance().currentUser.master.forceRate:i.nGetMttRate;s=0==s?100:s,e.text=t.getLang("master_popup_Mulptier",s)},n.prototype.hide=function(){this.remove()},n}(t.BasePanel);a.MasterView=i,__reflect(i.prototype,"wpt.play.master.MasterView")}(a=e.master||(e.master={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},a.prototype.setDescByLevel=function(e){var a=t.CommonData.getInstance().getConfigByMasterLevel(e);null==a?(this.tf_lv.text=t.getLang("master_progress_level",0),this.tf_upgrade.text=t.getLang("master_progress_XP",0),this.tf_point.text=t.getLang("master_progress_penalty",0),this.tf_percent.text=t.getLang("master_progress_Multiplier",0)):(e>100?this.tf_lv.text=t.getLang("master_popup_title"):this.tf_lv.text=t.getLang("master_progress_level",e),this.tf_upgrade.text=t.getLang("master_progress_XP",t.DealMoneyUtil.getStrByComma(t.int64To32(a.nMinExpScore))),this.tf_point.text=t.getLang("master_progress_penalty",t.DealMoneyUtil.getStrByComma(t.int64To32(a.nSubExpNoUpMonth))),this.tf_percent.text=t.getLang("master_progress_Multiplier",a.nGetMttRate))},a.prototype.onAdd=function(){},a.prototype.onRemove=function(){},a}(t.View);e.MasterLevelProgressView=a,__reflect(a.prototype,"wpt.play.master.MasterLevelProgressView")}(a=e.master||(e.master={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},a.prototype.dataChanged=function(){this.bg1&&(this.itemIndex%2==0?(this.bg1.visible=!0,this.bg2.visible=!1):(this.bg1.visible=!1,this.bg2.visible=!0));var e=this.data.nLev;this.tf_lv&&(e>100?this.tf_lv.text=t.getLang("master_popup_title"):this.tf_lv.text=t.DealMoneyUtil.getStrByComma(t.int64To32(this.data.nLev))),this.tf_upgrade&&(this.tf_upgrade.text=t.DealMoneyUtil.getStrByComma(t.int64To32(this.data.nMinExpScore))),this.tf_point&&(this.tf_point.text=t.DealMoneyUtil.getStrByComma(t.int64To32(this.data.nGetMttRate))+"%"),this.tf_percent&&(this.tf_percent.text=t.DealMoneyUtil.getStrByComma(t.int64To32(this.data.nSubExpNoUpMonth)))},a}(eui.ItemRenderer);e.MasterListItem=a,__reflect(a.prototype,"wpt.play.master.MasterListItem")}(a=e.master||(e.master={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(e,a){return t.call(this,e,a)||this}return __extends(e,t),e}(t.BaseEvent);a.BASE=egret.getQualifiedClassName(a)+":",a.LOAD_OPERATION=a.BASE+"LOAD_OPERATION",a.LOAD_OPERATION_FAILED=a.BASE+"LOAD_OPERATION_FAILED",a.LOAD_OPERATION_COMPLETE=a.BASE+"LOAD_OPERATION_COMPLETE",a.QUICK_START=a.BASE+"QUICK_START",a.CHANGE_SQUARE=a.BASE+"CHANGE_SQUARE",a.CHANGE_ROOM=a.BASE+"CHANGE_ROOM",a.ENTER_ROOM=a.BASE+"ENTER_ROOM",a.LEAVE_ROOM=a.BASE+"LEAVE_ROOM",a.POPUP_CLOSE=a.BASE+"POPUP_CLOSE",a.SIGNOUT_MATCH=a.BASE+"SIGNOUT_MATCH",a.UPDATE_RANK_DATA=a.BASE+"UPDATE_RANK_DATA",a.UPDATE_COINS_DATA=a.BASE+"UPDATE_COINS_DATA",a.ENTER_BLOOY_ROOM=a.BASE+"ENTER_BLOOY_ROOM",a.HIDE_FULL_CHECKBOX=a.BASE+"HIDE_FULL_CHECKBOX",a.MATCH_STATE_CHECKBOX=a.BASE+"MATCH_STATE_CHECKBOX",a.RING_STAKESTAB_SELECTED=a.BASE+"RING_STAKESTAB_SELECTED",a.RING_SEATSTAB_SELECTED=a.BASE+"RING_SEATSTAB_SELECTED",a.NORMAL_TABLE_INFO=a.BASE+"NORMAL_TABLE_INFO",a.SELECT_NORMAL_TABLE=a.BASE+"SELECT_NORMAL_TABLE",a.MATCH_TABLE_INFO=a.BASE+"MATCH_TABLE_INFO",a.LOBBY_LIST_SORT=a.BASE+"LOBBY_LIST_SORT",a.UPDATE_MATCH_DATA=a.BASE+"UPDATE_MATCH_DATA",a.MATCH_POPUP_REGISTER=a.BASE+"MATCH_POPUP_REGISTER",a.MATCH_POPUP_LOBBY=a.BASE+"MATCH_POPUP_LOBBY",a.MATCH_INFO_REGISTER=a.BASE+"MATCH_INFO_REGISTER",a.MATCH_INFO_UNREGISTER=a.BASE+"MATCH_INFO_UNREGISTER",a.MATCH_INFO_LOBBY=a.BASE+"MATCH_INFO_LOBBY",a.DEFAULT_SELECTED_LIST_FIRST=a.BASE+"DEFAULT_SELECTED_LIST_FIRST",a.MATCHDETAIL_LIST_SORT=a.BASE+"MATCHDETAIL_LIST_SORT",a.GO_THERE_JOIN_MATCH=a.BASE+"GO_THERE_JOIN_MATCH",a.LIST_ITEMDATA_CHANGE=a.BASE+"LIST_ITEMDATA_CHANGE",a.SELECT_ONETABLE_PLAYERINFO=a.BASE+"SELECT_ONETABLE_PLAYERINFO",a.DOUBLE_PLAYER_WATCH_MATCH=a.BASE+"DOUBLE_PLAYER_WATCH_MATCH",a.REFRESH_MYMATCH_SIGNED=a.BASE+"REFRESH_MYMATCH_SIGNED",e.LobbyEvent=a,__reflect(a.prototype,"wpt.play.lobby.LobbyEvent")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.start=function(){i.prototype.start.call(this),e.js.checkgame(!1),t.SoundManager.getInstance().playMusic(t.ResConst.SOUND_BACKGROUND),this.commonData.isMatching=!1,t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_COINS_DATA)),this.lobbyMeditor.start(),this.tourModeMeditor.start(),this.checkIsPushStopServer()},n.prototype.checkIsPushStopServer=function(){t.CommonData.getInstance().stopInfo&&1==t.CommonData.getInstance().stopInfo.State&&1==t.CommonData.getInstance().stopInfo.IsPush&&t.MessageDialog.showConfirmNotice(t.CommonData.getInstance().stopInfo.content)},n.prototype.initOnce=function(){this.addBottomView(new a.LobbyView),t.AlignUtil.alginScreenTC(this.view),this.view.y=162,this.view.x-=40,this.lobbyMeditor=new a.LobbyMeditor,this.addMeditor(this.lobbyMeditor),this.tourModeMeditor=new a.TouModeMeditor,this.addMeditor(this.tourModeMeditor)},Object.defineProperty(n.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),n.prototype.initListeners=function(){},n.prototype.clear=function(){i.prototype.clear.call(this)},n}(t.ModuleStarter);a.MatchListStarter=i,__reflect(i.prototype,"wpt.play.lobby.MatchListStarter")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.skinName="play.lobby.MatchListSkin",t}return __extends(n,i),n.prototype.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e)},n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.stateFliterGroup.visible=!1,this.sitgoMatchList.setData(t.CommonData.getInstance().lobby.sitgoBindList)},n.prototype.onAdd=function(){this.matchTab.addEventListener(egret.TouchEvent.TOUCH_TAP,this.matchTabClick,this),this.registeringCK.addEventListener(egret.TouchEvent.CHANGE,this.fliterCKClick,this),this.runningCK.addEventListener(egret.TouchEvent.CHANGE,this.fliterCKClick,this),this.completedCK.addEventListener(egret.TouchEvent.CHANGE,this.fliterCKClick,this),this.myMTTCK.addEventListener(egret.TouchEvent.CHANGE,this.fliterCKClick,this),this.announcedCK.addEventListener(egret.TouchEvent.CHANGE,this.fliterCKClick,this)},n.prototype.onRemove=function(){this.matchTab.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.matchTabClick,this),this.registeringCK.removeEventListener(egret.TouchEvent.CHANGE,this.fliterCKClick,this),this.runningCK.removeEventListener(egret.TouchEvent.CHANGE,this.fliterCKClick,this),this.completedCK.removeEventListener(egret.TouchEvent.CHANGE,this.fliterCKClick,this)},n.prototype.matchTabClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.updateTabViewInfo(),t.dispatch(new a.LobbyEvent(a.LobbyEvent.CHANGE_SQUARE,this.matchTab.selectedIndex))},n.prototype.tabSelecteIndex=function(e){this.matchTab.selectedIndex!=e&&(this.matchTab.selectedIndex=e,this.updateTabViewInfo(),this.matchTab.dispatchEvent(new egret.Event(egret.Event.CHANGE)),this.matchTab.dispatchEvent(new egret.Event(egret.Event.CHANGING)),t.dispatch(new a.LobbyEvent(a.LobbyEvent.CHANGE_SQUARE,e)))},n.prototype.updateTabViewInfo=function(){0==this.matchTab.selectedIndex?(this.stateFliterGroup.visible=!1,e.js.toFB_Q(e.js.STATISTICS_LOBBY_VIEW,e.js.LOBBY_EVENTCATEGORY)):1==this.matchTab.selectedIndex?(this.stateFliterAnnouncedGroup.visible=!1,this.stateFliterOtherGroup.x=0,this.stateFliterGroup.visible=!1,e.js.toFB_Q(e.js.STATISTICS_SITGO_CLICK)):2==this.matchTab.selectedIndex&&(this.stateFliterGroup.visible=!0,this.stateFliterOtherGroup.x=240,this.stateFliterAnnouncedGroup.visible=!0,e.js.toFB_Q(e.js.STATISTICS_TOURNAMENT_CLICK))},n.prototype.defaultFliterCK=function(t,e,a,i){this.registeringCK.selected=t,this.runningCK.selected=e,this.completedCK.selected=a,this.announcedCK.selected=i},n.prototype.fliterCKClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),t.dispatch(new a.LobbyEvent(a.LobbyEvent.MATCH_STATE_CHECKBOX,[this.registeringCK.selected,this.runningCK.selected,this.completedCK.selected,this.myMTTCK.selected,this.announcedCK.selected]))},n.prototype.updateMatchInfo=function(t){1==this.matchTab.selectedIndex||2==this.matchTab.selectedIndex&&this.tourneysMatchList.setData(t)},n}(t.View);a.LobbyView=i,__reflect(i.prototype,"wpt.play.lobby.LobbyView")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t._nSmallBlind=0,t._nBigBlind=0,t._nAutoPartionSmallBlind=0,t._nAutoPartionBigBlind=0,t.autoScrollIndex=0,t.enterTableDestName=null,t.autoScrollCnt=2,t.sortMatchTitleDict={Name:["szMatchName"],Date:["szStartTime","nSignFee","nMatchStatus","szMatchName"],Time:["szStartTime","nSignFee","szMatchName"],"Buy In":["nSignFee","nCharge","nSignTicketNum","szStartTime","szMatchName"],Players:["nSignPlayer","nMaxPlayer","szMatchName"],Status:["nMatchStatus","szMatchName"],Pool:["rewardTotalWnd","szMatchMinRew","szStartTime","szMatchName"]},t}return __extends(n,i),Object.defineProperty(n.prototype,"view",{get:function(){return this.moduleStarter.view},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lobbyController",{get:function(){return this.moduleStarter},enumerable:!0,configurable:!0}),n.prototype.init=function(){this.view.tourneysMatchList.list.dataProvider=this.commonData.lobby.tourBindList,this.curSortField=this.view.tourneysMatchList.titleSortProxy.getSortNameParam("Date"),t.addCommand(a.LobbyEvent.CHANGE_SQUARE,this.CHANGE_SQUARE,this),t.addCommand(a.LobbyEvent.HIDE_FULL_CHECKBOX,this.HIDE_FULL_CHECKBOX,this),t.addCommand(a.LobbyEvent.MATCH_STATE_CHECKBOX,this.MATCH_STATE_CHECKBOX,this),t.addCommand(a.LobbyEvent.RING_STAKESTAB_SELECTED,this.RING_STAKESTAB_SELECTED,this),t.addCommand(a.LobbyEvent.RING_SEATSTAB_SELECTED,this.RING_SEATSTAB_SELECTED,this),t.addCommand(a.LobbyEvent.SELECT_NORMAL_TABLE,this.SELECT_NORMAL_TABLE,this),t.addCommand(t.WPTEvent.SELECT_MATCH_TABLE,this.SELECT_MATCH_TABLE,this),t.addCommand(a.LobbyEvent.LOBBY_LIST_SORT,this.LOBBY_LIST_SORT,this),t.addCommand(a.LobbyEvent.MATCH_INFO_REGISTER,this.MATCH_INFO_REGISTER,this),t.addCommand(a.LobbyEvent.MATCH_INFO_UNREGISTER,this.MATCH_INFO_UNREGISTER,this),t.addCommand(a.LobbyEvent.MATCH_INFO_LOBBY,this.MATCH_INFO_LOBBY,this),t.addCommand(a.LobbyEvent.GO_THERE_JOIN_MATCH,this.GO_THERE_JOIN_MATCH,this),t.addCommand(a.LobbyEvent.DOUBLE_PLAYER_WATCH_MATCH,this.DOUBLE_PLAYER_WATCH_MATCH,this),t.addCommand(t.WPTEvent.MATCHLIST_UPDATEVIEW,this.MATCHLIST_UPDATEVIEW,this),t.addCommand(t.WPTEvent.UPDATE_MATCHLIST_SENDREWARD,this.UPDATE_MATCHLIST_SENDREWARD,this),t.addCommand(t.WPTEvent.READY_START_MATCH,this.READY_START_MATCH,this),t.addCommand(t.WPTEvent.OPEN_REGISTER_POPUP,this.OPEN_REGISTER_POPUP,this),t.addCommand(t.WPTEvent.GET_MATCHLIST_SENDREWARD,this.GET_MATCHLIST_REVPLAYERS,this),t.addCommand(t.WPTEvent.UPDATE_CHANGEINFO,this.UPDATE_CHANGEINFO,this),t.addCommand(a.LobbyEvent.QUICK_START,this.QUICK_START,this),t.addCommand(t.WPTEvent.UPDATE_UNLOCK_VIEW,this.UPDATE_UNLOCK_VIEW,this),t.addCommand(t.WPTEvent.JS_REQ_FUNC,this.JS_REQ_FUNC,this),t.addCommand(t.commonhead.HeadEvent.OPEN_MASTER,this.OPEN_MASTER,this),t.addCommand(t.commonhead.HeadEvent.OPEN_SETTING,this.OPEN_SETTING,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_MATCHLIST_WPTCGZPARTIONCONFIG),this.OGID_MATCHLIST_WPTCGZPARTIONCONFIG,this),t.addCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_WPT_GETUSERCOININFO),this.First_GET_COINS_Handler,this),0==this.commonData.initMatchComplete&&(this.lobbyProcessor.OGID_MATCHLIST_SHOWLABLE_CONFIG(),this.lobbyProcessor.OGID_TEXASPOKER_MATCHLIST_SEARCHMATCH()),this.commonData.lobby.updateSharedObjectData(),this.view.defaultFliterCK(this.lobbyData.isRegistering,this.lobbyData.isRunning,this.lobbyData.isCompleted,this.lobbyData.isAnnounced),eui.Binding.bindProperty(this.commonData.stamp,["time"],this.view.timeTxt,"text"),eui.Binding.bindHandler(t.CommonData.getInstance().lobby,["signedArray"],this.watchsignedArray,this),t.dispatch(new a.LobbyEvent(a.LobbyEvent.CHANGE_SQUARE,t.TableLobbyConst.TAB_NORMAL)),this.commonData.currentUser.coins>0&&this.autoScrollGameList()},n.prototype.start=function(){this.updateView(!0);var t=!1;null==this.promo&&(this.promo=new e.top.PromoManager,t=!0),this.promo.getPromoTime(t)},Object.defineProperty(n.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lobbyData",{get:function(){return this.commonData.lobby},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"normalData",{get:function(){return this.commonData.lobby.normalData},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matchData",{get:function(){return this.commonData.lobby.matchData},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tyNormalDataDic",{get:function(){return this.commonData.lobby.tyNormalDataDic},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"myMatchData",{get:function(){return this.commonData.lobby.myMatchData},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"signedArray",{get:function(){return this.commonData.lobby.signedArray},set:function(t){this.commonData.lobby.signedArray=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"normalLimitData",{get:function(){return this.commonData.normalLimitData},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"curMatchPlayerInfo",{get:function(){return this.lobbyData.curSelectedMatchPlayerInfo},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lobbyProcessor",{get:function(){return this.commonData.matchlistService.matchlistProcessor},enumerable:!0,configurable:!0}),n.prototype.First_GET_COINS_Handler=function(e){t.removeCommand(t.SocketEvent.RECIVED(t.net.MatchListService,t.OGLobbyProtocol.OGID_WPT_GETUSERCOININFO),this.First_GET_COINS_Handler,this),this.autoScrollGameList()},n.prototype.autoScrollGameList=function(){var e=this.commonData.lobby.cgzPartionConfigs,a=(this.commonData.lobby.maxCGZUnlockValue,this.commonData.currentUser.coins/10);if(0>=a||void 0==e)return void t.log.warn("autoScrollGameList ",a,t.isempty(e)?"cgzPartionConfigs=undefined":""+e.length);var i=0;if(a<e[e.length-1].minBuyIn){for(var n=1;n<e.length;n++)a<e[n].minBuyIn&&a>=e[n-1].minBuyIn&&(i=n-1);n==e.length&&a>=e[n-1].minBuyIn&&(i=n-1)}else i=e.length-1;this.autoScrollIndex=Math.max(0,i-3)},n.prototype.watchsignedArray=function(e){t.dispatch(new a.LobbyEvent(a.LobbyEvent.REFRESH_MYMATCH_SIGNED,e))},Object.defineProperty(n.prototype,"masterView",{get:function(){return null==this._view&&(this._view=new e.master.MasterView),this._view},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"settingPanel",{get:function(){return null==this._settingPanel&&(this._settingPanel=new t.SettingPanel),this._settingPanel},enumerable:!0,configurable:!0}),n.prototype.JS_REQ_FUNC=function(t){t.data==e.js.FUNC_LIST_SELECTED_TAB3?this.view.tabSelecteIndex(2):t.data==e.js.FUNC_OPEN_MASTER?this.OPEN_MASTER():t.data==e.js.FUNC_OPEN_SETTING?this.settingPanel.show():t.data==e.js.FUNC_LIST_SELECTED_TAB2?this.view.tabSelecteIndex(1):t.data==e.js.FUNC_LIST_SELECTED_TAB2&&this.view.tabSelecteIndex(1)},n.prototype.OPEN_MASTER=function(){this.masterView.show(),this.masterView.update()},n.prototype.OPEN_SETTING=function(){this.settingPanel.show()},n.prototype.QUICK_START=function(t){this.lobbyProcessor.QUICK_START()},n.prototype.MATCHLIST_UPDATEVIEW=function(t){this.updateView(t.data)},n.prototype.GET_MATCHLIST_REVPLAYERS=function(t){},n.prototype.UPDATE_CHANGEINFO=function(t){this.view.tourneysMatchList.UPDATE_CHANGEINFO(t.data)},n.prototype.UPDATE_UNLOCK_VIEW=function(t){this.updateNormal()},n.prototype.OGID_MATCHLIST_WPTCGZPARTIONCONFIG=function(t){this.view.gameMatchList.setData(this.commonData.lobby.cgzPartionConfigs),this.updateNormal()},n.prototype.UPDATE_MATCHLIST_SENDREWARD=function(t){var e=t.data;this.view.tourneysMatchList.UPDATE_MATCHLIST_SENDREWARD(e),this.updataRegisterPopupData()},n.prototype.DOUBLE_PLAYER_WATCH_MATCH=function(t){},n.prototype.isSignedMatch=function(t){return-1!=this.signedArray.indexOf(t)},n.prototype.getDisplaySimilarTable=function(t){var e;if(e=e||this.showTyTableFilter(t)||this.gameWithoutDirectFilter(t)&&this.gameWithoutFriendFilter(t)&&this.gameWithoutPreCoinFilter(t),!e)return!1;for(var a,i=this.commonData.normalLimitData,n=0;n<i.length;n++)if(a=this.commonData.normalLimitData[n],a.displaySimilarTable&&a.minBlind<=t.nSmallBlind&&a.maxBlind>=t.nBigBlind)return!0;return!1},n.prototype.filterRoomNormalData=function(e){void 0===e&&(e=null),this._nSmallBlind=999999,this._nBigBlind=-1,this._normalLimitDict={},this._similarTableFilterDict={};this.commonData.lobby,this.commonData.lobby.curTableAreas;if(this.commonData.lobby.curTableAreas.length>0&&this.normalLimitData)for(var a=0,i=this.normalLimitData.length;i>a;a++){var n=this.normalLimitData[a];-1!=this.commonData.lobby.curTableAreas.indexOf(n.limitId)&&(this._nSmallBlind=Math.min(n.minBlind,this._nSmallBlind),this._nBigBlind=Math.max(n.maxBlind,this._nBigBlind),this._normalLimitDict[n.limitId]||(this._normalLimitDict[n.limitId]={}),this._normalLimitDict[n.limitId].nSmallBlind=n.minBlind,this._normalLimitDict[n.limitId].nBigBlind=n.maxBlind)}if(this._nAutoPartionSmallBlind=999999,this._nAutoPartionBigBlind=-1,this.lobbyData.cgzPartionConfigs&&this.lobbyData.maxCGZUnlockValue>0)for(var a=0;a<this.lobbyData.cgzPartionConfigs.length;a++)this.lobbyData.maxCGZUnlockValue>=this.lobbyData.cgzPartionConfigs[a].bankRoll&&(this._nAutoPartionSmallBlind=Math.min(this.lobbyData.cgzPartionConfigs[a].smBlind,this._nAutoPartionSmallBlind),this._nAutoPartionBigBlind=Math.max(this.lobbyData.cgzPartionConfigs[a].bigBlind,this._nAutoPartionBigBlind));else this._nAutoPartionSmallBlind=0,this._nAutoPartionBigBlind=0;return t.log.debug("autoPartion:",this._nAutoPartionSmallBlind,this._nAutoPartionBigBlind),this.normalData.filter(this.filterFunc,this)},n.prototype.filterFunc=function(t,e,a){return this.gameCurrentFilter(t)},n.prototype.gameCurrentFilter=function(e){var a=!1,i=!1,n=!0;if(a=a&&this.notSearchTableFilter(e),a=a&&this.gameWithoutPreCoinFilter(e),a=-1!=this.commonData.lobby.curTableAreas.indexOf(6)?a&&this.gameWithDirectFilter(e):-1!=this.commonData.lobby.curTableAreas.indexOf(5)?a||this.gameWithFriendFilter(e)&&!this.gameShowInBxFieldFilter(e):-1!=this.commonData.lobby.curTableAreas.indexOf(11)?a||this.gamePreCoinFilter(e)&&this.gameBlindFilter(e,!0)||this.gameWithFriendFilter(e)&&this.gameShowInBxFieldFilter(e):-1!=this.commonData.lobby.curTableAreas.indexOf(2)||-1!=this.commonData.lobby.curTableAreas.indexOf(3)||-1!=this.commonData.lobby.curTableAreas.indexOf(4)?a||this.showTyTableFilter(e)||this.gameWithoutDirectFilter(e)&&this.gameWithoutFriendFilter(e)&&this.gameBlindFilter(e,!1)&&this.gameWithoutPreCoinFilter(e)&&this.filterDisplaySimilarTable(e):a||this.gameWithoutDirectFilter(e)&&this.gameWithoutFriendFilter(e)&&this.gameBlindFilter(e,!0),this.commonData.lobby.selectedFliterSeats&t.TableLobbyConst.RING_SEAT_ANY||-1!=this.lobbyData.curTableAreas.indexOf(t.TableLobbyConst.gsandbx_area))i=i||this.gamePlayer2Filter(e),i=i||this.gamePlayer6Filter(e),i=i||this.gamePlayer9Filter(e);else{var o=this.commonData.lobby.selectedFliterSeats&t.TableLobbyConst.RING_SEAT_2;o>0&&(i=this.gamePlayer2Filter(e)),o=this.commonData.lobby.selectedFliterSeats&t.TableLobbyConst.RING_SEAT_6,o>0&&(i=i||this.gamePlayer6Filter(e)),o=this.commonData.lobby.selectedFliterSeats&t.TableLobbyConst.RING_SEAT_9,o>0&&(i=i||this.gamePlayer9Filter(e))}return this.lobbyData.isHideEmpty&&(n=n&&this.gameHideEmptyFilter(e)),this.lobbyData.isHideFull&&(n=n&&this.gameHideFullFilter(e)),a&&i&&n&&this.isTyTableShowFilter(e)},n.prototype.gameBlindFilter=function(t,e){if(e)return t.nBigBlind<=this._nBigBlind&&t.nBigBlind>=this._nSmallBlind;for(var a in this._normalLimitDict)if(t.nBigBlind<=this._normalLimitDict[a].nBigBlind&&t.nBigBlind>=this._normalLimitDict[a].nSmallBlind)return!0;return!1},n.prototype.notSearchTableFilter=function(e){return 1==e.isTiYan_CGZ&&e.szMatchID.substr(0,2)!=t.TableLobbyConst.TyPrefix&&(e.isShowTiYan_CGZ=!1),!0},n.prototype.showTyTableFilter=function(t){return 1==t.isTiYan_CGZ},n.prototype.disPlayTyTableFilter=function(t){return 1!=t.isTiYan_CGZ},n.prototype.gameWithDirectFilter=function(t){return 1==t.nCgzShowType_BeWPT},n.prototype.gameShowInBxFieldFilter=function(t){return t.nCGZBeShowInBXField},n.prototype.gameWithFriendFilter=function(t){return 3==t.nMatchMode},n.prototype.gamePreCoinFilter=function(t){return 2==t.nCgzShowType},n.prototype.filterDisplaySimilarTable=function(t){return t.displaySimilarTable&&t.szTempleName&&t.nBigBlind<=this._nAutoPartionBigBlind&&t.nBigBlind>=this._nAutoPartionSmallBlind?this._similarTableFilterDict[t.szTempleName]?!1:(this._similarTableFilterDict[t.szTempleName]=!0,!0):!1},n.prototype.gameWithoutPreCoinFilter=function(t){return 2!=t.nCgzShowType},n.prototype.gameWithoutDirectFilter=function(t){return 0==t.nCgzShowType_BeWPT},n.prototype.gameWithoutFriendFilter=function(t){return 2==t.nMatchMode},n.prototype.gamePlayer2Filter=function(t){return 6!=t.nMaxPlayer&&9!=t.nMaxPlayer},n.prototype.gamePlayer6Filter=function(t){return 6==t.nMaxPlayer},n.prototype.isTyTableShowFilter=function(t){return 1!=t.isTiYan_CGZ||1==t.isTiYan_CGZ&&t.isShowTiYan_CGZ},n.prototype.gamePlayer9Filter=function(t){return 9==t.nMaxPlayer},n.prototype.gameHideEmptyFilter=function(t){return t.nSignPlayer>0||t.displaySimilarTable},n.prototype.gameHideFullFilter=function(t){return t.nSignPlayer<t.nMaxPlayer||t.displaySimilarTable},n.prototype.filterMatchData=function(){this.sortMatchData=this.matchData.filter(this.filterMatchFunc,this)},n.prototype.filterMatchFunc=function(t,e,a){return this.matchCurrentFilter(t)},n.prototype.sortMatchByStartTime=function(t,e,a){if(void 0===a&&(a=null),t.nSpeMatchMode>e.nSpeMatchMode)return 1*this.sortFlag;if(t.nSpeMatchMode==e.nSpeMatchMode){if(t.szStartTime&&e.szStartTime){var i=(new Date(Date.parse(this.strReplaceAll(t.szStartTime,"-","/"))),new Date(Date.parse(this.strReplaceAll(e.szStartTime,"-","/"))),0);return 0==i?t.nMatchMode>e.nMatchMode?1:t.nMatchMode==e.nMatchMode?(8&t.nSignMode)>(8&e.nSignMode)?-1:(8&t.nSignMode)==(8&e.nSignMode)?(16&t.nSignMode)>(16&e.nSignMode)?1:(16&t.nSignMode)==(16&e.nSignMode)?(1&t.nSignMode)+(16&t.nSignMode)>(1&e.nSignMode)+(16&e.nSignMode)?-1:(1&t.nSignMode)+(16&t.nSignMode)==(1&e.nSignMode)+(16&e.nSignMode)?t.nSignFee+t.nCharge>e.nSignFee+e.nCharge?1:t.nSignFee+t.nCharge==e.nSignFee+e.nCharge?t.nSignPlayer>e.nSignPlayer?1:t.nSignPlayer==e.nSignPlayer?0:-1:-1:1:-1:1:-1:i}return t.szStartTime&&!e.szStartTime?-1:!t.szStartTime&&e.szStartTime?1:0}return-1*this.sortFlag},n.prototype.sortMatchBySignFee=function(t,e,a){if(void 0===a&&(a=null),t.nSpeMatchMode>e.nSpeMatchMode)return 1*this.sortFlag;if(t.nSpeMatchMode==e.nSpeMatchMode){if((8&t.nSignMode)>(8&e.nSignMode))return-1;if((8&t.nSignMode)==(8&e.nSignMode)){if((16&t.nSignMode)>(16&e.nSignMode))return 1;if((16&t.nSignMode)==(16&e.nSignMode)){if((1&t.nSignMode)+(16&t.nSignMode)>(1&e.nSignMode)+(16&e.nSignMode))return-1;if((1&t.nSignMode)+(16&t.nSignMode)==(1&e.nSignMode)+(16&e.nSignMode)){if(t.nSignFee+t.nCharge>e.nSignFee+e.nCharge)return 1;if(t.nSignFee+t.nCharge==e.nSignFee+e.nCharge){if(t.nSignPlayer>e.nSignPlayer)return 1;if(t.nSignPlayer==e.nSignPlayer){if(t.szStartTime&&e.szStartTime){var i=(new Date(Date.parse(this.strReplaceAll(t.szStartTime,"-","/"))),new Date(Date.parse(this.strReplaceAll(e.szStartTime,"-","/"))),0);return 0==i?0:i}return t.szStartTime&&!e.szStartTime?-1:!t.szStartTime&&e.szStartTime?1:0}return-1}return-1}return 1}return-1}return 1}return-1*this.sortFlag},n.prototype.strReplaceAll=function(t,e,a){return t.split(e).join(a)},n.prototype.matchCurrentFilter=function(e){var a=!0,i=!1;return-1!=this.lobbyData.curTableAreas.indexOf(t.TableLobbyConst.sitgo_area)?a=this.matchBtnSNGFilter(e):-1!=this.lobbyData.curTableAreas.indexOf(t.TableLobbyConst.tournaments_area)&&(a=this.matchBtnCustomFilter(e)&&!this.matchBtnSNGFilter(e)),this.lobbyData.isAnnounced&&(i=i||this.matchCbAnnouncedFilter(e)),this.lobbyData.isRegistering&&(i=i||this.matchCbSignFilter(e)),this.lobbyData.isRunning&&(i=i||this.matchCbProgressFilter(e)),this.lobbyData.isCompleted&&(i=i||this.matchCbDoneFilter(e)),this.lobbyData.isMytourney&&(i=i&&this.matchCbMyTourneyFilter(e)),a&&i},n.prototype.matchBtnSNGFilter=function(t){return 0==t.nMatchMode},n.prototype.matchBtnChampionFilter=function(t){return 1==t.nMatchMode},n.prototype.matchBtnSpecialFilter=function(t){return t.nTopIndex>0&&t.flag>0},n.prototype.matchBtnCustomFilter=function(t){return!0
},n.prototype.matchCbSignFilter=function(t){return 1==t.nMatchStatus&&!t.isAnnounced()||2==t.nMatchStatus&&t.nMatchMaxSignLaterBlindClass>0&&t.curBlindClass<=t.nMatchMaxSignLaterBlindClass&&t.signMatchChip<=0&&t.nSignPlayer<t.nMaxPlayer&&(t.nMatchReentryCount>0||!t.isSigned)},n.prototype.matchCbAnnouncedFilter=function(t){return t.isAnnounced()},n.prototype.matchCbProgressFilter=function(t){return 2==t.nMatchStatus},n.prototype.matchCbDoneFilter=function(t){return 3==t.nMatchStatus},n.prototype.matchCbMyTourneyFilter=function(t){return this.isSignedMatch(t.szMatchID)},n.prototype.isJoinMatch=function(e){if(!e||0==e.length)return!1;for(var a=0,i=e;a<i.length;a++){var n=i[a];if(t.CoreData.rolename==n.roleName)return!0}return!1},n.prototype.getTicketIdByMatchID=function(t){var e="";return e},n.prototype.MATCH_INFO_LOBBY=function(t){t.data},n.prototype.MATCH_INFO_UNREGISTER=function(t){var e=t.data;e&&this.lobbyProcessor.cancelSigned(e.szMatchID)},n.prototype.MATCH_INFO_REGISTER=function(t){t.data},n.prototype.LOBBY_LIST_SORT=function(t){this.sortDataList(this.lobbyData.curTabSelectedIndex,t.data)},n.prototype.sortDataList=function(e,a){if(null!=a){this.curSortField=a;var i;switch(e){case t.TableLobbyConst.TAB_SITGO:break;case t.TableLobbyConst.TAB_TOURNAMENTS:i=this.lobbyData.tourBindList}if(i&&i.length>0){t.sortOn(i.source,this.sortMatchTitleDict[a[0]],[a[1]]);for(var n=[],o=i.source.length-1;o>=0;o--)this.isSignedMatch(i.source[o].szMatchID)&&(n.push(i.source[o]),i.source.splice(o,1));i.source=n.reverse().concat(i.source)}}},n.prototype.getCoinLimitById=function(t,e){var a=[];if(null==this.normalLimitData||0==this.normalLimitData.length)return a;for(var i=0;i<this.normalLimitData.length;i++)if(this.normalLimitData[i].limitId==e&&(5==e||this.normalLimitData[i].maxBlind>=t&&this.normalLimitData[i].minBlind<=t)){a.push(this.normalLimitData[i].maxCoin),a.push(this.normalLimitData[i].minCoin);break}return a},n.prototype.SELECT_MATCH_TABLE=function(t){var e=t.data;e&&this.updateTagMatchData(e)},n.prototype.updateTagMatchData=function(t){this.view.updateMatchInfo(t)},n.prototype.SELECT_NORMAL_TABLE=function(t){var e=t.data;e&&(this.lobbyData.curSelectedNormalData=e,this.lobbyData.curSelectedNormalID=e.szMatchID,this.lobbyProcessor.sendMessageUserInfo(this.lobbyData.curSelectedNormalID),this.gameListView.updateTagNormalData(e))},Object.defineProperty(n.prototype,"gameListView",{get:function(){return null},enumerable:!0,configurable:!0}),n.prototype.GO_THERE_JOIN_MATCH=function(t){this.lobbyData.curSelectedMatchData&&this.lobbyProcessor.ENTERSIGNEDMATCH(this.lobbyData.curSelectedMatchData.szMatchID)},n.prototype.HIDE_FULL_CHECKBOX=function(t){this.commonData.lobby.isHideEmpty=t.data[0],this.commonData.lobby.isHideFull=t.data[1],this.updateView(!0)},n.prototype.MATCH_STATE_CHECKBOX=function(t){this.commonData.lobby.isRegistering=t.data[0],this.commonData.lobby.isRunning=t.data[1],this.commonData.lobby.isCompleted=t.data[2],this.commonData.lobby.isMytourney=t.data[3],this.commonData.lobby.isAnnounced=t.data[4],this.updateView(!0)},n.prototype.RING_STAKESTAB_SELECTED=function(e){var a;switch(e.data[0]){case"ringtablow":a=t.TableLobbyConst.jy_area;break;case"ringtabmedium":a=t.TableLobbyConst.zj_area;break;case"ringtabhigh":a=t.TableLobbyConst.ds_area}e.data[1]?this.commonData.lobby.curTableArea=this.commonData.lobby.updateTableArea(a,!0):this.commonData.lobby.updateTableArea(a,!1),this.updateView(!0)},n.prototype.RING_SEATSTAB_SELECTED=function(e){var a=this.commonData.lobby.selectedFliterSeats;switch(-1==a&&(a=0),e.data[0]){case"ringtabany":a=e.data[1]?a|t.TableLobbyConst.RING_SEAT_ANY:a&t.TableLobbyConst.RING_SEAT_AND_ANY;break;case"ringtab2":a=e.data[1]?a|t.TableLobbyConst.RING_SEAT_2:a&t.TableLobbyConst.RING_SEAT_AND_2;break;case"ringtab6":a=e.data[1]?a|t.TableLobbyConst.RING_SEAT_6:a&t.TableLobbyConst.RING_SEAT_AND_6;break;case"ringtab9":a=e.data[1]?a|t.TableLobbyConst.RING_SEAT_9:a&t.TableLobbyConst.RING_SEAT_AND_9}"ringtabany"!=e.data[0]&&(a&=t.TableLobbyConst.RING_SEAT_AND_ANY),this.commonData.lobby.selectedFliterSeats!=a&&(this.commonData.lobby.selectedFliterSeats=a,this.updateView(!0))},n.prototype.CHANGE_SQUARE=function(e){if(this.lobbyData.curTabSelectedIndex!=e.data){if(this.commonData.lobby.curTabSelectedIndex=e.data,2!=this.lobbyData.preArea&&3!=this.lobbyData.preArea&&4!=this.lobbyData.preArea){var a=this.lobbyData.curTableAreas.indexOf(this.lobbyData.preArea);-1!=a&&this.lobbyData.curTableAreas.splice(a,1)}switch(e.data){case t.TableLobbyConst.TAB_SITGO:this.commonData.lobby.curRoomID=t.TableLobbyConst.ROOM_MATCH,this.commonData.lobby.curTableArea=t.TableLobbyConst.sitgo_area;break;case t.TableLobbyConst.TAB_TOURNAMENTS:this.commonData.lobby.curRoomID=t.TableLobbyConst.ROOM_MATCH,this.commonData.lobby.curTableArea=t.TableLobbyConst.tournaments_area;break;case t.TableLobbyConst.TAB_NORMAL:this.commonData.lobby.curRoomID=t.TableLobbyConst.ROOM_NORMAL,this.commonData.lobby.curTableArea=t.TableLobbyConst.jy_area}this.updateView(!0)}},n.prototype.updateView=function(e){if(this.commonData.initMatchComplete){this._isSwitchTab=e;var a,i;switch(this.commonData.lobby.curTabSelectedIndex){case t.TableLobbyConst.TAB_SITGO:break;case t.TableLobbyConst.TAB_TOURNAMENTS:this.updateTournamentsView(),a=this.view.tourneysMatchList.list,i=this.lobbyData.tourBindList,this.sortDataList(this.commonData.lobby.curTabSelectedIndex,this.curSortField);break;case t.TableLobbyConst.TAB_NORMAL:this.updateNormal()}e&&(i&&i.length>0?(a.selectedIndex=0,t.dispatch(new t.WPTEvent(t.WPTEvent.SELECT_MATCH_TABLE,i.getItemAt(0)))):this.view.updateMatchInfo(null))}},n.prototype.updateNormal=function(){if(this.lobbyData.autoSimilarNormalData=this.filterRoomNormalData(),this.autoScrollIndex>0){var e=this;setTimeout(function(t){e.view.gameMatchList.resetScroller();for(var a=0;t>a;a++)e.view.gameMatchList.btnRightClick(null)},50,this.autoScrollIndex),t.log.debug("autoScrollIndex:"+this.autoScrollIndex),this.autoScrollCnt--,0==this.autoScrollCnt&&(this.autoScrollIndex=0)}},n.prototype.updateSitgoView=function(){this.autoScrollIndex=0,this.filterMatchData(),this.sortMatchData},n.prototype.updateTournamentsView=function(){this.autoScrollIndex=0,this.filterMatchData(),this.sortMatchData&&(this.lobbyData.tourBindList.replaceAll(this.sortMatchData),0==this.sortMatchData.length&&this.updateTagMatchData(null))},n.prototype.OPEN_TOURNEYLOBBY_BY_MATCHID=function(t){this.lobbyData.curSelectedMatchData},n.prototype.READY_START_MATCH=function(a){function i(){t.Context.getInstance().moudleManager.loadModule(e.ModuleName.TABLE),t.CommonData.getInstance().lobby.normalJoin?t.dispatch(new t.ToTableEvent(t.ToTableEvent.START_NORMAL,a.data)):t.dispatch(new t.ToTableEvent(t.ToTableEvent.START_MATCH,a.data))}this.commonData.isMatching=!0,void 0==this.tableLoad&&(this.tableLoad=new e.table.PreTableLoad),this.tableLoad.loadTableGroups(i.bind(this))},Object.defineProperty(n.prototype,"panel",{get:function(){return null==this._panel&&(this._panel=new a.RegisterPanel),this._panel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SNGpanel",{get:function(){return null==this._SNGpanel&&(this._SNGpanel=new a.SNGRegisterPanel),this._SNGpanel},enumerable:!0,configurable:!0}),n.prototype.OPEN_REGISTER_POPUP=function(e){if(t.log.debug("弹出报名窗口"),this.commonData.lobby.curTabSelectedIndex==t.TableLobbyConst.TAB_SITGO)this.SNGpanel.show(),this.updataRegisterPopupData();else{this.panel.show();var a={};a.matchdata=this.lobbyData,a.userdata=this.commonData.currentUser,this.panel.updateData(a)}},n.prototype.updataRegisterPopupData=function(){this.commonData.lobby.curTabSelectedIndex==t.TableLobbyConst.TAB_SITGO&&this.SNGpanel.parent&&this.lobbyData.tourModeSendRewards&&this.lobbyData.tourModeSendRewards.has(this.lobbyData.curSelectedMatchID)&&this.SNGpanel.updateData(this.lobbyData)},n}(t.Meditor);a.LobbyMeditor=i,__reflect(i.prototype,"wpt.play.lobby.LobbyMeditor")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var e=i.call(this)||this;return e.sngResultMeditor=new t.play.table.SngResultMeditor,e.isReqFalse=!1,e.enterGameID=-1,e}return __extends(n,i),n.prototype.start=function(){this.httpProcessor.req_tourMode_listData()},n.prototype.init=function(){t.addCommand(t.HttpMessageType.TOURMODE_MATCHLIST(),this.ackMatchList,this),t.addCommand(t.HttpMessageType.TOURMODE_WIN(),this.ackWin,this),t.addCommand(t.HttpMessageType.TOURMODE_COIN_UNLOCK(),this.onUnlock,this),t.addCommand(t.play.table.TableEvent.EXITGAME_OK_SWITCH_LOBBY,this.EXITGAME_OK_SWITCH_LOBBY,this),t.addCommand(t.WPTEvent.MATCHLIST_UPDATEVIEW,this.MATCHLIST_UPDATEVIEW,this),t.addCommand(t.WPTEvent.TICKET_GETED,this.onDisplayRefresh,this),t.addCommand(t.WPTEvent.TOUR_DISPLAY_REFRSH,this.onDisplayRefresh,this),t.addCommand(t.WPTEvent.TOUR_OPEN_WAIT_POPUP,this.showTourWait,this),t.addCommand(t.WPTEvent.TOUR_TAGDATA_UPDATA,this.updataTagData,this),t.addCommand(t.WPTEvent.TOUR_TAGDATA_UPDATA_ONE,this.updataTagDataOne,this),t.addCommand(t.WPTEvent.TOUR_BUYIN_MATCH_FAILD,this.onbuyinFaild,this),t.addCommand(t.WPTEvent.TOUR_REGMATCH,this.onRequestMatch,this),t.addCommand(t.WPTEvent.TOUR_END_TO_PLAY,this.onEndToPlay,this),t.addCommand(t.WPTEvent.TOUR_END_TO_BUYIN,this.onEndToBuyin,this),t.addCommand(t.WPTEvent.TOUR_ON_UNLOCK,this.clickUnlock,this),t.addCommand(t.WPTEvent.TOUR_GAME_REWARD_CLOSE,this.tableRewardClose,this),t.addCommand(t.WPTEvent.TOUR_LOGIN_ENTER_GAME,this.onLoginEnter,this),t.BlackBra.init()},n.prototype.clickUnlock=function(t){this.httpProcessor.req_tourUnlock(t.data)},n.prototype.testData=function(){var e={};e.State="1",e.Message="success";for(var a=[],i=[500609,502598,500606,496608,500608],n=["0-500609-170619070318543-451","0-502598-170627044415727-75","0-500606-170608020914596-130","0-496608-170524112118932-186","0-500608-170607064914601-787"],o=0;8>o;o++){var r={};r.id=o+1,r.imageCode=o+1,r.isUnLock=8>o?!0:!1,r.level=5>o?1:2,r.matchId=n[o%5],r.templateId=i[o%5],r.unlockCost=800*o,a.push(r)}e.Value=a,t.dispatch(new t.HttpEvent(t.HttpMessageType.TOURMODE_MATCHLIST(),e))},n.prototype.ackMatchList=function(e){var i=e.data.Message,n=e.data.State.toString(),o=e.data.Value;if("1"==n){for(var r=0;r<o.length;r++){var s=new t.TourModeData;s.id=o[r].id,s.imageCode=o[r].imageCode,s.unLock=o[r].unLock,s.level=o[r].level,s.templateId=o[r].templetId,s.unlockCost=o[r].unlockCost,s.charmCode=o[r].charmCode,s.cityName=o[r].cityName,s.getCharm=o[r].getCharm,s.color=o[r].color,s.isShowConAni=o[r].animationShow,s.tagData=null,this.lobbyData.addTourData(s),t.log.debug("收到tourmode比赛列表,ID,: ",s.id)}if(this.updataTagData(null),this.view.sitgoMatchList.resiteView(this.lobbyData.tourModeDatas.length),this.lobbyData.sitgoBindList.replaceAll(this.lobbyData.tourModeDatas),-1!=this.enterGameID&&(this.setCurSelTourID(this.enterGameID),this.enterGameID=-1),t.CommonData.isExitGameToTourModeGame){switch(t.dispatch(new t.WPTEvent(t.WPTEvent.SELECT_MATCH_TABLE,this.lobbyData.getTourDataByID(this.lobbyData.curSelectTourDataID).tagData)),t.log.debug("---------继续tourmode关卡下一关状态: "+this.lobbyData.curSelectedMatchData.nMatchStatus),this.lobbyData.curSelectedMatchData.nMatchStatus){case-1:case t.TableLobbyConst.MATCH_STATE_REGISTER:this.isSignedMatch(this.lobbyData.curSelectedMatchData.szMatchID)?t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_OPEN_WAIT_POPUP,!0)):1==t.CommonData.isTourModeBuyinOrFree?t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_REGMATCH,[this.lobbyData.curSelectTourDataID,1])):2==t.CommonData.isTourModeBuyinOrFree&&t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_REGMATCH,[this.lobbyData.curSelectTourDataID,16]));case t.TableLobbyConst.MATCH_STATE_RUNNING:t.dispatch(new a.LobbyEvent(a.LobbyEvent.GO_THERE_JOIN_MATCH,this.lobbyData.curSelectedMatchData)),t.dispatch(new t.UIEvent(t.UIEvent.ShowBlackBra,!1));break;default:t.log.debug("---------继续tourmode关卡下一关状态错误: "+this.lobbyData.curSelectedMatchData.nMatchStatus)}t.CommonData.isExitGameToTourModeGame=!1,t.addCommand(t.WPTEvent.TOUR_END_TO_PLAY,this.onEndToPlay,this),t.addCommand(t.WPTEvent.TOUR_END_TO_BUYIN,this.onEndToBuyin,this)}}else t.log.warn("获取tourMode列表失败："+n+","+i)},n.prototype.onUnlock=function(e){function a(){this.showUnlockMovie(this.lobbyData.getTourDataByID(this.lobbyData.curSelectTourDataID)),t.removeCommand(t.WPTEvent.TICKET_GETED,a,this)}var i=(e.data.Message,e.data.State);1==i?(this.httpProcessor.req_tourMode_listData(),t.addCommand(t.WPTEvent.TICKET_GETED,a,this),t.dispatch(new t.WPTEvent(t.WPTEvent.REQ_TICKEY_INFO)),t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_COINS_DATA,null))):t.log.warn("tourMode解锁失败，State,Value: ",i)},n.prototype.updataTagDataOne=function(t){for(var e=t.data,a=0;a<this.lobbyData.tourModeDatas.length;a++)this.lobbyData.tourModeDatas[a].templateId==e.templateId.toString()&&(this.lobbyData.tourModeDatas[a].tagData=e,this.lobbyData.sitgoBindList.refresh())},n.prototype.updataTagData=function(t){for(var e=0;e<this.lobbyData.tourModeDatas.length;e++)this.updataTagDataByTourData(this.lobbyData.tourModeDatas[e]);this.lobbyData.sitgoBindList.refresh()},n.prototype.updataTagDataByTourData=function(e){for(var a=[],i=[],n=0;n<this.lobbyData.matchData.length;n++){var o=this.lobbyData.matchData[n];if(e.templateId==o.templateId.toString()&&3!=o.nMatchStatus){if(this.chickIsMyMatch(o))return e.isRunAndNotmyMatch=!1,e.tagData=o,void t.log.debug("=================tourMode寻找比赛，找到了我已报名且有钱的比赛=====，templeteID: "+e.templateId);2==o.nMatchStatus?a.push(n):i.push(n)}}return i.length>0?(e.isRunAndNotmyMatch=!1,e.tagData=this.lobbyData.matchData[i[0]],void t.log.debug("=================---tourMode寻找比赛，赋值了未进行的比赛=====，templeteID: "+e.templateId)):a.length>0?(e.isRunAndNotmyMatch=!0,e.tagData=this.lobbyData.matchData[a[0]],void t.log.debug("=================-----===tourMode寻找比赛，赋值了进行中且不是我的比赛=====，templeteID: "+e.templateId)):void 0},n.prototype.chickIsMyMatch=function(e){for(var a in this.lobbyData.myMatchData){var i=this.lobbyData.myMatchData[a];if(i.szMatchID==e.szMatchID)return i.signMatchChip>0&&t.log.debug("=================tourMode寻找比赛，找到了我已报名的比赛且有钱，钱数："+i.signMatchChip),2==e.nMatchStatus?i.signMatchChip>0:!0}return!1},n.prototype.onRequestMatch=function(e){this.reqTourData=this.lobbyData.getTourDataByID(e.data[0]),this.reqParam=e.data[1],this.updataTagDataByTourData(this.reqTourData),this.isSignedMatch(this.reqTourData.tagData.szMatchID)?t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_OPEN_WAIT_POPUP,!0)):(t.log.debug("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~请求后端报名：比赛ID："+this.reqTourData.tagData.szMatchID+" selTourID:"+this.lobbyData.curSelectTourDataID+" 实际报名tourID："+this.reqTourData.id),this.reqBuyinMatch(this.reqTourData.tagData.szMatchID,this.reqParam))},n.prototype.reqBuyinMatch=function(e,a){this.reqMatchID=e,t.dispatch(new t.WPTEvent(t.WPTEvent.SELECT_MATCH_TABLE,this.reqTourData.tagData)),t.dispatch(new t.WPTEvent(t.WPTEvent.BUYIN_MATCH,[e,a]))},n.prototype.onbuyinFaild=function(e){this.faildResult=e.data,t.log.debug("--------tourmode报名失败，启动前端匹配系统----------"),this.isReqFalse||(this.isReqFalse=!0,this.reqTimer||(this.reqTimer=new egret.Timer(1e3,60),this.reqTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.reqTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this)),this.reqTimer.start())},n.prototype.onTimerComplete=function(e){t.log.debug("--------tourmode匹配系统停止运行，未找到比赛----------"),this.reqTimer.reset(),t.dispatch(new t.UIEvent(t.UIEvent.ShowBlackBra,!1)),t.MessageDialog.showConfirm(t.getLang("sign_match_error"+this.faildResult))},n.prototype.onTimer=function(e){(1==this.reqTimer.currentCount||this.reqTimer.currentCount%5==0)&&(this.commonData.matchlistService.sendHeartBeat(),t.log.debug("--------tourmode匹配系统心跳发送----------")),this.updataTagDataByTourData(this.reqTourData),this.reqMatchID!=this.reqTourData.tagData.szMatchID?(this.reqBuyinMatch(this.reqTourData.tagData.szMatchID,this.reqParam),t.log.debug("--------tourmode匹配系统发现新的比赛ID----------",this.reqTourData.tagData.szMatchID)):2==this.faildResult&&(this.reqBuyinMatch(this.reqTourData.tagData.szMatchID,this.reqParam),t.log.debug("--------tourmode匹配系统发现错误是2，重新请求原牌桌----------",this.reqTourData.tagData.szMatchID))},n.prototype.onLoginEnter=function(t){var e=t.data;this.setCurSelTourID(e)},n.prototype.setCurSelTourID=function(e){var a=this.lobbyData.getTourDataByTempleteID(e);t.log.debug("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~登录成功后直接进入游戏templeteID: "+e),a?(this.lobbyData.curSelectTourDataID=a.id,this.enterGameID=-1,t.log.debug("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~登录成功后直接进入游戏时并找到tourData,curSelectTourDataID: "+this.lobbyData.curSelectTourDataID)):(t.log.debug("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~登录成功后直接进入游戏时!!!!没有找到tourData！！！！"),this.enterGameID=e)},n.prototype.MATCHLIST_UPDATEVIEW=function(e){this.commonData.initMatchComplete&&this.commonData.lobby.curTabSelectedIndex==t.TableLobbyConst.TAB_SITGO&&(this.tourWaitPanel.isShow&&this.tourWaitPanel.chickUpdataUser(this.lobbyData.curSelectedMatchData)&&t.dispatch(new t.WPTEvent(t.WPTEvent.SELECT_MATCH_TABLE,this.lobbyData.curSelectedMatchData)),this.lobbyData.sitgoBindList.refresh())},n.prototype.onDisplayRefresh=function(t){this.lobbyData.sitgoBindList.refresh()},n.prototype.ackWin=function(a){var i=this,n=a.data.Message,o=a.data.State,r=a.data.Value,s=r?r.charmCode:-1;t.log.debug("收到后端比赛结果，state,value[charmCode]: "+o,r?r.charmCode:"找不到Value");var l=function(){t.removeCommand(t.WPTEvent.TICKET_GETED,l,i);var a=s;t.log.debug("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~收到后端结果后，找到的tourData: curSelectTourDataID： ",i.lobbyData.curSelectTourDataID);var n=i.lobbyData.getTourDataByID(i.lobbyData.curSelectTourDataID);t.log.debug("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~curTourModeData is null? ",n?"false":"true");var o=i.commonData.lobby.tourSngTableRewards;if(o){var r=new t.SngResultAwardVO;r.rank=o.Rank,r.curCityName=n.cityName,r.buyinNum=n.tagData.nSignFee+n.tagData.nCharge,r.isShowConAni=n.isShowConAni,r.curCity=n,r.preCity=i.commonData.lobby.getTourPrevData(),r.nextCity=i.commonData.lobby.getTourNextData(),r.awards=[],a>0&&r.awards.push({type:-1,name:i.commonData.getLuckyNameByID(a),cnt:1,skin:a}),o.eRewardType&&r.awards.push({type:o.eRewardType,name:o.RewardName,cnt:o.nRewardCount}),1==o.Rank?(e.js.toFB_Q(e.js.STATISTICS_TOURMODE_RESULT_VIEW),i.sngResultMeditor.showResultWinPanel(r)):i.sngResultMeditor.showResultFailPanel(r)}};1==o?(t.addCommand(t.WPTEvent.TICKET_GETED,l,this),t.dispatch(new t.WPTEvent(t.WPTEvent.REQ_TICKEY_INFO))):t.log.warn("~~~~~~~~~~~~~~~~~~~~~~~~~~~tourmode post 游戏结束失败,state:"+o+" Message:"+n)},n.prototype.tableRewardClose=function(e){this.exitGameTimer||(this.exitGameTimer=new egret.Timer(1e3),this.exitGameTimer.addEventListener(egret.TimerEvent.TIMER,function(t){},this),this.exitGameTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,function(e){t.dispatch(new t.BaseEvent(t.play.table.TableEvent.EXITGAME,"true"))},this)),1==e.data?(this.exitGameTimer.repeatCount=15,this.exitGameTimer.start()):(this.exitGameTimer.repeatCount=60,this.exitGameTimer.start())},n.prototype.onEndToPlay=function(e){switch(t.removeCommand(t.WPTEvent.TOUR_END_TO_PLAY,this.onEndToPlay,this),t.removeCommand(t.WPTEvent.TOUR_END_TO_BUYIN,this.onEndToBuyin,this),this.exitGameTimer&&this.exitGameTimer.running&&(this.exitGameTimer.stop(),this.exitGameTimer.reset()),t.dispatch(new t.BaseEvent(t.play.table.TableEvent.EXITGAME,"true")),t.dispatch(new t.UIEvent(t.UIEvent.ShowBlackBra,!0)),t.CommonData.isExitGameToTourModeGame=!0,e.data){case"pre":this.lobbyData.curSelectTourDataID=this.lobbyData.getTourPrevData().id;break;case"cur":break;case"next":this.lobbyData.curSelectTourDataID=this.lobbyData.getTourNextData().id}t.CommonData.isTourModeBuyinOrFree=2},n.prototype.onEndToBuyin=function(e){switch(t.removeCommand(t.WPTEvent.TOUR_END_TO_PLAY,this.onEndToPlay,this),t.removeCommand(t.WPTEvent.TOUR_END_TO_BUYIN,this.onEndToBuyin,this),this.exitGameTimer&&this.exitGameTimer.running&&(this.exitGameTimer.stop(),this.exitGameTimer.reset()),t.dispatch(new t.BaseEvent(t.play.table.TableEvent.EXITGAME,"true")),t.dispatch(new t.UIEvent(t.UIEvent.ShowBlackBra,!0)),t.CommonData.isExitGameToTourModeGame=!0,e.data){case"pre":this.lobbyData.curSelectTourDataID=this.lobbyData.getTourPrevData().id;break;case"cur":break;case"next":this.lobbyData.curSelectTourDataID=this.lobbyData.getTourNextData().id}t.CommonData.isTourModeBuyinOrFree=1},n.prototype.EXITGAME_OK_SWITCH_LOBBY=function(t){this.exitGameTimer&&this.exitGameTimer.running&&(this.exitGameTimer.stop(),this.exitGameTimer.reset())},Object.defineProperty(n.prototype,"tourWaitPanel",{get:function(){return this._tourModeWaitPanel||(this._tourModeWaitPanel=new a.TourModeWait),this._tourModeWaitPanel},enumerable:!0,configurable:!0}),n.prototype.showTourWait=function(a){if(1==a.data){if(this.commonData.isMatching)return;t.dispatch(new t.UIEvent(t.UIEvent.ShowBlackBra,!1)),e.js.showLobbyBtn(!0),this.isReqFalse&&(this.isReqFalse=!1,this.reqTimer.stop(),this.reqTimer.reset(),t.log.debug("--------tourmode匹配系统停止运行，成功进入比赛----------")),this.tourWaitPanel.show(),this.tourWaitPanel.setData(this.lobbyData.getTourDataByID(this.lobbyData.curSelectTourDataID)),this.MATCHLIST_UPDATEVIEW(null)}else this.tourWaitPanel.hide()},n.prototype.showUnlockMovie=function(e){this._tourUnlockMovie||(this._tourUnlockMovie=new a.TourModeUnlockPanel),t.DisplayUtil.addChild(t.Context.getInstance().screen.tipsLayout,this._tourUnlockMovie),this._tourUnlockMovie.setdata(e)},Object.defineProperty(n.prototype,"httpProcessor",{get:function(){return this.commonData.httpProcessor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lobbyData",{get:function(){return this.commonData.lobby},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"view",{get:function(){return this.moduleStarter.view},enumerable:!0,configurable:!0}),n.prototype.isSignedMatch=function(t){return-1!=this.lobbyData.signedArray.indexOf(t)},n.prototype.parseImageCode=function(t){var e="";switch(t){case"2532":e="1";break;default:e=t}return e},n}(t.Meditor);a.TouModeMeditor=i,__reflect(i.prototype,"wpt.play.lobby.TouModeMeditor")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.goldSelect=1,t.ticketSelect=1,t.typeArr=[],t.skinName="wpt.play.lobby.RegisterPanelSkin",t}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},a.prototype.init=function(){this.my_gold_txt.iconwidth=40,this.my_gold_txt.iconheight=40,this.my_ticket_txt.iconwidth=43,this.my_ticket_txt.iconheight=26,this.need_gold_txt.iconwidth=40,this.need_gold_txt.iconheight=40,this.need_ticket_txt.iconwidth=43,this.need_ticket_txt.iconheight=26,this.confirm_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.congirmBtnClick,this,!1),this.gold_checkbox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldCheckClick,this,!1),this.ticket_checkbox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ticketCheckClick,this,!1),this.nameTxtTip=new t.TextFieldTips,this.nameTxtTip.setTextField(this.title_game_name,20)},a.prototype.congirmBtnClick=function(e){var a=0;2==this.goldSelect?a=1:2==this.ticketSelect&&(a=16),t.dispatch(new t.WPTEvent(t.WPTEvent.BUYIN_MATCH,[this._data.matchdata.curSelectedMatchID,a])),this.remove()},a.prototype.cancleBtnClick=function(t){this.remove()},a.prototype.updateData=function(e){null!=e&&(this._data=e,this.title_game_name.text=this._data.matchdata.curSelectedMatchData.szMatchName,this.nameTxtTip.setTxt(this._data.matchdata.curSelectedMatchData.szMatchName),this.my_ticket_txt.iconSource="icon_ticket_png",this.need_ticket_txt.iconSource="icon_ticket_png",this.my_gold_txt.label=t.DealMoneyUtil.getStrByWptRule(this._data.userdata.coins),this.my_ticket_name.text=this._data.matchdata.curSelectedMatchData.ticketMatchItemName+":",this.my_ticket_txt.label=this._data.userdata.getTicketNumById(this._data.matchdata.curSelectedMatchData.ticketMatchItemId),this.need_gold_txt.label=t.DealMoneyUtil.getStrByWptRule(this._data.matchdata.curSelectedMatchData.nSignFee+this._data.matchdata.curSelectedMatchData.nCharge),this.need_ticket_txt.label=this._data.matchdata.curSelectedMatchData.ticketMatchItemName,this.typeArr=this._data.matchdata.curSelectedMatchData.matchTypeFunc(),this.showCheckBox(this._data),this.my_ticket_txt.x=this.my_ticket_name.x+this.my_ticket_name.width+5)},a.prototype.goldCheckClick=function(t){this.typeArr[1]&&this.typeArr[2]&&1==this.goldSelect&&(this.gold_checkbox.selected=!0,this.ticket_checkbox.selected=!1,this.goldSelect=2,this.ticketSelect=1)},a.prototype.ticketCheckClick=function(t){this.typeArr[1]&&this.typeArr[2]&&1==this.ticketSelect&&(this.gold_checkbox.selected=!1,this.ticket_checkbox.selected=!0,this.goldSelect=1,this.ticketSelect=2)},a.prototype.showCheckBox=function(t){return this.goldSelect=1,this.ticketSelect=1,this.typeArr[1]&&this.typeArr[2]?(t.userdata.getTicketNumById(t.matchdata.curSelectedMatchData.ticketMatchItemId)>=1?(this.gold_checkbox.selected=!1,this.ticket_checkbox.selected=!0,this.goldSelect=1,this.ticketSelect=2):(this.gold_checkbox.selected=!0,this.ticket_checkbox.selected=!1,this.goldSelect=2,this.ticketSelect=1),this.my_ticket_name.visible=!0,this.my_ticket_txt.visible=!0,this.need_ticket_txt.visible=!0,this.gold_checkbox.visible=!0,this.ticket_checkbox.visible=!0,this.my_gold_txt.visible=!0,this.need_gold_txt.visible=!0,this.my_ticket_name.x=384,this.ticket_checkbox.y=297,void(this.need_ticket_txt.y=291)):this.typeArr[1]?(this.gold_checkbox.selected=!0,this.goldSelect=2,this.gold_checkbox.visible=!0,this.ticket_checkbox.visible=!1,this.my_ticket_txt.visible=!1,this.my_ticket_name.visible=!1,this.need_ticket_txt.visible=!1,this.my_gold_txt.visible=!0,this.need_gold_txt.visible=!0,this.my_ticket_name.x=384,this.ticket_checkbox.y=297,void(this.need_ticket_txt.y=291)):this.typeArr[2]?(this.ticket_checkbox.selected=!0,this.ticketSelect=2,this.ticket_checkbox.visible=!0,this.gold_checkbox.visible=!1,this.my_ticket_name.visible=!0,this.my_ticket_txt.visible=!0,this.need_ticket_txt.visible=!0,this.my_gold_txt.visible=!1,this.need_gold_txt.visible=!1,this.my_ticket_name.x=133,this.ticket_checkbox.y=216,void(this.need_ticket_txt.y=210)):void 0},a}(t.BasePanel);e.RegisterPanel=a,__reflect(a.prototype,"wpt.play.lobby.RegisterPanel")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.skinName="play.lobby.MatchList_SNG_RegisterSkin",t}return __extends(n,i),n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.buyinNum=new t.NumberImg,this.buyinNum.numSkin="number_golden30x62_",this.buyinNum.scaleX=this.buyinNum.scaleY=.7767,this.goldGroup.addChild(this.buyinNum),this.shapebg=new egret.Shape,this.shapebg.graphics.beginFill(0,.3),this.shapebg.graphics.drawRect(0,0,this.baseGroup.width,this.baseGroup.height),this.shapebg.graphics.endFill(),this.unlock_tip.text=t.getLang("tour_reg_unlock_tips"),t.DisplayUtil.addBottom(this.baseGroup,this.shapebg),this.buyinGroup.touchEnabled=!1,this.buyinGroup.touchChildren=!1,this.buyinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyinBtnClick,this,!1),this.buyinGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyinBtnClick,this,!1),this.playnowBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playnowBtnClick,this,!1),this.tour_rules.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rulesClick,this,!1),this.unlockBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUnlock,this),this.unlockBtn.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.unlockBtnMsOverHandler,this),this.unlockBtn.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.unlockBtnMsOutHandler,this),t.addCommand(t.WPTEvent.TICKET_GETED,this.onTicketGet,this),t.addCommand(t.HttpMessageType.TOURMODE_COIN_UNLOCK(),this.onUnlockResult,this),this.tipTool||(this.tipTool=new a.TipsTool)},n.prototype.show=function(){i.prototype.show.call(this),this.tw=egret.Tween.get(this.register_arrow,{loop:!0}),this.tw.to({y:480},300).wait(100).to({y:462},300).wait(100),this.tipTool||(this.tipTool=new a.TipsTool),this.tipTool.setTarget(this.ticketNumGroup)},n.prototype.hide=function(){i.prototype.hide.call(this),egret.Tween.removeTweens(this.register_arrow),this.register_arrow.y=462;for(var t=1;t<this._data.curSelectedMatchSendReward.Reward.length;t++)this["rank_"+t].visible=!1,this["reward_"+t].iconSource="",this["reward_"+t].label="";this.item_ticket.source="",this.ticket_name.text="",this.item_charm.source="",this.charm_name.text="",this.playnowGroup.visible=!1,this.buyinBtn.visible=!1,this.unlockBtn.visible=!1,this.buyinGroup.visible=!1,this.addpic.visible=!1,this.TipGroup.visible=!1,this.tipTool.clear()},n.prototype.buyinBtnClick=function(e){t.dispatch(new t.UIEvent(t.UIEvent.ShowBlackBra,!0)),t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_REGMATCH,[this._data.curSelectTourDataID,1])),this.hide()},n.prototype.playnowBtnClick=function(e){t.dispatch(new t.UIEvent(t.UIEvent.ShowBlackBra,!0)),t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_REGMATCH,[this._data.curSelectTourDataID,16])),this.hide()},n.prototype.rulesClick=function(t){this.TipGroup.visible=!this.TipGroup.visible},n.prototype.onUnlock=function(a){this.tourModeData&&(this.tourModeData.unlockCost>t.CommonData.getInstance().currentUser.coins?e.js.toBuyGold(e.js.BUY_GOLD_FROM_BUYIN,this.tourModeData.unlockCost-t.CommonData.getInstance().currentUser.coins):t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_ON_UNLOCK,this.tourModeData.templateId)))},n.prototype.onUnlockResult=function(t){var e=(t.data.Message,t.data.State);1==e&&(this.tourModeData.unLock||(this.tourModeData.unLock=!0,this.showBtn()))},n.prototype.onTicketGet=function(t){this.showBtn()},n.prototype.updateData=function(t){null!=t&&(this._data=t,this.tourModeData=this._data.getTourDataByID(this._data.curSelectTourDataID),this.showTitle(),this.showBtn(),this.showRewards(),this.showTips())},n.prototype.showTips=function(){this.starting_chips.textFlow=(new egret.HtmlTextParser).parser("<font color='#FFFFFF'>"+t.getLang("tour_tip_chips")+"</font><font color = '#FFF000'> "+t.DealMoneyUtil.getStrByWptRule(t.int64To32(this._data.curSelectedMatchData.nInitChip))+"</font>"),this.startingBlinds.textFlow=(new egret.HtmlTextParser).parser("<font color='#FFFFFF'>"+t.getLang("tour_tip_blinds")+"</font><font color = '#FFF000'> "+t.DealMoneyUtil.getStrByComma(t.int64To32(this._data.curSelectedMatchData.getBlindList()[0].smallBlind))+" / "+t.DealMoneyUtil.getStrByComma(t.int64To32(this._data.curSelectedMatchData.getBlindList()[0].bigBlind))+"</font>"),this.riseTime.textFlow=(new egret.HtmlTextParser).parser("<font color='#FFFFFF'>"+t.getLang("tour_tip_mins")+"</font><font color = '#FFF000'> "+t.DealMoneyUtil.getStrByWptRule(t.int64To32(this._data.curSelectedMatchData.getBlindList()[0].BlindTime))+"</font><font color = '#FFFFFF'>"+t.getLang("tour_mins")+"</font>")},n.prototype.showRewards=function(){var e=this._data.curSelectedMatchSendReward.Reward[0];0==e.Type?(this.item_ticket.source="tour_reg_ticket_png",this.item_ticket.scaleX=1,this.item_ticket.scaleY=1,this.item_ticket.x=434,this.item_ticket.y=165,this.ticket_name.text=e.RewardName):1!=e.Type?this.ticket_name.text=e.RewardName:(this.item_ticket.source="tour_golds_png",this.item_ticket.scaleX=.73,this.item_ticket.scaleY=.73,this.item_ticket.x=411,this.item_ticket.y=114,this.ticket_name.text=t.DealMoneyUtil.getStrByComma(t.int64To32(e.Value))),this.item_charm.visible=!0,this.item_charm.source="luck_"+this.tourModeData.charmCode+"_png",this.item_charm.scaleX=.73,this.item_charm.scaleY=.73,this.charm_name.text="Charm",this.addpic.visible=!0,this.item_ticket.visible=!0;
for(var a=1;6>a;a++)this.rewardItem(this["reward_"+a],a)},n.prototype.rewardItem=function(e,a){this["rank_"+a].visible=!0,e.visible=!0;var i=this._data.curSelectedMatchSendReward.Reward[a];i?0==i.Type?(e.iconSource=t.ResConst.ICON_TICKEY,e.iconwidth=43,e.iconheight=26,e.label=i.RewardName):1!=i.Type?(e.iconSource="",e.label=i.RewardName):(e.iconSource=t.ResConst.ICON_GOLD,e.iconwidth=40,e.iconheight=40,e.label=t.DealMoneyUtil.getStrByComma(t.int64To32(i.Value))):(e.visible=!0,e.iconSource="",e.label="--- ---")},n.prototype.hideTitle=function(){this.gamename_london.visible=!1,this.gamename_beijing.visible=!1,this.gamename_newyork.visible=!1,this.gamename_paris.visible=!1,this.gamename_rio.visible=!1,this.gamename_san.visible=!1,this.gamename_sydney.visible=!1,this.gamename_tokyo.visible=!1,this.gamename_cairo.visible=!1},n.prototype.showTitle=function(){switch(this.hideTitle(),this.tourModeData.imageCode.toString()){case"8":this.gamename_london.visible=!0;break;case"6":this.gamename_beijing.visible=!0;break;case"1":this.gamename_newyork.visible=!0;break;case"7":this.gamename_paris.visible=!0;break;case"3":this.gamename_rio.visible=!0;break;case"2":this.gamename_san.visible=!0;break;case"4":this.gamename_cairo.visible=!0;break;case"5":this.gamename_tokyo.visible=!0}},n.prototype.unlockBtnMsOverHandler=function(t){this.unlockTipsGroup.visible=!0},n.prototype.unlockBtnMsOutHandler=function(t){this.unlockTipsGroup.visible=!1},n.prototype.showBtn=function(){if(this.tourModeData)if(this.tourModeData.unLock)if(this.takeseatTxt.textFlow=[{text:t.getLang("tour_take_you_sit"),style:{textColor:16777215,size:23,strokeColor:15921135,stroke:.5}}],t.CommonData.getInstance().getTicketNumById(this._data.curSelectedMatchData.ticketMatchItemId)>=1){this.playnowGroup.visible=!0,this.buyinBtn.visible=!1,this.buyinGroup.visible=!1,this.unlockBtn.visible=!1;var e=t.CommonData.getInstance().getTicketNumById(this._data.curSelectedMatchData.ticketMatchItemId);this.ticketNunTxt.text=e>99?"...":e.toString(),this.tipTool.text=e>1?t.getLang("tour_ticketNum_TipX",e):t.getLang("tour_ticketNum_Tip1",e)}else this.playnowGroup.visible=!1,this.buyinBtn.visible=!0,this.buyinGroup.visible=!0,this.unlockBtn.visible=!1,this.buyinNum.num=this._data.curSelectedMatchData.nSignFee+this._data.curSelectedMatchData.nCharge;else this.takeseatTxt.textFlow=[{text:t.getLang("tour_unlock_get_entry"),style:{textColor:16777215,size:20,strokeColor:15921135,stroke:.5}}],this.playnowGroup.visible=!1,this.buyinBtn.visible=!1,this.unlockBtn.visible=!0,this.buyinGroup.visible=!0,this.buyinNum.num=this.tourModeData.unlockCost},n}(t.BasePanel);a.SNGRegisterPanel=i,__reflect(i.prototype,"wpt.play.lobby.SNGRegisterPanel")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.skinName="resource/play/skins/matchlist/TourModeUnlockPanelSkin.exml",t}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._bg=new egret.Shape,this._bg.graphics.beginFill(0,.8),this._bg.graphics.drawRect(0,0,t.Screen.WIN_WIDTH,t.Screen.WIN_HEIGHT),this._bg.graphics.endFill(),this._bg.touchEnabled=!0,t.DisplayUtil.addBottom(this,this._bg),this.itemGroup.x=this._bg.width-this.itemGroup.width>>1,this.itemGroup.y=this._bg.height-this.itemGroup.height>>1,this.tourModeItem.touchEnabled=!1,this.tourModeItem.touchChildren=!1,this.tourModeItem.itemIndex=0,this.txt1.text=t.getLang("tour_unlockmovie_txt1"),this.txt2.text=t.getLang("tour_unlockmovie_txt2"),this.txt3.text=t.getLang("tour_unlockmovie_txt3"),this._unlockMovie=new t.DragonBonesPlayer,t.DisplayUtil.addChild(this.movieGroup,this._unlockMovie),this._unlockMovie.setDataSimple("jiesuojiemian_ske","jiesuojiemian_tex","Armature"),this._unlockMovie.playTimes=1,this._unlockMovie.loadData(!1,this.onLightLoaded.bind(this)),this._unlockMovie.addEventListener(t.UIEvent.DragonBonesCOMPLETE,this.onDragonComplete,this),this._unlockMovie.addEventListener(t.UIEvent.DragonBonesFrame,this.onFrameEvent,this)},a.prototype.onLightLoaded=function(t){this._isLoaded=!0,this._isSet&&this.setdata(this._data)},a.prototype.setdata=function(e){var a=this;this._data=e,this._isSet=!0,this._isLoaded&&(this.alpha=1,this._unlockMovie.gotoAndPlay(),t.log.debug("--------------------------------------------------------------------------------------this._unlockMovie.xy",this._unlockMovie.x,this._unlockMovie.y),e.unLock=!0,this.tourModeItem.data=e,this.tourModeItem.dataChanged(),this.tourModeItem.refrashParticleSource(),t.ColorUtil.setColorState(this.tourModeItem,t.ColorUtil.DISABLE),this.txt22.text=this.txt32.text=e.cityName,egret.setTimeout(function(){a.playHideMovie()},this,4500))},a.prototype.onDragonComplete=function(t){},a.prototype.playHideMovie=function(){var t=this;egret.Tween.get(this).to({alpha:0},500).call(function(){t.clear()})},a.prototype.onFrameEvent=function(e){"liang"==e.data&&(t.ColorUtil.setColorState(this.tourModeItem,t.ColorUtil.DEFAULT),this.tourModeItem.showParticle())},a.prototype.clear=function(){this._isSet=!1,this._data=null,this._unlockMovie.stop(),this.tourModeItem.onRemove(),t.DisplayUtil.remove(this)},a}(eui.Panel);e.TourModeUnlockPanel=a,__reflect(a.prototype,"wpt.play.lobby.TourModeUnlockPanel")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t._userAry=[],t.isShow=!1,t.hasSetUser=!1,t.curPlayerNum=0,t.skinName="resource/play/skins/matchlist/TourModeWaitSkin.exml",t}return __extends(n,i),n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.movieTxt1.text=t.getLang("tour_mode_wait_txt1"),this.movieTxt3.text=t.getLang("tour_mode_wait_txt2"),this.movieTxtDian=new eui.Label,this.movieTxtDian.width=40,this.movieTxtDian.size=39,this.movieTxtDian.fontFamily="Microsoft Sans Serif",t.DisplayUtil.addChild(this.movieTextGroup,this.movieTxtDian),this.isBgMask=!0,this.returnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.returnBtnClick,this)},n.prototype.initUserAry=function(){if(0==this._userAry.length)for(var t=0;6>t;t++)this._userAry.push(this["user"+t]),this["user"+t].isMan=!1},Object.defineProperty(n.prototype,"userAry",{get:function(){return 0==this._userAry.length&&this.initUserAry(),this._userAry},enumerable:!0,configurable:!0}),n.prototype.show=function(){i.prototype.show.call(this),this.unregisterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUnregister,this),t.addCommand(t.WPTEvent.GET_MATCHLIST_SENDREWARD,this.GET_MATCHLIST_SENDREWARD,this),this.movieGroup.x=-2395,this.adsNameIMG.source="",this.playerMovie(),this.isShow=!0,this.hasSetUser=!1},n.prototype.hide=function(){i.prototype.hide.call(this),e.js.showLobbyBtn(!1),e.js.checkgame(n.isHideByGame),this.unregisterBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onUnregister,this),t.removeCommand(t.WPTEvent.GET_MATCHLIST_SENDREWARD,this.GET_MATCHLIST_SENDREWARD,this),egret.Tween.removeTweens(this.movieGroup),this.movieTxtDian&&egret.Tween.removeTweens(this.movieTxtDian),egret.Tween.removeTweens(this.movieTxt2),this.clearUserAry(),this.curPlayerNum=0,this.movieTxt2.text="5",this.movieTxt2.alpha=1,this.tagData=null,this.isShow=!1},n.prototype.returnBtnClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.MessageDialog.showConfirmNotice(t.getLang("tour_wait_close_tip")).setCallback(this.hideThis.bind(this))},n.prototype.hideThis=function(){n.isHideByGame=!1,this.hide()},n.prototype.clearUserAry=function(){this.userAry.forEach(function(t,e,i){t.clear(),t.setState(a.TourModeWaitMan.TOUR_WAIT_MAN_STATE_WAIT)},this)},n.prototype.chickUpdataUser=function(t){return this.curPlayerNum==t.nSignPlayer&&this.hasSetUser?!1:(this.curPlayerNum=this.tagData.nSignPlayer,!0)},n.prototype.GET_MATCHLIST_SENDREWARD=function(e){if(this.isShow){this.playerInfo=e.data.PlayerInfo;var a=1,i=[];if(e.data.MatchID==this.tagData.szMatchID){this.clearUserAry();for(var n=0;n<this.playerInfo.length;n++)t.CommonData.getInstance().currentUser.rolename==this.playerInfo[n].RoleName?(this.userAry[0].setName(this.playerInfo[n].RoleName),this.userAry[0].isMan=!0):(this.userAry[a].setName(this.playerInfo[n].RoleName),this.userAry[a].isMan=!0,++a),i.push(this.playerInfo[n].RoleName);this.visMan(),this.movieTxt2.text=(6-this.playerInfo.length).toString(),5==this.playerInfo.length?this.movieTxt3.text=t.getLang("tour_mode_wait_txt3"):this.movieTxt3.text=t.getLang("tour_mode_wait_txt2"),this.playerInfo.length>0&&this.getHandImgAry(i),this.hasSetUser=!0}else t.log.warn("tourmode 返回用户列表的matchID与当前选中比赛不符:消息ID，自己ID  ",e.data.MatchID,this.tagData.szMatchID),t.dispatch(new t.WPTEvent(t.WPTEvent.SELECT_MATCH_TABLE,this.tagData))}},n.prototype.visMan=function(){for(var t=0;t<this.userAry.length;t++)this.userAry[t].isMan?this.userAry[t].setState(a.TourModeWaitMan.TOUR_WAIT_MAN_STATE_PLAYER):(this.userAry[t].setState(a.TourModeWaitMan.TOUR_WAIT_MAN_STATE_WAIT),this.userAry[t].clear())},n.prototype.getHandImgAry=function(t){e.HeaderImageManager.instance.getHeaderImagesByRoleName(t,[],this.userHeaderGetted.bind(this),[[],t])},n.prototype.userHeaderGetted=function(a,i,n){for(var o=0;o<a.length;o++)for(var r=0;r<this.userAry.length;r++)a[o].roleName==this.userAry[r].userNameTxt&&((t.isempty(a[o].image)||!RES.hasRes(a[o].image+"_json"))&&(a[o].image=e.table.TableData.getRandomRoleIDSkin(a[o].roleName)),this.userAry[r].setIcon(a[o].image))},n.prototype.setData=function(t){this.tagData=t.tagData,this.adsNameIMG.source="tour_wait_name"+t.imageCode+"_png"},n.prototype.onUnregister=function(e){t.dispatch(new a.LobbyEvent(a.LobbyEvent.MATCH_INFO_UNREGISTER,this.tagData))},n.prototype.playerMovie=function(){egret.Tween.get(this.movieGroup).to({x:-161},500,egret.Ease.getBackOut(.4)),egret.Tween.get(this.movieTxtDian,{loop:!0}).to({text:"."},1e3).to({text:".."},1e3).to({text:"..."},1e3).wait(1e3),egret.Tween.get(this.movieTxt2,{loop:!0}).to({alpha:.4},800).to({alpha:1},500).wait(1e3)},n}(t.BasePanel);i.isHideByGame=!1,a.TourModeWait=i,__reflect(i.prototype,"wpt.play.lobby.TourModeWait")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(a){function i(){var t=a.call(this)||this;return t.isMan=!1,t.skinName="resource/play/skins/matchlist/TourModeWaitManSkin.exml",t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.nameTxtTip=new t.TextFieldTips,this.nameTxtTip.setTextField(this.userName,9),this.waitEffect=new t.DragonBonesPlayer,t.DisplayUtil.addChild(this.waitGroup,this.waitEffect),this.waitEffect.setDataSimple("dengdai_quan_ske","dengdai_quan_tex","Armature"),this.waitEffect.loadData(!1,this.effectLoadComplete.bind(this))},i.prototype.effectLoadComplete=function(){this.currentState==i.TOUR_WAIT_MAN_STATE_WAIT&&this.waitEffect.gotoAndPlay()},i.prototype.setState=function(t){this.currentState=t,this.waitEffect&&(t==i.TOUR_WAIT_MAN_STATE_WAIT?this.waitEffect.gotoAndPlay():this.waitEffect.stop())},i.prototype.setName=function(t){this.userNameTxt=t,this.userName.text=t,this.nameTxtTip.setTxt(t)},i.prototype.setIcon=function(a){t.isempty(a)||(this.playerImg.source=a+"_json."+e.table.Player.ROLE_FRONT)},i.prototype.clear=function(){this.playerImg.source="",this.userName.text="",this.nameTxtTip&&this.nameTxtTip.setTxt(""),this.isMan=!1},i}(t.BasePanel);i.TOUR_WAIT_MAN_STATE_PLAYER="player",i.TOUR_WAIT_MAN_STATE_WAIT="wait",a.TourModeWaitMan=i,__reflect(i.prototype,"wpt.play.lobby.TourModeWaitMan")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.bgImg=[],t.picID=0,t.checkboxArr=[],t}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.configUI()},a.prototype.configUI=function(){if(!(t.CoreData.AD_num<1)){for(var e=0;e<t.CoreData.AD_num;e++)this.bgImg[e]=new eui.Image("resource/ad/AD_"+e+".png"),e>0&&(this.bgImg[e].x=1713),this.checkboxArr[e]=new t.WebCheckBox,this.checkboxArr[e].skinName="wpt.skin.ADCheckBox",this.checkboxArr[e].name=e,this.checkboxArr[e].y=260,this.checkboxArr[e].x=(this.width-this.checkboxArr[e].width*t.CoreData.AD_num-20*(t.CoreData.AD_num-1))/2+48*e,this.addChild(this.bgImg[e]),this.addChild(this.checkboxArr[e]),this.checkboxArr[e].selected=!1,this.checkboxArr[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkboxClick,this,!1);var a=new egret.Shape;this.addChild(a),a.graphics.beginFill(16711680,1),a.graphics.drawRect(0,0,1713,300),a.graphics.endFill(),this.mask=a,this.checkboxArr[0].selected=!0,t.Context.getInstance().gameManager.registerTimer(6e3,this.startLoop.bind(this),this)}},a.prototype.checkboxClick=function(e){t.Context.getInstance().gameManager.unRegisterTimer(this.startLoop,this),this.tw=egret.Tween.get(this.bgImg[this.picID],{loop:!1}),this.tw.to({x:-1713},500).call(this.callBack,this,[this.bgImg[this.picID]]);for(var a=0;a<t.CoreData.AD_num;a++)a==e.target.name?(this.checkboxArr[a].selected=!0,this.tw=egret.Tween.get(this.bgImg[a],{loop:!1}),this.tw.to({x:0},500),a+1==t.CoreData.AD_num?this.bgImg[0].x=1713:this.bgImg[a+1].x=1713,this.picID=a):this.checkboxArr[a].selected=!1,t.Context.getInstance().gameManager.registerTimer(1e4,this.startLoop.bind(this),this)},a.prototype.callBack=function(t){t.x=1713},a.prototype.startLoop=function(){if(this.tw=egret.Tween.get(this.bgImg[this.picID],{loop:!1}),this.tw.to({x:-1713},500).call(this.callBack,this,[this.bgImg[this.picID]]),this.picID++,this.picID>t.CoreData.AD_num-1){this.picID=0;for(var e=t.CoreData.AD_num-2;e>=0;e--)this.bgImg[e].x=1713;if(-1==e){this.tw=egret.Tween.get(this.bgImg[this.picID],{loop:!1}),this.tw.to({x:0},500);for(var a=0;a<t.CoreData.AD_num;a++)a==this.picID?this.checkboxArr[a].selected=!0:this.checkboxArr[a].selected=!1}}else{this.tw=egret.Tween.get(this.bgImg[this.picID],{loop:!1}),this.tw.to({x:0},500);for(var a=0;a<t.CoreData.AD_num;a++)a==this.picID?this.checkboxArr[a].selected=!0:this.checkboxArr[a].selected=!1}},a.prototype.onAdd=function(){},a.prototype.onRemove=function(){t.Context.getInstance().gameManager.unRegisterTimer(this.startLoop,this)},a}(t.View);e.MatchList_AD=a,__reflect(a.prototype,"wpt.play.lobby.MatchList_AD")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){var e=t.call(this)||this;return e.hasCreated=!1,e}return __extends(e,t),e.prototype.partAdded=function(t,e){},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.hasCreated=!0,this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnLeftClick,this,!1),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnRightClick,this,!1),this.hscroller.setBtnLeft(this.btnLeft),this.hscroller.setBtnRight(this.btnRight),this.btnLeft.visible=!1,this.tempProider&&(this.tourList.dataProvider=this.tempProider,this.tempProider=null)},e.prototype.resetScroller=function(){this.hscroller.resetPos()},e.prototype.btnLeftClick=function(t){this.hscroller.onUpBind(null),this.btnLeftOrRightVis()},e.prototype.btnRightClick=function(t){this.hscroller.onDownBind(null),this.btnLeftOrRightVis()},e.prototype.btnLeftOrRightVis=function(){this.btnLeft.visible=this.hscroller.btnLeft.visible,this.btnRight.visible=this.hscroller.btnRight.visible},e.prototype.setData=function(t){this.hasCreated?this.tourList.dataProvider=t:this.tempProider=t},e.prototype.resiteView=function(t){this.tourList.width=329*t+20},e.prototype.updatePlayerList=function(t){},e}(t.View);e.MatchList_Tab_TourMode=a,__reflect(a.prototype,"wpt.play.lobby.MatchList_Tab_TourMode")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.isUnLock=!0,t.requestState=-100,t}return __extends(n,i),n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.glassGroup.touchChildren=!1,this.touchEnabled=!0,this.tipGroup.visible=!1,this.tipGroup.alpha=0,this.tipGoldImg.visible=!1,this.tipTicketImg.visible=!1,this.adsTxt.visible=!1,this.rImg.visible=!1,this.freePic.visible=!1,this.goldGroup.visible=!1,this.buyinImg.visible=!1,this.unlockPopGroup.visible=!1,this.unlockPopTxt.text="",this.tipCoinNum=new t.NumberImg,this.tipCoinNum.numSkin="number_golden30x62_",this.tipCoinNum.x=74,this.tipCoinNum.y=69,this.tipCoinNum.scaleX=this.tipCoinNum.scaleY=.7767,this.tipGroup.addChild(this.tipCoinNum),this.manCurNum=new t.NumberImg,this.manCurNum.numSkin="number_golden30x62_",this.manCurNum.x=115,this.manCurNum.y=119,this.manCurNum.scaleX=this.manCurNum.scaleY=.6,this.tipGroup.addChild(this.manCurNum),this.manMaxNum=new t.NumberImg,this.manMaxNum.numSkin="number_golden30x62_",this.manMaxNum.x=151,this.manMaxNum.y=119,this.manMaxNum.scaleX=this.manMaxNum.scaleY=.6,this.tipGroup.addChild(this.manMaxNum),this.buyinNum=new t.NumberImg,this.buyinNum.numSkin="number_golden30x62_",this.buyinNum.scaleX=this.buyinNum.scaleY=.5833,this.goldGroup.addChild(this.buyinNum),this.tipTool||(this.tipTool=new a.TipsTool)},n.prototype.onAdd=function(){i.prototype.onAdd.call(this),this.glassGroup.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.glassGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),t.addCommand(t.WPTEvent.UPDATE_MATCHLIST_SENDREWARD,this.UPDATE_MATCHLIST_SENDREWARD,this),this.glassEffect&&this.glassEffect.play(),this.tipTool||(this.tipTool=new a.TipsTool),this.tipTool.setTarget(this.ticketPopGroup)},n.prototype.onRemove=function(){i.prototype.onRemove.call(this),this.glassGroup.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.glassGroup.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this),this.glassGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),t.removeCommand(t.WPTEvent.UPDATE_MATCHLIST_SENDREWARD,this.UPDATE_MATCHLIST_SENDREWARD,this),this.glassEffect&&(this.glassEffect.stop(!0),this.glassEffect.visible=!1),this.tipTool.clear()},n.prototype.dataChanged=function(){this.mData&&this.updateView()},n.prototype.updateView=function(){this.itemIndex%2==0?this.container.y=35:this.container.y=123,this.updataRIMGView(),this.updataTourData()},n.prototype.updataTourData=function(){if(this.isUnLock=this.mData.unLock,t.isempty(this.mData.imageCode))this.placeImg.source="",this.placeName.source="";else if(this.placeImg.source="city"+this.mData.imageCode+"_png",this.placeName.source="cityName"+this.mData.imageCode+"_png",!this.glassEffect){var e="tourParticle"+this.mData.imageCode;this.isMerge(e)?(this.glassEffect=new t.MulParticleMergePlayer,this.glassEffect.setURL(e+"_tex_json",e+"_json",e)):(this.glassEffect=new t.MulParticlePlayer,this.glassEffect.setURL(this.getParticlePngs(e),this.getParticleJsons(e))),this.glassEffect.visible=!1,this.glassEffect.x=147,this.glassEffect.y=20,this.glassEffect.mask=this.glassMasker,this.glassEffect.play(),t.DisplayUtil.addChild(this.glassGroup,this.glassEffect)}switch(this.mData.color){case 1:this.buyinBG.source="tour_buyinBG_green_png",this.buyinImg.source=this.mData.unLock?"tour_buyin_green_png":"tour_unlock_green_png";break;case 2:this.buyinBG.source="tour_buyinBG_blue_png",this.buyinImg.source=this.mData.unLock?"tour_buyin_blue_png":"tour_unlock_blue_png";break;default:this.buyinBG.source="tour_buyinBG_blue_png",this.buyinImg.source=this.mData.unLock?"tour_buyin_blue_png":"tour_unlock_blue_png"}this.isUnLock?(this.lockImg.visible=!1,t.ColorUtil.setColorState(this,t.ColorUtil.DEFAULT)):(this.lockImg.visible=!0,this.checkPrivateIsUnLock()?t.ColorUtil.setColorState(this,t.ColorUtil.DEFAULT):t.ColorUtil.setColorState(this,t.ColorUtil.DISABLE)),this.visLine()},n.prototype.refrashParticleSource=function(){if(this.glassEffect){var t="tourParticle"+this.mData.imageCode;this.isMerge(t)?this.glassEffect.setURL(t+"_tex_json",t+"_json",t):this.glassEffect.setURL(this.getParticlePngs(t),this.getParticleJsons(t)),this.glassEffect.play()}},n.prototype.updataRIMGView=function(){this.tagData&&(t.CommonData.getInstance().lobby.isSignedMatch(this.tagData.szMatchID)&&this.tagData.nMatchStatus!=t.TableLobbyConst.MATCH_STATE_COMPLETE?(this.requestState=this.tagData.nMatchStatus,this.rImg.visible=!0,this.tagData.nMatchStatus==t.TableLobbyConst.MATCH_STATE_RUNNING?this.mData.isRunAndNotmyMatch?(this.rImg.source="tour_r_green_png",this.tipInGame.visible=!1,this.tipManBG.visible=!0,this.manCurNum.visible=!0,this.manMaxNum.visible=!0):(this.rImg.source="tour_r_red_png",this.tipInGame.visible=!0,this.tipManBG.visible=!1,this.manCurNum.visible=!1,this.manMaxNum.visible=!1):(this.rImg.source="tour_r_green_png",this.tipInGame.visible=!1,this.tipManBG.visible=!0,this.manCurNum.visible=!0,this.manMaxNum.visible=!0),this.buyinImg.visible=!1,this.freePic.visible=this.ticketPopGroup.visible=!1,this.goldGroup.visible=!1):(this.requestState=-1,this.rImg.visible=!1,this.tipInGame.visible=!1,this.tipManBG.visible=!0,this.manCurNum.visible=!0,this.manMaxNum.visible=!0,this.visGoldOrFree()))},n.prototype.visGoldOrFree=function(){if(this.tagData){var e=t.CommonData.getInstance().getTicketNumById(this.tagData.ticketMatchItemId);0==e?(this.freePic.visible=this.ticketPopGroup.visible=!1,this.goldGroup.visible=this.buyinImg.visible=!0,this.mData&&(this.mData.unLock?this.buyinNum.num=this.tagData.nSignFee+this.tagData.nCharge:this.buyinNum.num=this.mData.unlockCost)):(this.freePic.visible=this.ticketPopGroup.visible=!0,this.goldGroup.visible=this.buyinImg.visible=!1,this.ticketNumTxt.text=e>99?"...":e.toString(),this.tipTool.text=e>1?t.getLang("tour_ticketNum_TipX",e):t.getLang("tour_ticketNum_Tip1",e))}},n.prototype.UPDATE_MATCHLIST_SENDREWARD=function(e){if(this.tagData&&e.data.MatchID==this.tagData.szMatchID){var a=e.data.Reward;for(var i in a)if(1==a[i].Rank){1==a[i].Type&&(this.tipGoldImg.visible=!0),this.tipCoinNum.visible=this.tipGoldImg.visible=1==a[i].Type,this.adsTxt.visible=this.tipTicketImg.visible=0==a[i].Type,1==a[i].Type?this.setTipCoinNum(t.int64To32(a[i].Value)):this.setTipText("To Next Stop"),this.manCurNum.num=this.tagData.nSignPlayer,this.manCurNum.validateNow(),this.manMaxNum.num=this.tagData.nMaxPlayer,this.manMaxNum.validateNow();break}}},n.prototype.onTouch=function(i){if(0!=this.checkPrivateIsUnLock()){if(!this.isUnLock&&this.mData.unlockCost>t.CommonData.getInstance().currentUser.coins)return void e.js.toBuyGold(e.js.BUY_GOLD_FROM_BUYIN,this.mData.unlockCost-t.CommonData.getInstance().currentUser.coins);switch(t.CommonData.getInstance().lobby.curSelectTourDataID=this.mData.id,t.dispatch(new t.WPTEvent(t.WPTEvent.SELECT_MATCH_TABLE,this.tagData)),t.log.debug("---------点击了tourMode按钮: this.requestState,curSelectTourDataID:  "+this.requestState,t.CommonData.getInstance().lobby.curSelectTourDataID),this.requestState){case-1:t.dispatch(new t.WPTEvent(t.WPTEvent.SIGNUP_MATCH,this.tagData));break;case t.TableLobbyConst.MATCH_STATE_REGISTER:t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_OPEN_WAIT_POPUP,!0));break;case t.TableLobbyConst.MATCH_STATE_RUNNING:t.dispatch(new a.LobbyEvent(a.LobbyEvent.GO_THERE_JOIN_MATCH,this.tagData));break;default:t.log.debug("---------touch tourModeItem ERROR: "+this.requestState)}t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER)}},n.prototype.onMouseOver=function(){this.glassGroup.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.glassGroup.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this),this.dispatch(new t.WPTEvent(t.WPTEvent.SELECT_MATCH_TABLE_TOUR_CACHE,this.tagData)),this.glassEffect&&this.isUnLock&&(this.glassEffect.visible=!0),this.tipGroup.visible=!0,egret.Tween.removeTweens(this.tipGroup),egret.Tween.get(this.tipGroup).to({alpha:1},200,egret.Ease.circOut),t.ColorUtil.setColorState(this.glassImg,t.ColorUtil.LIGHT),this.isUnLock||(this.unlockPopGroup.visible=!0,this.checkPrivateIsUnLock()?this.unlockPopTxt.text=t.getLang("tourTipCanUnlock"):this.unlockPopTxt.text=t.getLang("tourTipCannotUnlock")),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_OVER,t.SoundManager.SOUND_OTHER)},n.prototype.onMouseOut=function(){var e=this;this.glassGroup.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this),this.glassGroup.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),this.glassEffect&&this.isUnLock&&(this.glassEffect.visible=!1),egret.Tween.removeTweens(this.tipGroup),egret.Tween.get(this.tipGroup).to({alpha:0},200,egret.Ease.circOut).call(function(){e.tipGroup.visible=!1}),t.ColorUtil.setColorState(this.glassImg,t.ColorUtil.DEFAULT),this.isUnLock||(this.unlockPopGroup.visible=!1,this.unlockPopTxt.text="")},n.prototype.showParticle=function(){this.glassEffect&&(this.glassEffect.visible=!0)},n.prototype.visLine=function(){0==this.itemIndex?this.line_lock_down.visible=this.line_lock_up.visible=this.line_unlock_down.visible=this.line_unlock_up.visible=!1:(this.line_lock_down.visible=this.itemIndex%2!=0&&!this.isUnLock,this.line_lock_up.visible=this.itemIndex%2==0&&!this.isUnLock,this.line_unlock_down.visible=this.itemIndex%2!=0&&this.isUnLock,this.line_unlock_up.visible=this.itemIndex%2==0&&this.isUnLock)},n.prototype.setTipText=function(t){this.adsTxt.text=t;var e=this.adsTxt.width+100;this.tipBG.width=e>254?e:this.setTipTxtMid(this.adsTxt)},n.prototype.setTipCoinNum=function(t){this.tipCoinNum.num=t,this.tipCoinNum.validateNow();var e=this.tipCoinNum.width+100;this.tipBG.width=e>254?e:this.setTipTxtMid(this.tipCoinNum)},n.prototype.setTipTxtMid=function(t){return t.x=.5*(150-t.width)+75,254},n.prototype.isMerge=function(t){return RES.hasRes(t+"_tex_json")?!0:!1},n.prototype.getParticlePngs=function(t){if(RES.hasRes(t+"_png"))return[t+"_png"];for(var e=1,a=t+e+"_png",i=[];RES.hasRes(a);)i.push(a),++e,a=t+e+"_png";return i},n.prototype.getParticleJsons=function(t){if(RES.hasRes(t+"_json"))return[t+"_json"];for(var e=1,a=t+e+"_json",i=[];RES.hasRes(a);)i.push(a),++e,a=t+e+"_json";return i},n.prototype.checkPrivateIsUnLock=function(){if(this.isUnLock)return!0;var e=t.CommonData.getInstance().lobby.getTourDataIndexByID(this.mData.id);return e>0?t.CommonData.getInstance().lobby.tourModeDatas[e-1].unLock:!0},Object.defineProperty(n.prototype,"mData",{get:function(){return this.data?this.data:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tagData",{get:function(){return this.mData?this.mData.tagData:null},enumerable:!0,configurable:!0}),n}(t.ItemRenderView);a.MatchList_TourModeItem=i,__reflect(i.prototype,"wpt.play.lobby.MatchList_TourModeItem")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(){function a(){this.name="",this.btnStrs=["nameBtn","dateBtn","buyinBtn","enrolledBtn","poolBtn","stateBtn"],this.sortStrs=["nameSort","dateSort","buyinSort","enrolledSort","poolSort","stateSort"],this.titleArrowDict={},this.arrowSortDict={}}return a.prototype.partAdded=function(t,e){var a,i=this.btnStrs.indexOf(t);-1!=i&&(this[t]=e,a=this.sortStrs[i]),-1!=this.sortStrs.indexOf(t)&&(this[t]=e),a&&this.addSortEvent(e,a)},a.prototype.partRemoved=function(t,e){mouse.setButtonMode(e,!0),e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.titleClick,this,!1)},a.prototype.addSortEvent=function(t,e){t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.titleClick,this,!1),this.titleArrowDict[t.name]=e,mouse.setButtonMode(t,!0)},a.prototype.getSortNameParam=function(t,e){void 0===e&&(e=!1);var a=this.titleArrowDict[t];if(a){var i=this[a];if(i)return e||i.click(),i.click(),[t,i.isUp,this.name]}return null},a.prototype.titleClick=function(a){var i=this.titleArrowDict[a.currentTarget.name];if(i){var n=this[i];if(n){n.click(),t.dispatch(new e.LobbyEvent(e.LobbyEvent.LOBBY_LIST_SORT,[a.currentTarget.name,n.isUp,this.name]));for(var o in this.titleArrowDict)i!=this.titleArrowDict[o]&&this[this.titleArrowDict[o]]&&this[this.titleArrowDict[o]].init()}}},a}();e.MatchListTitleProxy=a,__reflect(a.prototype,"wpt.play.lobby.MatchListTitleProxy")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.childrenCreated=function(){var t=this;i.prototype.childrenCreated.call(this),this.mode6Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mode6Click,this,!1),this.mode9Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mode9Click,this,!1),this.modeBeginnerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.modeBeginnerClick,this,!1),this.modeAmateurBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.modeAmateurClick,this,!1),this.modeProBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.modeProClick,this,!1),this.modeEliteBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.modeEliteClick,this,!1),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnLeftClick2,this,!1),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnRightClick2,this,!1),this.btnLeft.isOverMusic=this.btnRight.isOverMusic=!0,this.playnowBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playnowBtnClick,this,!1),this.playnowBtn.isOverMusic=!0,this.hscroller.setBtnLeft(this.btnLeft),this.hscroller.setBtnRight(this.btnRight),this.hscroller.setChangeCallBack(function(){t.setModeTable()}),this.mode6Click(null),this.btnLeft.visible=!1},n.prototype.mode6Click=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.mode6Btn.currentState="selected",this.mode9Btn.currentState="up",t.CommonData.getInstance().lobby.selectedFilterSeat=6,t.dispatch(new a.LobbyEvent(a.LobbyEvent.RING_SEATSTAB_SELECTED,t.TableLobbyConst.RING_SEAT_AND_6))},n.prototype.mode9Click=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.mode6Btn.currentState="up",this.mode9Btn.currentState="selected",t.CommonData.getInstance().lobby.selectedFilterSeat=9,t.dispatch(new a.LobbyEvent(a.LobbyEvent.RING_SEATSTAB_SELECTED,t.TableLobbyConst.RING_SEAT_AND_9))},n.prototype.modeBeginnerClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.resetScroller(),this.resetTableMode(),this.modeBeginnerBtn.currentState="selected"},n.prototype.modeAmateurClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.resetTableMode(),this.modeAmateurBtn.currentState="selected",this.gotoArea(2)},n.prototype.modeProClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.resetTableMode(),this.modeProBtn.currentState="selected",this.gotoArea(3)},n.prototype.modeEliteClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.resetTableMode(),this.modeEliteBtn.currentState="selected",this.gotoArea(4)},n.prototype.gotoArea=function(e){if(!t.isempty(this.listData)){this.resetScroller();for(var a=0;a<this.listData.length;a++){var i=this.listData[a];if(i.fieldType==e)break;this.hscroller.onDownBind(null)}}},n.prototype.resetTableMode=function(){this.modeAmateurBtn.currentState="up",this.modeProBtn.currentState="up",this.modeEliteBtn.currentState="up",this.modeBeginnerBtn.currentState="up"},n.prototype.btnLeftClick=function(t){this.hscroller.onUpBind(null)},n.prototype.btnLeftClick2=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.hscroller.onUpBind(null),this.hscroller.onUpBind(null),this.hscroller.onUpBind(null),this.hscroller.onUpBind(null)
},n.prototype.btnRightClick=function(t){this.hscroller.onDownBind(null)},n.prototype.btnRightClick2=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.hscroller.onDownBind(null),this.hscroller.onDownBind(null),this.hscroller.onDownBind(null),this.hscroller.onDownBind(null)},n.prototype.setModeTable=function(){var e=this.hscroller.viewport.scrollH,a=Math.max(0,Math.ceil(e/383)),i=this.listData[a];if(!t.isempty(i))switch(this.resetTableMode(),i.fieldType){case 1:this.modeBeginnerBtn.currentState="selected";break;case 2:this.modeAmateurBtn.currentState="selected";break;case 3:this.modeProBtn.currentState="selected";break;case 4:this.modeEliteBtn.currentState="selected"}},n.prototype.resetScroller=function(){this.hscroller.resetPos()},n.prototype.playnowBtnClick=function(i){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new a.LobbyEvent(a.LobbyEvent.QUICK_START,null)),e.js.toFB_Q(e.js.STATISTICS_PLAYNOW_CLICK)},n.prototype.setData=function(t){this.list.dataProvider=new eui.ArrayCollection(t),this.listData=t,this.list.width=383*t.length+100},n}(t.View);a.TabGameItem=i,__reflect(i.prototype,"wpt.play.lobby.TabGameItem")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(a){function i(){return a.call(this)||this}return __extends(i,a),i.prototype.partAdded=function(t,e){a.prototype.partAdded.call(this,t,e)},i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.buyinICons=new t.NumberImg,this.addChild(this.buyinICons),this.buyinICons.numSkin="number_golden30x62_",this.buyinICons.x=this.goldIcon.x+this.goldIcon.width+5,this.buyinICons.y=this.goldIcon.y+4,this.touchEnabled=!0,this.touchChildren=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this,!1),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOut,this),t.addCommand(t.WPTEvent.UPDATE_UNLOCK_VIEW,this.UPDATE_UNLOCK_VIEW,this),t.addCommand(t.WPTEvent.UPDATE_MATCH_PLAYERNUM,this.setPlayersNum,this)},i.prototype.onOver=function(e){this.isLock||(this.tableImg.source="lobby_table"+this.data.fieldType+"_over_png",this.light.source="lobby_table_light_over_png",t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_OVER,t.SoundManager.SOUND_OTHER))},i.prototype.onOut=function(t){this.isLock||(this.tableImg.source="lobby_table"+this.data.fieldType+"_png",this.light.source="lobby_table_light_png")},i.prototype.clickHandler=function(a){this.isLock?e.js.toBuyGold(e.js.BUY_GOLD_FROM_UNLOCK,this.data.bankRoll):(t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.dispatch(new t.WPTEvent(t.WPTEvent.ENTER_SIMPLE_TABLE,this.data))),e.js.toFB_Q(e.js.STATISTICS_RING_CLICK)},i.prototype.dataChanged=function(){this.data&&(this.tableNameTxt.text=this.data.showName,this.stakesTxt.text=t.DealMoneyUtil.getStrByWptRule(this.data.smBlind)+"/"+t.DealMoneyUtil.getStrByWptRule(this.data.bigBlind),this.UPDATE_UNLOCK_VIEW(null))},i.prototype.setPlayersNum=function(t){for(var e=t.data,a=0,i=0;i<e.length;i++)this.data.smBlind==e[i].nSmallBlind&&e[i].nBigBlind==this.data.bigBlind&&e[i].nSignPlayer!=e[i].nMaxPlayer&&(a+=e[i].nSignPlayer);this.isLock||(0!=a?(this.handsImg.visible=!0,this.startImg.visible=!1):(this.startImg.visible=!0,this.handsImg.visible=!1))},i.prototype.setLock=function(t){this.isLock=t,this.lock.visible=t,this.tableImg.source="lobby_table"+this.data.fieldType+"_png",t?this.data&&(this.buyinICons.num=this.data.bankRoll):this.data&&(this.buyinICons.num=this.data.minBuyIn)},i.prototype.UPDATE_UNLOCK_VIEW=function(e){this.data?this.setLock(this.data.bankRoll>t.CommonData.getInstance().lobby.maxCGZUnlockValue):this.setLock(!0)},i}(t.ItemRenderView);a.TabGameItemListRender=i,__reflect(i.prototype,"wpt.play.lobby.TabGameItemListRender")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.textFieldTips=new t.TextFieldTips,this.textFieldTips.setTextField(this.playerTxt,9)},a.prototype.dataChanged=function(){this.data?(this.data.Rank>0?this.rankTxt.text=this.data.Rank.toString():this.rankTxt.text="--",this.textFieldTips.text=this.data.sCFUserName,void 0!=this.data.Reward?this.chipsTxt.text="---"==this.data.Reward?t.getLang("finished"):this.data.Reward:t.int64To32(this.data.Coin)>0?0==this.data.Rank?this.chipsTxt.text="--":this.chipsTxt.text=t.int64To32(this.data.Coin).toString():this.chipsTxt.text=t.getLang("finished"),this.itemIndex%2==1&&(this.currentState="selected")):(this.rankTxt.text="",this.textFieldTips.text="",this.chipsTxt.text="")},a}(t.ItemRenderView);e.TabSitGoInfoItemListRender=a,__reflect(a.prototype,"wpt.play.lobby.TabSitGoInfoItemListRender")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.titleSortProxy=new e.MatchListTitleProxy,t.titleSortProxy.name="sitgo",t}return __extends(i,a),i.prototype.partAdded=function(t,e){a.prototype.partAdded.call(this,t,e),this.titleSortProxy.partAdded(t,e)},i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.btnRegister.addEventListener(egret.TouchEvent.TOUCH_TAP,this.registerBtnClick,this),this.unregisterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.unregisterBtnClick,this),this.takeseatBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.takeseatBtnClick,this),this.btnTourney.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toLobbyinfoBtnClick,this),this.toLobbyinfoBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toLobbyinfoBtnClick,this),this.btnRegister.isOverMusic=this.unregisterBtn.isOverMusic=this.btnTourney.isOverMusic=this.takeseatBtn.isOverMusic=this.toLobbyinfoBtn2.isOverMusic=!0,this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.matchlistItemTapHandler,this),this.titleTxtTips=new t.TextFieldTips,this.titleTxtTips.setTextField(this.titleTxt,25),t.addCommand(t.WPTEvent.UPDATE_MATCHLIST_SENDREWARD,this.UPDATE_MATCHLIST_SENDREWARD,this),t.addCommand(t.WPTEvent.GET_MATCHLIST_SENDREWARD,this.GET_MATCHLIST_SENDREWARD,this)},i.prototype.GET_MATCHLIST_SENDREWARD=function(t){if(this._data){var e=t.data;e.MatchID==this._data.szMatchID&&this.updateListBindData(this.getlistData(e.PlayerInfo))}},i.prototype.matchlistItemTapHandler=function(t){this.preMatchlistItem&&(this.preMatchlistItem.currentState="normal"),t.itemRenderer&&(t.itemRenderer.currentState="selected"),this.preMatchlistItem=t.itemRenderer},i.prototype.getlistData=function(t){if(this._data&&3!=this._data.nMatchStatus)return t;this.tmp_listData=[];for(var e,a=0;a<t.length;a++)e={},e.Rank=t[a].Rank,e.sCFUserName=t[a].sCFUserName,e.Reward="---",this.tmp_listData.push(e);return this.tmp_listData},i.prototype.registerBtnClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.WPTEvent(t.WPTEvent.SIGNUP_MATCH,this._data))},i.prototype.unregisterBtnClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new e.LobbyEvent(e.LobbyEvent.MATCH_INFO_UNREGISTER,this._data))},i.prototype.takeseatBtnClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new e.LobbyEvent(e.LobbyEvent.GO_THERE_JOIN_MATCH,this._data))},i.prototype.toLobbyinfoBtnClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.WPTEvent(t.WPTEvent.OPEN_DETAILS_POPUP))},i.prototype.UPDATE_MATCHLIST_SENDREWARD=function(t){var e=t.data;this.mergePlayerInfoAndRewards(e.Reward)},i.prototype.mergePlayerInfoAndRewards=function(e){if(this._data&&3==this._data.nMatchStatus&&this.tmp_listData){for(var a=0;a<e.length;a++)this.tmp_listData[a]&&this.tmp_listData[a].Rank==e[a].Rank&&(1!=e[a].Type?this.tmp_listData[a].Reward=e[a].RewardName+"×"+t.int64To32(e[a].Value):this.tmp_listData[a].Reward=t.DealMoneyUtil.getStrByComma(t.int64To32(e[a].Value)));this.updateListBindData(this.tmp_listData)}},i.prototype.updateListBindData=function(t){void 0==this.infoListBindArr?(this.infoListBindArr=new eui.ArrayCollection,this.infoList.dataProvider=this.infoListBindArr):this.infoListBindArr.replaceAll(t)},i.prototype.setData=function(e){this._data=e,this.unregisterBtn.enabled=null!=e,this.btnRegister.enabled=null!=e,this.btnTourney.enabled=null!=e,this.toLobbyinfoBtn2.visible=!1,this.btnTourney.visible=null!=e,e?(this.titleTxt.text=e.szMatchName,this.titleTxtTips.setTxt(e.szMatchName),this.unregisterBtn.visible=e.isSigned,this.btnRegister.visible=!e.isSigned,this.info_chipsTxt.text=e.nMatchStatus==t.TableLobbyConst.MATCH_STATE_COMPLETE?t.getLang("rewards"):t.getLang("chips"),e.nMatchStatus==t.TableLobbyConst.MATCH_STATE_REGISTER?e.isLaterRegister()?(this.unregisterBtn.visible=!1,this.btnRegister.visible=!1,this.takeseatBtn.visible=!1):(this.unregisterBtn.visible=e.isSigned,this.btnRegister.visible=!e.isSigned,this.takeseatBtn.visible=!1):e.nMatchStatus==t.TableLobbyConst.MATCH_STATE_RUNNING||e.nMatchStatus==t.TableLobbyConst.MATCH_STATE_COMPLETE?(this.unregisterBtn.visible=!1,this.btnRegister.visible=!1,this.takeseatBtn.visible=e.nMatchStatus==t.TableLobbyConst.MATCH_STATE_RUNNING&&t.CommonData.getInstance().lobby.isSignedMatch(e.szMatchID),this.toLobbyinfoBtn2.visible=!this.takeseatBtn.visible):(this.unregisterBtn.visible=!1,this.btnRegister.visible=!1,this.takeseatBtn.visible=!1)):(this.titleTxt.text="",this.unregisterBtn.visible=!1,this.btnRegister.visible=!1,this.takeseatBtn.visible=!1,this.btnTourney.visible=!1,this.toLobbyinfoBtn2.visible=!1,t.isempty(this.infoListBindArr)||this.infoListBindArr.replaceAll([]))},i.prototype.GET_MATCHLIST_REVPLAYERS=function(t){t&&this._data&&this._data.szMatchID==t.MatchID&&(void 0==this.infoListBindArr?(this.infoListBindArr=new eui.ArrayCollection(t.PlayerInfo),this.infoList.dataProvider=this.infoListBindArr):this.infoListBindArr.replaceAll(t.PlayerInfo),this.infoList.height!=33*t.PlayerInfo.length&&(this.infoList.height=33*t.PlayerInfo.length,this.infoScoll.reSize(),this.infoScoll.resetPos()))},i}(t.View);e.TabSitGoItem=a,__reflect(a.prototype,"wpt.play.lobby.TabSitGoItem")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return a.call(this)||this}return __extends(i,a),i.prototype.partAdded=function(t,e){a.prototype.partAdded.call(this,t,e)},i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this,!1),this.textFieldTips=new t.TextFieldTips,this.textFieldTips.setTextField(this.nameTxt,20),this.addEventListener(e.LobbyEvent.REFRESH_MYMATCH_SIGNED,this.REFRESH_MYMATCH_SIGNED,this)},i.prototype.clickHandler=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.dispatch(new t.WPTEvent(t.WPTEvent.SELECT_MATCH_TABLE,this.data))},i.prototype.REFRESH_MYMATCH_SIGNED=function(e){if(this.data){var a=e.data;-1!=a.indexOf(this.data.szMatchID)&&this.data.nMatchStatus!=t.TableLobbyConst.MATCH_STATE_COMPLETE?(this.mySignImg.visible=!0,this.mySignImg.source=this.data.nMatchStatus==t.TableLobbyConst.MATCH_STATE_RUNNING?t.ResConst.MY_RUN_SIGN_IMG:t.ResConst.MY_REGISTER_SIGN_IMG):this.mySignImg.visible=!1}},i.prototype.dataChanged=function(){if(this.data){t.CommonData.getInstance().lobby.isSignedMatch(this.data.szMatchID)?(this.mySignImg.visible=!0,this.mySignImg.source=this.data.nMatchStatus==t.TableLobbyConst.MATCH_STATE_RUNNING?t.ResConst.MY_RUN_SIGN_IMG:t.ResConst.MY_REGISTER_SIGN_IMG):this.mySignImg.visible=!1,this.nameTxt.text=this.data.szMatchName,this.textFieldTips.setTxt(this.data.szMatchName);var e,a=this.data.matchTypeFunc();a[1]?0==this.data.nSignFee?(this.buyinIcon.iconSource=null,e="Freeroll"):(this.buyinIcon.iconSource=t.ResConst.ICON_GOLD,e=t.DealMoneyUtil.getStrByWptRule(this.data.nSignFee+this.data.nCharge)):a[2]?(this.buyinIcon.iconSource=null,e=t.getLang("Ticket")):(this.buyinIcon.iconSource=null,e="Freeroll"),this.buyinIcon.label=e,this.stateIcon.setStatus(this.data.nMatchStatus),this.data.nMatchStatus==t.TableLobbyConst.MATCH_STATE_COMPLETE?(this.playerNum.text=this.data.nSignPlayer.toString(),this.mySignImg.visible=!1):this.playerNum.text=Math.max(0,this.data.nSignPlayer)+"/"+this.data.nMaxPlayer}},i}(t.ItemRenderView);e.TabSitGoItemListRender=a,__reflect(a.prototype,"wpt.play.lobby.TabSitGoItemListRender",["eui.UIComponent","egret.DisplayObject"])}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.titleSortProxy=new e.MatchListTitleProxy,t.titleSortProxy.name="mtt",t}return __extends(i,a),i.prototype.partAdded=function(t,e){a.prototype.partAdded.call(this,t,e),this.titleSortProxy.partAdded(t,e)},i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.prizePoolLbl.visible=this.prizePoolTxt.visible=!1,this.inTxt.visible=this.register_startslbl.visible=this.register_startsTxt.visible=!1,this.endtimeLbl.visible=this.runningLbl.visible=this.runningTxt.visible=this.levelLbl.visible=this.levelTxt.visible=this.startChipsLbl.visible=this.startChipsTxt.visible=!1,this.titleTxtTips=new t.TextFieldTips,this.titleTxtTips.setTextField(this.titleTxt,25),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.registerBtnClick,this),this.unregisterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.unregisterBtnClick,this),this.takeseatBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.takeseatBtnClick,this),this.lateregisterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.lateregisterBtnClick,this),this.toLobbyinfoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toLobbyinfoBtnClick,this),this.toLobbyinfoBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toLobbyinfoBtnClick,this),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.matchlistItemTapHandler,this)},i.prototype.matchlistItemTapHandler=function(t){this.preMatchlistItem&&(this.preMatchlistItem.currentState="normal"),t.itemRenderer&&(t.itemRenderer.currentState="selected"),this.preMatchlistItem=t.itemRenderer},i.prototype.takeseatBtnClick=function(){t.dispatch(new e.LobbyEvent(e.LobbyEvent.GO_THERE_JOIN_MATCH,this._data))},i.prototype.lateregisterBtnClick=function(){t.dispatch(new t.WPTEvent(t.WPTEvent.SIGNUP_MATCH,this._data))},i.prototype.registerBtnClick=function(){t.dispatch(new t.WPTEvent(t.WPTEvent.SIGNUP_MATCH,this._data))},i.prototype.unregisterBtnClick=function(){t.dispatch(new e.LobbyEvent(e.LobbyEvent.MATCH_INFO_UNREGISTER,this._data))},i.prototype.toLobbyinfoBtnClick=function(){t.dispatch(new t.WPTEvent(t.WPTEvent.OPEN_DETAILS_POPUP))},i.prototype.showRegisterTxt=function(){this.prizePoolLbl.visible=this.prizePoolTxt.visible=!0,this.inTxt.visible=this.register_startslbl.visible=this.register_startsTxt.visible=!0,this.endtimeLbl.visible=this.runningLbl.visible=this.runningTxt.visible=this.levelLbl.visible=this.levelTxt.visible=this.startChipsLbl.visible=this.startChipsTxt.visible=!1},i.prototype.showRunnintTxt=function(){this.prizePoolLbl.visible=this.prizePoolTxt.visible=!0,this.inTxt.visible=this.register_startslbl.visible=this.register_startsTxt.visible=!1,this.endtimeLbl.visible=this.runningLbl.visible=this.runningTxt.visible=this.levelLbl.visible=this.levelTxt.visible=this.startChipsLbl.visible=this.startChipsTxt.visible=!0},i.prototype.setData=function(e){if(this._data=e,this.unregisterBtn.enabled=null!=e,this.registerBtn.enabled=null!=e,this.toLobbyinfoBtn.enabled=null!=e,e){if(this.titleTxt.text=e.szMatchName,this.titleTxtTips.setTxt(e.szMatchName),this.prizePoolLbl.visible=this.prizePoolTxt.visible=!0,""==e.szMatchMinRew)this.prizePoolTxt.text="--";else{var a=/^[0-9]*$/;a.test(e.szMatchMinRew)?this.prizePoolTxt.text=e.szMatchMinRew?t.DealMoneyUtil.getStrByWptRule(parseFloat(e.szMatchMinRew)):"--":this.prizePoolTxt.text=e.szMatchMinRew}if(this.toLobbyinfoBtn2.visible=!1,e.nMatchStatus==t.TableLobbyConst.MATCH_STATE_REGISTER)if(e.isLaterRegister())this.unregisterBtn.visible=!1,this.registerBtn.visible=!1,this.lateregisterBtn.visible=!0,this.takeseatBtn.visible=!1,this.updateLevel(e),this.showRunnintTxt();else{this.unregisterBtn.visible=e.isSigned,this.registerBtn.visible=!e.isSigned;var i=e.isAnnounced();this.registerBtn.touchEnabled=!i,t.ColorUtil.setColorState(this.registerBtn,i?t.ColorUtil.DISABLE:t.ColorUtil.DEFAULT),this.lateregisterBtn.visible=!1,this.takeseatBtn.visible=!1;var n=t.DateUtils.parseStringToDateByZone(e.szStartTime,t.CoreData.Encode);n=t.CommonData.getInstance().stamp.serverToLocalDate(n),this.register_startsTxt.text=t.DateUtils.formatDate(n,"MM.dd hh:mm tt",t.CoreData.Encode),this.updateEndtime(e),this.showRegisterTxt()}else e.nMatchStatus==t.TableLobbyConst.MATCH_STATE_RUNNING||e.nMatchStatus==t.TableLobbyConst.MATCH_STATE_COMPLETE?(this.unregisterBtn.visible=!1,this.registerBtn.visible=!1,this.takeseatBtn.visible=e.nMatchStatus==t.TableLobbyConst.MATCH_STATE_RUNNING&&t.CommonData.getInstance().lobby.isSignedMatch(e.szMatchID)&&(-1==e.signMatchChip||e.signMatchChip>0),this.lateregisterBtn.visible=e.nMatchStatus==t.TableLobbyConst.MATCH_STATE_RUNNING&&!this.takeseatBtn.visible&&e.isLaterRegister(),this.toLobbyinfoBtn2.visible=!this.takeseatBtn.visible&&!this.lateregisterBtn.visible,this.updateLevel(e),this.showRunnintTxt()):(this.prizePoolLbl.visible=this.prizePoolTxt.visible=!1,this.inTxt.visible=this.register_startslbl.visible=this.register_startsTxt.visible=!1,this.endtimeLbl.visible=this.runningLbl.visible=this.runningTxt.visible=this.levelLbl.visible=this.levelTxt.visible=this.startChipsLbl.visible=this.startChipsTxt.visible=!1)}else this.titleTxt.text="",this.prizePoolLbl.visible=this.prizePoolTxt.visible=!1,this.inTxt.visible=this.register_startslbl.visible=this.register_startsTxt.visible=!1,this.endtimeLbl.visible=this.runningLbl.visible=this.runningTxt.visible=this.levelLbl.visible=this.levelTxt.visible=this.startChipsLbl.visible=this.startChipsTxt.visible=!1},i.prototype.updateEndtime=function(e){var a="";if(e.szStartTime){var i=t.DateUtils.parseStringToDateByZone(this._data.szStartTime,t.CoreData.TimeZone);i=t.CommonData.getInstance().stamp.serverToLocalDate(i),a="In";var n=t.DateUtils.switchTimeZone(t.CommonData.getInstance().stamp.serverTime,t.CoreData.TimeZone),o=i.getTime()-n.getTime();o=Math.max(0,o);var r=o/1e3/60,s=r/1440,l=r%1440;s>=1&&(a+=" "+Math.floor(s)+" days"),s=l/60,l%=60,s>=1&&(a+=" "+Math.floor(s)+" hours"),a+=l>1?" "+l.toFixed(0)+" minutes":" "+r.toFixed(0)+" minute"}this.inTxt.text=a},i.prototype.parseTime=function(e){if(!this._data.szStartTime)return"";var a=t.DateUtils.parseStringToDateByZone(this._data.szStartTime,t.CoreData.TimeZone),i=a.toString().split(" ");return i[1]+"."+i[2]+" "+i[3].substr(0,5)},i.prototype.updateLevel=function(e){var a=e.getBlindInfoByLevel(e.curBlindClass),i=t.DealMoneyUtil.getStrByComma(a.smallBlind)+"/"+t.DealMoneyUtil.getStrByComma(a.bigBlind),n=t.DealMoneyUtil.getStrByComma(a.preBlind);0==e.curBlindClass&&(e.curBlindClass=1),this.levelLbl.text="Level "+e.curBlindClass+":",this.levelTxt.x=this.levelLbl.width+this.levelLbl.x,this.levelTxt.text=i+" Ante "+n,this.startChipsTxt.text=t.DealMoneyUtil.getStrByComma(e.nInitChip),this.runningTxt.text=e.nDualTime>1?e.nDualTime+" minutes":e.nDualTime+" minute"},i.prototype.UPDATE_MATCHLIST_SENDREWARD=function(e){if(this._data&&this._data.szMatchID==e.MatchID){var a=t.int64To32(e.TotalReward);a>0&&(this.prizePoolTxt.text=t.DealMoneyUtil.getStrByWptRule(a))}else this.prizePoolTxt.text="--"},i.prototype.UPDATE_CHANGEINFO=function(e){this.endtimeLbl.text=t.getLang("Late registration ends in ")+this.setLaterMin(t.CommonData.getInstance().lobby.curSelectedMatchData,e.BlindTime)},i.prototype.setLaterMin=function(t,e){if(void 0===e&&(e=-1),null==t)return"0 minute";var a=t.nMatchMaxSignLaterBlindClass,i=t.curBlindClass;if(e=-1==e?t.nBlindTime:e,a>0&&a>=i){var n=a>i?(a-i)*t.nBlindTime+e:e;return this.signLastMinString=n>1?n+" minutes":n+" minute",this.signLastMinString}return"0 minute"},i}(t.View);e.TabTourneysItem=a,__reflect(a.prototype,"wpt.play.lobby.TabTourneysItem")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return a.call(this)||this}return __extends(i,a),i.prototype.partAdded=function(t,e){a.prototype.partAdded.call(this,t,e)},i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.textFieldTips=new t.TextFieldTips,this.textFieldTips.setTextField(this.nameTxt,24),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this,!1),this.addEventListener(e.LobbyEvent.REFRESH_MYMATCH_SIGNED,this.REFRESH_MYMATCH_SIGNED,this)},i.prototype.clickHandler=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.WPTEvent(t.WPTEvent.SELECT_MATCH_TABLE,this.data))},i.prototype.REFRESH_MYMATCH_SIGNED=function(e){if(this.data){t.CommonData.getInstance().currentUser.getTicketNumById(this.data.ticketMatchItemId)>0?this.hasTicketImg.visible=!0:this.hasTicketImg.visible=!1;var a=e.data;-1!=a.indexOf(this.data.szMatchID)&&this.data.nMatchStatus!=t.TableLobbyConst.MATCH_STATE_COMPLETE?(this.mySignImg.visible=!0,this.hasTicketImg.visible=!1,this.mySignImg.source=this.data.nMatchStatus==t.TableLobbyConst.MATCH_STATE_RUNNING?t.ResConst.MY_RUN_SIGN_IMG:t.ResConst.MY_REGISTER_SIGN_IMG):this.mySignImg.visible=!1}},i.prototype.dataChanged=function(){if(this.data){t.CommonData.getInstance().currentUser.getTicketNumById(this.data.ticketMatchItemId)>0?this.hasTicketImg.visible=!0:this.hasTicketImg.visible=!1,t.CommonData.getInstance().lobby.isSignedMatch(this.data.szMatchID)?(this.mySignImg.visible=!0,this.hasTicketImg.visible=!1,this.mySignImg.source=this.data.nMatchStatus==t.TableLobbyConst.MATCH_STATE_RUNNING||this.data.nMatchStatus==t.TableLobbyConst.MATCH_STATE_COMPLETE?t.ResConst.MY_RUN_SIGN_IMG:t.ResConst.MY_REGISTER_SIGN_IMG):this.mySignImg.visible=!1,this.nameTxt.text=this.data.szMatchName,this.textFieldTips.setTxt(this.data.szMatchName);var e=t.DateUtils.parseStringToDateByZone(this.data.szStartTime,t.CoreData.Encode);e=t.CommonData.getInstance().stamp.serverToLocalDate(e),this.dateTxt.text=t.DateUtils.formatDate(e,"MM.dd hh:mm tt",t.CoreData.Encode);var a=this.data.matchTypeFunc(),i="";if(a[1]?0==this.data.nSignFee?(this.buyinIcon.iconSource=null,i="Freeroll"):(this.buyinIcon.iconSource=t.ResConst.ICON_GOLD,i=t.DealMoneyUtil.getStrByWptRule(this.data.nSignFee+this.data.nCharge)):a[2]?(this.buyinIcon.iconSource=null,i=t.getLang("Ticket")):(this.buyinIcon.iconSource=null,i="Freeroll"),this.buyinIcon.label=i,this.data.nMatchStatus==t.TableLobbyConst.MATCH_STATE_COMPLETE?(this.enrolledTxt.text=this.data.nSignPlayer.toString(),this.mySignImg.visible=!1):this.enrolledTxt.text=Math.max(0,this.data.nSignPlayer)+"",this.data.isLaterRegister()?this.stateIcon.setStatus(t.TableLobbyConst.MATCH_STATE_LATER):this.data.isAnnounced()?this.stateIcon.setStatus(t.TableLobbyConst.MATCH_STATE_ANNOUNCED):this.stateIcon.setStatus(this.data.nMatchStatus),this.data.rewardTotalWnd>0)this.prizepoolIcon.iconSource=t.ResConst.ICON_GOLD,this.prizepoolIcon.label=t.DealMoneyUtil.getStrByWptRule(this.data.rewardTotalWnd);else if(""==this.data.szMatchMinRew)this.prizepoolIcon.label="--",this.prizepoolIcon.iconSource=null;else{this.prizepoolIcon.iconSource=null;var n=/^[0-9]*$/;n.test(this.data.szMatchMinRew)?this.data.szMatchMinRew?(this.prizepoolIcon.iconSource=t.ResConst.ICON_GOLD,this.prizepoolIcon.label=t.DealMoneyUtil.getStrByWptRule(parseFloat(this.data.szMatchMinRew))):this.prizepoolIcon.label="--":this.prizepoolIcon.label=this.data.szMatchMinRew}}},i}(t.ItemRenderView);e.TabTourneysItemListRender=a,__reflect(a.prototype,"wpt.play.lobby.TabTourneysItemListRender")}(a=e.lobby||(e.lobby={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return a.call(this)||this}return __extends(i,a),i.prototype.start=function(){a.prototype.start.call(this)},i.prototype.clear=function(){a.prototype.clear.call(this)},i.prototype.initOnce=function(){t.log.debug("PokerToolStarter.init()"),this.view=new e.PokerToolView,this.addTopView(this.view),t.AlignUtil.alginScreenCenter(this.view)},i.prototype.initListeners=function(){t.log.debug("PokerToolStarter.initListeners()")},i}(t.ModuleStarter);e.PokerToolStarter=a,__reflect(a.prototype,"wpt.play.pokerTool.PokerToolStarter")}(a=e.pokerTool||(e.pokerTool={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(a){function i(){return a.call(this)||this}return __extends(i,a),i.prototype.init=function(){},i.prototype.sendCardInfo=function(){var a;t.log.debug("发送数据:"+a),e.table.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_LEAVEGAME(a)},i}(t.Meditor);a.PokerToolMeditor=i,__reflect(i.prototype,"wpt.play.pokerTool.PokerToolMeditor")}(a=e.pokerTool||(e.pokerTool={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.skinName="wpt.play.PokerToolViewSkin",t}return __extends(a,e),a.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a)},a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.configUI()},a.prototype.configUI=function(){this.initBtn(),this.initSeat(),this.initCard()},a.prototype.initCard=function(){for(var t=0;52>t;t++){var e=new eui.Image,a=t>=9?t+1:"0"+(t+1);e.source="poker00"+a+"_png",e.x=t%13*41,e.y=55*Math.floor(t/13),e.width=40,e.height=50,e.name="card_"+t,this.g_poker.addChild(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickCard,this)}},a.prototype.initSeat=function(){for(var t=0;9>t;t++)this["g_seat"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickSeat,this);this.g_public.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickSeat,this),this.initSelectGroup(this.g_seat0)},a.prototype.clickCard=function(t){if(null!=this.checkedGroup){var e=t.currentTarget;e.parent&&e.parent.removeChild(e),e.x=e.y=0,e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickCard,this),this.checkedGroup.addChild(e);var a=this.checkedGroup.numChildren;if(this.checkedGroup.name==this.g_public.name)e.x=45*(a-5-1);else{4==a&&(e.x=42);var i=this.checkedGroup.name.split("_"),n=Math.floor(i[2])+1;if(a>=4){var o;if(8>=n){var r="g_seat"+n;o=this[r]}else o=this.g_public;this.autoSelectGroup(o)}}}},a.prototype.clickSeat=function(e){var a=e.currentTarget;if(this.autoSelectGroup(a),a.numChildren>2)for(var i=0;i<a.numChildren;i++){var n=a.getChildAt(i);if(null!=n&&void 0!=n){var o=n.name.split("_");if(o.length>1){null!=n.parent&&n.parent.removeChild(n),t.log.debug(n.name);var r=Math.floor(o[1]);n.x=r%13*41,n.y=55*Math.floor(r/13),n.width=40,n.height=50,this.g_poker.addChild(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickCard,this)}}}},a.prototype.autoSelectGroup=function(t){for(var e=0,a=0,i=0;i<t.numChildren;i++){var n=t.getChildAt(i);(0==e||0==a)&&(e=n.width,a=n.height),n.width*=1.2,n.height*=1.2}if(null!=this.checkedGroup)for(var i=0;i<this.checkedGroup.numChildren;i++){var n=this.checkedGroup.getChildAt(i);n.width=e,n.height=a}this.checkedGroup=t},a.prototype.initSelectGroup=function(t){for(var e=0;e<t.numChildren;e++){var a=t.getChildAt(e);a.width*=1.2,a.height*=1.2}this.checkedGroup=t},a.prototype.initBtn=function(){this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.btn_send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.send,this)},a.prototype.close=function(){this.parent.removeChild(this)},a.prototype.send=function(){},a.prototype.mergeCard=function(t,e){return t+13*e},a.prototype.init=function(){},a.prototype.clear=function(){},a}(t.View);e.PokerToolView=a,__reflect(a.prototype,"wpt.play.pokerTool.PokerToolView")}(a=e.pokerTool||(e.pokerTool={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/play/skins/rank/RankPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(t.BasePanel);e.RankPanel=a,__reflect(a.prototype,"wpt.play.rank.RankPanel")}(a=e.rank||(e.rank={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.skinName="wpt.play.rank.RankListItemSkin",t}return __extends(a,e),a.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a)},a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},a.prototype.dataChanged=function(){this.bg1&&(this.itemIndex%2==0?(this.bg1.visible=!0,this.bg2.visible=!1):(this.bg1.visible=!1,this.bg2.visible=!0));var e=this.data.nrank;this.tf_rank&&(this.tf_rank.text=e.toString()),this.tf_player&&(this.tf_player.text=t.readMultiByte(this.data.cfname,t.CoreData.Encode)),this.tf_value&&(this.tf_value.text=this.data.nScore);var a=[t.ResConst.RANK_FIRST_IMG,t.ResConst.RANK_SECOND_IMG,t.ResConst.RANK_THIRD_IMG];3>=e?(this.tf_rank.visible=!1,this.medal.source=a[e-1],this.medal.visible=!0):(this.tf_rank.visible=!0,this.medal.visible=!1)},a}(eui.ItemRenderer);e.RankListItem=a,__reflect(a.prototype,"wpt.play.rank.RankListItem")}(a=e.rank||(e.rank={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(e,a){return t.call(this,e,a)||this}return __extends(e,t),e}(t.BaseEvent);a.BASE=egret.getQualifiedClassName(a)+":",a.SPIN_TIME=a.BASE+"SPIN_TIME",a.GET_SPIN_TIME=a.BASE+"GET_SPIN_TIME",a.CLICK_SPIN=a.BASE+"CLICK_SPIN",a.CLOSE_SPIN_PANEL=a.BASE+"CLOSE_SPIN_PANEL",a.REQ_RESET_GAME=a.BASE+"REQ_RESET_GAME",a.SPIN_LOTTERY=a.BASE+"SPIN_LOTTERY",a.PAY_CLOSED=a.BASE+"PAY_CLOSED",a.PAY_SUCCESS=a.BASE+"PAY_SUCCESS",e.SpinEvent=a,__reflect(a.prototype,"wpt.play.spin.SpinEvent")}(a=e.spin||(e.spin={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.getSpinItemSrc=function(e,a,i){void 0===i&&(i=!0);var n=t.SPIN_IMGS;i||(n=t.SPIN_SF_IMGS);for(var o=0;o<n.length;o++){var r=n[o],s=r.type,l=r.min,h=r.max;if(e==s&&a>=l&&(0>h||h>=a))return r.img}return null},t}();e.SPIN_WIN="win",e.SPIN_WIN_POP="tanchu",e.SPIN_WIN_POP2="tanchuang1",e.SPIN_WIN_EFFECT="tc_saoguang",e.SPIN_WIN_EFFECT2="tc_guangquan",e.SPIN_WIN_EFFECT_COIN="jinbi3",e.SPIN_WIN_EFFECT_CAIDAI="z_caidai",e.SPIN_STATIC=[{name:"fengye",scale:1},{name:"jiantou",scale:1},{name:"jiantou",scale:-1}],e.SPIN_ALL=[{name:"daquan",scale:1},{name:"spinquan",scale:1},{name:"spinsaoguang",scale:1}],e.SPIN_IMGS=[{type:1,min:1,max:300,img:"gold-02_png"},{type:1,min:301,max:800,img:"gold-03_png"},{type:1,min:801,max:3e3,img:"gold-04_png"},{type:1,min:3001,max:-1,img:"gold-05_png"},{type:1,min:0,max:0,img:"gold-00_png"}],e.SPIN_SF_IMGS=[{type:1,min:1,max:3e4,img:"gold-02_png"},{type:1,min:30001,max:8e4,img:"gold-03_png"},{type:1,min:80001,max:3e5,img:"gold-04_png"},{type:1,min:300001,max:-1,img:"gold-05_png"},{type:1,min:0,max:0,img:"gold-00_png"}],t.SpinConst=e,__reflect(e.prototype,"wpt.play.spin.SpinConst")
}(e=t.spin||(t.spin={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t}();t.SpinData=e,__reflect(e.prototype,"wpt.play.spin.SpinData")}(e=t.spin||(t.spin={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(e){function a(a){var i=e.call(this,a)||this;return i.cast[t.OGSpinProtocol.LOGIN]=i.ON_LOGIN.bind(i),i.cast[t.OGSpinProtocol.RESET_GAME]=i.ON_RESET_GAME.bind(i),i.cast[t.OGSpinProtocol.START_GAME]=i.ON_START_GAME.bind(i),i.cast[t.OGSpinProtocol.PAYMENT]=i.PAYMENT.bind(i),i.cast[t.OGSpinProtocol.IDLE]=i.ON_IDLE.bind(i),i}return __extends(a,e),a.prototype.LOGIN=function(){var e=this.getProtoClassObj("ReqLogin");e.ticket=t.CommonData.getInstance().currentUser.cert.buffer,e.comeFromId=t.CoreData.channelID,t.log.debug("Spin Socket","发送登录请求",t.CoreData.channelID),this.send(t.OGSpinProtocol.LOGIN,e)},a.prototype.StartGame=function(e,a){var i=this.getProtoClassObj("ReqStartGame");i.gameType=a,i.isFree=e,i.configVersion=t.CommonData.getInstance().spinData.configVersion,i.channelType=t.CoreData.channelType,t.log.debug("Spin Socket","发送开始游戏请求",i),this.send(t.OGSpinProtocol.START_GAME,i)},a.prototype.reqResetGame=function(e){var a=this.getProtoClassObj("NtfResetGame");a.resetType=e,t.log.debug("Spin Socket","发送重置游戏请求",a),this.send(t.OGSpinProtocol.RESET_GAME,a)},a.prototype.ON_LOGIN=function(e){var a=this.getProtoClassObj("AckLogin",e.body.buffer);return a.result>0,t.log.debug("Spin Socket","收到登录应答",a),a},a.prototype.ON_IDLE=function(e){var a=this.getProtoClassObj("AckIdle",e.body.buffer);return t.log.debug("Spin Socket","收到心跳应答",a),a},a.prototype.ON_START_GAME=function(e){var a=this.getProtoClassObj("AckStartGame",e.body.buffer);return t.log.debug("Spin Socket","收到开始游戏应答",a),a},a.prototype.PAYMENT=function(e){var a=this.getProtoClassObj("AckPayment",e.body.buffer);return t.log.debug("Spin Socket","收到收费游戏应答",a),a},a.prototype.ON_RESET_GAME=function(e){var a=this.getProtoClassObj("NtfResetGame",e.body.buffer);return t.log.debug("Spin Socket","收到重置游戏应答",a),a},a}(t.BaseMessageProcessor);e.SpinMessageProcessor=a,__reflect(a.prototype,"wpt.net.SpinMessageProcessor")}(e=t.net||(t.net={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(a){function i(){var i=a.call(this)||this;return i.setProto(t.ResConst.PROTO_NAME_SPIN),i.spinMessageProcessor=new e.SpinMessageProcessor(i),i.registerMsg(i.spinMessageProcessor),i.setHeartBeat(6e4),i}return __extends(i,a),i.prototype.HEART_BEAT=function(e){void 0===e&&(e=null),this.send(t.OGSpinProtocol.IDLE,null)},i}(t.SocketService);e.SpinSocketService=a,__reflect(a.prototype,"wpt.net.SpinSocketService")}(e=t.net||(t.net={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.isShowPanel=!1,t}return __extends(n,i),Object.defineProperty(n.prototype,"spinService",{get:function(){return t.CommonData.getInstance().spinService},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"spinProcessor",{get:function(){return this.spinService.spinMessageProcessor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),n.prototype.init=function(){t.addCommand(t.SocketEvent.CONNECT_ERROR(t.net.SpinSocketService),this.CONNECT_ERROR,this),t.addCommand(t.SocketEvent.CONNECT_SUCCESS(t.net.SpinSocketService),this.CONNECT_SUCCESS,this),t.addCommand(t.SocketEvent.DISCONNECT(t.net.SpinSocketService),this.DISCONNECT,this),t.addCommand(t.SocketEvent.RECIVED(t.net.SpinSocketService,t.OGSpinProtocol.LOGIN),this.ON_LOGIN,this),t.addCommand(t.SocketEvent.RECIVED(t.net.SpinSocketService,t.OGSpinProtocol.START_GAME),this.START_GAME,this),t.addCommand(t.SocketEvent.RECIVED(t.net.SpinSocketService,t.OGSpinProtocol.IDLE),this.IDLE,this),t.addCommand(t.SocketEvent.RECIVED(t.net.SpinSocketService,t.OGSpinProtocol.RESET_GAME),this.ON_RESET_GAME,this),t.addCommand(t.SocketEvent.RECIVED(t.net.SpinSocketService,t.OGSpinProtocol.PAYMENT),this.ON_PAYMENT,this),t.addCommand(a.SpinEvent.CLICK_SPIN,this.showSpin,this),t.addCommand(e.top.TopEvent.SPIN_OPEN_CLICK,this.showSpin,this),t.addCommand(a.SpinEvent.CLOSE_SPIN_PANEL,this.ON_CLOSE_SPIN_PANEL,this),t.addCommand(a.SpinEvent.SPIN_LOTTERY,this.SPIN_LOTTERY,this),t.addCommand(a.SpinEvent.REQ_RESET_GAME,this.REQ_RESET_GAME,this),t.addCommand(a.SpinEvent.PAY_CLOSED,this.PAY_CLOSED,this),t.addCommand(a.SpinEvent.PAY_SUCCESS,this.PAY_SUCCESS,this),t.addCommand(a.SpinEvent.GET_SPIN_TIME,this.getSpinTime,this)},n.prototype.getSpinTime=function(){function e(e){t.log.debug("Load onGetSpinTimeCompleteComplete.",e);var i=JSON.parse(e);1==i.State&&1==i.Value.state&&t.dispatch(new a.SpinEvent(a.SpinEvent.SPIN_TIME,i.Value))}function i(e){t.log.debug("onGetSpinTimeLoadError",e)}var n=t.CoreData.getHttpUri(t.CoreData.GetSpinTime);t.HttpService.GET(n,null,e,i)},Object.defineProperty(n.prototype,"spinPanel",{get:function(){return null==this._spinPanel&&(this._spinPanel=new a.SpinPanel),this._spinPanel},enumerable:!0,configurable:!0}),n.prototype.showSpin=function(){function a(){this.isShowPanel=!0,this.spinService.connect(t.CoreData.SpinServerConfig.serverHost),this.spinPanel.show(),e.js.toFB_Q(e.js.STATISTICS_SPIN_CLICK)}return t.log.debug("************",t.CoreData.isValidatedEmail),t.CoreData.isValidatedEmail?void a.bind(this)():void t.CoreData.checkUserStatus(function(){t.MessageDialog.showConfirmNotice(t.getLang("spin_play_error")).setCallback(function(){e.js.validatedEmail()})},a.bind(this))},n.prototype.ON_CLOSE_SPIN_PANEL=function(){this.spinService.close(),this.isShowPanel=!1},n.prototype.DISCONNECT=function(t){this.running=!1},n.prototype.connect=function(){this.running||(this.spinService.connect(t.CoreData.SpinServerConfig.serverHost),this.running=!0)},n.prototype.CONNECT_ERROR=function(e){this.running=!1,t.log.debug("TABLE this.CONNECT_ERROR")},n.prototype.CONNECT_SUCCESS=function(e){t.log.debug("TABLE this.CONNECT_SUCCESS"),this.spinProcessor.LOGIN()},n.prototype.ON_LOGIN=function(t){t.data},n.prototype.SPIN_LOTTERY=function(t){var e=t.data,a=e.isFree,i=e.type;this.spinProcessor.StartGame(a,i)},n.prototype.START_GAME=function(t){var e=t.data;this.spinPanel.rewardShow(e),this.getSpinTime()},n.prototype.ON_PAYMENT=function(a){var i=a.data;if(t.log.debug("zhufujiegou======="+a.data),1==i.result){var n=t.readMultiByte(i.paymentUrl,t.CoreData.Encode);e.js.askOpenPay(n)}else t.MessageDialog.showConfirmNotice(t.getLang("spin_error_pay_failed")),this.spinPanel.paymentError()},n.prototype.ON_RESET_GAME=function(e){var i=e.data;if(null!=i.lastPlayTime&&void 0!=i.lastPlayTime){var n=t.readMultiByte(i.lastPlayTime,t.CoreData.Encode);if(t.dispatch(new a.SpinEvent(a.SpinEvent.SPIN_TIME,n)),!this.isShowPanel)return void this.ON_CLOSE_SPIN_PANEL()}this.commonData.spinData.configVersion=i.configVersion,this.spinPanel.setData(i)},n.prototype.IDLE=function(t){var e=t.data;this.spinPanel.setFreeTimeTxt(e.freeGameCoolDown)},n.prototype.REQ_RESET_GAME=function(e){if(!t.isempty(this.spinPanel)&&!t.isempty(this.spinPanel.parent)){var a=e.data;this.spinProcessor.reqResetGame(a.type)}},n.prototype.PAY_CLOSED=function(t){this.spinPanel.paymentError(a.SpinEvent.PAY_CLOSED)},n.prototype.PAY_SUCCESS=function(t){this.spinPanel.paymentSuccess()},n}(t.Meditor);a.SpinMeditor=i,__reflect(i.prototype,"wpt.play.spin.SpinMeditor")}(a=e.spin||(e.spin={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.type=3,t.isStart=!1,t.isPaySuccess=!1,t.ackStartGame=null,t.prizeAmount=0,t.rewardPrizeIndex=-1,t.isError=!1,t.isWin=!1,t.isPopRewardLoadComplete=!1,t.isPopReward2LoadComplete=!1,t.isLoadData=!1,t.isAutoBoosterTip=!1,t.isShowLoadUI=!1,t.skinName="play.spin.spinSkin",t}return __extends(n,i),n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.g_free.visible=!1,this.g_money.visible=!1,this.g_spinNow.visible=!1,this.g_spinTime.visible=!1,this.initEffect(),this.initBtn(),this.initLabel()},n.prototype.initLabel=function(){for(var e=0;10>e;e++){var a=this["l_name_"+e];a.text="";var i=this["img_"+e];i.source=""}this.free_tip.text=t.getLang("spin_free_tip"),this.money_tip.text=t.getLang("spin_money_tip"),this.speed_tip.textFlow=[{text:t.getLang("spin_speed_tip0")},{text:t.getLang("spin_speed_tip1"),style:{textColor:16770048}},{text:t.getLang("spin_speed_tip2")}]},n.prototype.initBtn=function(){this.img_move.visible=!1,this.img_move2.visible=!1,this.spinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.spinClick,this,!1),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyClick,this,!1),this.ticketBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ticketClick,this,!1),this.g_booster.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onBoosterOut,this),this.g_booster.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onBoosterOver,this),this.getCoinBtn.visible=!1,this.getCoinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGetCoin,this)},n.prototype.onBoosterOut=function(){this.boosterTipVisible(!1)},n.prototype.onBoosterOver=function(){this.boosterTipVisible(!0)},n.prototype.spinClick=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_SPIN_CLICK,t.SoundManager.SOUND_SPIN),this.isFree||3!=this.type||(this.type=2,this.ticketAmount>0&&(this.type=1)),this.isStart=!0,this.btnTouchEnabled(!1),2!=this.type&&(egret.Tween.get(this.g_move).to({rotation:360},1e3).call(this.onFinishTween,this),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_SPIN_MOVE,t.SoundManager.SOUND_SPIN),this.spin_static.visible=!1),this.isFree?this.type=3:2!=this.type&&this.ticketAmount>0&&(this.type=1),this.sendStatistics(),t.dispatch(new a.SpinEvent(a.SpinEvent.SPIN_LOTTERY,{type:this.type,isFree:this.isFree}))},n.prototype.sendStatistics=function(){switch(this.type){case 1:e.js.toFB_Q(e.js.STATISTICS_SPIN_TICKET);break;case 2:e.js.toFB_Q(e.js.STATISTICS_SPIN_DOLLAR);break;case 3:e.js.toFB_Q(e.js.STATISTICS_SPIN_FREE)}},n.prototype.buyClick=function(){this.type=2,this.spinClick()},n.prototype.ticketClick=function(){return this.ticketAmount<1?void t.MessageDialog.showMsg(t.MessageDialog.STATE_STORE,t.getLang("spin_buy_gold_tip"),e.js.SHOW_STORE_TAB_SPINTICKET):(this.type=1,void this.spinClick())},n.prototype.imgMoveFastVis=function(t){void 0===t&&(t=!0),this.img_move_slow.visible=!t,this.img_move.visible=t,this.img_move2.visible=t},n.prototype.btnTouchEnabled=function(t){void 0===t&&(t=!0),this.spinBtn.touchEnabled=t,this.ticketBtn.touchEnabled=t,this.buyBtn.touchEnabled=t},n.prototype.onFinishTween=function(){this.isStart&&(this.imgMoveFastVis(!0),egret.Tween.get(this.g_move).to({rotation:1080},2e3).call(this.onFinishTween1,this))},n.prototype.onFinishTween1=function(){return this.isPopReward2LoadComplete&&this.isPopRewardLoadComplete?void(this.rewardPrizeIndex>=0?(this.imgMoveFastVis(!1),egret.Tween.get(this.g_move).to({rotation:360},1e3).call(this.onFinishTween2,this)):this.isError||!this.isStart?this.imgMoveFastVis(!1):this.onFinishTween()):void this.onFinishTween()},n.prototype.onFinishTween2=function(){var e=360-36*this.rewardPrizeIndex+17;t.log.debug("****************onFinishTween2:",this.rewardPrizeIndex,"***:"+e),egret.Tween.get(this.g_move).to({rotation:e},1e3).call(this.onReward,this)},n.prototype.onReward=function(){null==this.reward_bonesLayout||void 0==this.reward_bonesLayout?this.reward_bonesLayout=this.createDragbonePlayer(a.SpinConst.SPIN_WIN):this.reward_bonesLayout.gotoAndPlay(),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_SPIN_LIGHT,t.SoundManager.SOUND_SPIN),this.g_effect.addChild(this.reward_bonesLayout),egret.setTimeout(this.openReward,this,2e3)},n.prototype.openReward=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_SPIN_YES,t.SoundManager.SOUND_SPIN),this.prizeAmount>=n.AMOUNT_POP_REWARD2?(this.popReward_bonesLayout2.gotoAndPlay(),this.g_spin.addChild(this.spin_pop),this.g_spin.addChild(this.caidaiEffect),this.caidaiEffect.play()):(this.popReward_bonesLayout.gotoAndPlay(),this.g_spin.addChild(this.popReward_bonesLayout))},n.prototype.rewardShow=function(e){var a="",i=!1;if(this.type=3,2==e.gameType&&!this.isPaySuccess)return void(this.ackStartGame=e);switch(e.code){case 0:this.prizeAmount=e.prizeAmount.toNumber(),2==e.gameType?(t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_SPIN_MOVE,t.SoundManager.SOUND_SPIN),egret.Tween.get(this.g_move).to({rotation:360},1e3).call(this.onFinishTween,this),this.spin_static.visible=!1):this.isPaySuccess=!1,this.setRewardInfo(e);break;case 1:i=!0,a=t.getLang("spin_error_same_ip");break;case 2:i=!0,a=t.getLang("spin_error_enough_chip");break;case 3:i=!0,a=t.getLang("spin_error_pay_failed");break;case 4:i=!0,a=t.getLang("spin_error_work_fail");break;case 5:i=!0,a=t.getLang("spin_error_version");break;case 6:i=!0,a=t.getLang("spin_error_free_spin");break;case 8:i=!0,a=t.getLang("spin_error_pay_timeout");break;case 7:this.isStart=!1,this.resetGame&&this.setData(this.resetGame),i=!0,a=t.getLang("spin_error_free_used")}i&&a.length>0&&(t.MessageDialog.showConfirmNotice(a),this.spin_static.visible=!0,this.btnTouchEnabled(!0),this.isStart=!1,this.isPaySuccess=!1,this.imgMoveFastVis(!1)),this.isError=i,this.ackStartGame=null},n.prototype.setRewardInfo=function(e){this.setPrizeIndex(e.prizeId);var i=this.prizesArr[this.rewardPrizeIndex],o=t.int64To32(i.amount),r=this.popReward_bonesLayout,s=35;o>=n.AMOUNT_POP_REWARD2&&(r=this.popReward_bonesLayout2,s=78);var l=r.armature.getSlot("jinbi"),h=r.armature.getSlot("shuzi"),c=new eui.Image;c.source=a.SpinConst.getSpinItemSrc(i.type,t.int64To32(i.amount),this.isFree),c.anchorOffsetX=c.anchorOffsetY=78.5,t.isempty(l)||(l.display=c);var u=new eui.Label;u.size=40,u.bold=!0,u.text=t.DealMoneyUtil.getStrByComma(t.int64To32(e.prizeAmount)),u.anchorOffsetX=u.width/2,u.anchorOffsetY=u.height/2,t.isempty(h)||(h.display=u),this.isWin=e.isWin,t.log.debug("****************setRewardInfo:",this.rewardPrizeIndex,t.int64To32(e.prizeAmount),"amount:"+t.int64To32(i.amount)),this.getCoinBtn.x=l.display.x,this.getCoinBtn.y=l.display.y+78.5+s,this.getCoinBtn.visible=!1,t.isempty(this.getCoinBtn.parent)||this.getCoinBtn.parent.removeChild(this.getCoinBtn),r.addChild(this.getCoinBtn)},n.prototype.dragonBonesCOMPLETE=function(){this.getCoinBtn.visible=!0},n.prototype.removeDragonBonesCoin=function(){t.isempty(this.bonesLayoutEffectCoin)||t.isempty(this.bonesLayoutEffectCoin.parent)||this.bonesLayoutEffectCoin.parent.removeChild(this.bonesLayoutEffectCoin)},n.prototype.removePopReward=function(){t.isempty(this.popReward_bonesLayout)||t.isempty(this.popReward_bonesLayout.parent)||this.popReward_bonesLayout.parent.removeChild(this.popReward_bonesLayout),t.isempty(this.reward_bonesLayout)||t.isempty(this.reward_bonesLayout.parent)||this.reward_bonesLayout.parent.removeChild(this.reward_bonesLayout),t.isempty(this.spin_pop)||t.isempty(this.spin_pop.parent)||this.spin_pop.parent.removeChild(this.spin_pop),t.isempty(this.caidaiEffect)||(this.caidaiEffect.stop(),t.isempty(this.caidaiEffect.parent)||this.caidaiEffect.parent.removeChild(this.caidaiEffect)),this.g_move.rotation=0,this.spin_static.visible=!0,this.btnTouchEnabled(!0),this.isStart=!1,this.resetGame&&this.setData(this.resetGame),this.getCoinBtn.visible=!1},n.prototype.initEffect=function(){this.spin_static=new eui.Group,this.g_effect.addChild(this.spin_static),this.spin_pop=new eui.Group;for(var e=0;e<a.SpinConst.SPIN_ALL.length;e++){var i=a.SpinConst.SPIN_ALL[e],n=this.createDragbonePlayer(i.name,null,i.scale);this.g_effect.addChild(n)}for(var e=0;e<a.SpinConst.SPIN_STATIC.length;e++){var i=a.SpinConst.SPIN_STATIC[e],n=this.createDragbonePlayer(i.name,null,i.scale);this.spin_static.addChild(n)}(null==this.popReward_bonesLayout||void 0==this.popReward_bonesLayout)&&(this.popReward_bonesLayout=this.createDragbonePlayer(a.SpinConst.SPIN_WIN_POP,null,1,!1),this.popReward_bonesLayout.playTimes=1,this.popReward_bonesLayout.addEventListener(t.UIEvent.DragonBonesCOMPLETE,this.dragonBonesCOMPLETE,this),this.popReward_bonesLayout.addEventListener(t.UIEvent.DragonBonesDataLoadComplete,this.dragonLoadComplete,this)),this.bonesLayoutEffect1=this.createDragbonePlayer(a.SpinConst.SPIN_WIN_EFFECT2+"_ske",a.SpinConst.SPIN_WIN_EFFECT2+"_tex",.6),this.bonesLayoutEffect=this.createDragbonePlayer(a.SpinConst.SPIN_WIN_EFFECT+"_ske",a.SpinConst.SPIN_WIN_EFFECT+"_tex"),this.bonesLayoutEffectCoin=this.createDragbonePlayer(a.SpinConst.SPIN_WIN_EFFECT_COIN+"_ske",a.SpinConst.SPIN_WIN_EFFECT_COIN+"_tex"),this.bonesLayoutEffectCoin.addEventListener(t.UIEvent.DragonBonesCOMPLETE,this.removeDragonBonesCoin,this),this.bonesLayoutEffectCoin.playTimes=1,this.bonesLayoutEffectCoin.y+=100,this.initCaidaiEffect(),(null==this.popReward_bonesLayout2||void 0==this.popReward_bonesLayout2)&&(this.popReward_bonesLayout2=this.createDragbonePlayer(a.SpinConst.SPIN_WIN_POP2+"_ske",a.SpinConst.SPIN_WIN_POP2+"_tex",1,!1),this.popReward_bonesLayout2.playTimes=1,this.popReward_bonesLayout2.addEventListener(t.UIEvent.DragonBonesCOMPLETE,this.dragonBonesCOMPLETE,this),this.popReward_bonesLayout2.addEventListener(t.UIEvent.DragonBonesDataLoadComplete,this.dragonLoadComplete2,this),this.spin_pop.addChild(this.popReward_bonesLayout2))},n.prototype.initCaidaiEffect=function(){this.caidaiEffect=new t.MulParticleMergePlayer,this.caidaiEffect.DIS=30,this.caidaiEffect.setURL(a.SpinConst.SPIN_WIN_EFFECT_CAIDAI+"_tex_json",a.SpinConst.SPIN_WIN_EFFECT_CAIDAI+"_json",a.SpinConst.SPIN_WIN_EFFECT_CAIDAI),this.caidaiEffect.x=this.g_move.x-30,this.caidaiEffect.y=this.g_move.y-120},n.prototype.frame_event=function(e){"tc_guangquan"==e.frameLabel&&(t.isempty(this.bonesLayoutEffect1.parent)?(this.spin_pop.addChildAt(this.bonesLayoutEffect1,0),this.bonesLayoutEffect1.y-=70):this.bonesLayoutEffect1.visible=!0),"tc_saoguang"==e.frameLabel&&(t.isempty(this.bonesLayoutEffect.parent)?(this.spin_pop.addChild(this.bonesLayoutEffect),this.bonesLayoutEffect.y-=70):this.bonesLayoutEffect.visible=!0)},n.prototype.dragonLoadComplete2=function(){this.isPopReward2LoadComplete=!0,this.hideLoadUI(),this.popReward_bonesLayout2.armature.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event,this),this.popReward_bonesLayout2.setTouchEnabled(!0)},n.prototype.dragonLoadComplete=function(){this.isPopRewardLoadComplete=!0,this.hideLoadUI(),this.popReward_bonesLayout.setTouchEnabled(!0)},n.prototype.onClickGetCoin=function(){this.isWin&&(t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_COINS_DATA,null)),this.prizeAmount>=n.AMOUNT_POP_REWARD2&&(this.g_spin.addChild(this.bonesLayoutEffectCoin),this.bonesLayoutEffectCoin.gotoAndPlay())),this.removePopReward()},n.prototype.setData=function(e){if(this.isStart)return void(this.resetGame=e);if(null!=e){this.isFree=e.isFree,this.g_money.visible=!this.isFree,this.g_free.visible=this.isFree;var a=e.booster;if(!t.isempty(a)&&!t.isempty(a.expiredTime)&&t.int64To32(a.expiredTime)>0){this.g_speed.visible=!0,this.boosterTipVisible(!0),egret.setTimeout(function(){this.isAutoBoosterTip=!0,this.boosterTipVisible(!1)},this,5e3);var i=t.getLang("spin_less_minute");if(t.log.debug("boo.expiredTime",a.expiredTime),null!=a.expiredTime&&void 0!=a.expiredTime){var n=Math.round(t.int64To32(a.expiredTime)/1e3);i=n/3600>=1?t.DateUtils.stringTime(n,2):t.getLang("spin_less_hour")}else i="";this.speed_time.text=i}else this.g_speed.visible=!1;var o=0;null!=e.freeGameCoolDown&&void 0!=e.freeGameCoolDown&&(o=t.int64To32(e.freeGameCoolDown)),this.setFreeTimeTxt(o),null!=e.ticketAmount&&void 0!=e.ticketAmount&&(this.ticketAmount=t.int64To32(e.ticketAmount),this.ticket_num.text=t.getLang("spin_remain")+this.ticketAmount),this.prizesArr=e.prizes,this.setItemsAll(),this.resetGame=null,this.isLoadData=!0,this.hideLoadUI()}},n.prototype.setFreeTimeTxt=function(e){if(null!=e&&void 0!=e){var i=e/1e3;if(t.log.debug("******************setFreeTimeTxt:*",i,"****:",e),1>i)this.g_spinNow.visible=!0,this.g_spinTime.visible=!1,this.isFree||t.dispatch(new a.SpinEvent(a.SpinEvent.REQ_RESET_GAME,{type:1}));else{var n=t.DateUtils.getFormatHM(e);this.h_1.source="num_red_"+n.hour1+"_png",this.h_2.source="num_red_"+n.hour2+"_png",this.m_1.source="num_red_"+n.minute1+"_png",this.m_2.source="num_red_"+n.minute2+"_png",this.g_spinNow.visible=!1,this.g_spinTime.visible=!0}}},n.prototype.boosterTipVisible=function(t){(t||this.isAutoBoosterTip)&&(this.g_speed_tip.visible=t)},n.prototype.setItemsAll=function(){for(var e=this.prizesArr.length,i=0;e>i;i++){var n=this.prizesArr[i],o=t.int64To32(n.amount),r=this["l_name_"+i];null!=r&&void 0!=r&&(r.text=t.DealMoneyUtil.getStrByComma(o));var s=this["img_"+i];null!=s&&void 0!=s&&(s.source=a.SpinConst.getSpinItemSrc(n.type,o,this.isFree))}},n.prototype.setPrizeIndex=function(t){for(var e=this.prizesArr.length,a=0;e>a;a++){var i=this.prizesArr[a];if(i.id==t)return void(this.rewardPrizeIndex=a)}},n.prototype.paymentError=function(t){void 0===t&&(t=null),this.type=3,this.btnTouchEnabled(),this.isStart=!1,this.isPaySuccess=!1,this.resetGame&&t==a.SpinEvent.PAY_CLOSED&&this.setData(this.resetGame)},n.prototype.paymentSuccess=function(){this.isStart&&(this.isPaySuccess=!0,null!=this.ackStartGame&&this.rewardShow(this.ackStartGame))},n.prototype.createDragbonePlayer=function(e,a,i,n){void 0===a&&(a=null),void 0===i&&(i=1),void 0===n&&(n=!0);var o=new t.DragonBonesPlayer;return o.setDataSimple(e,null==a?e+t.ResConst.EFFECT_SUFFIX:a),o.playTimes=0,o.scaleX=o.scaleY=i,o.loadData(n),o.x=this.g_move.x,o.y=this.g_move.y,o},n.prototype.show=function(){i.prototype.show.call(this),this.showLoadUI(),e.js.toFB_Q(e.js.STATISTICS_SPIN_VIEW,e.js.SPIN_EVENTCATEGORY)},n.prototype.hide=function(){i.prototype.hide.call(this),t.dispatch(new a.SpinEvent(a.SpinEvent.CLOSE_SPIN_PANEL)),this.clear()},Object.defineProperty(n.prototype,"commonView",{get:function(){return t.CommonView.getInstance()},enumerable:!0,configurable:!0}),n.prototype.showLoadUI=function(){this.isShowLoadUI=!0,t.Context.getInstance().screen.rootLayout.touchEnabled=t.Context.getInstance().screen.rootLayout.touchChildren=!1,t.DisplayUtil.addChild(t.Context.getInstance().screen.stage,this.commonView.loadEffect),t.AlignUtil.alginScreenCenter(this.commonView.loadEffect)},n.prototype.hideLoadUI=function(){this.isLoadData&&this.isPopReward2LoadComplete&&this.isPopRewardLoadComplete&&(t.Context.getInstance().screen.rootLayout.touchEnabled=t.Context.getInstance().screen.rootLayout.touchChildren=!0,this.isShowLoadUI&&!t.isempty(this.commonView.loadEffect.parent)&&t.DisplayUtil.remove(this.commonView.loadEffect))},n.prototype.clear=function(){this.removePopReward(),this.removeDragonBonesCoin(),this.type=3,this.isStart=!1,this.isPaySuccess=!1,this.isAutoBoosterTip=!1,this.ackStartGame=null,this.prizesArr=[],this.resetGame=null,this.prizeAmount=0,this.rewardPrizeIndex=-1,this.g_free.visible=!1,this.g_money.visible=!1,this.g_move.rotation=0,this.spin_static.visible=!0,this.isError=!1,this.imgMoveFastVis(!1),this.btnTouchEnabled(),this.hideLoadUI(),t.SoundManager.getInstance().stopAllAudio(t.SoundManager.SOUND_SPIN)},n}(t.BasePanel);i.AMOUNT_POP_REWARD2=2500,a.SpinPanel=i,__reflect(i.prototype,"wpt.play.spin.SpinPanel")}(a=e.spin||(e.spin={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return __extends(a,t),a.prototype.execute=function(t){var a=e.TableData.friendModel,i=e.TableData.userData,n=t.data;e.log.debug("新玩家加入玩家列表",n.sRoleName);var o=new e.FriendUserVO;o.roleName=n.sRoleName,o.userGold="0",o.clientID=n.nClinetId,o.nIp=n.nIp,o.nickName=n.sCFUserName,a.adduser(o);var r=i.getUserByName(n.sRoleName);r||(i.addUser(n.sRoleName),r=i.getUserByName(n.sRoleName)),r.nickName=n.sCFUserName},a}(t.BaseSimpleCommand);e.AckAddUserToListCommand=a,__reflect(a.prototype,"wpt.play.table.AckAddUserToListCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckBroadcastCommand=a,__reflect(a.prototype,"wpt.play.table.AckBroadcastCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckBroadcastMatchRankCommand=a,__reflect(a.prototype,"wpt.play.table.AckBroadcastMatchRankCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=a.TableData.gameinfo,r=a.TableData.userData,s=(a.TableData.friendModel,a.TableData.systemInfo),l=n.seatMeditor,h=i.data;a.log.debug("玩家带入",h.RoleName,h.Result,h.reason);var c=r.getUserByName(h.RoleName),u=h.Result,p=h.reason;if(1==u){t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_COINS_DATA));var d=t.int64To32(h.nBuyChip);a.log.debug("服务器返回带入筹码:"+d,c.roleName);var m=c.goldNum+d;c.goldNum=m,c.manipulateState=0,l.changGold(c.uiSeat,m),r.currentName==h.RoleName&&(o.getGameInfo().myCoin=t.int64To32(h.nTotalCoin),o.getGameInfo().isForce=!1,0==o.getGameInfo().handBuyChipCount&&(c.isObserver||c.isSqueezedOut||(c.isWaitBigBlind=!1,n.operMeditor.visWaitBig(c.isWaitBigBlind),t.dispatch(new t.BaseEvent(a.TableEvent.VIEW_WAIT_BIGBLIND_CLICK,c.isWaitBigBlind)),a.TableData.userData.getPlayerCountBuyInSuccess()<=1&&t.MessageDialog.showMsg("",t.getLang("seat_one_player")))),o.getGameInfo().lastChipRemain=Math.min(m,o.getGameInfo().maxChip),o.getGameInfo().handBuyChipCount++)}else{var _="";if(r.currentName==h.RoleName){switch(p){case 5:var T=t.DealMoneyUtil.getStrByComma(o.getGameInfo().minChip*s.getsystemInfo().present_ChipToCoin);_=t.getLang("no_mindragin",a.TableData.coinNormalName,T+" "+a.TableData.coinNormalName),e.js.toBuyGold(e.js.BUY_GOLD_FROM_TABLE,o.getGameInfo().minChip*s.getsystemInfo().present_ChipToCoin);break;case 9:_=t.getLang("drag_error9");break;case 10:_=t.getLang("drag_error10");break;case 11:_=t.getLang("drag_error11");break;case 12:_=t.getLang("drag_error12");break;case 13:_=t.getLang("drag_error13");break;default:_=t.getLang("drag_error")}5!=p&&t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,_).setCallback(function(){g()});var g=function(){0==a.TableData.gameinfo.getGameInfo().handBuyChipCount&&t.dispatch(new t.BaseEvent(a.TableEvent.EXITGAME,"true"))}}}},n}(t.BaseSimpleCommand);a.AckbuChipCommand=i,__reflect(i.prototype,"wpt.play.table.AckbuChipCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckBuySuperGameCommand=a,__reflect(a.prototype,"wpt.play.table.AckBuySuperGameCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckChangehydCommand=a,__reflect(a.prototype,"wpt.play.table.AckChangehydCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckChatMsgCommand=a,__reflect(a.prototype,"wpt.play.table.AckChatMsgCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(e,a){return t.call(this,e,a)||this}return __extends(e,t),e.CONNECT_ERROR=function(t){return egret.getQualifiedClassName(t)+"::CONNECT_ERROR"},e.CONNECT_SUCCESS=function(t){return egret.getQualifiedClassName(t)+"::CONNECT_SUCCESS"},e.CLOSED=function(t){return egret.getQualifiedClassName(t)+"::CLOSED"},e.DISCONNECT=function(t){return egret.getQualifiedClassName(t)+"::DISCONECT"},e.FLUSH=function(t,e){return egret.getQualifiedClassName(t)+"::FLUSH::"+e},e.RECIVED=function(t,e){return egret.getQualifiedClassName(t)+"::RECIVED::"+e},e}(t.BaseEvent);t.SocketEvent=e,__reflect(e.prototype,"wpt.SocketEvent")}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return __extends(a,t),a.prototype.execute=function(t){var a=e.TableData.friendModel,i=t.data;e.log.debug("从玩家列表删除玩家",i.sRoleName),a.deleteuser(i.sRoleName,i.MatchID)},a}(t.BaseSimpleCommand);e.AckDeleteUserFromListCommand=a,__reflect(a.prototype,"wpt.play.table.AckDeleteUserFromListCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckeblerunablechatCommand=a,__reflect(a.prototype,"wpt.play.table.AckeblerunablechatCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=n.seatMeditor,r=n.dealerMeditor,s=n.operMeditor,l=a.TableData.gameinfo,h=i.data;a.log.debug("玩家弃牌",h.Seat);var c=l.getGameInfo().maxPlayer,u=a.TableData.userData,p=u.getUserByName(u.currentName),d=u.getUserByServerseat(h.Seat);if(p&&d){if(o.removeTime(),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_FOLD),-1!=h.NextSeat){var m=o.serverSeatTouiSeat(h.NextSeat,p.serverSeat,c),_=u.getUserByUIseat(m);o.setOverTime(m,l.getGameInfo().actionTime),_&&0==_.manipulateState&&o.changState(m,"")}var T=o.serverSeatTouiSeat(h.Seat,p.serverSeat,c);if(d.manipulateState=2,d.isFload=!0,d.isOperate=!0,o.setFoldCard(T,h.Seat==p.serverSeat&&!p.isObserver),a.EffectManager.getInstance().playFoldCardEffect(T,h.Seat==p.serverSeat&&!p.isObserver),o.changState(T,a.TableConst.STATE_FOLD),r.setPool(t.int64To32(h.pool)),l.getGameInfo().pool=t.int64To32(h.pool),l.getGameInfo().minRaise=t.int64To32(h.MinRaise),l.getGameInfo().foldPlayerSeatArr.push(h.Seat),p.serverSeat!=h.Seat||n.operMeditor.setViewState(a.TABLE_OPER_STATE.VIEWSTATE_NULL),!p.isObserver&&!(p.isSqueezedOut||p.isFload||p.isOperate||0==p.goldNum||p.isWaitBigBlind)){var g=l.getGameInfo().currRaise-p.showGold;if(h.NextSeat==p.serverSeat){p.goldNum>=g?!0:!1;0==s.preBtnPreOperation()&&(s.showPreBtnByType(!1),s.visShowCard(!1),1==l.getGameInfo().allInFlag||(0==h.CanRaise||p.goldNum<=g?0==h.CanRaise?p.goldNum<=g?s.disableQG(p.goldNum):s.disableQG(g):s.disableQG(p.goldNum):p.goldNum+p.showGold<=t.int64To32(h.MinRaise)?g>0?s.disableQGJ(p.goldNum+p.showGold,g,p.goldNum):s.disableQRX(p.goldNum,p.goldNum):g>0?s.disableQGJ(t.int64To32(h.MinRaise),g,p.goldNum):s.disableQRX(t.int64To32(h.MinRaise),p.goldNum),n.seatMeditor.changState(p.serverSeat,"")))}}}},n}(t.BaseSimpleCommand);a.AckfoldbetCommand=i,__reflect(i.prototype,"wpt.play.table.AckfoldbetCommand")}(a=e.table||(e.table={}))
}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=a.TableData.gameinfo,o=a.TableData.userData,r=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),s=r.seatMeditor,l=r.dealerMeditor,h=r.operMeditor,c=i.data;a.log.debug("玩家跟注",c.Seat);var u=o.getUserByName(o.currentName),p=o.getUserByServerseat(c.Seat);if(u&&p){var d=n.getGameInfo().maxPlayer;if(s.removeTime(),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BET),-1!=c.NextSeat){var m=s.serverSeatTouiSeat(c.NextSeat,u.serverSeat,d);o.getUserByUIseat(m);s.setOverTime(m,n.getGameInfo().actionTime)}var _=s.serverSeatTouiSeat(c.Seat,u.serverSeat,d),T=t.int64To32(c.Coin),g=t.int64To32(c.HandCoin),f=t.int64To32(c.MinRaise),y=t.int64To32(c.pool);if(p.goldNum=T,p.showGold=g,p.isOperate=!0,s.changGold(_,T),s.changState(_,a.TableConst.STATE_CALL),0==T&&s.changState(_,a.TableConst.STATE_ALLIN),l.setPool(y),n.getGameInfo().pool=y,n.getGameInfo().minRaise=f,n.getGameInfo().currRaise<g&&(n.getGameInfo().currRaise=g),s.setPlayGold(_,g),a.EffectManager.getInstance().goldMintion(g,_),c.Seat==u.serverSeat&&h.setViewState(a.TABLE_OPER_STATE.VIEWSTATE_NULL),!u.isObserver&&!(u.isSqueezedOut||u.isFload||u.isOperate||0==u.goldNum||u.isWaitBigBlind)){var b=n.getGameInfo().currRaise-u.showGold;c.NextSeat==u.serverSeat&&0==h.preBtnPreOperation()&&(h.showPreBtnByType(!1),h.visShowCard(!1),1==n.getGameInfo().allInFlag?h.showAllinBtnGroup(u.goldNum<=b):(0==c.CanRaise||u.goldNum<=b?0==c.CanRaise?u.goldNum<b?h.disableQG(u.goldNum):h.disableQG(n.getGameInfo().currRaise):h.disableQG(u.goldNum):u.goldNum+u.showGold<=f?b>0?h.disableQGJ(u.goldNum+u.showGold,b,u.goldNum):h.disableQRX(u.goldNum,u.goldNum):b>0?h.disableQGJ(f,b,u.goldNum):0==b&&n.getGameInfo().bigBlindSeat==u.serverSeat?h.disableQRJ(f,u.goldNum):h.disableQRX(f,u.goldNum),r.seatMeditor.changState(u.serverSeat,"")))}}},n}(t.BaseSimpleCommand);a.AckfollowbetCommand=i,__reflect(i.prototype,"wpt.play.table.AckfollowbetCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckhydResultCommand=a,__reflect(a.prototype,"wpt.play.table.AckhydResultCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckKickCommand=a,__reflect(a.prototype,"wpt.play.table.AckKickCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckPresentcoinsCommand=a,__reflect(a.prototype,"wpt.play.table.AckPresentcoinsCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckprivatechatCommand=a,__reflect(a.prototype,"wpt.play.table.AckprivatechatCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=n.seatMeditor,r=n.dealerMeditor,s=n.operMeditor,l=a.TableData.gameinfo,h=a.TableData.userData,c=i.data;a.log.debug("玩家加注",c.Seat);var u=h.getUserByName(h.currentName),p=h.getUserByServerseat(c.Seat);if(u&&p){o.removeTime();var d=l.getGameInfo().maxPlayer,m=o.serverSeatTouiSeat(c.Seat,u.serverSeat,d);if(-1!=c.NextSeat){var _=o.serverSeatTouiSeat(c.NextSeat,u.serverSeat,d);h.getUserByUIseat(_);o.setOverTime(_,l.getGameInfo().actionTime)}var T=t.int64To32(c.Coin),g=t.int64To32(c.HandCoin),f=t.int64To32(c.MinRaise),y=t.int64To32(c.pool);if(p.goldNum=T,p.showGold=g,p.isOperate=!0,o.changGold(m,T),r.setPool(y),l.getGameInfo().pool=y,l.getGameInfo().minRaise=f,a.EffectManager.getInstance().goldMintion(g,m),o.setPlayGold(m,g),c.Seat!=u.serverSeat&&(u.isOperate=!1),0!=l.getGameInfo().currRaise?0==T?(t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BET),o.changState(m,a.TableConst.STATE_ALLIN)):(t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_RAISE),o.changState(m,a.TableConst.STATE_RAISE)):0==T?(t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BET),o.changState(m,a.TableConst.STATE_ALLIN)):(t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BET),o.changState(m,a.TableConst.STATE_BET)),l.getGameInfo().currRaise=g,c.Seat==u.serverSeat&&s.setViewState(a.TABLE_OPER_STATE.VIEWSTATE_NULL),!u.isObserver&&!(u.isSqueezedOut||u.isFload||u.isOperate||0==u.goldNum||u.isWaitBigBlind)){s.clearCallCK(),s.clearCheckCK();var b=l.getGameInfo().currRaise-u.showGold;c.NextSeat==u.serverSeat?0==s.preBtnPreOperation()&&(s.showPreBtnByType(!1),s.visShowCard(!1),1==l.getGameInfo().allInFlag?s.showAllinBtnGroup(u.goldNum<=b):(0==c.CanRaise||u.goldNum<=b?0==c.CanRaise?u.goldNum<=l.getGameInfo().currRaise?s.disableQG(u.goldNum):s.disableQG(l.getGameInfo().currRaise):s.disableQG(u.goldNum):u.goldNum+u.showGold<=f?b>0?s.disableQGJ(u.goldNum+u.showGold,b,u.goldNum):s.disableQRX(u.goldNum,u.goldNum):b>0?s.disableQGJ(f,b,u.goldNum):s.disableQRX(f,u.goldNum),n.seatMeditor.changState(u.serverSeat,""))):s.judgePreBtnVisible()}}},n}(t.BaseSimpleCommand);a.AckraisebetCommand=i,__reflect(i.prototype,"wpt.play.table.AckraisebetCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){for(var n=a.TableData.userData,o=a.TableData.gameinfo,r=n.getUserByName(n.currentName),s=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),l=s.seatMeditor,h=i.data,c=o.getGameInfo().maxPlayer,u=0;u<h.HandCard.length/2;u++)if(o.getGameInfo().setHandCard(u,h.HandCard[2*u].value,h.HandCard[2*u].color,h.HandCard[2*u+1].value,h.HandCard[2*u+1].color),53!=h.HandCard[2*u].value){var p=l.serverSeatTouiSeat(u,r.serverSeat,c),d=n.getUserByServerseat(u);d&&(d.handCardStatus=52==h.HandCard[2*u].value?"back":"card");var m=l.cardIsCardBack(p,0);if((!d||d&&!d.isFload)&&(l.setHandCard(h.HandCard[2*u].value,h.HandCard[2*u].color,p,0,!0,!1),l.setHandCard(h.HandCard[2*u+1].value,h.HandCard[2*u+1].color,p,1,!0,!1),0!=p&&a.EffectManager.getInstance().showPokerToMasker([l.view.getPlayer(p).getCard(0),l.view.getPlayer(p).getCard(1)])),!r.isObserver&&r.serverSeat==u){var _=o.getGameInfo().myHandCard;2==_.length&&(l.setHandCard(_[0].value,_[0].color,p,0,!0,!1),l.setHandCard(_[1].value,_[1].color,p,1,!0,!1))}var T=-1!=o.getGameInfo().foldPlayerSeatArr.indexOf(u);m&&!T&&h.HandCard[2*u].value<52&&a.EffectManager.getInstance().cardMotion(p),T&&l.setFoldCard(p,!r.isObserver&&r.serverSeat==u)}},n}(t.BaseSimpleCommand);a.AckShowCardCommand=i,__reflect(i.prototype,"wpt.play.table.AckShowCardCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckShowPictrueCommand=a,__reflect(a.prototype,"wpt.play.table.AckShowPictrueCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=a.TableData.userData,r=a.TableData.gameinfo,s=a.TableData.friendModel,l=a.TableData.systemInfo,h=n.seatMeditor,c=o.getUserByName(o.currentName);if(c){var u=r.getGameInfo(),p=i.data;if(a.log.debug("玩家坐下",p.nSeatID,p.bForceBuy,p.Result,p.reason,p.MatchID),p.MatchID==u.mathId){var d=p.Result,m=p.reason;u.isIPLimit=!1;var _=u.maxPlayer,T=function(){var t=a.TableData.matchInfo.getMatch(),e=a.TableData.userData;t&&e&&!t.displaySimilarTable&&0!=e.getPlayerCountBuyInSuccess()||g()},g=function(){t.dispatch(new t.BaseEvent(a.TableEvent.EXITGAME,"true"))};if(1==d){if(p.RoleName==o.currentName)u.autoBuyChipCount=0,u.handBuyChipCount=0,u.lastChipRemain=u.maxChip,1==p.bForceBuy?(u.isForce=!0,u.forceMinChip=t.int64To32(p.nForceMinChip)):u.isForce=!1,c.serverSeat=p.nSeatID,c.uiSeat=0,c.isObserver=!1,c.ourgameId=p.sOurGameId,t.dispatch(new t.BaseEvent(a.TableEvent.UPDATE_OBSERVER_VIEW,!1)),u.isGraduTable||(a.TableData.isFastJoin?t.dispatch(new t.BaseEvent(a.TableEvent.SENDSBUYCHIP,{coin:u.minChip,auto:!1,tiyan:!1})):t.dispatch(new a.TableEvent(a.TableEvent.POPUP_BUYIN)));else{o.addUser(p.RoleName),u.sitdownPlayer.push(p.RoleName);var f=o.getUserByName(p.RoleName);f.serverSeat=p.nSeatID,f.uiSeat=h.serverSeatTouiSeat(p.nSeatID,c.serverSeat,_),f.isObserver=!1,f.manipulateState=0,f.nickName=p.sCFUserName,f.ourgameId=p.sOurGameId}h.addPlayerHeader(p.RoleName,h.serverSeatTouiSeat(p.nSeatID,c.serverSeat,_)),t.dispatch(new t.BaseEvent(a.TableEvent.GET_PLAYER_HEADER_IMAGE,{serverSeatArr:[p.nSeatID],roleNameArr:[p.RoleName]})),t.dispatch(new t.BaseEvent(a.TableEvent.PLAYER_SITDOWN,{matchID:p.MatchID,tableId:u.tableId})),h.changState(h.serverSeatTouiSeat(p.nSeatID,c.serverSeat,_),""),s.refreshPlayerList(),c.isObserver&&a.TableData.userData.getPlayerCountInSeat()>=u.maxPlayer&&"match"!=a.TableData.gameinfo.getGameInfo().currGameType&&n.operMeditor.setViewState(a.TABLE_OPER_STATE.VIEWSTATE_JOINSIMILARTABLE)}else if(p.RoleName==o.currentName){var y=t.DealMoneyUtil.getStrByComma;switch(m){case 2:t.getLang("no_mindragin",y(u.minChip*l.getsystemInfo().present_ChipToCoin)+a.TableData.coinNormalName);e.js.toBuyGold(e.js.BUY_GOLD_FROM_TABLE,r.getGameInfo().minChip*l.getsystemInfo().present_ChipToCoin);break;case 3:t.MessageDialog.showConfirmNotice(t.getLang("seat_error_beizhan")).setCallback(g);break;case 4:t.MessageDialog.showConfirmNotice(t.getLang("seat_error4")).setCallback(T);break;case 7:t.MessageDialog.showConfirmNotice(t.getLang("seat_error7",a.TableData.coinNormalName)).setCallback(T);break;case 8:t.MessageDialog.showConfirmNotice(t.getLang("seat_error8",a.TableData.coinNormalName,y(u.minCoin))).setCallback(T);break;case 9:t.MessageDialog.showConfirmNotice(t.getLang("seat_error9")).setCallback(T).setCallback(T);break;case 10:t.MessageDialog.showConfirmNotice(t.getLang("seat_error10")).setCallback(T);break;case 11:u.isIPLimit=!0,t.MessageDialog.showConfirmNotice(t.getLang("seat_error11")).setCallback(function(){g()});break;default:t.MessageDialog.showConfirmNotice(t.getLang("seat_error")).setCallback(T)}}else t.MessageDialog.showConfirmNotice(t.getLang("seat_error0"))}}},n}(t.BaseSimpleCommand);a.AcksitdownSeatCommand=i,__reflect(i.prototype,"wpt.play.table.AcksitdownSeatCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.AckUnblechatListCommand=a,__reflect(a.prototype,"wpt.play.table.AckUnblechatListCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return __extends(a,t),Object.defineProperty(a.prototype,"userXy",{get:function(){return e.TableData.userData},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"friendModel",{get:function(){return e.TableData.friendModel},enumerable:!0,configurable:!0}),a.prototype.execute=function(t){var a=t.data,i=a.userlist;this.friendModel.creater=a.sCreater,this.friendModel.updateuserVO();for(var n=0;n<i.length;n++){var o=i[n],r=new e.FriendUserVO;r.roleName=o.sRoleName,r.userGold="0",r.clientID=o.nClinetId,r.nIp=o.nIp,r.nickName=o.sCFUserName,this.friendModel.adduser(r);var s=this.userXy.getUserByName(o.sRoleName);s||(this.userXy.addUser(o.sRoleName),s=this.userXy.getUserByName(o.sRoleName)),s.nickName=o.sCFUserName}},a}(t.BaseSimpleCommand);e.AckUserListCommand=a,__reflect(a.prototype,"wpt.play.table.AckUserListCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=i.data,r=t.int64To32(o.SmallBlind),s=t.int64To32(o.BigBlind),l=t.getLang("blind_level_new",r,s);t.dispatch(new t.BaseEvent(a.TableEvent.RECIVE_DEALER_MSG,l));var h=a.TableData.gameinfo;h.getGameInfo().curLevelMaxBlind=s,h.getGameInfo().curLevelMinBlind=r,n.tableMeditor.updateBlindAnteInfo()},n}(t.BaseSimpleCommand);a.BlindChangeCommand=i,__reflect(i.prototype,"wpt.play.table.BlindChangeCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=a.TableData.gameinfo,o=a.TableData.userData,r=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),s=r.seatMeditor,l=r.dealerMeditor,h=i.data;if(h.matchid==n.getGameInfo().mathId){var c=o.getUserByName(o.currentName);if(null!=c){l.setPool(t.int64To32(h.pool)),n.getGameInfo().pool=t.int64To32(h.pool),n.getGameInfo().currRaise=t.int64To32(h.bigblind),n.getGameInfo().maxBlind=t.int64To32(h.bigblind),n.getGameInfo().minBlind=t.int64To32(h.smallblind);var u=a.TableData.maxSeat;h.hasNCurPanID&&"normal"==n.getGameInfo().currGameType&&r.tableMeditor.setMatchIDTxt(t.int64To32(h.nCurPanID));var p=0,d=0;for(p=0;p<h.coin.length;p++){var m=t.int64To32(h.coin[p]),_=o.getUserByServerseat(p);null!=_&&(_.goldNum=m,d<_.goldNum&&(d=_.goldNum));var T=s.serverSeatTouiSeat(p,c.serverSeat,u);s.changGold(T,m)}for(n.getGameInfo().tableMaxCoin=d,p=0;9>p;p++){var g=o.getUserByServerseat(p);g&&1!=g.manipulateState&&s.changState(p,"")}var f=s.serverSeatTouiSeat(h.banker,c.serverSeat,u);for(n.getGameInfo().smallBlindSeat=h.smallblindseat,n.getGameInfo().bigBlindSeat=h.bigblindseat,a.TableData.disMark=!0,l.setMark(f),r.tableMeditor.updateBlindAnteInfo(),s.changState(s.serverSeatTouiSeat(h.smallblindseat,c.serverSeat,u),a.TableConst.STATE_SMALLBLIND),s.changState(s.serverSeatTouiSeat(h.bigblindseat,c.serverSeat,u),a.TableConst.STATE_BIGBLIND),p=0;p<h.handcoin.length;p++){var y=t.int64To32(h.handcoin[p]);y>0&&(a.EffectManager.getInstance().goldMintion(y,s.serverSeatTouiSeat(p,c.serverSeat,u)),s.setPlayGold(s.serverSeatTouiSeat(p,c.serverSeat,u),y),p==c.serverSeat&&(c.showGold=y))}}}},n}(t.BaseSimpleCommand);a.BlindCoinCommand=i,__reflect(i.prototype,"wpt.play.table.BlindCoinCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.BossControlCommand=a,__reflect(a.prototype,"wpt.play.table.BossControlCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.BroadcastCommand=a,__reflect(a.prototype,"wpt.play.table.BroadcastCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.BroadcastGiftStateCommand=a,__reflect(a.prototype,"wpt.play.table.BroadcastGiftStateCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return __extends(i,a),i.prototype.execute=function(a){var i=e.TableData.userData,n=e.TableData.gameinfo,o=i.getUserByName(i.currentName).serverSeat,r=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"game_LeaveSeat");r.matchid=n.getGameInfo().mathId,r.tableid=n.getGameInfo().tableId,r.Seat=o,r.bLeave=0,e.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_LEAVESEAT(r)},i}(t.BaseSimpleCommand);e.BtnBackSeatCommand=a,__reflect(a.prototype,"wpt.play.table.BtnBackSeatCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=a.TableData.userData,o=a.TableData.gameinfo,r=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),s=n.getUserByName(n.currentName);if(s){r.operMeditor.visShowCard(!1);var l=i.data[1];if("1"==l){var h=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"game_ShowCard");h.matchid=o.getGameInfo().mathId,h.table=o.getGameInfo().tableId,h.Seat=s.serverSeat,h.bShow=parseInt(l),a.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_SHOWCARD(h)}else s.handCardStatus="back",r.seatMeditor.setHandCard(52,0,s.uiSeat,0,!0),r.seatMeditor.setHandCard(52,0,s.uiSeat,1,!0)}},n}(t.BaseSimpleCommand);a.BtnShowCardCommand=i,__reflect(i.prototype,"wpt.play.table.BtnShowCardCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=a.TableData.userData,o=a.TableData.gameinfo,r=n.getUserByName(n.currentName),s=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),l=s.seatMeditor,h=i.data;a.log.debug("分桌消息",h.RoleName+"被分桌了",null==n.getUserByName(h.RoleName)?"玩家不存在":"玩家存在",h);var c=o.getGameInfo().maxPlayer,u=l.serverSeatTouiSeat(h.Seat,r.serverSeat,c);if(a.log.debug("分桌消息@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  "+h.RoleName),h.RoleName==n.currentName)o.getGameInfo().isChangetable=!0,n.deleterAll(),l.hideAllPlayer(),l.initHandCard(),t.dispatch(new t.BaseEvent(a.TableEvent.PLAYER_SITDOWN,{matchID:h.Matchid,tableId:h.NewTableid,roleName:h.RoleName}));else{var p=n.getUserByUIseat(u);null!=p&&(p.uiSeat=p.uiSeat%9+9),n.addUser(h.RoleName);var d=n.getUserByName(h.RoleName);null!=d&&(d.serverSeat=h.Seat,d.roleName=h.RoleName,d.nickName=h.sCFUserName,d.ourgameId=h.sOurGameId,d.uiSeat=u),l.addPlayerHeader(h.RoleName,u),t.dispatch(new t.BaseEvent(a.TableEvent.GET_PLAYER_HEADER_IMAGE,{serverSeatArr:[h.Seat],roleNameArr:[h.RoleName]}))}},n}(t.BaseSimpleCommand);a.ChangeTableCommand=i,__reflect(i.prototype,"wpt.play.table.ChangeTableCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=i.data;if(n){var r=!0;o&&o.hasOwnProperty("showHall")&&0==o.showHall&&(r=!1);var s=a.TableData.gameinfo,l=a.TableData.userData,h=(a.TableData.matchInfo,n.dealerMeditor),c=n.seatMeditor;if("match"==s.getGameInfo().currGameType){var u={};u.matchId=s.getGameInfo().mathId;var p=l.getUserByName(l.currentName);u.goldNum=0,p&&(u.goldNum=p.goldNum,s.getGameInfo().gameStatus!=a.GameInfoVO.GAME_IS_START||p.isObserver||(0==a.TableData.isSendRank?u.goldNum=10:u.goldNum=0)),s.getGameInfo().isGetUserGoldInfo||(u.goldNum=10),t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.SEND_SIGN_MATCH_CHIP,u))}a.TableData.curMatchProcess=-1,l.clear(),h.initView(),c.initView(),n.tableMeditor.initTableView(),s.clear(),n.hideBuyIn(),c.changState(0,"",!1),a.EffectManager.getInstance().clearResultTestEffect(),n.tableMeditor.updateSitoutState(!1),n.operMeditor.setStateNull(),-1!=a.TableData.TourModeOverMovieDelayTime&&(egret.clearTimeout(a.TableData.TourModeOverMovieDelayTime),a.TableData.TourModeOverMovieDelayTime=-1)}},n}(t.BaseSimpleCommand);a.ClearGameCommand=i,__reflect(i.prototype,"wpt.play.table.ClearGameCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return __extends(i,a),i.prototype.execute=function(a){var i=e.TableData.gameinfo,n=e.TableData.userData,o=a.data,r=i.getGameInfo();r.needAutoBuChip=o.hasOwnProperty("autoChip")&&1==o.autoChip;var s=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"OGReqSitdownSeat");s.MatchID=r.mathId,s.RoleName=n.currentName,s.nSeatID=(i.getGameInfo().standUpServerSeat+o.seat)%i.getGameInfo().maxPlayer,s.nField=r.nField,s.isFilterCgzLimit=!0,i.getGameInfo().standUpServerSeat=0,e.TableData.tableSocketSerivce.tableMessageProcessor.SITDOWN(s)},i}(t.BaseSimpleCommand);e.ClickSeatCommand=a,__reflect(a.prototype,"wpt.play.table.ClickSeatCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return __extends(i,a),i.prototype.execute=function(a){var i=e.TableData.gameinfo,n=i.getGameInfo().currGameType;if(!t.isempty(a.data)){var o=a.data,r=e.TableData.exitGameDoSomething;if(null!=r&&r.hasOwnProperty("confirm")&&1==r.confirm,e.TableData.exitGameType=null,e.TableData.exitGameBody=null,e.TableData.sitout_handCur=!1,r&&r.hasOwnProperty("type")?e.TableData.exitGameDoSomething={type:r.type,data:r.data}:e.TableData.exitGameDoSomething=null,"match"==n)switch(o){case"true":this.leaveMatch();break;case"false":this.matchXiaoMei();break;default:this.matchXiaoMei()}else if("normal"==n)switch(o){case"true":this.leaveMatch();break;case"false":this.normalXiaoMei();break;default:this.normalXiaoMei()}else"help"==n&&this.sendClearGame()}},i.prototype.normalXiaoMei=function(){var a=this,i=e.TableData.userData,n=e.TableData.gameinfo,o=i.getUserByName(i.currentName);if(!o)return void this.sendClearGame();var r=n.getGameInfo().gameStatus==e.GameInfoVO.GAME_IS_START;if(o.isObserver||"card"!=o.handCardStatus||!r||n.getGameInfo().isGraduTable){var s=!0;if(n.isTiYan_CGZ);if(n.getGameInfo().isGraduTable){var l=!0;if(o.isObserver)l=!1;else if(null==o.handCardStatus&&0==o.manipulateState)l=!1;else{var h=i.getPlayerCountInSeat(!0);null==o.handCardStatus&&1==o.manipulateState&&(h+=1);var c=h<=n.getGameInfo().nGradu_MinPlayer;if(c)l=!1;else{var u=o.goldNum>=n.getGameInfo().nGradu_Val||!r&&0==o.goldNum;l=u?!1:!0}}l&&(s=!1)}s&&this.leaveMatch()}else t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,t.getLang("leave_fold_notice")).setCallback(function(){a.leaveMatch()})},i.prototype.matchXiaoMei=function(){var a=this,i=(e.TableData.gameinfo,e.TableData.userData),n=i.getUserByName(i.currentName);!n||n.isObserver||n.goldNum<=0?this.leaveMatch():t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,t.getLang("leave_match_leave_notice")).setCallback(function(){a.leaveMatch()},function(){e.TableData.leaveToLobbyMatchInfo=!1})},i.prototype.sendClearGame=function(){e.TableData.exitGameDoSomething&&("omahaEvent"==e.TableData.exitGameDoSomething.type,e.TableData.exitGameDoSomething=null),t.dispatch(new t.BaseEvent(e.TableEvent.CLEARGAME))},i.prototype.leaveMatch=function(){t.dispatch(new t.BaseEvent(e.TableEvent.LEAVE_MATCH)),this.sendClearGame(),setTimeout(function(){t.dispatch(new t.BaseEvent(e.TableEvent.EXITGAME_OK_SWITCH_LOBBY))},150)},i}(t.BaseSimpleCommand);e.ExitGameCommand=a,__reflect(a.prototype,"wpt.play.table.ExitGameCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.FapaiCommand=a,__reflect(a.prototype,"wpt.play.table.FapaiCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.FullNewActNtfActStateCommand=a,__reflect(a.prototype,"wpt.play.table.FullNewActNtfActStateCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.FullNewActNtfBogCommand=a,__reflect(a.prototype,"wpt.play.table.FullNewActNtfBogCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.FullNewActNtfCurMatchActStateCommand=a,__reflect(a.prototype,"wpt.play.table.FullNewActNtfCurMatchActStateCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.FullNewActNtfProgressCommand=a,__reflect(a.prototype,"wpt.play.table.FullNewActNtfProgressCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=null!==i&&i.apply(this,arguments)||this;return t._masterNum=0,t._getExpScore=0,t.curType=1,t}return __extends(n,i),n.prototype.execute=function(i){this.tableState=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain);var n=this.tableState.seatMeditor,o=(this.tableState.dealerMeditor,this.tableState.operMeditor),r=a.TableData.userData,s=a.TableData.gameinfo,l=a.TableData.matchInfo,h=a.TableData.friendModel,c=i.data,u=a.TableData.gameinfo;if(a.log.debug("牌局结束，开始结算。",t.readMultiByte(c.Matchid),u.getGameInfo().mathId),t.readMultiByte(c.Matchid)==u.getGameInfo().mathId&&(a.TableData.curMatchProcess=4,a.TableData.isInGameView)){var p=r.getUserByName(r.currentName);if(this.currentUser=p,p){var d=s.getGameInfo().maxPlayer;p.showGold=0,s.getGameInfo().currRaise=0,s.getGameInfo().pool=0,s.getGameInfo().gameStatus=a.GameInfoVO.GAME_IS_FINISH,n.removeTime();var m=0,_=0;for(n.clearAllPlayerGold(),n.gameOverClearState(),m=0,_=c.bShowCard.length;_>m;m++)if(s.getGameInfo().setHandCard(m,c.handcard[2*m].value,c.handcard[2*m].color,c.handcard[2*m+1].value,c.handcard[2*m+1].color),53!=c.handcard[2*m].value){var T=n.serverSeatTouiSeat(m,p.serverSeat,d),g=r.getUserByServerseat(m);if(g&&(g.handCardStatus=52==c.handcard[2*m].value?"back":"card"),1==c.bShowCard[m]){var f=n.cardIsCardBack(T,0);n.setHandCard(c.handcard[2*m].value,c.handcard[2*m].color,T,0),n.setHandCard(c.handcard[2*m+1].value,c.handcard[2*m+1].color,T,1),f&&a.EffectManager.getInstance().cardMotion(T)}if(!p.isObserver&&p.serverSeat==m){var y=s.getGameInfo().myHandCard;2==y.length&&(n.setHandCard(y[0].value,y[0].color,T,0),n.setHandCard(y[1].value,y[1].color,T,1))}var b=-1!=s.getGameInfo().foldPlayerSeatArr.indexOf(m);b&&n.setFoldCard(T,!p.isObserver&&p.serverSeat==m)}var E=c.nGetMttNum[this.currentUser.serverSeat];!this.currentUser.isObserver&&E&&(this._masterNum=t.int64To32(E));var C=c.nGetExpScore[this.currentUser.serverSeat];if(this.masterData=r.userMasterInfo,this.masterType(),!this.currentUser.isObserver&&C){this._getExpScore=t.int64To32(C);var S=null==this.titleConfig?this.masterData.currentTitleExperience:this.titleConfig.nMinExpScore.toNumber(),v=null==this.titleConfig?0:this.titleConfig.nTaskExpMonth.toNumber();(2==this.curType&&this.masterData.currentTitleExperience>=S||3==this.curType&&this.masterData.currentMissionExperience>=v)&&(this._getExpScore=0)}var I=c.HandCoin,D=c.WinCoinInfo;if(a.TableData.winPlayerArr=this.clone(D),a.TableData.testResult_tweenFuncArr=[],a.TableData.testResult_tweenCoreArr=[],a.EffectManager.getInstance().showCardAndWin(D,this.currentUser),p.isObserver||this.tableState.operMeditor.getBackSeatState()||!a.TableData.sitout_handCur||(a.log.debug("~~~~~~~~~~~~~~~~~~发送下一局旁观"),this.sendNext(p.serverSeat)),o.showPreBtnByType(!1),1==c.bCanShowCard[p.serverSeat]){if(p.isObserver)return;o.visShowCard(!0)}var A=!1,O=0;for(a.TableData.needRebuyRoleNames=[],m=0;m<I.length;m++){var M=n.serverSeatTouiSeat(m,p.serverSeat,d),P=t.int64To32(I[m]);n.changGold(M,P);var R=r.getUserByServerseat(m);null!=R&&(R.goldNum=P,R.isObserver||(O<R.goldNum&&(O=R.goldNum),0==R.goldNum&&(A=!0,this._rebuyName=R.roleName,this._rebuyNickName=r.getUserByName(this._rebuyName).nickName,a.TableData.needRebuyRoleNames.push(this._rebuyNickName)),R.roleName==p.roleName&&("match"==s.getGameInfo().currGameType?this.rebuyAndAddon(R):"normal"==s.getGameInfo().currGameType&&(a.TableData.OGReqBuyChip?(t.dispatch(new t.BaseEvent(a.TableEvent.SENDSBUYCHIP,a.TableData.OGReqBuyChip)),a.TableData.OGReqBuyChip=null):(s.getGameInfo().handBuyChipCount>0||a.TableData.resetBuy)&&this.autoBuqiAndDairu()))))}s.getGameInfo().tableMaxCoin=O;var w=l.getMatch();"match"==s.getGameInfo().currGameType&&w.ReBuy&&s.getGameInfo().blindClassLevel<=w.ReBuyBlindClass&&A&&r.currentName!=this._rebuyName&&(this._isRebuyTimer=!0,this.tableState.tableMeditor.setMatchReadyTime("rebuy_otherplayer_notice",a.TableData.matchInfo.getMatch().RebuyTimeout)),h.refreshPlayerList(),a.TableData.clear=!1,a.TableData.disMark=!1;for(var L=0;9>L;L++)n.changState(L,"")}}},n.prototype.masterType=function(){},n.prototype.isHandScuess=function(t){if(null!=t&&!(t.length<2)){var e=0,i=a.CardUtil.getCardValueString(t[0].value),n=a.CardUtil.getCardValueString(t[1].value),o=(a.TableData.userData,a.TableData.friendModel,a.TableData.gameinfo);"A"==i&&"A"==n?e=21:"A"==i&&"K"==n||"K"==i&&"A"==n?e=22:"K"==i&&"K"==n?e=23:"Q"==i&&"Q"==n?e=24:"J"==i&&"J"==n?e=25:"10"==i&&"10"==n?e=26:"6"==i&&"6"==n?e=27:"8"==i&&"8"==n?e=28:"2"==i&&"10"==n||"10"==i&&"2"==n?e=29:"2"==i&&"7"==n||"7"==i&&"2"==n?e=30:"2"==i&&"8"==n||"8"==i&&"2"==n||"2"==i&&"9"==n||"9"==i&&"2"==n||("3"==i&&"8"==n||"8"==i&&"3"==n?e=31:"2"==i&&"2"==n&&(e=32)),e>0&&"match"!=o.getGameInfo().currGameType}},n.prototype.sendNext=function(e){var i=a.TableData.gameinfo,n=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"game_LeaveSeat");n.matchid=i.getGameInfo().mathId,n.tableid=i.getGameInfo().tableId,n.Seat=e,n.bLeave=1,a.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_LEAVESEAT(n),a.TableData.isSitOutLeave=!0
},n.prototype.clone=function(t){for(var e=new Array,a=0;a<t.length;a++)e.push(t[a].poolIndex);return e},n.prototype.autoBuqiAndDairu=function(){var e,i=a.TableData.userData,n=a.TableData.gameinfo,o=a.TableData.systemInfo,r=i.getUserByName(i.currentName),s=n.getGameInfo().lastChipRemain,l=n.getGameInfo().myCoin/o.getsystemInfo().present_ChipToCoin,h=r.goldNum<0?0:r.goldNum;t.DealMoneyUtil.getStrByComma;if(s>0){if(a.TableData.resetBuy&&r.goldNum<s)return void(s>l+h?l+h<n.getGameInfo().minChip?(e=t.getLang("nomoney_gostore"),t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,e)):t.dispatch(new t.BaseEvent(a.TableEvent.SENDSBUYCHIP,{coin:l,auto:!0,tiyan:!1})):s>h&&t.dispatch(new t.BaseEvent(a.TableEvent.SENDSBUYCHIP,{coin:s-h,auto:!0,tiyan:!1})));if(a.TableData.autoBuqi||a.TableData.autoDairu){var c=50;n.autoBuQiConfig&&n.autoBuQiConfig[n.getGameInfo().templateId]&&(c=n.autoBuQiConfig[n.getGameInfo().templateId]);var u=Math.round(s*(c/100));if(a.TableData.autoBuqi&&r.goldNum<u||a.TableData.autoDairu&&r.goldNum<=0)if(l+h<n.getGameInfo().minChip)e=t.getLang("nomoney_gostore"),t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,e);else{var p=s-h>l?l:s-h;p>0&&t.dispatch(new t.BaseEvent(a.TableEvent.SENDSBUYCHIP,{coin:p,auto:!0,tiyan:!1}))}}}},n.prototype.rebuyAndAddon=function(e){var i=a.TableData.gameinfo,n=a.TableData.matchInfo,o=n.getMatch();if(null!=o){var r=(a.TableData.autoAddon,a.TableData.autoReBuy);if(o.ReBuy&&o.ReBuycount>0&&o.ReBuyBlindClass>=i.getGameInfo().blindClassLevel)if(0==e.goldNum)if(o.ReBuyValue>i.getGameInfo().myCoin&&0==o.RebuyUseTicket)t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,t.getLang("rebuy_error_nomoney"));else if(1==o.RebuyUseTicket,r){var s=0;s=i.getGameInfo().myTicketsNum>0?2:1,this.tableState.tableMeditor.setRebuyAddonRenterData(1,i.getGameInfo(),o,!0)}else this.tableState.tableMeditor.setRebuyAddonRenterData(1,i.getGameInfo(),o,!1);else o.ReBuyLimitValue>=e.goldNum&&e.goldNum>0&&this.tableState.operMeditor.disableAddOnButton(!1)}},n.prototype.updateMasterInfo=function(){},n.prototype.destory=function(){i.prototype.destory.call(this),this._isRebuyTimer&&this.tableState.tableMeditor.visMatchNotice(!1),this._isRebuyTimer=!1},n}(t.BaseSimpleCommand);a.GameResultCommand=i,__reflect(i.prototype,"wpt.play.table.GameResultCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=i.data,o=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),r=a.TableData.gameinfo;r.getGameInfo().maxChip=t.int64To32(n.MaxChip),r.getGameInfo().minChip=t.int64To32(n.MinChip),r.getGameInfo().excessEnable=n.bSuperBuy,r.getGameInfo().superChip=t.int64To32(n.SuperChip),r.getGameInfo().serviceCharge=Number(n.ServiceCharge/1e3),r.getGameInfo().tableMaxCoin=t.int64To32(n.TableMaxCoin),r.getGameInfo().nOutMode=n.nOutMode,r.getGameInfo().nOutCount=n.nOutCount,r.getGameInfo().nCGZBeInitBuyChip=0!=n.nCGZBeInitBuyChip?1:0,r.getGameInfo().nCGZBeStandUp=0!=n.nCGZBeStandUp?1:0,r.getGameInfo().nCGZBeSampRaise=0!=n.nCGZBeSampRaise?1:0;var s=a.TableData.userData,l=s.getUserByName(s.currentName);o.operMeditor.addResetBuyIn(1==r.getGameInfo().nCGZBeInitBuyChip&&!l.isObserver),1==r.getGameInfo().nCGZBeStandUp&&!l.isObserver&&!r.isTiYan_CGZ,r.getGameInfo().nCGZSampRaiseBet.length=0;for(var h in n.nCGZSampRaiseBet)r.getGameInfo().nCGZSampRaiseBet.push(t.int64To32(h));r.getGameInfo().nCGZSampRaiseBet.sort(function(t,e){return t>e?1:-1});var c;1==r.getGameInfo().nOutMode?c=t.getLang("miss_bb",r.getGameInfo().nOutCount):2==r.getGameInfo().nOutMode&&(c=t.getLang("miss_game",r.getGameInfo().nOutCount)),l&&!l.isSqueezedOut&&l.goldNum>0&&0==r.getGameInfo().lastChipRemain&&0==r.getGameInfo().handBuyChipCount&&(r.getGameInfo().lastChipRemain=r.getGameInfo().minChip,r.getGameInfo().handBuyChipCount=1)},n}(t.BaseSimpleCommand);a.GameRuleCommand=i,__reflect(i.prototype,"wpt.play.table.GameRuleCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.execute=function(i){var n=(a.TableData.userData,a.TableData.gameinfo);this.tableState=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain);var o=this.tableState.seatMeditor,r=i.data;switch(n.getGameInfo().currGameType=r,a.TableData.resetBuy=!1,a.TableData.autoAddon=!1,a.TableData.autoReBuy=!1,a.TableData.switchTableNextHandle=!1,o.hideAllPlayer(),o.setGameArea(n.getGameInfo().fieldType),this.tableState.tableMeditor.changeStateByGameType(),r){case"match":this.match();break;case"normal":this.normal();break;case"help":this.help()}this.initUI(n.getGameInfo().maxPlayer)},n.prototype.normal=function(){},n.prototype.match=function(){},n.prototype.help=function(){},n.prototype.initUI=function(t){var e=a.TableData.gameinfo;this.tableState.seatMeditor.setSeatMax(e.getGameInfo().maxPlayer)},n.prototype.updatePoint=function(t){},n}(t.BaseSimpleCommand);a.GameTypeCommand=i,__reflect(i.prototype,"wpt.play.table.GameTypeCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.GetAwardCommand=a,__reflect(a.prototype,"wpt.play.table.GetAwardCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),Object.defineProperty(n.prototype,"tableState",{get:function(){return t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain)},enumerable:!0,configurable:!0}),n.prototype.execute=function(t){for(var i=a.TableData.userData,n=t.data.serverSeatArr.slice(),o=t.data.roleNameArr.slice(),r=[],s=0,l=o.length;l>s;s++){var h=o[s],c=i.getUserByName(h);c&&c.ourgameId?r.push(c.ourgameId):r.push(h)}e.HeaderImageManager.instance.getHeaderImages(o,r,this.userHeaderGetted.bind(this),[n,o])},n.prototype.userHeaderGetted=function(t,e,i){var n,o=a.TableData.systemInfo,r=(a.TableData.userData,0),s=t.length;if(104==o.getsystemInfo().channelID||2104==o.getsystemInfo().channelID){n=[];var l=[],h=[];for(r=0;s>r;r++){var c=t[r];n.push(c.image),c.other?(l.push(c.other.verified),h.push(c.other.verifiedType)):(l.push(!1),h.push(-1))}this.tableState.seatMeditor&&this.tableState.seatMeditor.updateHeaderImage(e,i,n,l,h)}else{for(n=[],r=0;s>r;r++)t[r].image&&RES.hasRes(t[r].image+"_json")?n.push(t[r].image):n.push(a.TableData.getRandomRoleIDSkin(t[r].roleName));this.tableState.seatMeditor&&this.tableState.seatMeditor.updateHeaderImage(e,i,n)}},n.prototype.destory=function(){i.prototype.destory.call(this)},n}(t.BaseSimpleCommand);a.GetPlayerHeaderImageCommand=i,__reflect(i.prototype,"wpt.play.table.GetPlayerHeaderImageCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=n.seatMeditor,r=n.dealerMeditor,s=n.operMeditor,l=a.TableData.userData,h=a.TableData.gameinfo,c=i.data;if(c.Matchid==h.getGameInfo().mathId&&o){a.log.debug("牌局开始","下一个操作玩家是："+c.NextUser),a.TableData.needRebuyRoleNames=[],a.TableData.curMatchProcess=0,r.readyNewGame(),s.updateOperaView(),s.updateRebuyAddonState(),s.updateFinalAddonView(),a.EffectManager.getInstance().clearResultTestEffect(),a.TableData.clear=!0,h.getGameInfo().isClickOpenInsInGame=!1;for(var u in l.allUser){var p=l.allUser[u];p.isFload=!1,p.isOperate=!1,p.handCardStatus=null}var d=h.getGameInfo().maxPlayer;h.getGameInfo().isChangetable=!1,h.getGameInfo().actionTime=c.ActionTime,h.getGameInfo().delayTime=c.DelayTime,h.getGameInfo().gameStatus=a.GameInfoVO.GAME_IS_START,l.gameCount++,l.firstMatchID||1!=l.gameCount||(l.firstMatchID=c.Matchid),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_SEND_CARD),r.setSecondPool(null),n.tableMeditor.visMatchNotice(!1),n.tableMeditor.updateBlindAnteInfo(),h.getGameInfo().hasPreCoin=!1,h.getGameInfo().isNtfAddOnTime=!1;var m=l.getUserByName(l.currentName);if(m){o.removeTime();var _=o.serverSeatTouiSeat(c.NextUser,m.serverSeat,d),T=l.getUserByUIseat(_);r.initPublicCards(),o.initHandCard(),o.setOverTime(_,h.getGameInfo().actionTime),T&&0==T.manipulateState&&o.changState(_,"",!1),h.getGameInfo().foldPlayerSeatArr=[],h.getGameInfo().handCard=[],h.getGameInfo().myHandCard=[],h.getGameInfo().publicCard=[],h.getGameInfo().minRaise=2*h.getGameInfo().currRaise;for(var g=c.HandCard,f=[],y=0;y<g.length/2;y++){var b=g[2*y].value,E=g[2*y].color,C=g[2*y+1].value,S=g[2*y+1].color,v=o.serverSeatTouiSeat(y,m.serverSeat,d);if(h.getGameInfo().setHandCard(y,b,E,C,S),53!=g[2*y].value){var I=l.getUserByServerseat(y);I&&(I.handCardStatus=52==b?"back":"card"),0==m.isObserver?(o.setHandCard(b,E,v,0,y==m.serverSeat),o.setHandCard(C,S,v,1,y==m.serverSeat)):(o.setHandCard(b,E,v,0,!1),o.setHandCard(C,S,v,1,!1)),f.push(v)}if(m.serverSeat==y){"back"==m.handCardStatus&&(m.isSqueezedOut=!0),"card"==m.handCardStatus&&(m.isWaitBigBlind=!1);var D=h.getGameInfo().handCard[y];h.getGameInfo().setMyHandCard(D[0].value,D[0].color,D[1].value,D[1].color)}}if(a.EffectManager.getInstance().dealCards(f),m.isObserver||m.isSqueezedOut||0!=m.manipulateState||"normal"!=h.getGameInfo().currGameType||(null!=m.handCardStatus?(s.setViewState(a.TABLE_OPER_STATE.VIEWSTATE_NULL),h.isTiYan_CGZ):"normal"==h.getGameInfo().currGameType&&s.visWaitBig(m.isWaitBigBlind)),!m.isObserver&&!m.isSqueezedOut&&0!=m.goldNum&&!m.isWaitBigBlind){var A=h.getGameInfo().currRaise-m.showGold,O=!m.isObserver&&!m.isSqueezedOut&&null!=m.handCardStatus;if(1==a.TableData.gameinfo.getGameInfo().nCGZBeInitBuyChip&&t.dispatch(new t.BaseEvent(a.TableEvent.SEND_RESET_BUYIN)),O)if("normal"==h.getGameInfo().currGameType)s.visAutoBuAndDai(!0);else{var M=a.TableData.matchInfo;M.getMatch();s.visAutoBuAndDai(!1)}else s.visAutoBuAndDai(!1);if(s.disableAddOnButton(!1),c.NextUser==m.serverSeat)if(n.seatMeditor.changState(m.serverSeat,""),1==h.getGameInfo().allInFlag)s.showAllinBtnGroup(m.goldNum<=A);else if(m.goldNum<=A)s.disableQG(m.goldNum);else if(m.goldNum<=A)s.disableQGJ(m.goldNum+m.showGold,A,m.goldNum);else{if(0==A)return void s.disableQRX(2*h.getGameInfo().currRaise,m.goldNum);m.goldNum+m.showGold>=2*h.getGameInfo().currRaise?s.disableQGJ(2*h.getGameInfo().currRaise,A,m.goldNum):s.disableQGJ(m.goldNum+m.showGold,A,m.goldNum)}else s.judgePreBtnVisible(),s.clearPreBtnSelectedState()}}}},n}(t.BaseSimpleCommand);a.InitCardCommand=i,__reflect(i.prototype,"wpt.play.table.InitCardCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.INSNtfInsInfoEnterMatchCommand=a,__reflect(a.prototype,"wpt.play.table.INSNtfInsInfoEnterMatchCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return __extends(a,t),a.prototype.execute=function(t){},a.prototype.faultHandler=function(t){e.log.debug(t.type)},a}(t.BaseSimpleCommand);a.url="http://hyapp.gfs.lianzhong.com/pw/Common/CoEdition/SinaWS.asmx",e.InviteFrindesCommand=a,__reflect(a.prototype,"wpt.play.table.InviteFrindesCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.JSSAckChangeBuyInsSchemeCommand=a,__reflect(a.prototype,"wpt.play.table.JSSAckChangeBuyInsSchemeCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.JSSAckGetBuyInsSchemeCommand=a,__reflect(a.prototype,"wpt.play.table.JSSAckGetBuyInsSchemeCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.JssActMessageCommand=a,__reflect(a.prototype,"wpt.play.table.JssActMessageCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.execute=function(i){var n=(t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),a.TableData.gameinfo),o=a.TableData.userData,r=o.getUserByName(o.currentName);if(r){var s=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"game_LeaveMatch");s.Matchid=n.getGameInfo().mathId,s.Tableid=0,s.Seat=r.serverSeat,0==o.getUserByName(o.currentName).goldNum||o.getUserByName(o.currentName).isStandUser,a.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_LEAVEGAME(s),a.log.debug("send leave: "+r.serverSeat)}},n}(t.BaseSimpleCommand);a.LeaveMatchCommand=i,__reflect(i.prototype,"wpt.play.table.LeaveMatchCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=a.TableData.gameinfo,o=a.TableData.userData,r=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),s=r.seatMeditor,l=r.operMeditor,h=o.getUserByName(o.currentName);if(h){var c=i.data;a.log.debug("玩家离座",c.Seat,c.bLeave);var u=o.getUserByServerseat(c.Seat);if(1==c.bLeave?u&&(u.manipulateState=1,u.serverSeat==h.serverSeat&&r.operMeditor.setViewState(a.TABLE_OPER_STATE.VIEWSTATE_DEALMEIN),s.changState(u.uiSeat,a.TableConst.STATE_SETTINGOUT)):u&&(u.manipulateState=0,s.changState(u.uiSeat,"",!1),r.tableMeditor.updateSitoutState(!1)),c.Seat==h.serverSeat&&!h.isObserver&&!h.isSqueezedOut&&0==c.bLeave){l.visBackSeat(!1);var p=n.getGameInfo().currRaise;h.showGold;if("normal"==n.getGameInfo().currGameType&&(h.isWaitBigBlind=!1),0>=p)return;if(h.isFload)return;if(h.isOperate)return;l.judgePreBtnVisible()}}},n}(t.BaseSimpleCommand);a.LeaveSeatCommand=i,__reflect(i.prototype,"wpt.play.table.LeaveSeatCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function o(){return null!==i&&i.apply(this,arguments)||this}return __extends(o,i),o.prototype.execute=function(i){var o=a.TableData.userData,r=a.TableData.gameinfo,s=a.TableData.friendModel,l=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),h=l.seatMeditor,c=o.getUserByName(o.currentName);if(c){var u=i.data,p=r.getGameInfo().maxPlayer;a.log.debug("离开牌桌",u.rolename+" seat:"+u.seat);var d=c.goldNum,m=h.serverSeatTouiSeat(u.seat,c.serverSeat,p),_=o.getUserByName(u.rolename),T=o.getUserByUIseat(m),g=(t.DealMoneyUtil.getStrByComma,function(){l.operMeditor.clear(),null!=T&&m>=0&&h.hidePlayer(m),r.getGameInfo().standUpServerSeat=u.seat,o.getUserByName(o.currentName).goldNum>0&&(r.getGameInfo().myCoin+=d)});null!=_&&(null!=T&&T.roleName==u.rolename&&m>=0&&h.hidePlayer(m),m>=0&&(_.uiSeat=_.uiSeat%9+9),_.goldNum=0,h.changGold(m,0),_.isObserver=!0),s.refreshPlayerList();if(u.rolename!=o.currentName)c.isObserver&&"normal"==r.getGameInfo().currGameType;else if(r.getGameInfo().isDifferentChip&&0==o.getUserByName(o.currentName).goldNum)g(),"normal"==r.getGameInfo().currGameType&&h.showSeatOnNoPlayer(p);else{if("normal"==r.getGameInfo().currGameType){var f=!1;u.reason==n.quit_mormal?f=!0:u.reason==n.quit_friendKick?t.dispatch(new t.BaseEvent(a.TableEvent.EXITGAME,"true")):u.reason==n.quit_adjustTable||(u.reason==n.quit_friendTableDelete?t.MessageDialog.showConfirmNotice(t.getLang("room_bedel")).setCallback(function(){t.dispatch(new t.BaseEvent(a.TableEvent.EXITGAME,"true"))}):u.reason==n.quit_TyCGZOutTime&&(f=!0)),f&&(t.MessageDialog.showConfirmNotice(t.getLang("leave_recyle_seat_change")).setCallback(function(){t.dispatch(new t.BaseEvent(a.TableEvent.EXITGAME,"true"))}),r.getGameInfo().standUpServerSeat=u.seat,h.showSeatOnNoPlayer(p))}m>=0&&(c.uiSeat=c.uiSeat%9+9)}c&&c.isObserver&&a.TableData.userData.getPlayerCountInSeat()<a.TableData.gameinfo.getGameInfo().maxPlayer&&"match"!=a.TableData.gameinfo.getGameInfo().currGameType&&l.operMeditor.clearJoinSimilarState()}},o}(t.BaseSimpleCommand);a.LeaveTableCommand=i,__reflect(i.prototype,"wpt.play.table.LeaveTableCommand");var n=function(){function t(){}return t}();n.quit_mormal=0,n.quit_friendKick=1,n.quit_adjustTable=2,n.quit_friendTableDelete=3,n.quit_TyCGZOutTime=4,a.Reason=n,__reflect(n.prototype,"wpt.play.table.Reason")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.LuckyCardMessageCommand=a,__reflect(a.prototype,"wpt.play.table.LuckyCardMessageCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){a.log.debug("MathChipCommand");var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=i.data;n.tableMeditor.updateMatchInfoChips(t.int64To32(o.MaxChip),t.int64To32(o.MinChip),t.int64To32(o.AveChip))},n}(t.BaseSimpleCommand);a.MathChipCommand=i,__reflect(i.prototype,"wpt.play.table.MathChipCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=a.TableData.gameinfo,r=i.data;o.getGameInfo().maxChip=t.int64To32(r.nCGZ_MaxChip),o.getGameInfo().minChip=t.int64To32(r.nCGZ_MinChip),o.getGameInfo().maxBlind=t.int64To32(r.nBigBlind),o.getGameInfo().minBlind=t.int64To32(r.nSmallBlind),n.tableMeditor.updateBlindAnteInfo()},n}(t.BaseSimpleCommand);a.ModifyCommand=i,__reflect(i.prototype,"wpt.play.table.ModifyCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=a.TableData.userData,r=a.TableData.gameinfo,s=i.data;t.DealMoneyUtil.getStrByComma;s.RoleName==o.currentName&&(r.isTiYan_CGZ||a.TableData.autoBuqi||a.TableData.autoDairu||a.TableData.resetBuy||n.buyinPanel.show())},n}(t.BaseSimpleCommand);a.NeetBugChipCommand=i,__reflect(i.prototype,"wpt.play.table.NeetBugChipCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=a.TableData.gameinfo,r=(a.TableData.matchInfo,i.data);o.getGameInfo().blindClassLevel=r.BlindClass,n.tableMeditor.updateMatchInfoeNextBlindsTimes(r.NextBlindTime,t.int64To32(r.NextBigBlind),t.int64To32(r.NextSmallBlind)),n.tableMeditor.updateNextAnte();var s="";s=r.RestTime>1?t.getLang("next_rest",r.RestTime):t.getLang("next_rest1",r.RestTime),n.tableMeditor.updateMatchInfoRestTime(s),n.operMeditor.updateRebuyAddonState(),n.operMeditor.updateRenterState(),a.log.debug("当前盲注级别:"+o.getGameInfo().blindClassLevel)},n}(t.BaseSimpleCommand);a.NextBlindInfoCommand=i,__reflect(i.prototype,"wpt.play.table.NextBlindInfoCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.NowelterCommand=a,__reflect(a.prototype,"wpt.play.table.NowelterCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return __extends(i,a),i.prototype.execute=function(a){var i=e.TableData.gameinfo,n=a.data;if(e.log.debug("体验桌旁观玩家离桌通知的命令",n.nReason,n.tableid),n.szMatchId==i.getGameInfo().mathId){var o="";switch(n.nReason){case 1:o=t.getLang("end_pangguan"),t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,o);break;case 2:o=t.getLang("体验桌房主离桌"),t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,o)}}},i}(t.BaseSimpleCommand);e.NtfLookonUserLeaveTableCommand=a,__reflect(a.prototype,"wpt.play.table.NtfLookonUserLeaveTableCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=a.TableData.userData,r=a.TableData.gameinfo,s=i.data;a.log.debug("前注消息来了");for(var l=o.getUserByName(o.currentName),h=r.getGameInfo().maxPlayer,c=0,u=0,p=0,d=0;d<s.precoin.length;d++){var m=l?l.serverSeat:0,_=n.seatMeditor.serverSeatTouiSeat(d,m,h),T=t.int64To32(s.coin[d]),g=t.int64To32(s.precoin[d]);if(0!=T){var f=o.getUserByUIseat(_);f&&(f.goldNum=T,f.handCardStatus="back"),n.seatMeditor.changGold(_,T),c+=g,u=Math.max(u,g),p++}a.EffectManager.getInstance().playPreBlindEffect(g,_)}r.getGameInfo().hasPreCoin=!0,r.getGameInfo().preBlind=Math.floor(c/p),isNaN(r.getGameInfo().preBlind)&&(r.getGameInfo().preBlind=0),u>0&&n.dealerMeditor.setPreCoinl(u),n.dealerMeditor.setPool(c),n.tableMeditor.updateBlindAnteInfo()},n}(t.BaseSimpleCommand);a.PreCoinCommand=i,__reflect(i.prototype,"wpt.play.table.PreCoinCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=i.data,r=a.TableData.matchInfo,s=a.TableData.userData,l=a.TableData.gameinfo,h=r.getMatch(),c=l.getGameInfo();if(null!=h&&null!=c){var u=s.getUserByName(o.roleName),p="",d="";if(0==o.result){var m=0;1==o.type?(m=h.ReBuyChip,o.roleName==s.currentName&&(h.ReBuycount=o.nCount,"coin"==a.TableData.reBuyType&&(c.myCoin=c.myCoin-h.ReBuyValue)),d=t.getLang("rebuy_success",u.nickName,m.toString()),p=t.getLang("buy_matchscore_success",m.toString())):2==o.type?(m=h.ReBuyChip,o.roleName==s.currentName&&(h.ReBuycount=o.nCount,"coin"==a.TableData.reBuyType&&(c.myCoin=c.myCoin-h.ReBuyValue)),d=t.getLang("rebuy_success",u.nickName,m.toString()),p=t.getLang("buy_matchscore_success",m.toString())):3==o.type&&(m=h.FinalAddOnChip,o.roleName==s.currentName&&(h.FinalAddOn=!1,h.FinalAddOnCount=1,n.operMeditor.disableAddOnButton(!1),n.operMeditor.updateFinalAddonCount(),"coin"==a.TableData.reBuyType&&(c.myCoin=c.myCoin-h.FinalAddOnValue)),p=-1!=o.nTicketCount?t.getLang("finaladdon_forticket",m.toString(),1):t.getLang("buy_matchscore_success1",m.toString(),h.FinalAddOnValue.toString())),o.roleName==s.currentName&&-1!=o.nTicketCount&&t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REFRESH_TICKET)),u.goldNum=t.int64To32(o.nResultChip),n.seatMeditor.changGold(u.uiSeat,u.goldNum),t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_COINS_DATA,null))}else p=3==o.reson?1==o.type?t.getLang("rebuy_error1"):2==o.type?t.getLang("rebuy_error2"):t.getLang("rebuy_error3"):10==o.reson?t.getLang("rebuy_error10"):11==o.reson?t.getLang("rebuy_error11"):12==o.reson?t.getLang("rebuy_error12"):14==o.reson?t.getLang("rebuy_error14"):t.getLang("rebuy_error");if(s.currentName==o.roleName?(0==o.result&&3==o.type?t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,p):t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,p),n.operMeditor.updateRebuyAddonState()):0==o.result,0==o.result){var _=a.TableData.needRebuyRoleNames.indexOf(o.roleName);-1!=_&&(a.TableData.needRebuyRoleNames.splice(_,1),0==a.TableData.needRebuyRoleNames.length&&n.tableMeditor.visMatchNotice(!1))}}},n}(t.BaseSimpleCommand);a.RebuyCommand=i,__reflect(i.prototype,"wpt.play.table.RebuyCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return __extends(a,t),a.prototype.execute=function(t){e.log.debug("!!!!!!!!!!!!!!****************************************   by Hout: 这个FLASH项目里有但好像没用,如果这条LOG打出来了就有问题!!,请搜索【RecvItemFromOther】***********************!!!!!!!!!!!!!!!!")},a.prototype.getGameInfo=function(t,e,a){},a}(t.BaseSimpleCommand);e.RecvItemFromOther=a,__reflect(a.prototype,"wpt.play.table.RecvItemFromOther")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return __extends(i,a),i.prototype.execute=function(a){var i=e.TableData.gameinfo,n=e.TableData.userData,o=n.getUserByName(n.currentName),r=a.data;if(o.roleName==r.szRoleName&&i.getGameInfo().mathId==r.szMatchid)if(0==r.nResult)e.log.debug("重置带入设置成功. "+e.TableData.resetBuy);else{var s=t.getLang("fail_resetbuyin");t.MessageDialog.showConfirmNotice(s),e.log.debug("重置带入设置失败. "+e.TableData.resetBuy)}},i}(t.BaseSimpleCommand);e.ResetBuyInCommand=a,__reflect(a.prototype,"wpt.play.table.ResetBuyInCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return __extends(i,a),i.prototype.execute=function(a){var i=e.TableData.gameinfo,n=e.TableData.userData,o=n.getUserByName(n.currentName),r=a.data;if(o.roleName==r.szRoleName&&i.getGameInfo().mathId==r.szMathId){var s=t.int64To32(r.nWndNum);i.getGameInfo().myCoin=s,t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_COINS_DATA,null))}},i}(t.BaseSimpleCommand);e.ResetBuyInRefreshWndCommand=a,__reflect(a.prototype,"wpt.play.table.ResetBuyInRefreshWndCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.ScuessCommand=a,__reflect(a.prototype,"wpt.play.table.ScuessCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=i.data;a.log.debug("前三张底牌来了");var o=a.TableData.gameinfo;a.TableData.curMatchProcess=1;var r=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain);t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_SEND_CARD),o.getGameInfo().setPublicCard(0,n.card0.value,n.card0.color),o.getGameInfo().setPublicCard(1,n.card1.value,n.card1.color),o.getGameInfo().setPublicCard(2,n.card2.value,n.card2.color),r.operMeditor.updateOperaView(),r.dealerMeditor.initPublicCards(),r.dealerMeditor.visbPublicTablecard(n.card0.value,n.card0.color,0),r.dealerMeditor.visbPublicTablecard(n.card1.value,n.card1.color,1),a.EffectManager.getInstance().playPublicCard(0,!0),a.EffectManager.getInstance().playPublicCard(1,!0),a.EffectManager.getInstance().playPublicCard(2,!0,n.card2,this.aniCallBack),r.operMeditor.updateFlopBetShortCut()},n.prototype.aniCallBack=function(){var i=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain);i.dealerMeditor.visbPublicTablecard(this.cardData.value,this.cardData.color,2)},n}(t.BaseSimpleCommand);a.SendflopcardCommand=i,__reflect(i.prototype,"wpt.play.table.SendflopcardCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.execute=function(i){this.tableState=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain);var n=this.tableState.operMeditor,o=a.TableData.userData,r=a.TableData.gameinfo,s=a.TableData.matchInfo,l=a.TableData.friendModel,h=o.getUserByName(o.currentName);a.log.debug("发送游戏相关信息"),a.EffectManager.getInstance().clearResultTestEffect(),this.tableState.dealerMeditor.initPublicCards();var c=r.getGameInfo(),u=c.maxPlayer,p=h.serverSeat,d=i.data;r.gameInfoGetCount++;var m,_=t.int64To32(d.MinRaise);a.log.debug("gameinfo",d.Tableid);for(var T in o.allUser){var g=o.allUser[T];g.isFload=!1,g.isOperate=!1,g.handCardStatus=null}for(c.gameStatus=d.GameStatus>0?a.GameInfoVO.GAME_IS_START:a.GameInfoVO.GAME_IS_READY,c.actionTime=d.nInitActionTime,c.delayTime=d.nInitDelayTime,c.mathId=d.Matchid,c.tableId=d.Tableid,c.pool=t.int64To32(d.pool),c.pool>0&&this.tableState.dealerMeditor.setPool(c.pool),d.GameStatus>0&&d.hasNPanID&&"normal"==c.currGameType&&this.tableState.tableMeditor.setMatchIDTxt(t.int64To32(d.nPanID)),m=0;m<d.publiccard.length;m++)c.setPublicCard(m,d.publiccard[m].value,d.publiccard[m].color);for("match"==c.currGameType&&s.getMatch().mathId==d.Matchid&&(s.getMatch().ReBuycount=d.nRebuyCount,s.getMatch().FinalAddOnCount=d.bFinalAddon,n.updateFinalAddonCount(),this.tableState.operMeditor.updateRebuyAddonState(),this.tableState.tableMeditor.updateBlindAnteInfo()),m=0;u>m;m++)if(d.HandCoin[m]){var f=t.int64To32(d.HandCoin[m]),y=o.getUserByServerseat(m);if(y&&(1==d.bLeave[m]&&(y.manipulateState=1,this.tableState.seatMeditor.changState(this.tableState.seatMeditor.serverSeatTouiSeat(m,h.serverSeat,u),a.TableConst.STATE_SETTINGOUT)),y.goldNum=f,r.isTiYan_CGZ&&d.hasNTiYanBuy)){d.nTiYanBuy&1<<m}this.tableState.seatMeditor.changGold(this.tableState.seatMeditor.serverSeatTouiSeat(m,p,u),f)}l.refreshPlayerList(),c.isGetUserGoldInfo=!0;var b=[];for(m=0;m<d.bFold.length;m++)if(1==d.bFold[m]){b.push(m),4==m&&a.log.debug("!!!!!!!!!!!!!!!!!@@@@!!!!!!!!!",d.bFold.length);var E=o.getUserByServerseat(m);E.isFload=!0,E.manipulateState=2,E.isOperate=!0,E.isWaitBigBlind=!1,d.GameStatus>0&&(this.tableState.seatMeditor.changState(this.tableState.seatMeditor.serverSeatTouiSeat(m,p,u),a.TableConst.STATE_FOLD),this.tableState.seatMeditor.setFoldCard(this.tableState.seatMeditor.serverSeatTouiSeat(m,p,u),h.serverSeat==m))
}if(c.foldPlayerSeatArr=b,0==d.bEnable[p]&&this.tableState.operMeditor.showPreBtnByType(!1),a.TableData.canAutoJoinTable&&this.tableState.tableMeditor.autoTable(),d.GameStatus>0){if(this.setMark(d.BankSeat,p),this.setPublicCard(d.publiccard),this.setHandCards(d.handcard),this.setPlayshowGold(d.TurnCoin,p),-1!=d.ChipSeat){var C=this.tableState.seatMeditor.serverSeatTouiSeat(d.ChipSeat,p,u);this.tableState.seatMeditor.changState(C,"",!1),d.ActionTime>0?this.tableState.seatMeditor.setOverTime(C,c.actionTime,c.actionTime-d.ActionTime,!1):this.tableState.seatMeditor.setOverTime(C,c.delayTime,c.delayTime-d.DelayTime,!0)}if(h.isObserver&&a.TableData.userData.getPlayerCountInSeat()>=c.maxPlayer&&"match"!=a.TableData.gameinfo.getGameInfo().currGameType&&this.tableState.operMeditor.setViewState(a.TABLE_OPER_STATE.VIEWSTATE_JOINSIMILARTABLE),h.isObserver)return;if(h.isSqueezedOut)return;if(h.isFload)return;if(h.isOperate)return;if(0==d.bEnable[p])return;if(d.ChipSeat<0)return;var S=c.currRaise-h.showGold;if(d.ChipSeat==p)this.tableState.seatMeditor.changState(p,"",!1),1==c.allInFlag?this.tableState.operMeditor.showAllinBtnGroup(h.goldNum<=S):c.currRaise>0?(this.tableState.operMeditor.disableQGJ(_,_,h.goldNum),h.goldNum<=S?this.tableState.operMeditor.disableQG(h.goldNum):h.goldNum+h.showGold<=_?S>0?this.tableState.operMeditor.disableQGJ(h.goldNum+h.showGold,S,h.goldNum):this.tableState.operMeditor.disableQRX(h.goldNum,h.goldNum):S>0?this.tableState.operMeditor.disableQGJ(_,S,h.goldNum):this.tableState.operMeditor.disableQRX(_,h.goldNum)):this.tableState.operMeditor.disableQRX(_,h.goldNum);else if(0!=d.bEnable[p]&&0==h.isFload){c.currRaise>0&&(h.goldNum>=S?n.setPreCallNum(S):n.setPreCallNum(h.goldNum));var v=!h.isObserver&&!h.isSqueezedOut&&null!=h.handCardStatus;v&&"normal"==c.currGameType?n.visAutoBuAndDai(!0):n.visAutoBuAndDai(!1),n.clearPreBtnSelectedState(),n.judgePreBtnVisible()}}},n.prototype.setMark=function(t,e){var i=(a.TableData.gameinfo,a.TableData.maxSeat);this.tableState.dealerMeditor.setMark(this.tableState.seatMeditor.serverSeatTouiSeat(t,e,i))},n.prototype.setPublicCard=function(t){if(!(t.length<=0)){this.tableState.dealerMeditor.initPublicCards();for(var e=t,i=a.TableData.gameinfo,n=0;n<e.length;n++)i.getGameInfo().setPublicCard(n,e[n].value,e[n].color),this.tableState.dealerMeditor.visbPublicTablecard(e[n].value,e[n].color,n),a.EffectManager.getInstance().playPublicCard(n,!0)}},n.prototype.setHandCards=function(t){if(!(t.length<=0)){for(var e=a.TableData.userData,i=e.getUserByName(e.currentName),n=a.TableData.gameinfo,o=n.getGameInfo().maxPlayer,r=[],s=0;s<t.length/2;s++){var l=t[2*s].value,h=t[2*s].color,c=t[2*s+1].value,u=t[2*s+1].color,p=this.tableState.seatMeditor.serverSeatTouiSeat(s,i.serverSeat,o);if(n.getGameInfo().setHandCard(s,t[2*s].value,t[2*s].color,t[2*s+1].value,t[2*s+1].color),-1==n.getGameInfo().foldPlayerSeatArr.indexOf(s)&&53!=t[2*s].value){r.push(this.tableState.seatMeditor.serverSeatTouiSeat(s,i.serverSeat,o));var d=e.getUserByServerseat(s);d&&(d.handCardStatus=52==l?"back":"card"),0==i.isObserver?(this.tableState.seatMeditor.setHandCard(l,h,p,0,52!=l),this.tableState.seatMeditor.setHandCard(c,u,p,1,52!=l)):(this.tableState.seatMeditor.setHandCard(l,h,p,0,!1),this.tableState.seatMeditor.setHandCard(c,u,p,1,!1))}i.serverSeat==s&&("back"==i.handCardStatus&&(i.isSqueezedOut=!0),n.getGameInfo().myHandCard=n.getGameInfo().handCard[s])}a.EffectManager.getInstance().dealCards(r),!i.isObserver&&!i.isSqueezedOut&&"normal"==n.getGameInfo().currGameType}},n.prototype.setPlayshowGold=function(e,i){for(var n=a.TableData.userData,o=a.TableData.gameinfo,r=o.getGameInfo().maxPlayer,s=0;s<e.length;s++){var l=t.int64To32(e[s]);0!=l&&(s==i&&(n.getUserByName(n.currentName).showGold=l),l>o.getGameInfo().currRaise&&(o.getGameInfo().currRaise=l),this.tableState.seatMeditor.setPlayGold(this.tableState.seatMeditor.serverSeatTouiSeat(s,i,r),l))}},n.prototype.destory=function(){i.prototype.destory.call(this),this.tableState=null},n}(t.BaseSimpleCommand);a.SendGameinfoCommand=i,__reflect(i.prototype,"wpt.play.table.SendGameinfoCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return a.call(this)||this}return __extends(i,a),i.prototype.execute=function(a){var i=e.TableData.userData,n=e.TableData.gameinfo,o=i.getUserByName(i.currentName).serverSeat;if(-1!=o){var r=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"game_LeaveSeat");r.matchid=n.getGameInfo().mathId,r.tableid=n.getGameInfo().tableId,r.Seat=o,r.bLeave=1,e.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_LEAVESEAT(r)}else e.log.debug("离座失败，玩家currSeat："+o)},i}(t.BaseSimpleCommand);e.SendLeaveSeatCommand=a,__reflect(a.prototype,"wpt.play.table.SendLeaveSeatCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n,o=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),r=o.seatMeditor,s=a.TableData.gameinfo,l=a.TableData.userData,h=(a.TableData.friendModel,i.data);a.log.debug("一轮下注消息结束","下一个操作玩家是："+h.NextSeat);var c=l.getUserByName(l.currentName);if(c){for(var u in l.allUser){var p=l.allUser[u];p.isOperate=!1}r.removeTime();var d=s.getGameInfo().maxPlayer;if(-1!=h.NextSeat){var m=r.serverSeatTouiSeat(h.NextSeat,c.serverSeat,d);l.getUserByUIseat(m);r.setOverTime(m,s.getGameInfo().actionTime)}o.dealerMeditor.goldTocenter(),n=h.SecondPool,o.dealerMeditor.deletePoolGold(),o.dealerMeditor.setSecondPool(n),r.clearAllPlayerGold(),r.turnOverClearState();for(var _=0;_<h.coin.length;_++){var T=t.int64To32(h.coin[_]),g=r.serverSeatTouiSeat(_,c.serverSeat,d),f=l.getUserByServerseat(_);if(null!=f){T-f.goldNum;f.goldNum=T}r.changGold(g,T)}if(s.getGameInfo().currRaise=0,c.showGold=0,o.dealerMeditor.setPool(t.int64To32(h.Pool)),s.getGameInfo().pool=t.int64To32(h.Pool),s.getGameInfo().minRaise=t.int64To32(h.MinRaise),!(c.isObserver||c.isSqueezedOut||c.isFload||0==c.goldNum||c.isWaitBigBlind)){if(-1==h.NextSeat)return void o.operMeditor.setViewState(a.TABLE_OPER_STATE.VIEWSTATE_NULL);if(h.NextSeat==c.serverSeat){if(o.seatMeditor.changState(c.serverSeat,""),0==o.operMeditor.preBtnPreOperation())if(1==s.getGameInfo().allInFlag)o.operMeditor.showAllinBtnGroup(!1);else{var y=t.int64To32(h.MinRaise);y>=c.goldNum?o.operMeditor.disableQRX(c.goldNum,c.goldNum):o.operMeditor.disableQRX(t.int64To32(h.MinRaise),c.goldNum)}}else o.operMeditor.judgePreBtnVisible()}}},n}(t.BaseSimpleCommand);a.SendOverTurnCommand=i,__reflect(i.prototype,"wpt.play.table.SendOverTurnCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.rank=0,t.realCoin=0,t.coinType=0,t.isleter=!1,t}return __extends(n,i),n.prototype.execute=function(i){var n=this,o=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),r=o.seatMeditor,s=o.operMeditor,l=a.TableData.userData,h=a.TableData.gameinfo,c=a.TableData.matchInfo,u=a.TableData.systemInfo,p=l.getUserByName(l.currentName),d=i.data;a.log.debug("玩家排名信息",d.RoleName,d.Rank,d.eRewardType);var m=l.getUserByName(d.RoleName);if(null!=m){var _=r.serverSeatTouiSeat(m.serverSeat,p.serverSeat,h.getGameInfo().maxPlayer),T=l.getUserByUIseat(_);null!=T&&T.roleName==d.RoleName&&r.hidePlayer(_),m.goldNum=0,m.showGold=0}if(this.realCoin=t.int64To32(d.nRewardCount),d.RoleName==l.currentName){if(a.TableData.isSendRank=!0,o.tableMeditor.visMatchNotice(!1),s.disableAddOnButton(!1),this.rank=d.Rank,o.tableMeditor.updateMatchInfoRank(0,0),h.isAccptPlayNum=!1,s.visBackSeat(!1),s.visAutoBuAndDai(!1),s.showPreBtnByType(!1),0==a.TableData.matchInfo.getMatch().mathType)return a.log.debug("------------------tourmode比赛结束，发送了名次,延迟3秒后做处理------------------------"),3==d.eRewardType&&t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_COINS_DATA,null)),void(a.TableData.TourModeOverMovieDelayTime=egret.setTimeout(function(){a.TableData.TourModeOverMovieDelayTime=-1,t.CommonData.getInstance().lobby.tourSngTableRewards=d,t.CommonData.getInstance().httpProcessor.req_tourMode_win(d.Matchid,d.Rank),s.setViewState(a.TABLE_OPER_STATE.VIEWSTATE_TOURMODEBUY);var e=t.getLang("tour_end_txt_next"),i=t.getLang("tour_end_txt_buyin"),o=t.CommonData.getInstance().lobby.getTagMatchDataByMatchId(d.Matchid);if(1==n.rank)if(1==d.eRewardType)s.view.setTourBuyinView(!1,e,"next");else{var r=t.CommonData.getInstance().lobby.getTourNextData();if(r){var l=t.CommonData.getInstance().getTicketNumById(r.tagData.ticketMatchItemId);l>0?s.view.setTourBuyinView(!1,e,"next"):(s.view.setTourBuyinNum(r.tagData.nSignFee+r.tagData.nCharge),s.view.setTourBuyinView(!0,e,"next"))}else{var l=t.CommonData.getInstance().getTicketNumById(o.ticketMatchItemId);l>0?s.view.setTourBuyinView(!1,i,"cur"):(s.view.setTourBuyinNum(o.nSignFee+o.nCharge),s.view.setTourBuyinView(!0,i,"cur"))}}else{var l=t.CommonData.getInstance().getTicketNumById(o.ticketMatchItemId);l>0?s.view.setTourBuyinView(!1,i,"cur"):(s.view.setTourBuyinNum(o.nSignFee+o.nCharge),s.view.setTourBuyinView(!0,i,"cur"))}},this,3e3));var g=t.int64To32(d.nChip);if(g>0&&d.hasNEndType&&2==d.nEndType){var f=t.getLang("rank_nchipsbuyin",this.rank,t.DealMoneyUtil.getStrByWptRule(g));t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,f).setCallback(this.messageConfirm,this.messageConfirm)}else{if(t.int64To32(d.nRewardCount)>0&&l.isYouke){t.getLang("rank_youke",this.rank)+this.getRewardType_Description(d,l.isYouke);return}a.TableData.matchState=1;var y="",b=!1,E=null;if(d.hasNBeGetReward&&0==d.nBeGetReward&&3==d.eRewardType)y=t.getLang("rank_rebuy",this.rank,t.DealMoneyUtil.getStrByWptRule(t.int64To32(d.nRewardCount)));else{var C="";if(C=1==this.rank?t.getLang("rank_slef1"):2==this.rank?t.getLang("rank_slef2"):3==this.rank?t.getLang("rank_slef3"):t.getLang("rank_slef",this.rank),c.getMatch().nTopIndex>=20&&c.getMatch().nTopIndex<=34){var S="\n  <a href='event:gotoTableAuto'><u><font color='#FFFF00'>"+t.getLang("enjoy_games")+"</font></u></a>";y=C+this.getRewardType_Description(d)+S,b=!0}else 1==d.eRewardType||2==d.eRewardType||3==d.eRewardType||4==d.eRewardType||6==d.eRewardType?y=C+this.getRewardType_Description(d):(C=1==this.rank?t.getLang("rank_slef11"):2==this.rank?t.getLang("rank_slef21"):3==this.rank?t.getLang("rank_slef31"):t.getLang("rank_slef_1",this.rank),y=C)}if(0==u.getsystemInfo().channelID&&5==d.eRewardType&&d.Rank>0){var v=d.hasRewardName?d.RewardName:"";y=t.getLang("rewardName_facebook",v),egret.setTimeout(function(){t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,y).setCallback(this.messageConfirm,this.messageConfirm)},this,2500)}else if(E){t.getLang("match_info",c.getMatch().mathName,this.rank,c.getMatch().szStartTime,c.getMatch().nSignPlayer),this.getMatchReward_Description(d,c.getMatch())}else egret.setTimeout(function(){t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,y,null,0,t.MessageDialog.CONGRATULATIONS).setCallback(this.messageConfirm,this.messageConfirm)},this,2500)}}},n.prototype.messageConfirm=function(){t.dispatch(new t.BaseEvent(a.TableEvent.EXITGAME,"true"))},n.prototype.getMatchReward_Description=function(e,a){var i=new Object,n="",o="",r="";switch(e.eRewardType){case 1:case 5:o=t.getLang("bet_type5_reward",e.RewardName),r=t.getLang("bet_type5_tips",this.rank,a.mathName,e.RewardName);break;case 2:n=t.DealMoneyUtil.getStrByWptRule(t.int64To32(e.nRewardCount)),o=t.getLang("bet_type2_reward",n),r=t.getLang("bet_type2_tips",this.rank,a.mathName,n);break;case 3:n=t.DealMoneyUtil.getStrByWptRule(t.int64To32(e.nRewardCount)),o=t.getLang("bet_type3_reward",n),r=t.getLang("bet_type3_tips",this.rank,a.mathName,n);break;case 4:n=t.DealMoneyUtil.getStrByWptRule(t.int64To32(e.nRewardCount)),o=t.getLang("bet_type4_reward",n),r=t.getLang("bet_type4_tips",this.rank,a.mathName,n)}return i.reward=o,i.tip=r,i},n.prototype.getRewardType_Description=function(e,i){void 0===i&&(i=!1);var n="",o=t.getLang("zsxiaomei");switch(e.eRewardType){case 1:n="!\n"+t.getLang("reward")+": "+e.RewardName;break;case 2:2==e.nNowelterType?n="\n "+t.getLang("reward_fcm")+t.DealMoneyUtil.getStrByWptRule(t.int64To32(e.nRewardCount))+" "+a.TableData.coinLargerName:3==e.nNowelterType?n="\n "+t.getLang("reward_fcm_1")+a.TableData.coinLargerName:t.int64To32(e.nRewardCount)>0&&(n=" "+t.getLang("youReward")+t.DealMoneyUtil.getStrByWptRule(t.int64To32(e.nRewardCount))+" "+a.TableData.coinLargerName);break;case 3:2==e.nNowelterType?n="\n "+t.getLang("reward_fcm")+t.DealMoneyUtil.getStrByWptRule(t.int64To32(e.nRewardCount))+" "+a.TableData.coinNormalName:3==e.nNowelterType?n="\n "+t.getLang("reward_fcm_1")+a.TableData.coinNormalName:t.int64To32(e.nRewardCount)>0&&(n=" "+t.getLang("youReward")+t.DealMoneyUtil.getStrByWptRule(t.int64To32(e.nRewardCount))+" "+a.TableData.coinNormalName);break;case 4:2==e.nNowelterType?n="\n "+t.getLang("reward_fcm")+t.DealMoneyUtil.getStrByWptRule(t.int64To32(e.nRewardCount))+t.getLang("scores"):3==e.nNowelterType?n="\n "+t.getLang("reward_fcm_2"):t.int64To32(e.nRewardCount)>0&&(n="! "+t.getLang("youReward1",t.DealMoneyUtil.getStrByWptRule(t.int64To32(e.nRewardCount))));break;case 5:case 6:n="!\n"+t.getLang("reward")+": "+e.RewardName,i?o=t.getLang("reward_youke"):n+=" "+t.getLang("click_to_lingqu");break;default:n=""}return n+=i?o:"."},n}(t.BaseSimpleCommand);a.SendRankCommand=i,__reflect(i.prototype,"wpt.play.table.SendRankCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=a.TableData.userData.getCurPlayerVO();if(n){var o=(t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"OGCGZ_ReqInitBuyChip")),r=a.TableData.gameinfo;o.szMatchid=r.getGameInfo().mathId,o.nMsgType=a.TableData.resetBuy?1:0,o.szRoleName=n.roleName,a.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_CGZINITBUYCHIP(o),r.getGameInfo().gameStatus==a.GameInfoVO.GAME_IS_START&&a.TableData.resetBuy?r.getGameInfo().selectResetBuyinInGame=!0:r.getGameInfo().selectResetBuyinInGame=!1}},n}(t.BaseSimpleCommand);a.SendResetBuyCommand=i,__reflect(i.prototype,"wpt.play.table.SendResetBuyCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=i.data,r=a.TableData.gameinfo,s=a.TableData.matchInfo,l=s.getMatch(),h=a.TableData.userData,c=h.getUserByName(h.currentName);if(a.log.debug("比赛中休息",o.resttime,o.prePareRestTime,o.type,r.getGameInfo().gameStatus),r.getGameInfo().restIndex=o.restIndex,c&&r.getGameInfo().gameStatus!=a.GameInfoVO.GAME_IS_START){if(n.tableMeditor.view.matchTxtNotice.visible&&r.getGameInfo().isNtfAddOnTime&&0==l.FinalAddOnCount&&!c.isObserver&&l.FinalAddOn)return void(r.getGameInfo().ntfAddOnTime>1&&(r.getGameInfo().ntfAddOnTime-=1,n.tableMeditor.visMatchNotice(!0),r.getGameInfo().ntfAddOnTime>1?n.tableMeditor.setMatchNotice(t.getLang("addon_operatime",r.getGameInfo().ntfAddOnTime)):n.tableMeditor.setMatchNotice(t.getLang("addon_operatime",r.getGameInfo().ntfAddOnTime))));if(n.tableMeditor.visMatchNotice(!0),0==o.type)if(0==a.TableData.matchInfo.getMatch().mathType){a.log.debug("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~中场休息时，curSelectTourDataID： ",t.CommonData.getInstance().lobby.curSelectTourDataID);var u=t.CommonData.getInstance().lobby.getTourDataByID(t.CommonData.getInstance().lobby.curSelectTourDataID).cityName;n.tableMeditor.setMatchReadyTime("match_resttime_tourmode1",o.prePareRestTime,"match_resttime_tourmode11","match_resttime_tourmode111",null,u)}else n.tableMeditor.setMatchReadyTime("match_resttime1_sec",o.prePareRestTime,"match_resttime11_sec");else o.resttime>1?n.tableMeditor.setMatchNotice(t.getLang("match_resttime2",o.resttime)):n.tableMeditor.setMatchNotice(t.getLang("match_resttime21",o.resttime));if(!c.isObserver)if(n.operMeditor.view.curViewState==a.TABLE_OPER_STATE.VIEWSTATE_WAITBIGBLINDS&&n.operMeditor.setViewState(a.TABLE_OPER_STATE.VIEWSTATE_NULL),l.FinalAddOn&&l.FinalAddOnTime==o.restIndex&&0==l.FinalAddOnCount){if(a.TableData.autoAddon){var p;p=a.TableData.gameinfo.getGameInfo().myTicketsNum>0?2:1,a.log.debug("自动加买 type:"+p),n.tableMeditor.setRebuyAddonRenterData(3,null,null,!0)}else n.operMeditor.disableAddOnButton(!0);n.tableMeditor.visMatchNotice(!0),n.tableMeditor.setMatchNotice(t.getLang("addon_wait_others"))}else n.operMeditor.updateFinalAddonView()}},n}(t.BaseSimpleCommand);a.SendRestTimeCommand=i,__reflect(i.prototype,"wpt.play.table.SendRestTimeCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=i.data;a.log.debug("第五张底牌来了"),a.TableData.curMatchProcess=3;var o=(t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),a.TableData.gameinfo);t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_SEND_CARD),o.getGameInfo().setPublicCard(4,n.card.value,n.card.color),a.EffectManager.getInstance().playPublicCard(4,!0,n.card,this.aniCallBack)},n.prototype.aniCallBack=function(){var i=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain);i.dealerMeditor.visbPublicTablecard(this.cardData.value,this.cardData.color,4)},n}(t.BaseSimpleCommand);a.SendRiveCardCommand=i,__reflect(i.prototype,"wpt.play.table.SendRiveCardCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=(t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),a.TableData.userData),o=a.TableData.gameinfo,r=i.data,s=n.getUserByName(n.currentName);if(-1==a.TableData.curMatchProcess||4==a.TableData.curMatchProcess);else if(s&&s.isFload)return void(a.TableData.OGReqBuyChip=r);var l=r.coin;o.getGameInfo().autoBuyChip=l,o.getGameInfo().isAutoBuyChip=r.auto;var h=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"OGReqBuyChip");h.MatchID=o.getGameInfo().mathId,h.RoleName=n.currentName,h.bTiYan=r.hasOwnProperty("tiyan")&&1==r.tiyan?1:0,h.nSeatID=s.serverSeat,h.nBuyChip=t.int32To64(l),h.nCurChip=t.int32To64(o.getGameInfo().myCoin),a.log.debug("带入send nBuyChip:"+l+" nCurChip:"+o.getGameInfo().myCoin),a.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_BUYCHIP(h)},n}(t.BaseSimpleCommand);a.SendsBuyChip=i,__reflect(i.prototype,"wpt.play.table.SendsBuyChip")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.SendsCharCommand=a,__reflect(a.prototype,"wpt.play.table.SendsCharCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return __extends(i,a),i.prototype.execute=function(a){var i=e.TableData.gameinfo,n=e.TableData.userData,o=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"game_CheckBet");o.Matchid=i.getGameInfo().mathId,o.Tableid=i.getGameInfo().tableId,o.Seat=n.getUserByName(n.currentName).serverSeat,e.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_CHECKBET(o)},i}(t.BaseSimpleCommand);e.SendsCheckBetCommand=a,__reflect(a.prototype,"wpt.play.table.SendsCheckBetCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return __extends(i,a),i.prototype.execute=function(a){var i=e.TableData.gameinfo,n=e.TableData.userData,o=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"game_FollowBet");o.Matchid=i.getGameInfo().mathId,o.Tableid=i.getGameInfo().tableId,o.Seat=n.getUserByName(n.currentName).serverSeat,e.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_FOLLOWBET(o)},i}(t.BaseSimpleCommand);e.SendsFllowBetCommand=a,__reflect(a.prototype,"wpt.play.table.SendsFllowBetCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return __extends(i,a),i.prototype.execute=function(a){var i=e.TableData.gameinfo,n=e.TableData.userData,o=a.data[1],r=function(){var a=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"game_FoldBet");a.Matchid=i.getGameInfo().mathId,a.Tableid=i.getGameInfo().tableId,a.Seat=n.getUserByName(n.currentName).serverSeat,(0==n.getUserByName(n.currentName).goldNum||n.getUserByName(n.currentName).isStandUser)&&(a.bTyCGZFold=!0),e.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_FOLDBET(a)};if("true"==o)r();else{var s=n.getUserByName(n.currentName);0==i.getGameInfo().allInFlag&&s.showGold==i.getGameInfo().currRaise;r()}},i}(t.BaseSimpleCommand);e.SendsFoldBetCommand=a,__reflect(a.prototype,"wpt.play.table.SendsFoldBetCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return a.call(this)||this}return __extends(i,a),i.prototype.execute=function(a){var i=e.TableData.gameinfo,n=e.TableData.userData,o=n.getUserByName(n.currentName),r=a.data[1],s=Number(a.data[0].coin);"加注到"==r||"下注"==r?(s==o.goldNum&&(s=o.goldNum+o.showGold),i.isTiYan_CGZ&&s==o.goldNum-1&&(s=o.goldNum+o.showGold-1)):"全下"==r&&(s=o.goldNum+o.showGold);var l;l=t.int32To64(s);var h=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"game_RaiseBet");h.Matchid=i.getGameInfo().mathId,h.Tableid=i.getGameInfo().tableId,h.Coin=l,h.Seat=n.getUserByName(n.currentName).serverSeat,e.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_RAISEBET(h)},i}(t.BaseSimpleCommand);e.SendsRaiseBetCommand=a,__reflect(a.prototype,"wpt.play.table.SendsRaiseBetCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return __extends(i,a),i.prototype.execute=function(a){var i=Boolean(a.data),n=e.TableData.userData,o=e.TableData.gameinfo,r=n.getUserByName(n.currentName),s=t.getProtoClassObj(t.ResConst.PROTO_NAME_TABLE,"OGWaitBigBling");s.MatchID=o.getGameInfo().mathId,s.sRoleName=n.currentName,s.nSeatID=r.serverSeat,s.IsWait=i?1:0,e.TableData.tableSocketSerivce.tableMessageProcessor.OGID_TEXASPOKER_WAITBLING(s)},i}(t.BaseSimpleCommand);e.SendsWaitBigBlingCommand=a,__reflect(a.prototype,"wpt.play.table.SendsWaitBigBlingCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=i.data;a.log.debug("第四张底牌来了"),a.TableData.curMatchProcess=2;var o=(t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),a.TableData.gameinfo);t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_SEND_CARD),o.getGameInfo().setPublicCard(3,n.card.value,n.card.color),a.EffectManager.getInstance().playPublicCard(3,!0,n.card,this.aniCallBack)},n.prototype.aniCallBack=function(){var i=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain);i.dealerMeditor.visbPublicTablecard(this.cardData.value,this.cardData.color,3)},n}(t.BaseSimpleCommand);a.SendturnCardCommand=i,__reflect(i.prototype,"wpt.play.table.SendturnCardCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){this.tableState=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain);var n=a.TableData.userData,o=a.TableData.gameinfo;a.log.debug("收到用户信息");var r=n.getUserByName(n.currentName);this.clear();var s=o.getGameInfo().maxPlayer,l=i.data;n.userInfoGetCount++,"match"==o.getGameInfo().currGameType,o.getGameInfo().mathId=l.Matchid,o.getGameInfo().tableId=l.Tableid;for(var h,c=l.UserInfo,u=c.length,p=!1,d="",m=0;u>m;m++){var _=c[m];n.addUser(_.RoleName);var T=n.getUserByName(_.RoleName);T.roleName=_.RoleName,T.serverSeat=_.Seat,T.isObserver=!1,T.nickName=_.sCFUserName,T.ourgameId=_.sOurGameId,_.RoleName==n.currentName&&(p=!0,t.dispatch(new t.BaseEvent(a.TableEvent.UPDATE_OBSERVER_VIEW,!1))),d+=_.RoleName+" --- seat:"+_.Seat+"\n"}for(a.log.debug("收到用户信息*** "+d),p||(n.addUser(n.currentName),null!=r&&(n.getUserByName(n.currentName).nickName=r.nickName),n.getUserByName(n.currentName).isObserver=!0,"match"==o.getGameInfo().currGameType&&t.dispatch(new t.BaseEvent(a.TableEvent.UPDATE_OBSERVER_VIEW,!0))),h=n.getUserByName(n.currentName).serverSeat,m=0;u>m;m++){o.getGameInfo().sitdownPlayer.push(c[m].RoleName);var g=n.getUserByName(c[m].RoleName);g.uiSeat=this.tableState.seatMeditor.serverSeatTouiSeat(c[m].Seat,h,s),this.tableState.seatMeditor.addPlayerHeader(c[m].RoleName,g.uiSeat),o.getGameInfo().inTablePlayersDict[g.roleName]=g}var f=[];if(u>0){var y=[];for(m=0;u>m;m++)y.push(c[m].RoleName),f.push(c[m].Seat);t.dispatch(new t.BaseEvent(a.TableEvent.GET_PLAYER_HEADER_IMAGE,{serverSeatArr:f,roleNameArr:y})),t.CommonData.getInstance().jssService.jssProcessor.REQ_ENTERTABLE_QUERYPLAYERGIFT(y)}if(o.getGameInfo().isQuickStart&&!p,r=n.getCurPlayerVO(),a.TableData.autoJoin&&r&&r.isObserver)for(a.TableData.autoJoin=!1,m=0;m<a.TableData.maxSeat;m++)if(-1==f.indexOf(m)){t.dispatch(new t.BaseEvent(a.TableEvent.CLICK_SEAT,{seat:m}));break}},n.prototype.showGiftbyName=function(t,e){void 0===e&&(e=0);for(var i=a.TableData.gameinfo,n="0",o=0;o<i.getGameInfo().inTablePlayerGift.length;o++)if(t==i.getGameInfo().inTablePlayerGift[o].roleName){n=i.getGameInfo().inTablePlayerGift[o].giftId,1==e&&(n=i.getGameInfo().inTablePlayerGift[o].card);break}return n},n.prototype.clear=function(){var t=a.TableData.gameinfo,e=a.TableData.userData,i=(a.TableData.matchInfo,a.TableData.friendModel);t.getGameInfo().sitdownPlayer=[],e.deleterAll();for(var n=i.getFuserinfo(),o=0;o<n.length;o++){var r=n[o];e.addUser(r.roleName),null!=r.nickName&&(e.getUserByName(r.roleName).nickName=r.nickName)}this.tableState.seatMeditor.removeTime(),this.tableState.seatMeditor.stopTime(),this.tableState.dealerMeditor.initPublicCards(),this.tableState.seatMeditor.initHandCard(),this.tableState.operMeditor.showPreBtnByType(!1),this.tableState.operMeditor.visShowCard(!1),this.tableState.operMeditor.visBackSeat(!1),this.tableState.dealerMeditor.setMark(-1),this.tableState.dealerMeditor.deletePoolGold(),t.isAccptPlayNum=!0,this.tableState.tableMeditor.visMatchNotice(!1),this.tableState.seatMeditor.hideAllPlayer();var s=t.getGameInfo();s.smallBlindSeat=0,s.bigBlindSeat=0,s.currRaise=0,s.gamestatus=0,s.handCard=[],s.myHandCard=[],s.publicCard=[],s.minRaise=0,s.pool=0},n.prototype.destory=function(){i.prototype.destory.call(this),this.tableState=null},n}(t.BaseSimpleCommand);a.SendUserinfoCommand=i,__reflect(i.prototype,"wpt.play.table.SendUserinfoCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=a.TableData.gameinfo,r=a.TableData.userData,s=i.data,l=r.getUserByName(r.currentName);l&&l.isObserver?n.tableMeditor.updateMatchInfoRank(0,0):o.isAccptPlayNum&&r.currentName==s.rolename&&o.getGameInfo().mathId==s.matchid&&o.getGameInfo().tableId==s.tableid&&n.tableMeditor.updateMatchInfoRank(s.Rank,s.ResPlayer)},n}(t.BaseSimpleCommand);a.SendUserRandCommand=i,__reflect(i.prototype,"wpt.play.table.SendUserRandCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.ShowGiveGiftFlashCommand=a,__reflect(a.prototype,"wpt.play.table.ShowGiveGiftFlashCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.ShowTableCommand=a,__reflect(a.prototype,"wpt.play.table.ShowTableCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){this.tableState=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain);var n=i.data[1],o=i.data[0];switch(n){case t.OGTableProtocol.OGID_TEXASPOKER_TESTNETSPEED:this.TESTNETSPEED_Handler(o);break;case t.OGTableProtocol.OGID_TEXASPOKER_CGZ_ADDMTTLEVCONFIG:this.CGZ_ADDMTTLEVCONFIG_Handler(o);break;case t.OGTableProtocol.OGID_TEXASPOKER_ACT_CURACTIDLIST:this.ACT_CURACTIDLIST_Handler(o);break;case t.OGTableProtocol.OGID_TEXASPOKER_CURMAXCARDTYPEDATA:this.CURMAXCARDTYPEDATA_Handler(o);break;case t.OGTableProtocol.OGID_TEXASPOKER_GRADU_BUYBALL:this.GRADU_BUYBALL_Handler(o);break;case t.OGTableProtocol.OGID_TEXASPOKER_GRADU_NTFLEAVETABLE:this.GRADU_NTFLEAVETABLE_Handler(o)}},n.prototype.TESTNETSPEED_Handler=function(t){},n.prototype.CGZ_ADDMTTLEVCONFIG_Handler=function(e){var i=a.TableData.gameinfo,n={};n.mergeFrom(e,t.CoreData.Encode),i.getGameInfo().mathId==n.szMatchid&&a.log.debug("进入牌桌发送大师分等级配置")},n.prototype.ACT_CURACTIDLIST_Handler=function(e){var i={};i.mergeFrom(e),a.log.debug("进入牌桌收到活动id数据");var n=a.TableData.gameinfo;n.getGameInfo().templateId!=t.int64To32(i.nTemplateID)},n.prototype.CURMAXCARDTYPEDATA_Handler=function(t){var e={};e.mergeFrom(t),a.log.debug("收到最大牌型数据",e.cardtype)},n.prototype.GRADU_BUYBALL_Handler=function(e){var i={};i.mergeFrom(e),a.log.debug("毕业 扣除保证金",i.result);var n=a.TableData.gameinfo;if(n.getGameInfo().mathId==i.szMatchid){var o=a.TableData.userData;if(o.ourgameId==i.sUserName)if(0==i.result)n.getGameInfo().myCoin=t.int64To32(i.nUserWndNum);else{t.DealMoneyUtil.getStrByComma}}},n.prototype.GRADU_NTFLEAVETABLE_Handler=function(e){var i={};i.mergeFrom(e),a.log.debug("毕业 玩家离桌",i.sRoleName);var n=a.TableData.gameinfo;if(n.getGameInfo().mathId==i.szMatchid){var o=a.TableData.userData,r=t.DealMoneyUtil.getStrByComma,s="";s+=i.sCfName+" ",0==i.result?s+=t.getLang("因毕业安全离开牌桌！"):1==i.result?s+=t.getLang("因游戏积分为0安全离开牌桌！"):2==i.result?s+=t.getLang("因游戏人数不足安全离开牌桌！"):3==i.result?(s+=t.getLang("强制离开游戏，并赔偿每个玩家{"+r(t.int64To32(i.nComWnd))+a.TableData.coinNormalName+"}。"),i.sRoleName==o.currentName):5==i.result&&(s+=t.getLang("因散桌而安全离开牌桌！"));
for(var l=0,h=i.stCompList.length;h>l;l++){var c=i.stCompList[l];if(c.sUserName==o.currentName){n.getGameInfo().myCoin=t.int64To32(c.nWndNum);break}}}},n}(t.BaseSimpleCommand);a.SimpleServerMessageCommand=i,__reflect(i.prototype,"wpt.play.table.SimpleServerMessageCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.TiYanMaxTiYanNumCommand=a,__reflect(a.prototype,"wpt.play.table.TiYanMaxTiYanNumCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.TiYanNewGameStartAckCommand=a,__reflect(a.prototype,"wpt.play.table.TiYanNewGameStartAckCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.TiYanNewGameStartCommand=a,__reflect(a.prototype,"wpt.play.table.TiYanNewGameStartCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.TiYanNewGameStartReqCommand=a,__reflect(a.prototype,"wpt.play.table.TiYanNewGameStartReqCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return __extends(i,a),i.prototype.execute=function(a){var i=[e.TableData.userData.getCurPlayerVO().serverSeat],n=[e.TableData.userData.getCurPlayerVO().roleName];t.dispatch(new t.BaseEvent(e.TableEvent.GET_PLAYER_HEADER_IMAGE,{serverSeatArr:i,roleNameArr:n}))},i}(t.BaseSimpleCommand);e.UpdateCurUserHeadCommand=a,__reflect(a.prototype,"wpt.play.table.UpdateCurUserHeadCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=i.data,o=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),r=(a.TableData.gameinfo,o.tableMeditor);r.view;o.tableMeditor.setSitOutBtnVis(!n);var s=a.TableData.gameinfo,l=a.TableData.userData.getCurPlayerVO();o.operMeditor.addResetBuyIn(1==s.getGameInfo().nCGZBeInitBuyChip&&null!=l&&!l.isObserver),o.operMeditor.updateRebuyAddonState(),o.operMeditor.updateRenterState(),o.seatMeditor.switchDealer(n),r.setOBstate(n),a.TableData.gameinfo&&"match"==a.TableData.gameinfo.getGameInfo().currGameType&&o.tableView.matchInfoUI.init()},n}(t.BaseSimpleCommand);a.UpdateObserverView=i,__reflect(i.prototype,"wpt.play.table.UpdateObserverView")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=a.TableData.userData,o=a.TableData.gameinfo,r=o.getGameInfo().maxPlayer,s=i.data;a.log.debug("补时消息",s.Seat,s.delaytime);var l=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),h=l.seatMeditor,c=n.getUserByName(n.currentName);if(c){var u=h.serverSeatTouiSeat(s.Seat,c.serverSeat,r),p=n.getUserByUIseat(u);p&&0==p.manipulateState&&h.changState(u,""),h.setOverTime(u,s.delaytime,0,!0);var d=n.getUserByServerseat(s.Seat);d.roleName==n.currentName&&t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_WARNING)}},n}(t.BaseSimpleCommand);a.UseDelayTime=i,__reflect(i.prototype,"wpt.play.table.UseDelayTime")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.execute=function(i){var n=t.Context.getInstance().moudleManager.getControllerByName(e.ModuleName.TABLE,a.TableMain),o=n.seatMeditor,r=n.operMeditor,s=a.TableData.gameinfo,l=a.TableData.userData,h=i.data;if(a.log.debug("因为多开所以被顶掉了",h.sRoleName),t.MessageDialog.showConfirmNotice(t.getLang("UserBeSqueezedOut")),h.szMatchid==s.getGameInfo().mathId&&l.currentName==h.sRoleName){var c=l.getUserByName(h.sRoleName);if(c){if(c.isSqueezedOut=!0,"card"==c.handCardStatus){c.handCardStatus="back";var u=s.getGameInfo().myHandCard;if(2==u.length){var p=o.serverSeatTouiSeat(c.serverSeat,c.serverSeat,s.getGameInfo().maxPlayer);o.setHandCard(52,u[0].color,p,0,!0),o.setHandCard(52,u[1].color,p,1,!0)}}r.showPreBtnByType(!1),r.visAutoBuAndDai(!1)}}},n}(t.BaseSimpleCommand);a.UserBeSqueezedOutCommand=i,__reflect(i.prototype,"wpt.play.table.UserBeSqueezedOutCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.BaseSimpleCommand);e.UserSendGoldCommand=a,__reflect(a.prototype,"wpt.play.table.UserSendGoldCommand")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.connectCount=0,t.isRegTimer=!1,t}return __extends(i,a),Object.defineProperty(i.prototype,"tableSocket",{get:function(){return e.TableData.tableSocketSerivce},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tableProcessor",{get:function(){return this.tableSocket.tableMessageProcessor},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameinfo",{get:function(){return e.TableData.gameinfo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"userXy",{get:function(){return e.TableData.userData},enumerable:!0,configurable:!0}),i.prototype.clear=function(){this.removeListeners(),this.connectCount=0},i.prototype.init=function(){this.initListeners()},i.prototype.initListeners=function(){t.addCommand(t.SocketEvent.RECIVED(e.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_GAMECONFIRMCONNECT),this.AckConfirmconnectCommand,this),t.addCommand(t.SocketEvent.RECIVED(e.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_LOGINGAME),this.AckLoginGameCommand,this),t.addCommand(t.SocketEvent.RECIVED(e.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TYCGZPSW),this.AckModifyTyPswCommand,this),t.addCommand(t.SocketEvent.RECIVED(e.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_ENTERMATCH),this.AckEnterMathCommand,this),t.addCommand(t.SocketEvent.CONNECT_ERROR(e.TableSocketService),this.CONNECT_ERROR,this),t.addCommand(t.SocketEvent.CONNECT_SUCCESS(e.TableSocketService),this.CONNECT_SUCCESS,this),t.addCommand(t.SocketEvent.DISCONNECT(e.TableSocketService),this.DISCONNECT,this),t.addCommand(e.TableEvent.CONN_TABLE_SERVER,this.CONN_TABLE_SERVER,this)},i.prototype.removeListeners=function(){t.removeCommand(t.SocketEvent.RECIVED(e.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_GAMECONFIRMCONNECT),this.AckConfirmconnectCommand,this),t.removeCommand(t.SocketEvent.RECIVED(e.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_LOGINGAME),this.AckLoginGameCommand,this),t.removeCommand(t.SocketEvent.RECIVED(e.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TYCGZPSW),this.AckModifyTyPswCommand,this),t.removeCommand(t.SocketEvent.RECIVED(e.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_ENTERMATCH),this.AckEnterMathCommand,this),t.removeCommand(t.SocketEvent.CONNECT_ERROR(e.TableSocketService),this.CONNECT_ERROR,this),t.removeCommand(t.SocketEvent.CONNECT_SUCCESS(e.TableSocketService),this.CONNECT_SUCCESS,this),t.removeCommand(t.SocketEvent.DISCONNECT(e.TableSocketService),this.DISCONNECT,this),t.removeCommand(e.TableEvent.CONN_TABLE_SERVER,this.CONN_TABLE_SERVER,this)},i.prototype.DISCONNECT=function(e){this.unRegTimer(),this.connectCount>=20?(t.MessageDialog.hide(),t.MessageDialog.showConfirmNotice(t.getLang("disconnect")).setCallback(this.disConnectCallback.bind(this))):setTimeout(this.connect.bind(this),1e3)},i.prototype.disConnectCallback=function(){t.MessageDialog.hide(),this.connectCount=0,this.connect()},i.prototype.CONN_TABLE_SERVER=function(t){this.connect()},i.prototype.connect=function(){e.log.debug("连接游戏服务器..."),this.connectCount++;var a;a=t.CoreData.isShield?t.CoreData.GameServerConfig.config.serverHost:"match"==e.TableData.gameinfo.getGameInfo().currGameType?t.CoreData.GameServerConfig.config.serverHost_match:t.CoreData.GameServerConfig.config.serverHost_normal,t.isempty(a)?e.log.debug("conn table error: pose="+a):this.tableSocket.connect(a)},i.prototype.CONNECT_ERROR=function(a){e.log.debug("TABLE this.CONNECT_ERROR"),this.unRegTimer(),this.connTimeOutHandle>0&&clearTimeout(this.connTimeOutHandle),this.connTimeOutHandle=0,t.MessageDialog.hide(),t.MessageDialog.showConfirm(t.getLang("connect_error"),null)},i.prototype.CONNECT_SUCCESS=function(t){e.log.debug("TABLE this.CONNECT_SUCCESS"),this.connTimeOutHandle>0&&clearTimeout(this.connTimeOutHandle),this.connTimeOutHandle=0,this.tableProcessor.GAMECONFIRMCONNECT()},i.prototype.AckConfirmconnectCommand=function(t){var a=t.data;0==a.result?this.tableProcessor.LOGINGAME():e.log.debug("game_ACKConfirmConnect:false")},i.prototype.AckLoginGameCommand=function(t){var a=e.TableData.gameinfo,i=t.data;e.log.debug("登陆桌牌游戏",i.result),0==i.result&&(a.isTiYan_CGZ&&a.getGameInfo().isTyCreater?this.tableProcessor.TYCGZPSW():this.LoginSuccessCmd())},i.prototype.LoginSuccessCmd=function(){this.tableProcessor.ENTERMATCH(),this.regTimer()},i.prototype.AckEnterMathCommand=function(a){var i=a.data,n={};if(n.result=i.result,n.nReason=i.nReason,n.destName=this.gameinfo.destName,n.nWndLimit=i.hasNWndLimit?t.int64To32(i.nWndLimit):0,n.nCanEnterCnt=i.hasNCanEnterCnt?i.nCanEnterCnt:0,n.leftTime=i.hasNTyLimitSec?i.nTyLimitSec:0,n.isTiYan_CGZ=this.gameinfo.isTiYan_CGZ,t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.ENTERMATCH_RESULT,n)),e.log.debug("进入牌桌",i.result,this.gameinfo.getGameInfo().templateId),0==i.result)this.userXy.nTyCGZUserType=i.hasNTyCGZUserType?i.nTyCGZUserType:0,t.dispatch(new e.TableEvent(e.TableEvent.LOGINOK_SHOWTABLE));else{var o;switch(i.nReason){case 1:o=t.getLang("bet_nReason1");break;case 2:o=t.getLang("bet_nReason2");break;case 3:o=t.getLang("bet_nReason3");break;case 4:o=t.getLang("bet_nReason4");break;case 5:o=t.getLang("bet_nReason5");break;case 6:o=t.getLang("bet_nReason6");break;case 7:o=t.getLang("bet_nReason7");break;default:o=t.getLang("bet_nReason8")}e.log.debug(t.getLang("bet_nReason9")+o),t.MessageDialog.showConfirmNotice(o).setCallback(function(){t.dispatch(new e.TableEvent(e.TableEvent.EXITGAME,"true"))})}},i.prototype.AckModifyTyPswCommand=function(t){},i.prototype.regTimer=function(){this.isRegTimer=!0,t.Context.getInstance().gameManager.registerTimer(6e4,this.checkStopServer,this)},i.prototype.unRegTimer=function(){this.isRegTimer&&(t.Context.getInstance().gameManager.unRegisterTimer(this.checkStopServer,this),this.isRegTimer=!1)},i.prototype.checkStopServer=function(){t.CommonData.getInstance().serverModel.checkStopServer(null,function(){t.dispatch(new t.BaseEvent(e.TableEvent.EXITGAME,"true"))})},i}(t.Controller);e.TableConnectController=a,__reflect(a.prototype,"wpt.play.table.TableConnectController")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.setTableCtrl=function(t){this._controller=t},n.prototype.clear=function(){this.rebuyMsg=null,t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_USERLIST),a.AckUserListCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDGAMEINFO),a.SendGameinfoCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_GAMERULE),a.GameRuleCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDUSERINFO),a.SendUserinfoCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_BLINDCHANGE),a.BlindChangeCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_BLINDINFO),a.NextBlindInfoCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CHANGETABLE),a.ChangeTableCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CHECKBET),a.AckCheckbetCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SITDOWN),a.AcksitdownSeatCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_BUYCHIP),a.AckbuChipCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_ADDUSER),a.AckAddUserToListCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_DELETEUSER),a.AckDeleteUserFromListCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_PUSHPRECOIN),a.PreCoinCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_PUSHBLINDCOIN),a.BlindCoinCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_INITCARD),a.InitCardCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_USEDELAYTIME),a.UseDelayTime,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_FOLDBET),a.AckfoldbetCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_LEAVETABLE),a.LeaveTableCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDOVERTURN),a.SendOverTurnCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_LEAVESEAT),a.LeaveSeatCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_FOLLOWBET),a.AckfollowbetCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_FLOPCARD),a.SendflopcardCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TURNCARD),a.SendturnCardCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_RIVERCARD),a.SendRiveCardCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_RAISEBET),a.AckraisebetCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SHOWCARD),a.AckShowCardCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TESTRESULT),a.GameResultCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NEETBUYCHIP),a.NeetBugChipCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_MATCHCHIP),a.MathChipCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDRESTTIME),a.SendRestTimeCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_MODIFYCONFIG),a.ModifyCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CGZ_REPLACEBYSELF),a.UserBeSqueezedOutCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NTFLOOKONUSERLEAVETABLE),a.NtfLookonUserLeaveTableCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_REBUY),a.RebuyCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDRANK),a.SendRankCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDUSERRANK),a.SendUserRandCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NTFUSERWND),a.ResetBuyInRefreshWndCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CGZINITBUYCHIP),a.ResetBuyInCommand,this._controller),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NTFBEKIT),this.ntfBeKit,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_LATERSIGN_NTF_RESULTLATER),this.ntfResultLater,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NTFADDONTIME),this.ntfAddOnTime,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_LATERSIGN_NTF_NEWPLAYERENTERTABLE),this.ntfNewPlayerEnterTable,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SUP_NTF_GETSUPERGAME),a.AckBuySuperGameCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NEWFULL_NTFACTSTATE),a.FullNewActNtfActStateCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_EXCHANGEHYD),a.AckhydResultCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_INS_Ntf_InsInfo_EnterMatch),a.INSNtfInsInfoEnterMatchCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NEWFULL_CURACTSTATE),a.FullNewActNtfCurMatchActStateCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NEWFULL_CURPROGRESS),a.FullNewActNtfProgressCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CHANGEHYD),a.AckChangehydCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_PRIVATECHAT),a.AckprivatechatCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TIYAN_MAXTIYANNUM),a.TiYanMaxTiYanNumCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SHOWPICTRUE),a.AckShowPictrueCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_KICK),a.AckKickCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_HORN),a.AckBroadcastCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TIYAN_NEWGAMESTART),a.TiYanNewGameStartCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_GIVEGIFT),a.ShowGiveGiftFlashCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_GIVEITEM),a.RecvItemFromOther,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_ABLEORUNABLECHAT),a.AckeblerunablechatCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_BROADCAST_MATCHRANK),a.AckBroadcastMatchRankCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TIYAN_NTF_NEWGAMESTART),a.TiYanNewGameStartAckCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CHATMSG),a.AckChatMsgCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_UNABLECHATLIST),a.AckUnblechatListCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_PRESENTCOINS),a.AckPresentcoinsCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NTF_BOG),a.FullNewActNtfBogCommand,this),t.removeCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NOWELTER),a.NowelterCommand,this),t.removeCommand(a.TableEvent.CONN_TABLE_SERVER,this.initTableView,this),t.removeCommand(a.TableEvent.LOGINOK_SHOWTABLE,this.LOGINOK_SHOWTABLE,this),t.removeCommand(a.TableEvent.CLICK_SEAT,a.ClickSeatCommand,this._controller),t.removeCommand(a.TableEvent.GET_PLAYER_HEADER_IMAGE,a.GetPlayerHeaderImageCommand,this._controller),t.removeCommand(a.TableEvent.SENDSBUYCHIP,a.SendsBuyChip,this),t.removeCommand(a.TableEvent.SENDSFLLOWBET,a.SendsFllowBetCommand,this),t.removeCommand(a.TableEvent.SENDSFLODBET,a.SendsFoldBetCommand,this),t.removeCommand(a.TableEvent.SENDSCHECKBET,a.SendsCheckBetCommand,this),t.removeCommand(a.TableEvent.SENDSRISEBET,a.SendsRaiseBetCommand,this),t.removeCommand(a.TableEvent.LEAVE_MATCH,a.LeaveMatchCommand,this),t.removeCommand(a.TableEvent.EXITGAME,a.ExitGameCommand,this),t.removeCommand(a.TableEvent.CLEARGAME,a.ClearGameCommand,this),t.removeCommand(a.TableEvent.EXITGAME_OK_SWITCH_LOBBY,this.EXITGAME_OK_SWITCH_LOBBY,this),t.removeCommand(a.TableEvent.COMMOND_WAIT_BIG_BLING,a.SendsWaitBigBlingCommand,this),t.removeCommand(a.TableEvent.GAME_TYPES,a.GameTypeCommand,this._controller),t.removeCommand(a.TableEvent.UPDATE_CURUSER_HEAD,a.UpdateCurUserHeadCommand,this._controller),t.removeCommand(a.TableEvent.UPDATE_OBSERVER_VIEW,a.UpdateObserverView,this._controller),t.removeCommand(a.TableEvent.SEND_RESET_BUYIN,a.SendResetBuyCommand,this),t.removeCommand(a.TableEvent.SEND_LEAVE_SEAT,a.SendLeaveSeatCommand,this),t.removeCommand(a.TableEvent.VIEW_FOLD_CLICK,this.VIEW_FOLD_CLICK,this),t.removeCommand(a.TableEvent.VIEW_CALL_CLICK,this.VIEW_CALL_CLICK,this),t.removeCommand(a.TableEvent.VIEW_BET_CLICK,this.VIEW_BET_CLICK,this),t.removeCommand(a.TableEvent.VIEW_RAISE_CLICK,this.VIEW_RAISE_CLICK,this),t.removeCommand(a.TableEvent.VIEW_JOINSIMILARTABLE_CLICK,this.VIEW_JOINSIMILARTABLE_CLICK,this),t.removeCommand(a.TableEvent.VIEW_POTBTN_CLICK,this.VIEW_POTBTN_CLICK,this),t.removeCommand(a.TableEvent.VIEW_CHECK_CLICK,this.VIEW_CHECK_CLICK,this),t.removeCommand(a.TableEvent.BTN_BACKSEAT,a.BtnBackSeatCommand,this),t.removeCommand(a.TableEvent.BTN_ISSHOWCARD,a.BtnShowCardCommand,this),t.removeCommand(a.TableEvent.VIEW_WAIT_BIGBLIND_CLICK,this.VIEW_WAIT_BIGBLIND_CLICK,this),t.removeCommand(a.TableEvent.VIEW_POTBAR_MOVE,this.VIEW_POTBAR_MOVE,this),t.removeCommand(a.TableEvent.VIEW_SITOUT_CLICK,this.VIEW_SITOUT_CLICK,this),t.removeCommand(a.TableEvent.VIEW_ADDONBUY_CLICK,this.VIEW_ADDONBUY_CLICK,this),t.removeCommand(a.TableEvent.VIEW_REBUY_CLICK,this.VIEW_REBUY_CLICK,this),t.removeCommand(a.TableEvent.VIEW_REENTER_CLICK,this.VIEW_REENTER_CLICK,this),t.removeCommand(a.TableEvent.JOIN_SIMILAR_TABLE,this.JOIN_SIMILAR_TABLE,this),t.removeCommand(a.TableEvent.OPEN_STORE,this.OPEN_STORE,this),t.removeCommand(a.TableEvent.CLEAR_SELF_OPERASTATE,this.CLEAR_SELF_OPERASTATE,this)},Object.defineProperty(n.prototype,"tableProcessor",{get:function(){return a.TableData.tableSocketSerivce.tableMessageProcessor},enumerable:!0,configurable:!0}),n.prototype.init=function(){t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_USERLIST),a.AckUserListCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDGAMEINFO),a.SendGameinfoCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_GAMERULE),a.GameRuleCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDUSERINFO),a.SendUserinfoCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_BLINDCHANGE),a.BlindChangeCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_BLINDINFO),a.NextBlindInfoCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CHANGETABLE),a.ChangeTableCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CHECKBET),a.AckCheckbetCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SITDOWN),a.AcksitdownSeatCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_BUYCHIP),a.AckbuChipCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_ADDUSER),a.AckAddUserToListCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_DELETEUSER),a.AckDeleteUserFromListCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_PUSHPRECOIN),a.PreCoinCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_PUSHBLINDCOIN),a.BlindCoinCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_INITCARD),a.InitCardCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_USEDELAYTIME),a.UseDelayTime,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_FOLDBET),a.AckfoldbetCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_LEAVETABLE),a.LeaveTableCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDOVERTURN),a.SendOverTurnCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_LEAVESEAT),a.LeaveSeatCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_FOLLOWBET),a.AckfollowbetCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_FLOPCARD),a.SendflopcardCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TURNCARD),a.SendturnCardCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_RIVERCARD),a.SendRiveCardCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_RAISEBET),a.AckraisebetCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SHOWCARD),a.AckShowCardCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TESTRESULT),a.GameResultCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NEETBUYCHIP),a.NeetBugChipCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_MATCHCHIP),a.MathChipCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDRESTTIME),a.SendRestTimeCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_MODIFYCONFIG),a.ModifyCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CGZ_REPLACEBYSELF),a.UserBeSqueezedOutCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NTFLOOKONUSERLEAVETABLE),a.NtfLookonUserLeaveTableCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_REBUY),a.RebuyCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDRANK),a.SendRankCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SENDUSERRANK),a.SendUserRandCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NTFUSERWND),a.ResetBuyInRefreshWndCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CGZINITBUYCHIP),a.ResetBuyInCommand,this._controller),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NTFBEKIT),this.ntfBeKit,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_LATERSIGN_NTF_RESULTLATER),this.ntfResultLater,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NTFADDONTIME),this.ntfAddOnTime,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_LATERSIGN_NTF_NEWPLAYERENTERTABLE),this.ntfNewPlayerEnterTable,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SUP_NTF_GETSUPERGAME),a.AckBuySuperGameCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NEWFULL_NTFACTSTATE),a.FullNewActNtfActStateCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_EXCHANGEHYD),a.AckhydResultCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_INS_Ntf_InsInfo_EnterMatch),a.INSNtfInsInfoEnterMatchCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NEWFULL_CURACTSTATE),a.FullNewActNtfCurMatchActStateCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NEWFULL_CURPROGRESS),a.FullNewActNtfProgressCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CHANGEHYD),a.AckChangehydCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_PRIVATECHAT),a.AckprivatechatCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TIYAN_MAXTIYANNUM),a.TiYanMaxTiYanNumCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_SHOWPICTRUE),a.AckShowPictrueCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_KICK),a.AckKickCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_HORN),a.AckBroadcastCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TIYAN_NEWGAMESTART),a.TiYanNewGameStartCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_GIVEGIFT),a.ShowGiveGiftFlashCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_GIVEITEM),a.RecvItemFromOther,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_ABLEORUNABLECHAT),a.AckeblerunablechatCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_BROADCAST_MATCHRANK),a.AckBroadcastMatchRankCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_TIYAN_NTF_NEWGAMESTART),a.TiYanNewGameStartAckCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_CHATMSG),a.AckChatMsgCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_UNABLECHATLIST),a.AckUnblechatListCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_PRESENTCOINS),a.AckPresentcoinsCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NTF_BOG),a.FullNewActNtfBogCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_NOWELTER),a.NowelterCommand,this),t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_BROADCAST_FACE),this.OGID_BROADCAST_FACE,this),t.addCommand(a.TableEvent.CONN_TABLE_SERVER,this.initTableView,this),t.addCommand(a.TableEvent.LOGINOK_SHOWTABLE,this.LOGINOK_SHOWTABLE,this),t.addCommand(a.TableEvent.CLICK_SEAT,a.ClickSeatCommand,this._controller),t.addCommand(a.TableEvent.GET_PLAYER_HEADER_IMAGE,a.GetPlayerHeaderImageCommand,this._controller),t.addCommand(a.TableEvent.SENDSBUYCHIP,a.SendsBuyChip,this),t.addCommand(a.TableEvent.SENDSFLLOWBET,a.SendsFllowBetCommand,this),t.addCommand(a.TableEvent.SENDSFLODBET,a.SendsFoldBetCommand,this),t.addCommand(a.TableEvent.SENDSCHECKBET,a.SendsCheckBetCommand,this),t.addCommand(a.TableEvent.SENDSRISEBET,a.SendsRaiseBetCommand,this),t.addCommand(a.TableEvent.LEAVE_MATCH,a.LeaveMatchCommand,this),t.addCommand(a.TableEvent.EXITGAME,a.ExitGameCommand,this),t.addCommand(a.TableEvent.CLEARGAME,a.ClearGameCommand,this),t.addCommand(a.TableEvent.EXITGAME_OK_SWITCH_LOBBY,this.EXITGAME_OK_SWITCH_LOBBY,this),t.addCommand(a.TableEvent.COMMOND_WAIT_BIG_BLING,a.SendsWaitBigBlingCommand,this),t.addCommand(a.TableEvent.GAME_TYPES,a.GameTypeCommand,this._controller),t.addCommand(a.TableEvent.UPDATE_CURUSER_HEAD,a.UpdateCurUserHeadCommand,this._controller),t.addCommand(a.TableEvent.UPDATE_OBSERVER_VIEW,a.UpdateObserverView,this._controller),t.addCommand(a.TableEvent.SEND_RESET_BUYIN,a.SendResetBuyCommand,this),t.addCommand(a.TableEvent.SEND_LEAVE_SEAT,a.SendLeaveSeatCommand,this),t.addCommand(a.TableEvent.VIEW_FOLD_CLICK,this.VIEW_FOLD_CLICK,this),t.addCommand(a.TableEvent.VIEW_CALL_CLICK,this.VIEW_CALL_CLICK,this),t.addCommand(a.TableEvent.VIEW_BET_CLICK,this.VIEW_BET_CLICK,this),t.addCommand(a.TableEvent.VIEW_RAISE_CLICK,this.VIEW_RAISE_CLICK,this),t.addCommand(a.TableEvent.VIEW_JOINSIMILARTABLE_CLICK,this.VIEW_JOINSIMILARTABLE_CLICK,this),t.addCommand(a.TableEvent.VIEW_POTBTN_CLICK,this.VIEW_POTBTN_CLICK,this),t.addCommand(a.TableEvent.VIEW_CHECK_CLICK,this.VIEW_CHECK_CLICK,this),t.addCommand(a.TableEvent.BTN_BACKSEAT,a.BtnBackSeatCommand,this),t.addCommand(a.TableEvent.BTN_ISSHOWCARD,a.BtnShowCardCommand,this),t.addCommand(a.TableEvent.VIEW_WAIT_BIGBLIND_CLICK,this.VIEW_WAIT_BIGBLIND_CLICK,this),t.addCommand(a.TableEvent.VIEW_POTBAR_MOVE,this.VIEW_POTBAR_MOVE,this),t.addCommand(a.TableEvent.VIEW_SITOUT_CLICK,this.VIEW_SITOUT_CLICK,this),t.addCommand(a.TableEvent.VIEW_ADDONBUY_CLICK,this.VIEW_ADDONBUY_CLICK,this),t.addCommand(a.TableEvent.VIEW_REBUY_CLICK,this.VIEW_REBUY_CLICK,this),t.addCommand(a.TableEvent.VIEW_REENTER_CLICK,this.VIEW_REENTER_CLICK,this),t.addCommand(a.TableEvent.JOIN_SIMILAR_TABLE,this.JOIN_SIMILAR_TABLE,this),t.addCommand(a.TableEvent.OPEN_STORE,this.OPEN_STORE,this),t.addCommand(a.TableEvent.CLEAR_SELF_OPERASTATE,this.CLEAR_SELF_OPERASTATE,this)
},n.prototype.ntfAddOnTime=function(e){var i=a.TableData.gameinfo,n=a.TableData.userData,o=n.getUserByName(n.currentName),r=e.data;i.getGameInfo().mathId!=r.szMatchId||i.getGameInfo().tableId!=r.bTableid||o.isObserver||(i.getGameInfo().isNtfAddOnTime=!0,i.getGameInfo().ntfAddOnTime=r.nTime,this._controller.tableMeditor.visMatchNotice(!0),r.nTime>1?this._controller.tableMeditor.setMatchNotice(t.getLang("addon_operatime",r.nTime)):this._controller.tableMeditor.setMatchNotice(t.getLang("addon_operatime",r.nTime)))},n.prototype.ntfNewPlayerEnterTable=function(e){var i,n=a.TableData.gameinfo,o=a.TableData.userData,r=this._controller.seatMeditor,s=e.data;if(n.getGameInfo().mathId==s.szMatchID&&n.getGameInfo().tableId==s.nTableId){var l=o.getUserByName(o.currentName);s.szRoleName==o.currentName&&(l.serverSeat=s.nSeat,l.uiSeat=r.serverSeatTouiSeat(s.nSeat,l.serverSeat,h));var h=n.getGameInfo().maxPlayer;i=l?r.serverSeatTouiSeat(s.nSeat,l.serverSeat,h):s.nSeat;var c=o.getUserByUIseat(i);null!=c&&(c.uiSeat=c.uiSeat%9+9),o.addUser(s.szRoleName);var u=o.getUserByName(s.szRoleName);null!=u&&(u.serverSeat=s.nSeat,u.roleName=s.szRoleName,u.nickName=s.szCfUserName,u.ourgameId=s.szOurGameId,u.uiSeat=i,u.goldNum=t.int64To32(s.nChip)),r.hidePlayer(i),r.changGold(i,u.goldNum),r.addPlayerHeader(s.szRoleName,i),t.dispatch(new t.BaseEvent(a.TableEvent.GET_PLAYER_HEADER_IMAGE,{serverSeatArr:[s.nSeat],roleNameArr:[s.szRoleName]})),t.dispatch(new t.BaseEvent(a.TableEvent.PLAYER_SITDOWN,{matchID:s.szMatchID,tableId:s.nTableId}))}},n.prototype.ntfResultLater=function(e){var i=a.TableData.gameinfo,n=e.data;if(i.getGameInfo().mathId==n.szMatchid&&i.getGameInfo().tableId==n.bTableid)if(1==n.nType){var o=t.getLang("match_delay_register_notice");t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,o)}else 2==n.nType&&this.readyReEnter()},n.prototype.readyReEnter=function(){var e=this,i=a.TableData.matchInfo,n=i.getMatch();if(n.nMatchReentryCount>0&&n.nMatchMaxSignLaterBlindClass>0&&n.nMatchMaxSignLaterBlindClass>=a.TableData.gameinfo.getGameInfo().blindClassLevel){n.signMatchInfo.nSignTicketNum>0&&t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_TICKET,n.ticketMatchItemId));var o,r=0;if(n.signMatchInfo.nSignTicketNum>0&&a.TableData.gameinfo.getGameInfo().myTicketsNum>0&&a.TableData.gameinfo.getGameInfo().myTicketsNum>=n.signMatchInfo.nSignTicketNum?(r=2,o=n.signMatchInfo.nSignTicketNum+" ticket"):(r=1,o=n.signMatchInfo.needFee+" gold"),1==r){if(a.TableData.gameinfo.getGameInfo().myCoin<n.signMatchInfo.needFee)return void t.MessageDialog.showMsg(t.MessageDialog.STATE_STORE,t.getLang("nomoney_gostore"))}else if(2==r&&a.TableData.gameinfo.getGameInfo().myTicketsNum<n.signMatchInfo.nSignTicketNum)return void t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,t.getLang("no_ticket"));if(a.TableData.autoReEnter)this._controller.tableMeditor.setRebuyAddonRenterData(4,a.TableData.gameinfo.getGameInfo(),n);else{var s=t.getLang("reenterMsgDialog",o,n.signMatchInfo.needFee.toString());t.MessageDialog.showMsg(t.MessageDialog.STATE_YESNO,s).setCallback(function(){e._controller.tableMeditor.setRebuyAddonRenterData(4,a.TableData.gameinfo.getGameInfo(),n)},function(){t.dispatch(new t.BaseEvent(a.TableEvent.EXITGAME,"true"))})}}else t.MessageDialog.showConfirmNotice(t.getLang("reenterEndRankMsg")).setCallback(function(){t.dispatch(new t.BaseEvent(a.TableEvent.EXITGAME,"true"))})},n.prototype.ntfBeKit=function(t){var e=a.TableData.userData,i=t.data;i.sRoleName==e.currentName?e.isBeKit=!0:e.isBeKit=!1},n.prototype.VIEW_REENTER_CLICK=function(t){var e=0;a.log.debug("reEnter触发了 门票:"+a.TableData.gameinfo.getGameInfo().myTicketsNum),e=a.TableData.gameinfo.getGameInfo().myTicketsNum>0?16:1,this.senReSign(e),a.TableData.isInGameView=!1},n.prototype.senReSign=function(e){var i=a.TableData.gameinfo,n=i.getGameInfo().mathId;t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_RESIGN_MATCH,{moneyType:e,matchid:n}))},n.prototype.VIEW_ADDONBUY_CLICK=function(e){var i=this,n=a.TableData.gameinfo,o=a.TableData.matchInfo,r=o.getMatch();if(1==r.FinalAddOnCount)return void t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,t.getLang("addon_onlybuyone"));1==r.FinalAddOnUseTicket&&t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_TICKET,r.ticketMatchItemId));var s,l=0;if(1==r.FinalAddOnUseTicket&&a.TableData.gameinfo.getGameInfo().myTicketsNum>0?(l=2,s="1 ticket"):(l=1,s=r.FinalAddOnValue+" gold"),1==l&&n.getGameInfo().myCoin<r.FinalAddOnValue)return void t.MessageDialog.showMsg(t.MessageDialog.STATE_STORE,t.getLang("nomoney_gostore"));if(1==e.data)this.tableProcessor.senRebuy(3,l);else{var h=t.getLang("addon_buy_chips",r.FinalAddOnChip,s);t.MessageDialog.showMsg(t.MessageDialog.STATE_YESNO,h).setCallback(function(){i.tableProcessor.senRebuy(3,l)},function(){})}},n.prototype.goStore=function(){t.dispatch(new t.BaseEvent(a.TableEvent.OPEN_STORE))},n.prototype.VIEW_REBUY_CLICK=function(e){var i=this;if(this.rebuyMsg&&this.rebuyMsg.parent)return void t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_WARNING);var n=a.TableData.gameinfo,o=a.TableData.matchInfo,r=o.getMatch(),s=a.TableData.userData,l=s.getUserByName(s.currentName);if(a.TableData.isEnableRebuy){if(l.goldNum>a.TableData.matchInfo.getMatch().ReBuyLimitValue)return void t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,t.getLang("rebuy_limit_chips",a.TableData.matchInfo.getMatch().ReBuyLimitValue));if(null!=l.handCardStatus&&4!=a.TableData.curMatchProcess&&!l.isFload)return void t.MessageDialog.showConfirmNotice(t.getLang("norebuy_ingame"));a.log.debug("门票:"+a.TableData.gameinfo.getGameInfo().myTicketsNum),1==r.RebuyUseTicket&&(t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_TICKET,r.ticketMatchItemId)),a.log.debug("门票:"+a.TableData.gameinfo.getGameInfo().myTicketsNum));var h,c=0;if(1==r.RebuyUseTicket&&a.TableData.gameinfo.getGameInfo().myTicketsNum>0?(c=2,h="1 ticket"):(c=1,h=r.ReBuyValue+" gold"),1==c&&n.getGameInfo().myCoin<r.ReBuyValue)return void t.MessageDialog.showMsg(t.MessageDialog.STATE_STORE,t.getLang("nomoney_gostore"));var u=1==e.data;if(u)this.tableProcessor.senRebuy(1,c);else{var p=t.getLang("rebuy_buy_chips",r.ReBuyChip,h);this.rebuyMsg=t.MessageDialog.showMsg(t.MessageDialog.STATE_YESNO,p,t.MessageDialog.REBUY).setCallback(function(){0==n.isAccptPlayNum&&0==l.goldNum?a.log.debug("排名信息已经下发，不需要弹出超时面板"):t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,t.getLang("rebuy_no_acctted"))}).setCallback(function(){i.tableProcessor.senRebuy(1,c)})}}else t.MessageDialog.showMsg(t.MessageDialog.STATE_NOTICE,t.getLang("rebuy_no_acctted"))},n.prototype.initTableView=function(t){},n.prototype.LOGINOK_SHOWTABLE=function(t){a.TableData.gameinfo.getGameInfo().gameStatus=a.GameInfoVO.GAME_IS_READY,a.TableData.gameinfo.getGameInfo().isShowTable=!0,a.TableData.isSendRank=!1},n.prototype.VIEW_ALLIN_CLICK=function(e){t.dispatch(new t.BaseEvent(a.TableEvent.SENDSRISEBET,[{coin:-1},"全下"]))},n.prototype.VIEW_POTBTN_CLICK=function(t){var e=a.TableData.gameinfo.getGameInfo(),i=a.TableData.userData.getUserByName(a.TableData.userData.currentName),n=t.data,o=0,r=0,s=0;s=o,s+=i.showGold,a.log.debug("bb:"+e.maxBlind+" jiazhu:"+s),r=a.TableData.gameinfo.getGameInfo().pool+o;var l,h=a.TableData.gameinfo.getGameInfo().currRaise-i.showGold;switch(n){case"dici":s=i.showGold+h+(r+h),l=i.goldNum>=s?s:i.goldNum;break;case"quanya":l=i.goldNum;break;case"quanya-1":l=i.goldNum-1;break;case"zuixiao":s=0==a.TableData.curMatchProcess?2.5*e.maxBlind:i.showGold+h+(r+h)/2,l=i.goldNum>=s?s:i.goldNum;break;case"double":s=0==a.TableData.curMatchProcess?3*e.maxBlind:i.showGold+h+(r+h)/4*3,l=i.goldNum>=s?s:i.goldNum}l=Math.floor(l),a.log.debug("compute:"+l),this._controller.operMeditor.view.setGold(l),this._controller.operMeditor.view.raiseBtn.visible?(a.TableData.jiazhuNum=l,this._controller.operMeditor.view.setRaise(a.TableData.jiazhuNum)):this._controller.operMeditor.view.betBtn.visible&&(a.TableData.xiazhuNum=l,this._controller.operMeditor.view.setBet(a.TableData.xiazhuNum))},n.prototype.VIEW_POTBAR_MOVE=function(t){this._controller.operMeditor.view.raiseBtn.visible?(a.TableData.jiazhuNum=t.data,this._controller.operMeditor.view.setRaise(a.TableData.jiazhuNum)):this._controller.operMeditor.view.betBtn.visible&&(a.TableData.xiazhuNum=t.data,this._controller.operMeditor.view.setBet(a.TableData.xiazhuNum))},n.prototype.VIEW_JOINSIMILARTABLE_CLICK=function(t){},n.prototype.VIEW_RAISE_CLICK=function(e){t.dispatch(new t.BaseEvent(a.TableEvent.SENDSRISEBET,[{coin:a.TableData.jiazhuNum},"加注到"]))},n.prototype.VIEW_BET_CLICK=function(e){t.dispatch(new t.BaseEvent(a.TableEvent.SENDSRISEBET,[{coin:a.TableData.xiazhuNum},"下注"]))},n.prototype.VIEW_CALL_CLICK=function(e){t.dispatch(new t.BaseEvent(a.TableEvent.SENDSFLLOWBET))},n.prototype.VIEW_FOLD_CLICK=function(e){var i=a.TableData.userData.getUserByName(a.TableData.userData.currentName);t.dispatch(new t.BaseEvent(a.TableEvent.SENDSFLODBET,[i.serverSeat,!0]))},n.prototype.VIEW_CHECK_CLICK=function(e){t.dispatch(new t.BaseEvent(a.TableEvent.SENDSCHECKBET))},n.prototype.VIEW_WAIT_BIGBLIND_CLICK=function(e){var i=e.data,n=a.TableData.userData,o=n.getUserByName(n.currentName);o&&("normal"==a.TableData.gameinfo.getGameInfo().currGameType?(o.isWaitBigBlind=i,t.dispatch(new t.BaseEvent(a.TableEvent.COMMOND_WAIT_BIG_BLING,o.isWaitBigBlind))):o.isWaitBigBlind=!1)},n.prototype.EXITGAME_OK_SWITCH_LOBBY=function(i){a.TableData.isInGameView=!1;var n=a.TableData.tableSocketSerivce;n.close(),a.TableData.leaveToLobbyMatchInfo&&(a.TableData.leaveToLobbyMatchInfo=!1,t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_OPEN_MATCHINFO,a.TableData.matchID))),t.Context.getInstance().moudleManager.loadModule(e.ModuleName.LOBBY)},n.prototype.VIEW_SITOUT_CLICK=function(t){t.data},n.prototype.OPEN_STORE=function(t){a.log.debug("TableContrller OPEN_STORE")},n.prototype.JOIN_SIMILAR_TABLE=function(e){t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_SIMILAR_TABLE))},n.prototype.CLEAR_SELF_OPERASTATE=function(t){this._controller.seatMeditor.changState(0,"")},n.prototype.OGID_BROADCAST_FACE=function(t){},n}(t.Controller);a.TableMessageController=i,__reflect(i.prototype,"wpt.play.table.TableMessageController")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return a.call(this)||this}return __extends(i,a),i.prototype.clear=function(){a.prototype.clear.call(this)},i.prototype.init=function(){t.addCommand(t.ToTableEvent.TO_TABLE_PIPE,this.REV_TABLE_DATA,this)},i.prototype.REV_TABLE_DATA=function(t){e.log.debug("TablePipeController.REV_TABLE_DATA",t.eventType),this.handleRevTableMsg(t.eventType,t.data)},i.prototype.handleRevTableMsg=function(e,a){switch(e){case t.ToTableEvent.START_NORMAL:this.startNormalMessage(a);break;case t.ToTableEvent.START_MATCH:this.startMatchMessage(a);break;case t.ToTableEvent.TO_TABLE_SIGNEDMATCH_READYSTART:this.TO_TABLE_SIGNEDMATCH_READYSTART(a);break;case t.ToTableEvent.TO_TABLE_UPDATE_HEAD:this.updateCurrentUserHead(a);break;case t.ToTableEvent.TO_TABLE_UPDATE_REBUY_REFILL:this.updateRebuyAndRefill(a);break;case t.ToTableEvent.TO_TABLE_UPDATE_CARDLIST:this.updateCardList(a);break;case t.ToTableEvent.TO_TABLE_UPDATE_GIFTLIST:this.updateGiftTableList(a);break;case t.ToTableEvent.TO_TABLE_REFRESH_TICKET:this.TO_TABLE_REFRESH_TICKET(a);break;case t.ToTableEvent.TO_TABLE_REFRESH_COIN:this.TO_TABLE_REFRESH_COIN(a);break;case t.ToTableEvent.TO_TABLE_EXIT_GAME:this.TO_TABLE_EXIT_GAME(a)}},i.prototype.TO_TABLE_EXIT_GAME=function(a){t.CommonData.playerStatus=3,e.TableData.leaveToLobbyMatchInfo=!1,t.dispatch(new t.BaseEvent(e.TableEvent.EXITGAME,"false"))},i.prototype.TO_TABLE_REFRESH_COIN=function(t){var a=e.TableData.gameinfo.getGameInfo();a&&(a.myCoin=t,e.log.debug("更新桌牌金币:"+t))},i.prototype.TO_TABLE_REFRESH_TICKET=function(t){var a=e.TableData.gameinfo;a.getGameInfo().myTicketsNum=t},i.prototype.updateRebuyAndRefill=function(t){e.log.debug("公共头更新了 autorebuy and refill:",t.isAutoRebuy,t.isAutoRefill),e.TableData.autoDairu=t.isAutoRebuy,e.TableData.autoBuqi=t.isAutoRefill},i.prototype.updateCurrentUserHead=function(a){e.log.debug("Table收到更新当前玩家的头像消息"),t.dispatch(new t.BaseEvent(e.TableEvent.UPDATE_CURUSER_HEAD))},i.prototype.TO_TABLE_SIGNEDMATCH_READYSTART=function(e){t.MessageDialog.showConfirmNotice(e)},i.prototype.startNormalMessage=function(a){e.TableData.GAMEID=a.GAMEID;var i=e.TableData.tableSocketSerivce;i.connected&&t.dispatch(new t.BaseEvent(e.TableEvent.CLEARGAME,{showHall:!1})),i.close(),e.TableData.autoDairu=!0,e.TableData.autoBuqi=!1,e.TableData.autoJoin=a.autoJoin,e.TableData.matchID=a.szMatchID,e.TableData.maxSeat=e.TableData.checkSeatCnt(a.nMaxPlayer),e.TableData.isFastJoin=a.isFastJoin,e.TableData.curMatchProcess=-1,e.TableData.userData.currentName=a.roleName,e.TableData.userData.currentNickName=a.nickName,e.TableData.userData.ourgameId=a.ourgameID,e.TableData.userData.isYouke=a.isVisitor,e.TableData.userData.isShield=a.isShield,e.TableData.userData.isCanChatOnObserve=a.isCanChatOnObserve,e.TableData.userData.userMasterInfo=a.userMasterInfo,e.TableData.userData.nInsBuyFlagShow=a.nInsBuyFlagShow,e.TableData.userData.nInsBuyFlagOpen=a.nInsBuyFlagOpen,e.TableData.tableGiftList=a.tableGiftList,e.TableData.imgUrlList=a.imgUrlList;var n=new e.MatchMessageVO;n.cert=a.cert,n.ip=a.ip,n.iport=a.port,n.mathId=a.szMatchID,n.mathName=a.szMatchName,n.tableId=a.tableID,n.templateId=a.templateId,n.mathType=a.nMatchMode,n.bigBlind=a.bigBlind,n.minBlind=a.minBlind,n.mycoin=a.mycoin,n.mygold=a.mygold,n.displaySimilarTable=a.displaySimilarTable,n.gameAddress=a.gameAddress,e.TableData.gameinfo.getGameInfo().userIP=a.userIP,e.TableData.gameinfo.getGameInfo().password=a.passWord,e.TableData.gameinfo.getGameInfo().tyPassword=a.tyPassword,e.TableData.gameinfo.getGameInfo().isTyCreater=a.isTyCreater,e.TableData.gameinfo.getGameInfo().tyTableId=a.tyTableId,e.TableData.gameinfo.getGameInfo().nTableId=a.nTableId,e.TableData.gameinfo.getGameInfo().maxCoin=a.maxCoin,e.TableData.gameinfo.getGameInfo().minCoin=a.minCoin,e.TableData.gameinfo.getGameInfo().isNoviceAreas=a.isNoviceAreas,e.TableData.gameinfo.getGameInfo().nField=a.nField,e.TableData.gameinfo.getGameInfo().isNoPrivateChat=1==a.privateChatFlag?!0:!1,e.TableData.gameinfo.getGameInfo().noviceSeat=a.seatSet,e.TableData.systemInfo.getsystemInfo().hornValue=a.hornValue,e.TableData.systemInfo.getsystemInfo().present_MaxCoin_Times=a.present_MaxCoin_Times,e.TableData.systemInfo.getsystemInfo().present_MaxTimes_Day=a.present_MaxTimes_Day,e.TableData.systemInfo.getsystemInfo().present_MaxTimes_User=a.present_MaxTimes_User,e.TableData.systemInfo.getsystemInfo().present_ChipToCoin=a.present_ChipToCoin,3!=n.mathType&&(e.TableData.systemInfo.getsystemInfo().present_ChipToCoin=1),e.TableData.matchInfo.setMatch(n),e.TableData.gameinfo.getGameInfo().maxPlayer=e.TableData.checkSeatCnt(a.nMaxPlayer),e.TableData.gameinfo.getGameInfo().seatType=0,a.hasOwnProperty("newOpenActState")&&1==a.newOpenActState&&(e.TableData.gameinfo.getGameInfo().seatType=1),e.TableData.gameinfo.getGameInfo().gameAddress=n.gameAddress,e.TableData.gameinfo.getGameInfo().mathId=n.mathId,e.TableData.gameinfo.getGameInfo().tableId=n.tableId,e.TableData.gameinfo.getGameInfo().templateId=n.templateId,e.TableData.userData.cert=t.Base64.decodeToByteArray(n.cert),e.TableData.gameinfo.getGameInfo().gameName=n.mathName,e.TableData.gameinfo.getGameInfo().maxBlind=n.bigBlind,e.TableData.gameinfo.getGameInfo().minBlind=n.minBlind,e.TableData.gameinfo.getGameInfo().curLevelMaxBlind=n.bigBlind,e.TableData.gameinfo.getGameInfo().curLevelMinBlind=n.minBlind,e.TableData.gameinfo.getGameInfo().preBlind=a.preBlind,e.TableData.gameinfo.getGameInfo().myCoin=n.mycoin,e.TableData.gameinfo.getGameInfo().myGold=n.mygold,e.TableData.gameinfo.getGameInfo().blindClassLevel=0,e.TableData.gameinfo.getGameInfo().allInFlag=!1,e.TableData.gameinfo.getGameInfo().hornCount=a.hornCount,e.TableData.gameinfo.isTiYan_CGZ=1==a.isTiYan_CGZ,e.TableData.gameinfo.getGameInfo().nLuckyID=a.nLuckyID,e.TableData.gameinfo.getGameInfo().isGraduTable=a.isGraduTable,e.TableData.gameinfo.getGameInfo().nGradu_Ball=a.nGradu_Ball,e.TableData.gameinfo.getGameInfo().nGradu_Val=a.nGradu_Val,e.TableData.gameinfo.getGameInfo().nGradu_PerPcomp=a.nGradu_PerPcomp,e.TableData.gameinfo.getGameInfo().nGradu_MinPlayer=a.nGradu_MinPlayer,e.TableData.gameinfo.getGameInfo().tableSkinName=a.tableSkinName,e.TableData.gameinfo.getGameInfo().isAccelerated=a.isAccelerated,e.TableData.gameinfo.getGameInfo().sLangID=a.sLangID,e.TableData.gameinfo.getGameInfo().sIpParse=a.sIpParse,e.TableData.gameinfo.getGameInfo().isQuickStart=(1==e.TableData.gameinfo.getGameInfo().nField||2==e.TableData.gameinfo.getGameInfo().nField)&&!e.TableData.gameinfo.isTiYan_CGZ,e.TableData.gameinfo.getGameInfo().fieldType=a.fieldType,e.TableData.gameinfo.getGameInfo().currGameType=e.TableConst.MatchType_Normal,t.dispatch(new t.BaseEvent(e.TableEvent.GAME_TYPES,"normal")),e.TableData.isInGameView=!0,t.dispatch(new t.BaseEvent(e.TableEvent.CONN_TABLE_SERVER))},i.prototype.startMatchMessage=function(t){e.TableData.GAMEID=t.GAMEID;var a=e.TableData.userData,i=e.TableData.matchInfo,n=e.TableData.gameinfo,o=e.TableData.systemInfo;e.TableData.autoDairu=t.isAutoRebuy,e.TableData.autoBuqi=t.isAutoRefill,e.TableData.autoJoin=!1,e.TableData.matchID=t.szMatchID,e.TableData.maxSeat=e.TableData.checkSeatCnt(t.nMaxPlayer),e.TableData.tableGiftList=t.tableGiftList,e.TableData.curMatchProcess=-1,a.currentName=t.roleName,a.currentNickName=t.nickName,a.ourgameId=t.ourgameID,a.isYouke=t.isVisitor,a.userMasterInfo=t.userMasterInfo,a.isShield=t.isShield,e.TableData.imgUrlList=t.imgUrlList;var r=new e.MatchMessageVO;r.cert=t.cert,r.ip=t.ip,r.iport=t.port,r.mathId=t.szMatchID,r.mathName=t.szMatchName,r.tableId=t.tableID,r.templateId=t.templateId,r.mycoin=t.mycoin,r.mygold=t.mygold,r.mathType=t.nMatchMode,r.blindClassLevel=t.nStartBlindClass,r.tableSkinName=t.tableSkinName,r.szStartTime=t.szStartTime,r.preBlindList=t.preBlindObj,r.gameAddress=t.gameAddress,n.getGameInfo().gameAddress=r.gameAddress,n.getGameInfo().userIP=t.userIP,n.getGameInfo().myCoin=r.mycoin,n.getGameInfo().myGold=r.mygold,n.getGameInfo().hornCount=t.hornCount,n.getGameInfo().isAccelerated=t.isAccelerated,n.getGameInfo().sLangID=t.sLangID,n.getGameInfo().sIpParse=t.sIpParse,n.getGameInfo().maxPlayer=e.TableData.checkSeatCnt(t.nMaxPlayer),n.getGameInfo().currGameType=e.TableConst.MatchType_Match,n.getGameInfo().fieldType=-1,n.getGameInfo().curLevelMaxBlind=t.bigBlind,n.getGameInfo().curLevelMinBlind=t.smallBlind,o.getsystemInfo().hornValue=t.hornValue,r.ReBuy=t.bReBuy,r.ReBuycount=t.bReBuycount,r.ReBuyValue=t.bReBuyValue,r.ReBuyChip=t.bReBuyChip,r.ReBuyLimitValue=t.bReBuyLimitValue,r.ReBuyBlindClass=t.bReBuyBlindClass,r.RebuyTimeout=t.bRebuyTimeout,r.FinalAddOn=t.bFinalAddOnTime>0?!0:!1,r.FinalAddOnTime=t.bFinalAddOnTime,r.FinalAddOnChip=t.bFinalAddOnChip,r.FinalAddOnValue=t.bFinalAddOnValue,r.FinalAddOnCount=0,r.RebuyUseTicket=t.bRebuyUseTicket,r.FinalAddOnUseTicket=t.bFinalAddOnUseTicket,r.nMatchReentryCount=t.nMatchReentryCount,r.nMatchMaxSignLaterBlindClass=t.nMatchMaxSignLaterBlindClass,e.log.debug("startMatchMessage,nMatchReentryCount",r.nMatchReentryCount),r.ticketMatchItemName=t.ticketMatchItemName,r.ticketMatchItemId=t.ticketMatchItemId,r.nMaxPlayer=t.nMaxPlayer,r.nSignPlayer=t.nSignPlayer,r.signMatchInfo.ticketsBool=t.ticketBool,r.signMatchInfo.ownTicketNum=t.ticketNumb,r.signMatchInfo.nSignTicketNum=t.nSignTicketNum,r.signMatchInfo.needFee=t.nSignFee+t.nCharge,t.hasOwnProperty("nTopIndex")&&(r.nTopIndex=t.nTopIndex),!e.TableData.isInGameView||t.isLaterResiter?(i.setMatch(r),this.startMatch(r)):(i.setAnotherMatch(r),e.log.error("玩家已经在牌桌内"+r.mathName,r.mathId)),e.TableData.isInGameView=!0},i.prototype.startMatch=function(a){var i=e.TableData.tableSocketSerivce;i.connected&&t.dispatch(new t.BaseEvent(e.TableEvent.CLEARGAME,{showHall:!1})),i.close();var n=e.TableData.gameinfo,o=e.TableData.userData,r=e.TableData.systemInfo;n.getGameInfo().gameAddress=a.gameAddress,n.getGameInfo().mathId=a.mathId,n.getGameInfo().tableId=a.tableId,n.getGameInfo().templateId=a.templateId,n.getGameInfo().blindClassLevel=a.blindClassLevel,n.getGameInfo().preBlind=0,n.getGameInfo().gameName=a.mathName,n.getGameInfo().allInFlag=!1,n.getGameInfo().nLuckyID=0,n.getGameInfo().isQuickStart=!1,n.isTiYan_CGZ=!1,n.getGameInfo().seatType=0,n.getGameInfo().tableSkinName=a.tableSkinName,o.cert=t.Base64.decodeToByteArray(a.cert),o.isCanChatOnObserve=!1,r.getsystemInfo().present_ChipToCoin=1,t.dispatch(new t.BaseEvent(e.TableEvent.GAME_TYPES,"match"));var s=Math.random()*(a.nSignPlayer>5e3?5e3:a.nSignPlayer<1e3?1e3:a.nSignPlayer);setTimeout(function(){t.dispatch(new t.BaseEvent(e.TableEvent.CONN_TABLE_SERVER))},s)},i.prototype.updateGiftTableList=function(a){e.TableData.tableGiftList=a.tableGiftList,t.dispatch(new e.TableEvent(e.TableEvent.UPDATE_TABLEGIFT_DATA))},i.prototype.updateCardList=function(t){e.TableData.imgUrlList=t.imgUrlList},i}(t.Controller);e.ToTableController=a,__reflect(a.prototype,"wpt.play.table.ToTableController")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(e,a,i){var n=t.call(this,e,a)||this;return n.context=i,n}return __extends(e,t),e}(t.BaseEvent);a.BASE=egret.getQualifiedClassName(a)+":",a.CHOOSE_EMOJI=a.BASE+"CHOOSE_EMOJI",a.BUY_EMOJI=a.BASE+"BUY_EMOJI",e.EmojiEvent=a,__reflect(a.prototype,"wpt.play.table.EmojiEvent")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(e,a,i){var n=t.call(this,e,a)||this;return n.context=i,n}return __extends(e,t),e}(t.BaseEvent);a.TO_LOBBYBTN_CLICK="TO_LOBBYBTN_CLICK",a.BASE=egret.getQualifiedClassName(a)+":",a.CONN_TABLE_SERVER=a.BASE+"CONN_TABLE_SERVER",a.CLICK_SEAT=a.BASE+"CLICK_SEAT",a.AUTO_LEAVE=a.BASE+"AUTO_LEAVE",a.AUTO_BUYIN=a.BASE+"AUTO_BUYIN",a.HOSTING=a.BASE+"HOSTING",a.PUT_CARD=a.BASE+"PUT_CARD",a.SEND_CHAT=a.BASE+"SEND_CHAT",a.SEND_BROADCAST=a.BASE+"SEND_BROADCAST",a.RECIVE_DEALER_MSG=a.BASE+"RECIVE_DEALER_MSG",a.LOGINOK_SHOWTABLE=a.BASE+"LOGINOK_SHOWTABLE",a.POPUP=a.BASE+"POPUP",a.POPUP_BUYIN=a.BASE+"POPUP_BUYIN",a.GET_PLAYER_HEADER_IMAGE=a.BASE+"GET_PLAYER_HEADER_IMAGE",a.SENDSBUYCHIP=a.BASE+"SENDSBUYCHIP",a.SENDSFLLOWBET=a.BASE+"SENDSFLLOWBET",a.SENDSCHECKBET=a.BASE+"SENDSCHECKBET",a.SENDSFLODBET=a.BASE+"SENDSFLODBET",a.SENDSRISEBET=a.BASE+"SENDSRISEBET",a.LEAVE_MATCH=a.BASE+"LEAVE_MATCH",a.EXITGAME=a.BASE+"EXITGAME",a.EXITGAME_OK_SWITCH_LOBBY=a.BASE+"EXITGAME_OK_SWITCH_LOBBY",a.CLEARGAME=a.BASE+"CLEARGAME",a.VIEW_FOLD_CLICK=a.BASE+"VIEW_FOLD_CLICK",a.VIEW_CALL_CLICK=a.BASE+"VIEW_CALL_CLICK",a.VIEW_BET_CLICK=a.BASE+"VIEW_BET_CLICK",a.VIEW_RAISE_CLICK=a.BASE+"VIEW_RAISE_CLICK",a.VIEW_CHECK_CLICK=a.BASE+"VIEW_CHECK_CLICK",a.VIEW_JOINSIMILARTABLE_CLICK=a.BASE+"VIEW_CHECK_CLICK",a.VIEW_POTBTN_CLICK=a.BASE+"VIEW_POT1_CLICK",a.BTN_BACKSEAT=a.BASE+"BTN_BACKSEAT",a.BTN_ISSHOWCARD=a.BASE+"BTN_ISSHOWCARD",a.VIEW_WAIT_BIGBLIND_CLICK=a.BASE+"CK_WAIT_BIGBLIND",a.COMMOND_WAIT_BIG_BLING=a.BASE+"COMMOND_WAIT_BIG_BLING",a.VIEW_POTBAR_MOVE=a.BASE+"VIEW_POTBAR_MOVE",a.GAME_TYPES=a.BASE+"GAME_TYPES",a.VIEW_SITOUT_CLICK=a.BASE+"SITOUTCLICK",a.VIEW_ADDONBUY_CLICK=a.BASE+"VIEW_ADDONBUY_CLICK",a.VIEW_REBUY_CLICK=a.BASE+"VIEW_REBUY_CLICK",a.VIEW_REENTER_CLICK=a.BASE+"VIEW_REENTER_CLICK",a.OPEN_STORE=a.BASE+"OPEN_STORE",a.JOIN_SIMILAR_TABLE=a.BASE+"JOIN_SIMILAR_TABLE",a.CLEAR_SELF_OPERASTATE=a.BASE+"CLEAR_SELF_OPERASTATE",a.SEND_INSURE=a.BASE+"SEND_INSURE",a.SEND_CHANGE_INSURE=a.BASE+"SEND_CHANGE_INSURE",a.SEND_BUY_INSURE=a.BASE+"SEND_BUY_INSURE",a.SEND_CHANGE_FlagOpen_INSURE=a.BASE+"SEND_CHANGE_FlagOpen_INSURE",a.DRAYBUYIN_CLOSE_CLICK=a.BASE+"DRAYBUYIN_CLOSE_CLICK",a.SEND_BUY_TABLEGIFT=a.BASE+"SEND_BUY_TABLEGIFT",a.UPDATE_CURUSER_HEAD=a.BASE+"UPDATE_CURUSER_HEAD",a.UPDATE_OBSERVER_VIEW=a.BASE+"UPDATE_OBSERVER_VIEW",a.SEND_RESET_BUYIN=a.BASE+"SEND_RESET_BUYIN",a.PLAYER_SITDOWN=a.BASE+"PLAYER_SITDOWN",a.SEND_LEAVE_SEAT=a.BASE+"SEND_LEAVE_SEAT",a.POPUP_EMOJI=a.BASE+"POPUP_EMOJI",a.POPUP_RECORD=a.BASE+"POPUP_RECORD",a.POPUP_TABLEGIFT=a.BASE+"POPUP_TABLEGIFT",a.BUY_TABLEGIFT=a.BASE+"BUY_TABLEGIFT",a.UPDATE_TABLEGIFT_DATA=a.BASE+"UPDATE_TABLEGIFT_DATA",a.POPUP_SHOW_VIDEO=a.BASE+"POPUP_SHOW_VIDEO",e.TableEvent=a,__reflect(a.prototype,"wpt.play.table.TableEvent")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.getEmotion=function(e){for(var a=t.EMOTIONS.length,i=0;a>i;i++){var n=t.EMOTIONS[i];if(n.code==e)return n}for(var a=t.SF_CAT_EMOTIONS.length,i=0;a>i;i++){var n=t.SF_CAT_EMOTIONS[i];if(n.code==e)return n}return null},t}();e.EMOTIONS=[{name:"daxiao",desc:"大笑",code:"face_1"},{name:"jingya",desc:"惊讶",code:"face_2"},{name:"bishi",desc:"鄙视",code:"face_3"},{name:"han",desc:"汗",code:"face_4"},{name:"aishang",desc:"哀伤",code:"face_5"},{name:"jiayou2",desc:"加油2",code:"face_6"},{name:"jiayou",desc:"加油",code:"face_7"},{name:"jidubishi",desc:"极度鄙视",code:"face_8"},{name:"zouta",desc:"揍他",code:"face_10"},{name:"daku",desc:"大哭",code:"face_11"},{name:"cuicu",desc:"催促",code:"face_12"},{name:"bishixiaoqi",desc:"不屑小钱",code:"face_13"},{name:"jianxiao",desc:"奸笑",code:"face_14"},{name:"anfu",desc:"安抚",code:"face_15"},{name:"touxiang",desc:"投降",code:"face_16"},{name:"baonu",desc:"暴怒",code:"face_17"},{name:"wenhao",desc:"问号",code:"face_18"},{name:"shaoxiang",desc:"烧香",code:"face_19"},{name:"sikao",desc:"思考",code:"face_20"},{name:"woshou",desc:"合作愉快",code:"face_21"},{name:"se",desc:"口水",code:"face_22"},{name:"kengdie",desc:"坑爹",code:"face_23"},{name:"emo",desc:"邪恶",code:"face_24"},{name:"dengdai",desc:"等待",code:"face_25"},{name:"touxiao",desc:"偷笑",code:"face_26"},{name:"zaijian",desc:"拜拜",code:"face_27"},{name:"guzhang",desc:"鼓掌",code:"face_28"},{name:"weiqu",desc:"委屈",code:"face_29"},{name:"shenli",desc:"胜利",code:"face_30"},{name:"kuangtu",desc:"狂吐",code:"face_31"},{name:"yun",desc:"晕",code:"face_32"},{name:"aixin",desc:"香吻，爱心",code:"face_33"},{name:"ku",desc:"哭泣",code:"face_34"},{name:"guilian",desc:"鬼脸",code:"face_35"},{name:"chifan",desc:"吃饭",code:"face_36"}],e.SF_CAT_EMOTIONS=[{name:"kexueguairen",desc:"NONO_科学怪人",code:"sf_face_1",isNeedPay:!0},{name:"dajiaoguai",desc:"爱_大脚怪",code:"sf_face_2",isNeedPay:!0},{name:"langren",desc:"暴怒_狼人",code:"sf_face_3",isNeedPay:!0},{name:"xixuegui",desc:"鼓掌_吸血鬼",code:"sf_face_4",isNeedPay:!0},{name:"munaiyi",desc:"惊讶_木乃伊",code:"sf_face_5",isNeedPay:!0},{name:"wushi",desc:"开心_巫师",code:"sf_face_6",isNeedPay:!0},{name:"xiaochou",desc:"哭泣_小丑",code:"sf_face_7",isNeedPay:!0},{name:"heimao",desc:"生气_黑猫",code:"sf_face_8",isNeedPay:!0},{name:"jiangshi",desc:"疑问_僵尸01",code:"sf_face_9",isNeedPay:!0},{name:"gui",desc:"震惊_鬼",code:"sf_face_10",isNeedPay:!0}],e.SF_CHRISMAS_EMOTIONS=[{name:"aixin",desc:"爱心",code:"sf_chrismas_1",isNeedPay:!0},{name:"baonu",desc:"暴怒",code:"sf_chrismas_2",isNeedPay:!0},{name:"daxiao",desc:"大笑",code:"sf_chrismas_3",isNeedPay:!0},{name:"emo",desc:"恶魔",code:"sf_chrismas_4",isNeedPay:!0},{name:"guilian",desc:"鬼脸",code:"sf_chrismas_5",isNeedPay:!0},{name:"han",desc:"汗",code:"sf_chrismas_6",isNeedPay:!0},{name:"jiayou",desc:"加油",code:"sf_chrismas_7",isNeedPay:!0},{name:"jiayou2",desc:"加油2",code:"sf_chrismas_8",isNeedPay:!0},{name:"ku",desc:"哭",code:"sf_chrismas_9",isNeedPay:!0},{name:"wenhao",desc:"问号",code:"sf_chrismas_10",isNeedPay:!0},{name:"yun",desc:"晕",code:"sf_chrismas_11",isNeedPay:!0}],e.EMOJI_YAN="yan",t.EmojiConst=e,__reflect(e.prototype,"wpt.play.table.EmojiConst")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.getPosByAry=function(t,e,a){return t[Math.ceil(a/3)-1][e]},t}();e.DIR_LEFT=1,e.DIR_RIGHT=2,e.MatchType_Normal="normal",e.MatchType_Match="match",e.MAX_CHIPPLAYER_HEAPCOL=5,e.MAX_CHIP_HEAPCOL=16,e.STATE_BET="bet",e.STATE_CALL="call",e.STATE_CHECK="check",e.STATE_FOLD="fold",e.STATE_RAISE="raise",e.STATE_SETTINGOUT="so",e.STATE_SMALLBLIND="smallBlind",e.STATE_BIGBLIND="bigBlind",e.STATE_ALLIN="allin",e.CARDTYPE_GAOPAI="High card",e.CARDTYPE_HUL="Full house",e.CARDTYPE_DUIZI="One pair",e.CARDTYPE_HJTHS="Royal flush",e.CARDTYPE_LIANGDUI="Two pair",e.CARDTYPE_SANTIAO="Three of a kind",e.CARDTYPE_SHUNZI="Straight",e.CARDTYPE_SITIAO="Four of a kind",e.CARDTYPE_TH="Flush",e.CARDTYPE_THS="Straight flush",e.CARDTYPE_WIN="win",e.All_GIVEUP="All_GIVEUP",e.All_NEXT="All_NEXT",e.ALL_RESET_BUY_IN="ALL_RESET_BUY_IN",e.All_QIPAI="All_QIPAI",e.All_QORR="All_QORR",e.All_GENZHUDAO="All_GENZHUDAO",e.All_GENZHUANY="All_GENZHUANY",e.All_RANGPAI="All_RANGPAI",e.All_ALLIN="All_ALLIN",e.Auto_Bu="Auto_Bu",e.Auto_Dai="Auto_Dai",e.Auto_Mai="Auto_Mai",e.Auto_Gou="Auto_Gou",e.POS_D=[[[685,820],[612,513],[871,509]],[[685,820],[277,673],[431,554],[612,513],[1276,513],[1457,554],[871,509]],[[685,820],[273,698],[356,584],[497,535],[679,509],[1209,509],[1390,535],[1532,584],[1614,698],[871,509]]],t.TableConst=e,__reflect(e.prototype,"wpt.play.table.TableConst")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this._creater="",this.unablechartArr=[],this.updateuserVO()}return Object.defineProperty(t.prototype,"creater",{get:function(){return this._creater},set:function(t){this._creater=t},enumerable:!0,configurable:!0}),t.prototype.updateUnableChart=function(t){this.unablechartArr=t},t.prototype.removeUserFromUnableChart=function(t){for(var e=0;e<this.unablechartArr.length;e++)if(this.unablechartArr[e]==t){this.unablechartArr.splice(e,1);break}},t.prototype.addUserFromUnableChart=function(t){for(var e=!1,a=0;a<this.unablechartArr.length;a++)if(this.unablechartArr[a]==t){e=!0;break}e||this.unablechartArr.push(t)},t.prototype.updateuserVO=function(){this.fuserList=[]},t.prototype.adduser=function(t){},t.prototype.refreshPlayerList=function(){},t.prototype.deleteuser=function(t,e){for(var a=0;a<this.fuserList.length;a++){var i=this.fuserList[a];if(i.roleName==t)return this.fuserList.splice(a,1),this.refreshPlayerList(),!0}return!1},t.prototype.getFuserinfo=function(){return this.fuserList},t.prototype.ischart=function(t){var e=!0;for(var a in this.unablechartArr)if(this.unablechartArr[a]==t){e=!1;break}return e},t.prototype.nameTochart=function(t){var e=null;for(var a in this.fuserList)if(this.fuserList[a].roleName==t){e=this.fuserList[a];break}return e},t}();e.NAME="FriendUserProxy",t.FriendUserModel=e,__reflect(e.prototype,"wpt.play.table.FriendUserModel")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){this.isAccptPlayNum=!0,this.isTiYan_CGZ=!1,this._destName="",this.gameInfoGetCount=0,this.autoBuQiConfig={},this.initgameInfo()}return e.prototype.initgameInfo=function(){this.gameInfo=new t.GameInfoVO},e.prototype.getGameInfo=function(){return this.gameInfo},e.prototype.getSuperChip=function(){if(0==this.getGameInfo().excessEnable)return 0;var t=0;return t},Object.defineProperty(e.prototype,"destName",{get:function(){return this._destName},set:function(t){this._destName=t},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.gameInfoGetCount=0,this.isAccptPlayNum=!0,this.getGameInfo().clear()},e}();e.NAME="GameinfoProxy",t.GameinfoModel=e,__reflect(e.prototype,"wpt.play.table.GameinfoModel")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this.staticNAME="MatchMessageProxy"}return t.prototype.setMatch=function(t){this._match=t},t.prototype.getMatch=function(){return this._match},t.prototype.setAnotherMatch=function(t){this._anotherMatch=t},t.prototype.getAnotherMatch=function(){return this._anotherMatch
},t}();t.MatchMessageModel=e,__reflect(e.prototype,"wpt.play.table.MatchMessageModel")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){this.staticNAME="SystemConfigInfoProxy",this.isAccptPlayNum=!0,this.initsystemInfo()}return e.prototype.initsystemInfo=function(){this.systemInfo=new t.SystemConfigInfoVO},e.prototype.getsystemInfo=function(){return this.systemInfo},e}();t.SystemConfigInfoModel=e,__reflect(e.prototype,"wpt.play.table.SystemConfigInfoModel")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(){function a(){}return Object.defineProperty(a,"coinLargerName",{get:function(){return t.getLang("lzcoins")},enumerable:!0,configurable:!0}),Object.defineProperty(a,"coinNormalName",{get:function(){return t.getLang("coins")},enumerable:!0,configurable:!0}),a.chickLeaveAry=function(t){var e=a.leaveUserAry.indexOf(t);-1!=e&&a.leaveUserAry.splice(e,1)},Object.defineProperty(a,"gameinfo",{get:function(){return a._gameinfo},set:function(t){a._gameinfo=t},enumerable:!0,configurable:!0}),a.initData=function(){a.userData=new e.UserModel,a.gameinfo=new e.GameinfoModel,a.systemInfo=new e.SystemConfigInfoModel,a.matchInfo=new e.MatchMessageModel,a.friendModel=new e.FriendUserModel,a.tableSocketSerivce=new e.TableSocketService},a.getPreCkSelected=function(t){return 1==a.preCkSelectedDict[t]},a.setPreCkSelected=function(t,e){a.preCkSelectedDict[t]=e},Object.defineProperty(a,"isEnableRebuy",{get:function(){return a.matchInfo.getMatch().ReBuy&&a.gameinfo.getGameInfo().blindClassLevel<=a.matchInfo.getMatch().ReBuyBlindClass},enumerable:!0,configurable:!0}),a.checkSeatCnt=function(t){return 2!=t&&6!=t&&9!=t&&(t=t>2&&6>t?6:9),t},Object.defineProperty(a,"tableGiftList",{get:function(){return a._giftList.length<1&&t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_TABLEGIFTLIST)),a._giftList},set:function(t){t&&(this._giftList=t)},enumerable:!0,configurable:!0}),a.createWebImage=function(e){var i=new t.WebImage;return i.autoResizeContent=!1,i.source=e,a.assetsPool[e]=i,i},a.getTableGiftById=function(t){for(var e=0;e<a.tableGiftList.length;e++){var i=a.tableGiftList[e];if(i.code==t)return i}return null},a.getUrlImage=function(t){var e=a.assetsPool[t];return(null==e||void 0==e)&&(e=this.createWebImage(t)),e},a.getRandomRoleIDSkin=function(t){if(void 0==this.randomSkinList){this.randomSkinList=[];for(var e=RES.getGroupByName("httpload_role"),a=0;a<e.length;a++)-1==e[a].name.indexOf("dealer")&&this.randomSkinList.push(e[a].name.substr(0,e[a].name.length-5))}return t?(void 0==this.RANDOM_PLAYERHEAD_DICT[t]&&(this.RANDOM_PLAYERHEAD_DICT[t]=this.randomSkinList[Math.floor(Math.random()*this.randomSkinList.length)]),this.RANDOM_PLAYERHEAD_DICT[t]):this.randomSkinList[Math.round(Math.random()*(this.randomSkinList.length-1))]},Object.defineProperty(a,"imgUrlList",{get:function(){return a._imgUrlList},set:function(e){if(e){a._imgUrlList=e;for(var i=0;i<e.length;i++){var n=e[i],o=t.readMultiByte(n.url,t.CoreData.Encode),r=a.assetsPool[o];null==r&&(r=new eui.Image,r.source=o,a.assetsPool[o]=r)}}},enumerable:!0,configurable:!0}),a.getImgById=function(e){for(var i=0;i<a.imgUrlList.length;i++){var n=a.imgUrlList[i],o=t.readMultiByte(n.itemId,t.CoreData.Encode);if(o==e)return n}return null},a}();a.isShowVideo=!1,a.isInGameView=!1,a.leaveUserAry=[],a.WinnerUISeat=0,a.curMatchProcess=-1,a.maxSeat=9,a.canAutoJoinTable=!1,a.matchState=0,a.isSendRank=!1,a.preCkSelectedDict={},a.clear=!1,a.disMark=!1,a.allinIsFollow=!1,a.xiazhuNum=0,a.jiazhuNum=0,a.genzhuNum=0,a.panNo=0,a.reBuyType="coin",a.needRebuyRoleNames=[],a.testResult_tweenFuncArr=[],a.testResult_tweenCoreArr=[],a.TourModeOverMovieDelayTime=-1,a.assetsPool={},a._giftList=[],a.RANDOM_PLAYERHEAD_DICT={},a._imgUrlList=[],e.TableData=a,__reflect(a.prototype,"wpt.play.table.TableData")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){this.staticNAME="UserProxy",this._currentName="",this.isYouke=!1,this.is360=!1,this.userInfoGetCount=0,this.isCanChatOnObserve=!1,this.userMlevUpgrade=!1,this.currentNickName=null,this.firstMatchID=null,this.gameCount=0,this.isBeKit=!1,this.userDictionary={}}return Object.defineProperty(e.prototype,"currentName",{get:function(){return this._currentName},set:function(t){this._currentName=t},enumerable:!0,configurable:!0}),e.prototype.addUser=function(e){if(!this.userDictionary[e]){var a=new t.UserinfoVO(e);a.nickName=e,this.userDictionary[e]=a}},e.prototype.deleterUser=function(t){void 0!=this.userDictionary[t]&&delete this.userDictionary[t]},e.prototype.deleterAll=function(){this.userDictionary=null,this.userDictionary={}},e.prototype.clear=function(){this.deleterAll(),this.userInfoGetCount=0},e.prototype.hasUser=function(t){return this.userDictionary.hasOwnProperty(t)},e.prototype.getUserByName=function(t){return void 0!=this.userDictionary[t]?this.userDictionary[t]:null},e.prototype.getUserByUIseat=function(t,e){void 0===e&&(e=!0);var a=null;for(var i in this.userDictionary){var n=this.userDictionary[i];if(e){if(n.uiSeat==t&&n.uiSeat<=9&&n.uiSeat>=0){a=n;break}}else if(n.uiSeat%9==t&&n.uiSeat>=9){a=n;break}}return a},e.prototype.getUserByServerseat=function(t,e){void 0===e&&(e=!0);var a=null;for(var i in this.userDictionary){var n=this.userDictionary[i];if(e){if(n.serverSeat==t&&n.uiSeat<=9&&n.uiSeat>=0){a=n;break}}else if(n.serverSeat==t&&n.uiSeat>=9){a=n;break}}return a},e.prototype.getCurPlayerVO=function(){return this.getUserByName(this.currentName)},e.prototype.getTableEmptySeat=function(t,e){return-1},e.prototype.getPlayerCountInSeat=function(t){void 0===t&&(t=!1);var e;for(var a in this.userDictionary){var i=this.userDictionary[a];i.uiSeat<9&&i.uiSeat>=0&&(t?null!=i.handCardStatus&&e++:e++)}return e},e.prototype.getPlayerCountBuyInSuccess=function(t){void 0===t&&(t=!0);var e=0;for(var a in this.userDictionary){var i=this.userDictionary[a];i.goldNum>0&&!i.isObserver&&(t?e++:t||1==i.manipulateState||e++)}return e},Object.defineProperty(e.prototype,"allUser",{get:function(){return this.userDictionary},enumerable:!0,configurable:!0}),e.prototype.getPlayerInSeat=function(){var t=new Array;for(var e in this.userDictionary){var a=this.userDictionary[e];a.uiSeat<9&&a.uiSeat>=0&&t.push(a)}return t},e.prototype.isUserInSeat=function(t){var e=this.getUserByName(t);return e&&e.uiSeat<9&&e.uiSeat>=0?!0:!1},e}();t.UserModel=e,__reflect(e.prototype,"wpt.play.table.UserModel")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e=-1),this._value=0,this._color=0,-1!=e&&(this.color=e),-1!=t&&(this.value=t)}return Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!0,configurable:!0}),t}();t.CardVO=e,__reflect(e.prototype,"wpt.play.table.CardVO")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"itemArr",{get:function(){return this._itemArr},set:function(t){this._itemArr=t},enumerable:!0,configurable:!0}),t}();t.ExpressionVO=e,__reflect(e.prototype,"wpt.play.ExpressionVO")}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(){function e(){this._ischart=!0,this._flag=0}return Object.defineProperty(e.prototype,"clientID",{get:function(){return this._clientID},set:function(t){this._clientID=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ischart",{get:function(){return this._ischart},set:function(t){this._ischart=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cuble",{get:function(){return this._cuble},set:function(t){this._cuble=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mark",{get:function(){return this._mark},set:function(t){this._mark=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userGold",{get:function(){return this._userGold},set:function(e){this._userGold=e,"0"==e&&(this._userGold=t.getLang("旁观"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roleName",{get:function(){return this._roleName},set:function(t){this._roleName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nIp",{get:function(){return this.nIp},set:function(t){this._nIp=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flag",{get:function(){return this._flag},set:function(t){this._flag=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nickName",{get:function(){return this._nickName},set:function(t){this._nickName=t},enumerable:!0,configurable:!0}),e}();e.FriendUserVO=a,__reflect(a.prototype,"wpt.play.table.FriendUserVO")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){this._currGameType="normal",this._currRaise=0,this._backseat=0,this._gamestatus=0,this._mathId="",this._tableId=0,this.tyTableId=0,this.templateId=0,this._smallBlindSeat=0,this._bigBlindSeat=0,this._gameName="",this._minRaise=0,this._pool=0,this._actionTime=15,this._delayTime=10,this._leavePeople=[],this._sitdownPlayer=[],this._isChangetable=!1,this._maxChip=0,this._minChip=0,this._maxBlind=0,this._minBlind=0,this._curLevelMaxBlind=0,this._curLevelMinBlind=0,this._myCoin=0,this._myGold=0,this._maxPlayer=0,this._userIP="",this._password="",this._myTicketsNum=0,this._nTableId=0,this._excessEnable=0,this._superChip=0,this._serviceCharge=0,this._tableMaxCoin=0,this.isForce=!1,this.forceMinChip=0,this.autoBuyChipCount=0,this.handBuyChipCount=0,this.lastChipRemain=0,this.autoBuyChip=0,this.allInFlag=!1,this.inTablePlayersDict={},this.inTablePlayerGift=[],this._playTime=0,this._blindClassLevel=0,this._noviceSeat=-1,this.nField=-1,this.fieldType=0,this.handCard=[],this.myHandCard=[],this.hasPreCoin=!1,this.preBlind=0,this.nLuckyID=0,this.isGraduTable=!1,this.nGradu_Ball=-1,this.nGradu_Val=-1,this.nGradu_PerPcomp=-1,this.nGradu_MinPlayer=-1,this.nOutMode=0,this.nOutCount=0,this.isQuickStart=!1,this.needAutoBuChip=!1,this.seatType=0,this.tableSkinName=null,this.nCGZSampRaiseBet=[],this.FastBets=[1e4,5e4,1e5,5e5,1e6,5e6,1e7,5e7,1e8,5e8],this.standUpServerSeat=0,this.selectResetBuyinInGame=!1,this.tyPassword="",this.isShowTable=!1,this.isTyCreater=!1,this.isDifferentChip=!1,this.isAccelerated=!1,this.isIPLimit=!1,this.isNoPrivateChat=!1,this.isClickOpenInsInGame=!1,this.isInsure=!1,this.hasPlayerBuyIns=!0,this.isInPrivateChat=!1,this.sLangID="",this.sIpParse="",this.isNtfAddOnTime=!1,this.isGetUserGoldInfo=!1,this.productid=1,this.sendCoinValueToHall=!1,this.sendGoldValueToHall=!1,this._gameStatus=e.GAME_IS_READY}return e.prototype.setHandCard=function(e,a,i,n,o){this.handCard[e]&&2==this.handCard[e].length?(this.handCard[e][0].value=a,this.handCard[e][0].color=i,this.handCard[e][1].value=n,this.handCard[e][1].color=o):this.handCard[e]=[new t.CardVO(a,i),new t.CardVO(n,o)]},e.prototype.setMyHandCard=function(e,a,i,n){this.myHandCard&&2==this.myHandCard.length?(this.myHandCard[0].value=e,this.myHandCard[0].color=a,this.myHandCard[1].value=i,this.myHandCard[1].color=n):this.myHandCard=[new t.CardVO(e,a),new t.CardVO(i,n)]},Object.defineProperty(e.prototype,"publicCard",{get:function(){return this._publicCard},set:function(t){this._publicCard=t},enumerable:!0,configurable:!0}),e.prototype.setPublicCard=function(e,a,i){this.publicCard[e]?(this.publicCard[e].value=a,this.publicCard[e].color=i):this.publicCard[e]=new t.CardVO(a,i)},e.prototype.clear=function(){this.smallBlindSeat=0,this.bigBlindSeat=0,this.currRaise=0,this.gamestatus=0,this.handCard=[],this.myHandCard=[],this.publicCard=[],this.minRaise=0,this.pool=0,this.nField=-1,this.autoBuyChipCount=0,this.handBuyChipCount=0,this.lastChipRemain=0,this.minChip=0,this.maxChip=0,this.curLevelMaxBlind=0,this.curLevelMinBlind=0,this.seatType=0,this.isQuickStart=!1,this.needAutoBuChip=!1,this.tableSkinName=null,this.standUpServerSeat=0,this.nCGZBeInitBuyChip=0,this.nCGZBeStandUp=0,this.nCGZBeSampRaise=0,this.tyPassword="",this.tyTableId=0,this.isShowTable=!1,this.isDifferentChip=!1,this.isIPLimit=!1,this.isClickOpenInsInGame=!1,this.isInsure=!1,this.hasPlayerBuyIns=!0,this.isInPrivateChat=!1,this.isNtfAddOnTime=!1,this.ntfAddOnTime=0,this.isGetUserGoldInfo=!1,this.restIndex=0},Object.defineProperty(e.prototype,"blindClassLevel",{get:function(){return this._blindClassLevel},set:function(t){this._blindClassLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nTableId",{get:function(){return this._nTableId},set:function(t){this._nTableId=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"password",{get:function(){return this._password},set:function(t){this._password=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myTicketsNum",{get:function(){return this._myTicketsNum},set:function(t){this._myTicketsNum=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userIP",{get:function(){return this._userIP},set:function(t){this._userIP=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPlayer",{get:function(){return this._maxPlayer},set:function(t){this._maxPlayer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currGameType",{get:function(){return this._currGameType},set:function(t){this._currGameType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isChangetable",{get:function(){return this._isChangetable},set:function(t){this._isChangetable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myCoin",{get:function(){return this._myCoin},set:function(t){0>=t&&(t=0),this._myCoin!=t&&(this._myCoin=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myGold",{get:function(){return this._myGold},set:function(t){0>=t&&(t=0),this._myGold!=t&&(this._myGold=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minBlind",{get:function(){return this._minBlind},set:function(t){this._minBlind=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxBlind",{get:function(){return this._maxBlind},set:function(t){this._maxBlind=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curLevelMinBlind",{get:function(){return this._curLevelMinBlind},set:function(t){this._curLevelMinBlind=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curLevelMaxBlind",{get:function(){return this._curLevelMaxBlind},set:function(t){this._curLevelMaxBlind=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minChip",{get:function(){return this._minChip},set:function(t){this._minChip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxChip",{get:function(){return this._maxChip},set:function(t){this._maxChip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sitdownPlayer",{get:function(){return this._sitdownPlayer},set:function(t){this._sitdownPlayer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leavePeople",{get:function(){return this._leavePeople},set:function(t){this._leavePeople=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionTime",{get:function(){return this._actionTime},set:function(t){this._actionTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delayTime",{get:function(){return this._delayTime},set:function(t){this._delayTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pool",{get:function(){return this._pool},set:function(t){this._pool=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minRaise",{get:function(){return this._minRaise},set:function(t){this._minRaise=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameName",{get:function(){return this._gameName},set:function(t){this._gameName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smallBlindSeat",{get:function(){return this._smallBlindSeat},set:function(t){this._smallBlindSeat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bigBlindSeat",{get:function(){return this._bigBlindSeat},set:function(t){this._bigBlindSeat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tableId",{get:function(){return this._tableId},set:function(t){this._tableId=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mathId",{get:function(){return this._mathId},set:function(t){this._mathId=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gamestatus",{get:function(){return this._gamestatus},set:function(t){this._gamestatus=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backseat",{get:function(){return this._backseat},set:function(t){this._backseat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currRaise",{get:function(){return this._currRaise},set:function(t){this._currRaise=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playTime",{get:function(){return this._playTime},set:function(t){this._playTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNoviceAreas",{get:function(){return this._isNoviceAreas},set:function(t){this._isNoviceAreas=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noviceSeat",{get:function(){return this._noviceSeat},set:function(t){this._noviceSeat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hornCount",{get:function(){return this._hornCount},set:function(t){this._hornCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minCoin",{get:function(){return this._minCoin},set:function(t){this._minCoin=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxCoin",{get:function(){return this._maxCoin},set:function(t){this._maxCoin=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excessEnable",{get:function(){return this._excessEnable},set:function(t){this._excessEnable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"superChip",{get:function(){return this._superChip},set:function(t){this._superChip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serviceCharge",{get:function(){return this._serviceCharge},set:function(t){this._serviceCharge=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tableMaxCoin",{get:function(){return this._tableMaxCoin},set:function(t){this._tableMaxCoin=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameStatus",{get:function(){return this._gameStatus},set:function(t){this._gameStatus=t},enumerable:!0,configurable:!0}),e.prototype.getSeatPosition=function(t,e){return(t+this.maxPlayer-e)%this.maxPlayer},e}();e.GAME_IS_READY="GAME_IS_READY",e.GAME_IS_START="GAME_IS_START",e.GAME_IS_FINISH="GAME_IS_FINISH",e.GAME_IS_INTERRUPT="GAME_IS_INTERRUPT",t.GameInfoVO=e,__reflect(e.prototype,"wpt.play.table.GameInfoVO")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this.signMatchInfo={},this.blindClassLevel=0,this.nTopIndex=0,this.tableSkinName=null}return Object.defineProperty(t.prototype,"mycoin",{get:function(){return this._mycoin},set:function(t){this._mycoin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mygold",{get:function(){return this._mygold},set:function(t){this._mygold=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minBlind",{get:function(){return this._minBlind},set:function(t){this._minBlind=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bigBlind",{get:function(){return this._bigBlind},set:function(t){this._bigBlind=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mathType",{get:function(){return this._mathType},set:function(t){this._mathType=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"servicePay",{get:function(){return this._servicePay},set:function(t){this._servicePay=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mathName",{get:function(){return this._mathName},set:function(t){this._mathName=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cert",{get:function(){return this._cert},set:function(t){this._cert=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tableId",{get:function(){return this._tableId},set:function(t){this._tableId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mathId",{get:function(){return this._mathId},set:function(t){this._mathId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iport",{get:function(){return this._iport},set:function(t){this._iport=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ip",{get:function(){return this._ip},set:function(t){this._ip=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ReBuy",{get:function(){return this._ReBuy},set:function(t){this._ReBuy=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ReBuycount",{get:function(){return this._ReBuycount},set:function(t){this._ReBuycount=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ReBuyValue",{get:function(){return this._ReBuyValue},set:function(t){this._ReBuyValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ReBuyChip",{get:function(){return this._ReBuyChip},set:function(t){this._ReBuyChip=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ReBuyLimitValue",{get:function(){return this._ReBuyLimitValue},set:function(t){this._ReBuyLimitValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ReBuyBlindClass",{get:function(){return this._ReBuyBlindClass},set:function(t){this._ReBuyBlindClass=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RebuyTimeout",{get:function(){return this._RebuyTimeout},set:function(t){this._RebuyTimeout=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FinalAddOn",{get:function(){return this._FinalAddOn},set:function(t){this._FinalAddOn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FinalAddOnTime",{get:function(){return this._FinalAddOnTime},set:function(t){this._FinalAddOnTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FinalAddOnChip",{get:function(){return this._FinalAddOnChip},set:function(t){this._FinalAddOnChip=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FinalAddOnValue",{get:function(){return this._FinalAddOnValue},set:function(t){this._FinalAddOnValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FinalAddOnCount",{get:function(){return this._FinalAddOnCount},set:function(t){this._FinalAddOnCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RebuyUseTicket",{get:function(){return this._RebuyUseTicket},set:function(t){this._RebuyUseTicket=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FinalAddOnUseTicket",{get:function(){return this._FinalAddOnUseTicket},set:function(t){this._FinalAddOnUseTicket=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ticketMatchItemName",{get:function(){return this._ticketMatchItemName},set:function(t){this._ticketMatchItemName=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ticketMatchItemId",{get:function(){return this._ticketMatchItemId},set:function(t){this._ticketMatchItemId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"templateId",{get:function(){return this._templateId},set:function(t){this._templateId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"szStartTime",{get:function(){return this._szStartTime},set:function(t){this._szStartTime=t},enumerable:!0,configurable:!0}),t}();t.MatchMessageVO=e,__reflect(e.prototype,"wpt.play.table.MatchMessageVO")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this._hornValue=1e4,this._present_MaxCoin_Times=0,this._present_MaxTimes_Day=3,this._present_MaxTimes_User=4,this._present_ChipToCoin=1,this._channelID=0}return Object.defineProperty(t.prototype,"isLZ",{get:function(){return this._isLZ},set:function(t){this._isLZ=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hornValue",{get:function(){return this._hornValue},set:function(t){this._hornValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"present_MaxCoin_Times",{get:function(){return this._present_MaxCoin_Times},set:function(t){this._present_MaxCoin_Times=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"present_MaxTimes_Day",{get:function(){return this._present_MaxTimes_Day},set:function(t){this._present_MaxTimes_Day=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"present_MaxTimes_User",{get:function(){return this._present_MaxTimes_User},set:function(t){this._present_MaxTimes_User=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"channelID",{get:function(){return this._channelID},set:function(t){this._channelID=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"present_ChipToCoin",{get:function(){return this._present_ChipToCoin},set:function(t){this._present_ChipToCoin=t},enumerable:!0,configurable:!0}),t}();t.SystemConfigInfoVO=e,__reflect(e.prototype,"wpt.play.table.SystemConfigInfoVO")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t){this._goldNum=0,this._showGold=0,this.uiSeat=-1,this._serverSeat=-1,this._isObserver=!0,this.isOperate=!1,this.isFload=!1,this.isWaitBigBlind=!1,this.manipulateState=0,this.handCardStatus=null,this._isSqueezedOut=!1,this.isStandUser=!1,this.selfBuyInRealChip=0,this.luckyID="0",this.roleName=t}return Object.defineProperty(t.prototype,"showGold",{get:function(){return this._showGold},set:function(t){this._showGold=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"goldNum",{get:function(){return this._goldNum},set:function(t){this._goldNum=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isObserver",{get:function(){return this._isObserver},set:function(t){this._isObserver=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSqueezedOut",{get:function(){return this._isSqueezedOut},set:function(t){this._isSqueezedOut=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverSeat",{get:function(){return this._serverSeat},set:function(t){this._serverSeat=t},enumerable:!0,configurable:!0}),t}();t.UserinfoVO=e,__reflect(e.prototype,"wpt.play.table.UserinfoVO")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(e){var i=a.call(this,e)||this;return i.cast[t.OGTableProtocol.OGID_WPT_CHATMSG]=i.ON_CHAT_RECIVE.bind(i),i.cast[t.OGTableProtocol.OGID_WPT_HORN]=i.ON_HORM_RECIVE.bind(i),i.cast[t.OGTableProtocol.OGID_GIVEGIFT]=i.ON_GIVEGIFT.bind(i),i.cast[t.OGTableProtocol.OGID_TEXASPOKER_GAMECONFIRMCONNECT]="game_ACKConfirmConnect",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_LOGINGAME]="game_AckLoginGame",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_TYCGZPSW]="ByteArray",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_ENTERMATCH]="game_AckEnterMatch",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_USERLIST]="OGUserList",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_SENDGAMEINFO]="game_SendGameInfo",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_GAMERULE]="OGGameRule",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_SENDUSERINFO]="game_SendUserInfo",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_BLINDCHANGE]="game_BlindChange",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_BLINDINFO]="game_NextBlindInfo",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_CHANGETABLE]="game_ChangeTable",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_CHECKBET]="game_AckCheckBet",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_SITDOWN]="OGAckSitdownSeat",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_ADDUSER]="OGAddUserToList",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_BUYCHIP]="OGAckBuyChip",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_DELETEUSER]="OGDeleteUserFromList",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_PUSHPRECOIN]="game_PreCoin",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_PUSHBLINDCOIN]="game_BlindCoin",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_INITCARD]="game_InitCard",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_USEDELAYTIME]="game_UseDelayTime",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_FOLDBET]="game_AckFoldBet",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_LEAVETABLE]="game_LeaveTable",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_SENDOVERTURN]="game_SendOverTurn",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_LEAVESEAT]="game_LeaveSeat",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_FOLLOWBET]="game_AckFollowBet",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_FLOPCARD]="game_SendFlopCard",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_TURNCARD]="game_SendTurnCard",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_RIVERCARD]="game_SendRiverCard",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_RAISEBET]="game_AckRaiseBet",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_SHOWCARD]="game_AckShowCard",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_TESTRESULT]="game_TestResult",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_NEETBUYCHIP]="OGNeetBugChip",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_MATCHCHIP]="game_MatchChip",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_SENDRESTTIME]="game_SendRestTime",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_MODIFYCONFIG]="OGModifyConfig",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_CGZ_REPLACEBYSELF]="OG_CGZ_Ntf_ReplaceBySelf",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_NTFLOOKONUSERLEAVETABLE]="OGCGZ_Ntf_LookOnUserLeaveTable",i.cast[t.OGTableProtocol.OGID_REBUY]="OGAckRebuy",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_SENDRANK]="game_SendRank",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_SENDUSERRANK]="game_SendUserRank",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_CGZINITBUYCHIP]="OGCGZ_AckInitBuyChip",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_NTFADDONTIME]="OGMatch_Ntf_AddOnTime",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_LATERSIGN_NTF_NEWPLAYERENTERTABLE]="OGMatchLaterSign_Ntf_NewPlayerEnterTable",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_LATERSIGN_NTF_RESULTLATER]="OGMatchLaterSign_NtfResultLater",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_NTFUSERWND]="OGCGZ_NtfUserWnd",i.cast[t.OGTableProtocol.OGID_INS_Req_AckCompensationRates]="OG_INS_AckCompensationRates",i.cast[t.OGTableProtocol.OGID_INS_UserCanBuyIns]="OG_INS_UserCanBuyIns",i.cast[t.OGTableProtocol.OGID_INS_Req_AckBuyIns]="OG_INS_AckBuyIns",i.cast[t.OGTableProtocol.OGID_INS_Ntf_OutsdelRes]="OG_INS_Ntf_OutsdelRes",i.cast[t.OGTableProtocol.OGID_TEXASPOKER_GIVETABLEGIFT]="OGGameGiveTableGift",i.cast[t.OGTableProtocol.OGID_BROADCAST_PLAYER_GIFT_STATUS]="OGBroadCastPlayerGiftStatus",i.cast[t.OGTableProtocol.OGID_BROADCAST_FACE]="OGBroadCastFace",i}return __extends(i,a),i.prototype.LOGIN_SHIELD=function(){var a=this.getProtoClassObj("OGShield_LoginGame");a.gameSvrAddress=t.play.table.TableData.gameinfo.getGameInfo().gameAddress,e.log.debug("table gameAddress:",a.gameSvrAddress,"high:"+a.gameSvrAddress.high,"low:"+a.gameSvrAddress.low),a.letter=t.play.table.TableData.userData.cert,a.sLangID=t.play.table.TableData.gameinfo.getGameInfo().sLangID,a.sIpParse=t.play.table.TableData.gameinfo.getGameInfo().sIpParse,a.nClientType=1,a.product=3,a.isGBK="GBK"==t.CoreData.Encode,e.log.debug("安全盾登录",a),this.send(t.OGTableProtocol.OGID_OGSHIELD_LOGINGAME,a)
},i.prototype.GAMECONFIRMCONNECT=function(){if(t.play.table.TableData.userData.isShield)this.LOGIN_SHIELD();else{var e=this.getProtoClassObj("game_REQConfirmConnect");e.sLangID=t.play.table.TableData.gameinfo.getGameInfo().sLangID,e.sIpParse=t.play.table.TableData.gameinfo.getGameInfo().sIpParse,e.nClientType=1,e.product=3,e.isGBK="GBK"==t.CoreData.Encode,this.send(t.OGTableProtocol.OGID_TEXASPOKER_GAMECONFIRMCONNECT,e)}},i.prototype.LOGINGAME=function(){var e=t.play.table.TableData.userData,a=this.getProtoClassObj("game_LoginGame");a.Letter=e.cert,this.send(t.OGTableProtocol.OGID_TEXASPOKER_LOGINGAME,a)},i.prototype.TYCGZPSW=function(){var e=this.getProtoClassObj("OGTyCGZ_ReqModifyPsw");e.nReqType=1,e.szRoleName=t.play.table.TableData.userData.currentName,e.szMatchId=t.play.table.TableData.gameinfo.getGameInfo().mathId;var a=new TextEncoding.TextEncoder(t.CoreData.Encode);e.szPsw=a.encode(t.play.table.TableData.gameinfo.getGameInfo().tyPassword).buffer,this.send(t.OGTableProtocol.OGID_TEXASPOKER_TYCGZPSW,e)},i.prototype.ENTERMATCH=function(){var a=this.getProtoClassObj("game_EnterMatch");a.MatchID=e.TableData.gameinfo.getGameInfo().mathId,a.Tableid=e.TableData.gameinfo.getGameInfo().tableId,a.sCFUserName=e.TableData.userData.currentNickName,a.isVisitor=e.TableData.userData.isYouke?1:0;var i=new md5;e.TableData.gameinfo.isTiYan_CGZ?a.PassWord=e.TableData.gameinfo.getGameInfo().tyPassword:a.PassWord=""!=e.TableData.gameinfo.getGameInfo().password?i.hex_md5(t.play.table.TableData.gameinfo.getGameInfo().password.toUpperCase()).toUpperCase():"",a.nBeChatLimit=e.TableData.userData.isCanChatOnObserve?0:1,a.nClientType=1,a.nUserWnd=t.int32To64(e.TableData.gameinfo.getGameInfo().myCoin),this.send(t.OGTableProtocol.OGID_TEXASPOKER_ENTERMATCH,a)},i.prototype.SITDOWN=function(e){this.send(t.OGTableProtocol.OGID_TEXASPOKER_SITDOWN,e)},i.prototype.OGID_TEXASPOKER_BUYCHIP=function(e){this.send(t.OGTableProtocol.OGID_TEXASPOKER_BUYCHIP,e)},i.prototype.OGID_TEXASPOKER_SHOWCARD=function(e){this.send(t.OGTableProtocol.OGID_TEXASPOKER_SHOWCARD,e)},i.prototype.OGID_TEXASPOKER_FOLLOWBET=function(e){this.send(t.OGTableProtocol.OGID_TEXASPOKER_FOLLOWBET,e)},i.prototype.OGID_TEXASPOKER_CHECKBET=function(e){this.send(t.OGTableProtocol.OGID_TEXASPOKER_CHECKBET,e)},i.prototype.OGID_TEXASPOKER_FOLDBET=function(a){this.send(t.OGTableProtocol.OGID_TEXASPOKER_FOLDBET,a),e.log.debug("this.send 弃牌OGID_TEXASPOKER_FOLDBET")},i.prototype.OGID_TEXASPOKER_RAISEBET=function(e){this.send(t.OGTableProtocol.OGID_TEXASPOKER_RAISEBET,e)},i.prototype.OGID_TEXASPOKER_LEAVEGAME=function(e){this.send(t.OGTableProtocol.OGID_TEXASPOKER_LEAVEGAME,e)},i.prototype.OGID_TEXASPOKER_WAITBLING=function(e){this.send(t.OGTableProtocol.OGID_TEXASPOKER_WAITBLING,e)},i.prototype.OGID_TEXASPOKER_LEAVESEAT=function(e){this.send(t.OGTableProtocol.OGID_TEXASPOKER_LEAVESEAT,e)},i.prototype.OGID_TEXASPOKER_DEALCARD=function(e){this.send(t.OGTableProtocol.OGID_TEXASPOKER_DEALCARD,e)},i.prototype.SEND_CHAT=function(a){var i=this.getProtoClassObj("OGChatMsg");i.MatchID=t.play.table.TableData.gameinfo.getGameInfo().mathId,i.sRoleName=a.senderName,i.szChat=a.content,i.sCFUserName=a.receiverName,i.nSeatID=t.play.table.TableData.userData.getUserByName(t.play.table.TableData.userData.currentName).serverSeat,i.result=0,e.log.debug("发送聊天消息",i),this.socket.send(t.OGTableProtocol.OGID_WPT_CHATMSG,i)},i.prototype.ON_GIVEGIFT=function(t){},i.prototype.ON_HORM_RECIVE=function(t){},i.prototype.ON_CHAT_RECIVE=function(t){},i.prototype.senRebuy=function(a,i){void 0===i&&(i=0);var n=t.play.table.TableData.userData,o=t.play.table.TableData.gameinfo,r=this.getProtoClassObj("OGReqRebuy");r.roleName=n.currentName,r.matchid=o.getGameInfo().mathId,r.tableid=o.getGameInfo().tableId,r.type=a,r.moneyType=i,e.log.debug("senRebuy",a,i),this.send(t.OGTableProtocol.OGID_REBUY,r)},i.prototype.OGID_TEXASPOKER_CGZINITBUYCHIP=function(e){this.send(t.OGTableProtocol.OGID_TEXASPOKER_CGZINITBUYCHIP,e)},i}(t.BaseMessageProcessor);e.TableMessageProcessor=a,__reflect(a.prototype,"wpt.play.table.TableMessageProcessor")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var i=a.call(this)||this;return i.setProto(t.ResConst.PROTO_NAME_TABLE),i.tableMessageProcessor=new e.TableMessageProcessor(i),i.registerMsg(i.tableMessageProcessor),i.setHeartBeat(2e4),i}return __extends(i,a),i.prototype.HEART_BEAT=function(a){void 0===a&&(a=null),e.log.debug("发送牌桌心跳"),this.send(t.OGTableProtocol.OGID_TEXASPOKER_IDLE)},i}(t.SocketService);e.TableSocketService=a,__reflect(a.prototype,"wpt.play.table.TableSocketService")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),Object.defineProperty(a.prototype,"commonView",{get:function(){return t.CommonView.getInstance()},enumerable:!0,configurable:!0}),a.prototype.showLoadUI=function(){t.DisplayUtil.addChild(this.screen.stage,this.commonView.loadEffect),t.AlignUtil.alginScreenCenter(this.commonView.loadEffect)},a.prototype.hideLoadUI=function(){t.DisplayUtil.remove(this.commonView.loadEffect)},a.prototype.loadTableGroups=function(e){this._callback=e;var a=t.CoreData.skinGroups.table,i=a.split(",");i&&i.length>0?(this.showLoadUI(),t.loadGroups(i,this,null,this.loadTableAllComplete.bind(this))):this.loadTableAllComplete()},a.prototype.loadTableAllComplete=function(){this.hideLoadUI(),this._callback&&this._callback(),this._callback=null},a}(t.Actor);e.PreTableLoad=a,__reflect(a.prototype,"wpt.play.table.PreTableLoad")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.initOnce=function(){a.log.debug("table.initOnce"),a.TableData.initData(),this.connController=new a.TableConnectController,this.messageController=new a.TableMessageController,this.messageController.setTableCtrl(this),this.pipeController=new a.ToTableController,this._seatMeditor=new a.SeatMeditor,this._operMeditor=new a.OperMeditor,this._dealerMeditor=new a.DealerMeditor,this._tableMeditor=new a.TableMeditor,this._chatMeditor=new a.ChatMeditor,this._tableGiftMeditor=new a.TableGiftMeditor,this.addBottomView(new a.TableView),null==this.promo&&(this.promo=new e.top.PromoManager),this.buyinPanel=new a.DragBuyinPanel,a.EffectManager.getInstance().setTableMain(this)},n.prototype.showBuyIn=function(){this.buyinPanel.show()},n.prototype.hideBuyIn=function(){this.buyinPanel.hide()},n.prototype.start=function(){i.prototype.start.call(this),e.js.checkgame(!0),a.log.debug("table.start"),t.SoundManager.getInstance().stopMusic(),this.addMeditor(this._seatMeditor),this.addMeditor(this._operMeditor),this.addMeditor(this._dealerMeditor),this.addMeditor(this._tableMeditor),this.addMeditor(this._chatMeditor),this.addMeditor(this._tableGiftMeditor),this.promo.getPromoTime(!1)},Object.defineProperty(n.prototype,"tableView",{get:function(){return this.view},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"seatMeditor",{get:function(){return this._seatMeditor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"operMeditor",{get:function(){return this._operMeditor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dealerMeditor",{get:function(){return this._dealerMeditor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tableMeditor",{get:function(){return this._tableMeditor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"chatMeditor",{get:function(){return this._chatMeditor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tableGiftMeditor",{get:function(){return this._tableGiftMeditor},enumerable:!0,configurable:!0}),n.prototype.clear=function(){i.prototype.clear.call(this),t.SoundManager.getInstance().stopAllAudio(),a.log.debug("TableMain.clear")},n}(t.ModuleStarter);a.TableMain=i,__reflect(i.prototype,"wpt.play.table.TableMain")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(){function a(){}return a.grayCard=function(e,i){void 0===i&&(i=!0),t.isempty(e)||(i?e.filters=[new egret.ColorMatrixFilter(a.grayMatrix)]:e.filters=null)},a.setbwBitmap=function(e,i){void 0===i&&(i=!0),t.isempty(e)||(i?e.filters=[new egret.ColorMatrixFilter(a.balckWhiteFilter)]:e.filters=null)},a.getDirBySeat=function(t,a){return t<=Math.ceil(a/2)-1?e.TableConst.DIR_LEFT:e.TableConst.DIR_RIGHT},a.mergeCard=function(t,e){return t+13*e},a.splitCardToValue=function(t){return t%13},a.splitCardToColor=function(t){return Math.floor(t/13)},a.getCardColorString=function(t,e){void 0===e&&(e=!1);var i="";switch(e&&(t=a.splitCardToColor(t)),t){case 0:i="方片";break;case 1:i="梅花";break;case 2:i="红桃";break;case 3:i="黑桃"}return i},a.getCardValueString=function(t,e){void 0===e&&(e=!1);var i="";switch(e&&(t=a.splitCardToValue(t)),t){case 0:i="A";break;case 10:i="J";break;case 11:i="Q";break;case 12:i="K";break;default:i=(t+1).toString()}return i},a.getArrValueEqualIndex=function(t){for(var e=[],a=0,i=t.length;i>a;a++){var n=t[a];e[n.value]?e[n.value]instanceof Array?e[n.value].push(n):e[n.value]=[e[n.value],n]:e[n.value]=n}return e},a.getMaxCardAndCardType=function(t,i){var n,o,r,s=t.concat(i),l=0,h=0,c=a.getArrValueEqualIndex(s),u=[[],[],[],[]],p=a.getShunZiCards(c,5,!0,!0);if(p){for(l=0,h=p.length;h>l;l++){var d=p[l];if(d instanceof Array)for(var m=0,_=d.length;_>m;m++)n=d[m],u[n.color].push(n);else u[d.color].push(d)}u.sort(function(t,e){return t.length>e.length?-1:t.length==e.length?0:1})}if(p&&5==u[0].length)o=0==u[0][0].value?[e.TableConst.CARDTYPE_HJTHS,u[0]]:[e.TableConst.CARDTYPE_THS,u[0]];else if(r=a.getSiTiaoCardMax(c,!0))o=[e.TableConst.CARDTYPE_SITIAO,r];else if(r=a.getHuLuCardMax(c,!0))o=[e.TableConst.CARDTYPE_HUL,r];else if(r=a.getTongHuaCards(s,5,!0))o=[e.TableConst.CARDTYPE_TH,r];else if(r=p)o=[e.TableConst.CARDTYPE_SHUNZI,r];else if(r=a.getSanTiaoCardMax(c,!0))o=[e.TableConst.CARDTYPE_SANTIAO,r];else if(r=a.getLiangDuiCardMax(c,!0))o=[e.TableConst.CARDTYPE_LIANGDUI,r];else if(r=a.getYiDuiCardMax(c,!0))o=[e.TableConst.CARDTYPE_DUIZI,r];else{if(r=a.getGaoPaiCardMax(c,!0),!r)throw new Error("您至少一传入5张牌！").message;o=[e.TableConst.CARDTYPE_GAOPAI,r]}if(o)for(r=o[1],l=0,h=r.length;h>l;l++)if(r[l]instanceof Array){for(var T=null,g=0,f=r[l].length;f>g;g++)if(n=r[l][g],-1!=t.indexOf(n)){T=n;break}T||(T=r[l][0]),r[l]=T}return o},a.getSiTiaoCardMax=function(t,e){void 0===e&&(e=!1);var i;i=e?t:a.getArrValueEqualIndex(t),i[0]&&(i[13]=i[0],delete i[0]);for(var n,o,r=i.length,s=r-1,l=-1;s>=0;){var h=i[s];if(h&&(!n&&h instanceof Array&&4==h.length&&(n=h.slice(),l=s),o||l==s||(o=h),n&&o))return n.push(o),n;s--}return null},a.getHuLuCardMax=function(t,e){void 0===e&&(e=!1);var i;i=e?t:a.getArrValueEqualIndex(t),i[0]&&(i[13]=i[0],delete i[0]);for(var n,o,r=i.length-1;r>=0;){var s=i[r];if(s){var l=!1;if(!n&&s instanceof Array&&3==s.length&&(n=s.slice(),l=!0),!l&&!o&&s instanceof Array&&s.length>=2&&(o=s.slice()),n&&o)return n.concat(o)}r--}return null},a.getTongHuaCards=function(t,e,a){void 0===e&&(e=5),void 0===a&&(a=!1);var i=[[],[],[],[]],n=0,o=0;for(n=0,o=t.length;o>n;n++){var r=t[n];i[r.color].push(r)}var s=[];for(n=0,o=i.length;o>n;n++){var l=i[n];l.length>=e&&(l.sort(function(t,e){var a=t.value,i=e.value;return 0==a&&(a=13),0==i&&(i=13),a==i?0:a>i?-1:1}),s.push(l))}return 0==s.length?null:a?(s.sort(function(t,a){for(n=0;e>n;n++){var i=t[n].value,o=a[n].value;if(0==i&&(i=13),0==o&&(o=13),i>o)return-1;if(o>i)return 1}return 0}),s[0].slice(0,e)):s},a.getShunZiCards=function(t,e,i,n){void 0===e&&(e=5),void 0===i&&(i=!1),void 0===n&&(n=!1);var o;o=n?t:a.getArrValueEqualIndex(t),o[0]&&(o[13]=o[0]);for(var r,s=[],l=o.length,h=l-1;h>=e-1;){var c=o[h];if(c){r=[c];for(var u=h-1,p=h-e;u>p;u--)o[u]&&r.push(o[u]);if(r.length==e){if(i)return r;s.push(r)}}h--}return 0==s.length?null:s},a.getSanTiaoCardMax=function(t,e){void 0===e&&(e=!1);var i;i=e?t:a.getArrValueEqualIndex(t),i[0]&&(i[13]=i[0],delete i[0]);for(var n,o=i.length-1,r=-1,s=[];o>=0;){var l=i[o];if(l&&(!n&&l instanceof Array&&3==l.length&&(n=l.slice(),r=o),s.length<2&&r!=o&&s.push(l),n&&2==s.length))return n.concat(s);o--}return null},a.getLiangDuiCardMax=function(t,e){void 0===e&&(e=!1);var i;i=e?t:a.getArrValueEqualIndex(t),i[0]&&(i[13]=i[0],delete i[0]);for(var n,o=i.length-1,r=[],s=[];o>=0;){var l=i[o];if(l&&(4!=s.length&&l instanceof Array&&2==l.length&&(s=s.concat(l),r.push(o)),n||-1!=r.indexOf(o)||(n=l),n&&4==s.length))return s.push(n),s;o--}return null},a.getYiDuiCardMax=function(t,e){void 0===e&&(e=!1);var i;i=e?t:a.getArrValueEqualIndex(t),i[0]&&(i[13]=i[0],delete i[0]);for(var n,o=i.length-1,r=-1,s=[];o>=0;){var l=i[o];if(l&&(!n&&l instanceof Array&&2==l.length&&(n=l.slice(),r=o),3!=s.length&&r!=o&&s.push(l),n&&3==s.length))return n.concat(s);o--}return null},a.getGaoPaiCardMax=function(t,e){void 0===e&&(e=!1);var i;i=e?t:a.getArrValueEqualIndex(t),i[0]&&(i[13]=i[0],delete i[0]);for(var n=i.length-1,o=[];n>=0;){var r=i[n];if(r&&(5!=o.length&&o.push(r),5==o.length))return o;n--}return null},a}();a.CARD_WIDTH=56,a.CARD_HEIGHT=72,a.grayMatrix=[.86172,.12188,.0164,0,-50,.06172,.92188,.0164,0,-50,.06172,.12188,.8164,0,-50,0,0,0,.9,0],a.balckWhiteFilter=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],a.lowLightFilter=[1,0,0,0,-127,0,1,0,0,-127,0,0,1,0,-127,0,0,0,1,0],e.CardUtil=a,__reflect(a.prototype,"wpt.play.table.CardUtil")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.geteChipRes=function(t){var e=this.CHIP_UINT.indexOf(t);return-1!=e?this.CHIP_RES[e]:""},t.getChipHeap=function(t,e,a,i){void 0===a&&(a=16),void 0===i&&(i=!1);var n=[];if(0>=t)return n;for(var o=0;o<this.CHIP_UINT.length&&!(t>=this.CHIP_UINT[o]);o++);return i?this.computeChipHeapByColor(e,a,this.CHIP_UINT,o,t,n):this.computeChipHeap(e,a,this.CHIP_UINT,o,t,n)},t.computeChipHeapByColor=function(t,e,a,i,n,o){if(1>n)return o;if(n>=this.CHIP_UINT[i]){var r;r=1==this.CHIP_UINT[i]?1:Math.floor(n/this.CHIP_UINT[i]),n-=r*this.CHIP_UINT[i];for(var s;r-->0;)s=i%5,o[s]||(o[s]=[]),o[s].push(this.CHIP_UINT[i])}return i=Math.min(this.CHIP_UINT.length-1,i+1),o=this.computeChipHeapByColor(t,e,a,i,n,o)},t.computeChipHeap=function(t,e,a,i,n,o){if(1>n||o.length>t)return o;if(n>=this.CHIP_UINT[i]){var r;for(r=1==this.CHIP_UINT[i]?1:Math.floor(n/this.CHIP_UINT[i]),n-=r*this.CHIP_UINT[i];r-->0;){if(0==o.length&&o.push([]),o[o.length-1].length>=e){if(o.length==t)return o;o.push([])}o[o.length-1].push(this.CHIP_UINT[i])}}return i=Math.min(this.CHIP_UINT.length-1,i+1),o=this.computeChipHeap(t,e,a,i,n,o)},t}();e.M=1e6,e.K=1e3,e.CHIP_SORT=[500,100,25,5,1],e.CHIP_UINT=[500*e.M,100*e.M,25*e.M,5*e.M,1*e.M,500*e.K,100*e.K,25*e.K,5*e.K,1*e.K,500,100,25,5,1],e.CHIP_RES=["BlueM_png","BlackM_png","GreenM_png","RedM_png","OrangeM_png","BlueK_png","BlackK_png","GreenK_png","RedK_png","OrangeK_png","Blue_png","Black_png","Green_png","Red_png","Orange_png"],t.ChipUtil=e,__reflect(e.prototype,"wpt.play.table.ChipUtil")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a;!function(e){function a(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];t.isDebug&&t.log.$log.apply(this,[t.log.LogTypes.Debug,e,"Table"])}function i(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];t.log.$log.apply(this,[t.log.LogTypes.Info,e,"Table"])}function n(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];t.log.$log.apply(this,[t.log.LogTypes.Warn,e,"Table"])}function o(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];t.log.$log.apply(this,[t.log.LogTypes.Error,e,"Table"])}e.debug=a,e.info=i,e.warn=n,e.error=o}(a=e.log||(e.log={}))}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e=function(){function t(){}return t.prototype.isContains=function(e){if(e.bytesAvailable<t.HEADER_SIZE)return!1;e.endian=egret.Endian.LITTLE_ENDIAN;var a=e.position,i=(e.readUnsignedInt(),e.readUnsignedInt()),n=(e.readUnsignedInt(),e.bytesAvailable);return e.position=a,n>=i},t.prototype.parse=function(t){t.endian=egret.Endian.LITTLE_ENDIAN;var e=t.readUnsignedInt(),i=t.readUnsignedInt(),n=(t.readUnsignedInt(),new egret.ByteArray);return i>0&&t.readBytes(n,0,i),new a(e,1,n)},t.prototype.pack=function(t){var e=new egret.ByteArray;return e.endian=egret.Endian.LITTLE_ENDIAN,e.writeUnsignedInt(t.type),e.writeUnsignedInt(t.body.length),e.writeUnsignedInt(t.order),e.writeBytes(t.body),e.position=0,e},t}();e.HEADER_SIZE=12,t.OGDataResolver=e,__reflect(e.prototype,"wpt.OGDataResolver",["wpt.IDataResolver"]);var a=function(){function t(t,e,a){this._type=t,this._order=e,this._body=a}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this._order},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),t.prototype.OGDataPack=function(t,e,a){this._type=t,this._order=e,this._body=a},t.prototype.toString=function(){return""},t.prototype.write=function(t){var e=this._body.position;this._body.position=this._body.length,this._body.writeBytes(t),this._body.position=e},t.prototype.read=function(){var t=new egret.ByteArray;return t.endian=egret.Endian.LITTLE_ENDIAN,t.writeBytes(this.body),t.position=0,t.writeUnsignedInt(this.type),t.writeUnsignedInt(this.body.length),t.writeUnsignedInt(this.order),t},t}();t.OGDataPack=a,__reflect(a.prototype,"wpt.OGDataPack",["wpt.IBytesData"])}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){this.showPublicPokersEffects=[],this.goldMintionEffectArr=[],this.goldToCenterEffectArr=[],this.poolToPlayerEffectArr=[],this.foldEffectArr=[],this.fanpaiTimeOut=[],this.fanpaiArr=[],this.seats=[]}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.setTableMain=function(t){this.tableContorl=t},e.prototype.test=function(){this.tableContorl.seatMeditor.test()},e.prototype.clear=function(){this.tableContorl=null,this.gameResultEffect&&this.gameResultEffect.clear()},e.prototype.showLight=function(e,a,i){void 0===i&&(i=""),this.light||(this.light=new t.PlayerLight,this.light.setdata(this.tableContorl)),this.light.setSeat(e,a,i)},e.prototype.clearLight=function(){this.light&&this.light.clearShow()},e.prototype.dealCards=function(e){t.log.debug("发牌动画开始播放"),this.fapaiEffect||(this.fapaiEffect=new t.FapaiEffect,this.fapaiEffect.setdata(this.tableContorl)),this.fapaiEffect.playFapai(e)},e.prototype.killDealCards=function(){this.fapaiEffect&&this.fapaiEffect.clearDealCards()},e.prototype.playPreBlindEffect=function(e,a){t.log.debug("playPreBlindEffect"),this.goldToCenterEffectArr=[];var i,n;this.tableContorl.tableView;if(e>0){if(0==a){var o=this.tableContorl.seatMeditor.myView;i=o.x+o.mySeat.x,n=o.y+o.mySeat.y+114}else{var r=this.tableContorl.seatMeditor.view.getPlayer(a);i=r.chip.x,n=r.chip.y}var s=new t.GoldToCenterEffect(this.tableContorl);s.setdata({gold:e,fromX:i,fromY:n}),this.goldToCenterEffectArr.push(s)}},e.prototype.addPlayerWinEffect=function(e,a,i,n,o,r){if(void 0===i&&(i=-1),void 0===n&&(n=!0),void 0===o&&(o=null),void 0===r&&(r=null),!a){var s=this.tableContorl.seatMeditor.view.getPlayer(e);if(!s)return;s.state!=t.TableConst.STATE_SETTINGOUT&&s.setOperationState("")}t.log.debug("显示赢钱效果，seat:"+e),this.showCardTypeBySeat(100,[e])},e.prototype.getShowPublicPokersEffect=function(e){return void 0==this.showPublicPokersEffects[e]&&(this.showPublicPokersEffects[e]=new t.ShowPublicPokersEffect),this.showPublicPokersEffects[e]},e.prototype.playPublicCard=function(t,e,a,i){void 0===a&&(a=null),void 0===i&&(i=null);var n=this.getShowPublicPokersEffect(t);n.setdata([this.tableContorl.tableView.publicPokers.getCard(t),t,e,a,i]),n.start()},e.prototype.showCardAndWin=function(e,a){this.killAllEffect(),t.TableData.isTestResulting=!0,null==this.gameResultEffect&&(this.gameResultEffect=new t.GameResultEffect,this.gameResultEffect.init(this.tableContorl)),this.gameResultEffect.showCardAndWin(e,a)},e.prototype.clearResultTestEffect=function(){t.log.debug("clearResultTestEffect"),this.gameResultEffect&&this.gameResultEffect.clearTween(),this.clearCardType(),this.killFanPai()},e.prototype.showPokerToMasker=function(t){this.gameResultEffect&&this.gameResultEffect.chickHasMasker()&&this.gameResultEffect.showPokerToMasker(t)},e.prototype.showCardTypeBySeat=function(e,a){for(var i=0;i<a.length;i++){var n=new t.PokerTypeEffect;n.setdata(this.tableContorl,e,a[i]),this.cardEffectAry||(this.cardEffectAry=[]),this.cardEffectAry.push(n),this.gameResultEffect&&this.gameResultEffect.showTypeDisplay(n)}this.gameResultEffect.showTypeDisplayOver()},e.prototype.clearCardType=function(){if(this.gameResultEffect&&this.gameResultEffect.hideTypeDisplay(),this.cardEffectAry){for(var t=0;t<this.cardEffectAry.length;t++)this.cardEffectAry[t].clear();this.cardEffectAry=[]}},e.prototype.clearGameResult=function(){this.gameResultEffect&&this.gameResultEffect.clear()},e.prototype.goldMintion=function(e,a,i){void 0===i&&(i=!1),t.log.debug("goldMintion");var n,o=0,r=0,s=0,l=0,h=0,c=200,u=this.tableContorl.seatMeditor.myView;if(0==a)n=u.mySeat.chipPool,o=u.x+u.mySeat.x+n.x,r=u.y+u.mySeat.y+n.y+114,s=u.icon.x+u.icon.width,l=u.y+u.icon.y+.6*u.icon.height/2,c=400;else{var p=this.tableContorl.seatMeditor.view.getPlayer(a);p&&(n=p.chip.chipPool,o=p.chip.x,r=p.chip.y,s=p.playerHand.x+p.playerHand.width/2,l=p.playerHand.y+p.playerHand.height/2)}if(null!=n&&void 0!=n){h=e-n.curGold;var d=new t.GoldMintionEffect(this.tableContorl);d.setdata({gold:h,xx:o,yy:r,fromX:s,fromY:l,time:c}),this.goldMintionEffectArr.push(d)}},e.prototype.killGoldMintionEffect=function(){for(var t=0;t<this.goldMintionEffectArr.length;t++){var e=this.goldMintionEffectArr[t];e.stop()}this.goldMintionEffectArr=[]},e.prototype.goldTocenter=function(){t.log.debug("goldTocenter"),this.goldToCenterEffectArr=[];for(var e,a,i=(this.tableContorl.tableView,0);i<t.TableData.maxSeat;i++){var n=null,o=!1;if(0==i){var r=this.tableContorl.seatMeditor.myView;n=r.mySeat.chipPool,e=r.x+r.mySeat.x+n.x,a=r.y+r.mySeat.y+n.y+114,o=n.visible}else{var s=this.tableContorl.seatMeditor.view.getPlayer(i);null!=s&&void 0!=s&&(n=s.chip.chipPool,e=s.chip.x,a=s.chip.y,o=s.chip.visible)}if(null!=n&&void 0!=n&&n.curGold>0&&o){var l=n.curGold,h=new t.GoldToCenterEffect(this.tableContorl);h.setdata({gold:l,fromX:e,fromY:a}),this.goldToCenterEffectArr.push(h)}}},e.prototype.killGoldToCenterEffect=function(){for(var t=0;t<this.goldToCenterEffectArr.length;t++){var e=this.goldToCenterEffectArr[t];e.stop()}},e.prototype.poolMintionToPlayer=function(e,a,i,n){void 0===i&&(i=-1),void 0===n&&(n=2);var o=0,r=0,s=this.tableContorl.seatMeditor.myView,l=null;if(0==a){var s=this.tableContorl.seatMeditor.myView;l=s.mySeat.chipPool,o=s.x+s.mySeat.x+l.x,r=s.y+s.mySeat.y+l.y+114,n=600}else{var h=this.tableContorl.seatMeditor.view.getPlayer(a);n=400,null!=h&&void 0!=h&&(o=h.chip.x,r=h.chip.y)}var c=new t.PoolToPlayerEffect(this.tableContorl);c.setdata({gold:i,toX:o,toY:r,time:n}),this.poolToPlayerEffectArr.push(c)},e.prototype.killPoolToPlayerEffect=function(){for(var t=0;t<this.poolToPlayerEffectArr.length;t++){var e=this.poolToPlayerEffectArr[t];e.stop()}},e.prototype.gameOverClosePublicCard=function(){for(var t=this.tableContorl.tableView.publicPokers.pokers,e=0;e<t.length;e++)egret.Tween.get(t[e]).to({x:t[2].x,y:t[2].y,alpha:0},400)},e.prototype.playFoldCardEffect=function(e,a){void 0===a&&(a=!1);var i=new t.FoldEffect;if(i.init(this.tableContorl),a)return i.setdata(!0,this.tableContorl.tableView.tablePlayerBar.mySeat.handGroup),void i.start();var n=this.tableContorl.seatMeditor.view.getPlayer(e);n&&(i.setdata(!1,n.playerHand.poker1,n.playerHand.poker2),i.start(),this.foldEffectArr.push(i))},e.prototype.killFoldEffect=function(){for(var t in this.foldEffectArr)this.foldEffectArr[t].clear();this.foldEffectArr.length=0},e.prototype.cardMotion=function(t){},e.prototype.killFanPai=function(){for(var t in this.fanpaiTimeOut)egret.clearTimeout(this.fanpaiTimeOut[t]);this.fanpaiTimeOut=[];for(var e in this.fanpaiArr)this.fanpaiArr[e].clear();this.fanpaiArr=[];for(var a in this.seats){var i=this.tableContorl.seatMeditor.view.getPlayer(this.seats[a]);i.isPlayFanPaiMovie=!1,i.visShowCard(!0)}this.seats=[]},e.prototype.killAllEffect=function(){this.killDealCards();for(var t=0;t<this.showPublicPokersEffects.length;t++)this.showPublicPokersEffects[t]&&this.showPublicPokersEffects[t].stop();this.killGoldToCenterEffect(),this.killGoldMintionEffect(),this.clearLight(),this.killFoldEffect(),this.killPoolToPlayerEffect()},e}();t.EffectManager=e,__reflect(e.prototype,"wpt.play.table.EffectManager")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.isLoaded=!1,t.isSet=!1,t}return __extends(a,e),a.prototype.init=function(){this.fanpaiPlayer=new t.DragonBonesPlayer,t.DisplayUtil.addChild(this,this.fanpaiPlayer),this.fanpaiPlayer.setDataSimple("fanpai_ske_ske","fanpai_ske_tex","Armature"),this.fanpaiPlayer.playTimes=1,this.fanpaiPlayer.loadData(!1,this.onLightLoaded.bind(this))},a.prototype.onLightLoaded=function(t){this.isLoaded=!0,this.isSet&&this.setdata(this._data)},a.prototype.start=function(){this.fanpaiPlayer.gotoAndPlay()},a.prototype.reset=function(){e.prototype.reset.call(this)},a.prototype.stop=function(){e.prototype.stop.call(this)},a.prototype.enterframe=function(){e.prototype.enterframe.call(this)},a.prototype.setdata=function(t){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];if(e.prototype.setdata.call(this,t),this.isSet=!0,this.isLoaded){this.poker1||(this.poker1=new eui.Image(this.getUrl(t[0],t[1]))),this.poker2||(this.poker2=new eui.Image(this.getUrl(t[2],t[3]))),this.poker1.anchorOffsetX=this.poker2.anchorOffsetX=62,this.poker1.anchorOffsetY=this.poker2.anchorOffsetY=80;var n=this.fanpaiPlayer.armature.getSlot("poker0002");n.display=this.poker1;var o=this.fanpaiPlayer.armature.getSlot("poker0001");o.display=this.poker2,this.start()}},a.prototype.getUrl=function(t,e){var a=t+13*e+1,i=10>a?"0"+a:a.toString();return"poker00"+i+"_png"},a.prototype.clear=function(){this.stop(),this.fanpaiPlayer.destory(),t.DisplayUtil.remove(this)},a}(e.BaseEffect);e.FanPaiEffect=a,__reflect(a.prototype,"wpt.play.table.FanPaiEffect")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.DEAL_DELAY=300,t.DEAL_MOVE_TIME=.6,t.DEAL_ROTATION=360,t.DEAL_SCALEXY=.35,t.TURN_MYPOKER_TIME=300,t._preDealTime=0,t._setTimeOutNumber=-1,t}return __extends(i,a),i.prototype.init=function(){this._targetAry=[],this._dealHeap=[]},i.prototype.setdata=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.prototype.setdata.call(this,t),this._tableMain=t,this.init()},i.prototype.start=function(){},i.prototype.reset=function(){this.clearDealCards()},i.prototype.stop=function(){this.clearDealCards()},i.prototype.enterframe=function(){},i.prototype.playFapai=function(t){if(this.clearDealCards(),this._dealHeap=this._dealHeap.concat(t),0!=this._dealHeap.length){for(var e=0;e<this._dealHeap.length;e++)this.setCardVis(this._dealHeap[e],!1);this.playDeal()}},i.prototype.playDeal=function(){var e=this;if(0!=this._dealHeap.length){var a=this._dealHeap.shift(),i=new eui.Image("poker0053_png");this._targetAry.push(i),0==a?t.DisplayUtil.addChildAt(this._tableMain.tableView,i,this._tableMain.tableView.getChildIndex(this._tableMain.tableView.tablePlayerBar)):t.DisplayUtil.addChild(t.Context.getInstance().screen.aniLayout,i),i.alpha=.2,i.x=.5*t.Screen.WIN_WIDTH,i.y=t.Screen.WIN_HEIGHT/2+150,i.rotation=68,i.anchorOffsetX=.5*i.width,i.anchorOffsetY=.5*i.height,i.scaleX=i.scaleY=.22;var n=this.getPlayerPos(a);n.x+=0==a?245:68,n.y+=225,egret.Tween.get(i,{}).to({x:n.x,y:n.y,alpha:1,rotation:360,scaleX:0==a?.7:.22,scaleY:0==a?.7:.22},400).call(function(i,n){t.DisplayUtil.remove(i),e._targetAry.splice(e._targetAry.indexOf(i),1),e.setCardVis(n,!0),e.playShowCard(a)},this,[i,a]),this._setTimeOutNumber=setTimeout(this.playDeal.bind(this),this.DEAL_DELAY)}},i.prototype.playShowCard=function(t){if(0==t){var e=this._tableMain.tableView.tablePlayerBar.mySeat.handGroup,a=e.y;e.y=450,egret.Tween.get(e,{}).to({y:a},500,egret.Ease.circOut),this._targetAry.push(e)}else{var i=this._tableMain.seatMeditor.getCardBackByUISeat(t,1),n=this._tableMain.seatMeditor.getCardBackByUISeat(t,0),o=i.rotation,r=n.rotation;i.rotation=n.rotation=0;var s=5;egret.Tween.get(i,{}).to({rotation:o},500,egret.Ease.getBackOut(s)),egret.Tween.get(n,{}).to({rotation:r},500,egret.Ease.getBackOut(s)),this._targetAry.push(i),this._targetAry.push(n)}},i.prototype.clearDealCards=function(){for(var e=0;e<this._targetAry.length;e++)egret.Tween.removeTweens(this._targetAry[e]),this._targetAry[e]instanceof eui.Image&&t.DisplayUtil.remove(this._targetAry[e]);this._targetAry.length=0,this._dealHeap.length=0,this._tableMain.tableView.tablePlayerBar.mySeat.handGroup.y=97},i.prototype.getPlayerPos=function(t){return this._tableMain.seatMeditor?this._tableMain.seatMeditor.getPlayerPos(t):null},i.prototype.setCardVis=function(a,i){var n=e.TableData.userData.getUserByUIseat(a);return t.isempty(n)||n.isFload?!1:this._tableMain.seatMeditor.visHandCard(a,i)},i}(e.BaseEffect);e.FapaiEffect=a,__reflect(a.prototype,"wpt.play.table.FapaiEffect")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.foldTweenArr=[],t}return __extends(a,e),a.prototype.reset=function(){},a.prototype.init=function(e){this._tableMain=e,this.movePoker1=new eui.Image("poker0053_png"),this.movePoker2=new eui.Image("poker0053_png"),this.movePoker1.rotation=10,this.movePoker2.rotation=-11,this.movePoker1.x=3,this.movePoker1.anchorOffsetX=this.movePoker2.anchorOffsetX=14,this.movePoker2.anchorOffsetY=this.movePoker2.anchorOffsetY=34,this.movePoker1.scaleX=this.movePoker1.scaleY=this.movePoker2.scaleX=this.movePoker2.scaleY=.22,this.moveGroup=new eui.Group,this.moveGroup.anchorOffsetX=20,this.moveGroup.anchorOffsetY=20,t.DisplayUtil.addChild(this.moveGroup,this.movePoker1),t.DisplayUtil.addChild(this.moveGroup,this.movePoker2)},a.prototype.setdata=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];this.isSelf=t,this.isSelf?this.handGroup=e[0]:(this.poker1=e[0],this.poker2=e[1])},a.prototype.start=function(){this.isSelf?this.playMyHandAni():this.otherPlayerFoldAni()},a.prototype.stop=function(){},a.prototype.playMyHandAni=function(){t.ColorUtil.setColorState(this.handGroup,t.ColorUtil.LOWLIGHT)},a.prototype.otherPlayerFoldAni=function(){t.DisplayUtil.addChild(t.Context.getInstance().screen.aniLayout,this.moveGroup);var e=this.poker1.localToGlobal(0,0);this.moveGroup.x=e.x,this.moveGroup.y=e.y+20,this.poker1.visible=!1,this.poker2.visible=!1,this.dropToCenter()},a.prototype.dropToCenter=function(){var e=this,a=new egret.Point;a.x=.5*t.Screen.WIN_WIDTH,a.y=.5*t.Screen.WIN_HEIGHT+150,egret.Tween.get(this.moveGroup).to({x:a.x,y:a.y,rotation:180,alpha:0},400).call(function(){e.moveGroup.alpha=1,e.moveGroup.rotation=0,t.DisplayUtil.remove(e.moveGroup)})},a.prototype.clear=function(){this.moveGroup&&(egret.Tween.removeTweens(this.moveGroup),this.moveGroup.alpha=1,this.moveGroup.rotation=0,t.DisplayUtil.remove(this.moveGroup),this.moveGroup=null),this.handGroup&&(this.handGroup=null)
},a}(e.BaseEffect);e.FoldEffect=a,__reflect(a.prototype,"wpt.play.table.FoldEffect")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(){function a(){this._winnerNickNameDic={},this._showCardTimeArr=[[new i(0,4,1,3,1,4)],[new i(0,2,.5,1.5,1,2),new i(2,4,2.5,3.5,3,4)],[new i(0,1.25,.25,1.25,.3,1.25),new i(1.25,2.75,1.5,2.75,1.5,2.75),new i(2.75,4,3,4,3,4)],[new i(0,1,0,1,0,1),new i(1,2,1,2,1,2),new i(2,3,2,3,2,3),new i(3,4,3,4,3,4)]]}return a.prototype.init=function(t){this.tableContorl=t,this.displayLayer||(this.displayLayer=new n)},a.prototype.clear=function(){this.recyleCard(),this.clearTween()},a.prototype.showCardAndWin=function(a,i){if(0!=a.length){this.currentUser=i;var n=e.TableData.gameinfo,o=e.TableData.userData;this._winnerNickNameDic={};for(var r,s,l=[],h=0/0,c=0;c<a.length;c++){r=a[c];var u=t.readMultiByte(r.rolename,"GBK"),p=o.getUserByName(u),d=p?p.nickName:u;this._winnerNickNameDic[u]=d,s?t.int64To32(r.coin)>t.int64To32(s.coin)&&(s=r):s=r,r.Seat==this.currentUser.serverSeat&&1==r.nPayType&&r.hasNTotalWND&&(h=isNaN(h)?t.int64To32(r.nTotalWND):Math.min(h,t.int64To32(r.nTotalWND)));for(var m=r.cardtype+"_"+r.poolIndex,_=!1,T=0;T<l.length;T++)if(l[T][0]==m){l[T][1].push(r),_=!0;break}_||l.push([m,[r]])}isNaN(h)||(n.getGameInfo().myCoin=h);var g=l.length;if(1==g&&-1==l[0][1][0].cardtype)this.parseWinnerUiSeat(l[0][1]),e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.showWinMessage,this,0,[l[0][1],!0])),e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.splitChip,this,0,[l[0][1],a,2e3])),e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.gameWinEffect,this,0,[l[0][1],2e3,!1])),e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.recyleCard,this,4e3));else{for(var f=this._showCardTimeArr[g-1],y=0;g>y;y++){r=l[y][1][0];var b=this.getCardArr(l[y][1]);if(4>=g){this.parseWinnerUiSeat(l[y][1]);var E=f[y];e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.displayCard,this,E.zhanB,[b[0],b[1],b[2],l[y][1]])),e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.showWinMessage,this,E.zhanB,[l[y][1],y==g-1])),e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.splitChip,this,E.fenB,[l[y][1],a,E.fenE-E.fenB])),e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.displayCardEnd,this,E.zhanE-300,[b[0],b[1]]))}else{this.parseWinnerUiSeat(l[y][1]);var C=Math.floor(400/g)/100*1e3,S=this.getSeatArr(l[y][1]);if(!S||0==S.length)return;e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.showCardType,this,y*C,[r.cardtype,S,b[0],b[2]])),e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.showWinMessage,this,y*C,[l[y][1],y==g-1])),e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.splitChip,this,y*C,[l[y][1],a,C]))}}e.TableData.testResult_tweenFuncArr.push(egret.setTimeout(this.recyleCard,this,4e3)),f=null}}},a.prototype.parseWinnerUiSeat=function(t){for(var a=this.tableContorl.seatMeditor,i=0;i<t.length;i++){var n=t[i];if(0==n.poolIndex){var o=a.serverSeatTouiSeat(n.Seat,e.TableData.userData.getCurPlayerVO().serverSeat,e.TableData.maxSeat);e.TableData.WinnerUISeat=o}}},a.prototype.displayCard=function(t){var a=t[0],i=(t[1],t[2]),n=t[3];if(a&&0!=a.length){n.length>0&&this.showCardType([n[0].cardtype,this.getSeatArr(n),a,i]);var o=[],r=function(t){for(var e in a)a[e].visible||(a[e].visible=!0)};for(var s in a)egret.Tween.get(a[s],{onChange:r,onChangeObj:this}).to({y:a[s].y-15},300),o.push(a[s]);e.TableData.testResult_tweenCoreArr=e.TableData.testResult_tweenCoreArr.concat(o)}},a.prototype.showPokerToMasker=function(t){for(var a=0;a<t.length;a++)-1==e.TableData.testResult_tweenCoreArr.indexOf(t)&&this.showTypeDisplay(t[a]);e.TableData.isTestResulting&&this.showTypeDisplayOver()},a.prototype.displayCardEnd=function(t){var a=t[0];t[1];if(a&&0!=a.length){var i=[];for(var n in a)egret.Tween.get(a[n],{}).to({y:a[n].y+15},300),i.push(a[n]);e.TableData.testResult_tweenCoreArr=e.TableData.testResult_tweenCoreArr.concat(i)}},a.prototype.showCardType=function(t){var a=t[0],i=t[1],n=t[2],o=t[3],r=!1;if(this.tableContorl.seatMeditor){for(var s=0;s<i.length;s++)0!=i[s]&&this.setPlayerFilterDefault(i[s]);for(var s=0;s<o.length;s++)this.showTypeDisplay(o[s]);for(var l=0;l<n.length;l++){if(n[l].type==e.Poker.TYPE_MY){r=!0;break}n[l].type==e.Poker.TYPE_PUBLIC&&this.showTypeDisplay(n[l])}r||this.showTypeDisplay(this.tableContorl.tableView.tablePlayerBar.mySeat.handGroup,!1),e.EffectManager.getInstance().showCardTypeBySeat(a,i),this.showTypeDisplayOver()}},a.prototype.hideCardType=function(){this.clearTween(),e.EffectManager.getInstance().clearCardType()},a.prototype.splitChip=function(a){var i=a[0],n=a[1],o=a[2]?a[2]:2;if(0!=i.length&&this.tableContorl&&this.tableContorl.seatMeditor){var r=e.TableData.gameinfo;t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_GOLD_REMOVE);for(var s=0;s<i.length;s++){var l=i[s],h=this.tableContorl.seatMeditor.serverSeatTouiSeat(l.Seat,this.currentUser.serverSeat,r.getGameInfo().maxPlayer);this.tableContorl.dealerMeditor.poolMintionToPlayer(l.poolIndex,h,t.int64To32(l.coin),n.indexOf(l),o)}}},a.prototype.gameWinEffect=function(a){var i=a[0],n=a[1]?a[1]:-1,o=a[2]?a[2]:!0;if(0!=i.length&&this.tableContorl.seatMeditor){e.log.debug("gameWinEffect",i.length);for(var r=e.TableData.gameinfo,s=0;s<i.length;s++){var l=i[s],h=this.tableContorl.seatMeditor.serverSeatTouiSeat(l.Seat,this.currentUser.serverSeat,r.getGameInfo().maxPlayer);if(l.Seat!=this.currentUser.serverSeat||this.currentUser.isObserver)this.setPlayerFilterDefault(h);else{var c=t.DealMoneyUtil.getStrByComma;t.getLang("match_win_chips",c(t.int64To32(l.coin)))}e.EffectManager.getInstance().addPlayerWinEffect(h,this.currentUser.serverSeat==l.Seat&&!this.currentUser.isObserver,n,o,l.sClass_Name,l.sXing_Name)}}},a.prototype.setPlayerFilterDefault=function(t){var e=this.tableContorl.seatMeditor.view.getPlayer(t);e.setFilterDefault(),e.setMasker(!0),this.showTypeDisplay(e),this.showTypeDisplay(e.showPoker1),this.showTypeDisplay(e.showPoker2)},a.prototype.recyleCard=function(){e.log.debug("收牌过程"),e.TableData.isInGameView&&this.tableContorl.dealerMeditor&&(e.TableData.isTestResulting=!1,this.hideCardType(),e.EffectManager.getInstance().gameOverClosePublicCard(),this.clearData())},a.prototype.clearData=function(){for(var t=0;t<e.TableData.leaveUserAry.length;t++)this.tableContorl.seatMeditor.hidePlayer(e.TableData.leaveUserAry[t]);e.TableData.leaveUserAry=[],this.tableContorl.dealerMeditor.deletePoolGold(),this.tableContorl.dealerMeditor.removePoolView(),this.tableContorl.operMeditor.visShowCard(!1),0==e.TableData.clear&&this.tableContorl.seatMeditor.initHandCard(),0==e.TableData.disMark&&this.tableContorl.dealerMeditor.setMark(-1)},a.prototype.getCardArr=function(t){if(0==t.length)return[[],[]];var a,i,n,o=e.TableData.gameinfo,r=this.tableContorl.seatMeditor,s=[],l=[],h=[],c=o.getGameInfo().maxPlayer,u=o.getGameInfo().publicCard,p=t[0],d=[p.card1,p.card2,p.card3,p.card4,p.card5];for(a=0,i=u.length;i>a;a++)n=d.indexOf(e.CardUtil.mergeCard(u[a].value,u[a].color)),-1!=n?s.push(this.tableContorl.dealerMeditor.getPublicTablecard(a)):l.push(this.tableContorl.dealerMeditor.getPublicTablecard(a));var m=o.getGameInfo().foldPlayerSeatArr;for(a=0;c>a;a++){var _=r.serverSeatTouiSeat(a,this.currentUser.serverSeat,c),T=r.getCardByUISeat(_,0),g=r.getCardByUISeat(_,1);if(-1==m.indexOf(a)&&T.visible&&g.visible&&!r.cardIsCardBack(_,0)){for(var f=!1,y=0,b=t.length;b>y;y++)if(p=t[y],p.Seat==a){f=!0;break}var E=o.getGameInfo().handCard[a],C=e.CardUtil.mergeCard(E[0].value,E[0].color),S=e.CardUtil.mergeCard(E[1].value,E[1].color);f?(d=[p.card1,p.card2,p.card3,p.card4,p.card5],n=d.indexOf(C),-1!=n?s.push(T):(l.push(T),0!=_&&53!=C&&52!=C&&h.push(T)),n=d.indexOf(S),-1!=n?s.push(g):(l.push(g),0!=_&&53!=C&&52!=C&&h.push(g))):(l.push(T),l.push(g),0!=_&&53!=C&&52!=C&&h.push(T),0!=_&&53!=S&&52!=S&&h.push(g))}}return[s,l,h]},a.prototype.getSeatArr=function(t){if(null==this.tableContorl.seatMeditor)return[];for(var a=e.TableData.gameinfo,i=[],n=0,o=t.length;o>n;n++){var r=t[n],s=this.tableContorl.seatMeditor.serverSeatTouiSeat(r.Seat,this.currentUser.serverSeat,a.getGameInfo().maxPlayer);-1==i.indexOf(s)&&i.push(s)}var l=i.indexOf(0);return-1!=l&&l!=i.length-1&&i.push(i.splice(l,1)[0]),i},a.prototype.clearTween=function(){for(var t=0;t<e.TableData.testResult_tweenFuncArr.length;t++)egret.clearTimeout(e.TableData.testResult_tweenFuncArr[t]);e.TableData.testResult_tweenFuncArr=[];for(var a,i=0;i<e.TableData.testResult_tweenCoreArr.length;i++)a=e.TableData.testResult_tweenCoreArr[i],egret.Tween.removeTweens(a);e.TableData.testResult_tweenCoreArr=[],this.clearData()},a.prototype.showWinMessage=function(a){var i=a[0];a[1]?a[1]:!1;if(0!=i.length&&this.tableContorl.tableView){var n=e.TableData.userData,o=(e.TableData.gameinfo,i[0]),r=t.getLang("pool_main");if(o.poolIndex>0)r=t.getLang("pool_border")+o.poolIndex;else{var s=!1;for(var l in i){var h=i[l];if(h.poolIndex>0){s=!0;break}}s||(r=t.getLang("pool_base"))}var c,u,p=t.int64To32(o.coin),d="",m=0,_=0,T=e.CardUtil.getCardValueString(o.card1,!0)+","+e.CardUtil.getCardValueString(o.card2,!0)+","+e.CardUtil.getCardValueString(o.card3,!0)+","+e.CardUtil.getCardValueString(o.card4,!0)+","+e.CardUtil.getCardValueString(o.card5,!0);switch(o.cardtype){case 0:d=t.getLang("cardtype_gp")+"("+T+")","A"==e.CardUtil.getCardValueString(o.card1)&&(m=46);break;case 1:d=t.getLang("cardtype_yidui")+"("+T+")";break;case 2:d=t.getLang("cardtype_liangdui")+"("+T+")";break;case 3:d=t.getLang("cardtype_santiao")+"("+T+")",m=35;break;case 4:d=t.getLang("cardtype_shuizi")+"("+T+")",m=33,_=14;break;case 5:d=t.getLang("cardtype_tonghua")+"("+T+")",m=39,_=15;break;case 6:d=t.getLang("cardtype_hulu")+"("+T+")",m=37,_=17;break;case 7:d=t.getLang("cardtype_sitiao")+"("+T+")",m=41,_=16;break;case 8:d=t.getLang("cardtype_ths")+"("+T+")",m=43,_=18;break;case 9:d=t.getLang("cardtype_hjths"),m=45}var g=!1;for(c=0,u=i.length;u>c;c++){var f=t.readMultiByte(i[c].rolename,"GBK");if(f==n.currentName){g=!0;break}}var y="",b="",E=t.readMultiByte(o.rolename,"GBK");if(1==i.length){if(y="normal"==e.TableData.gameinfo.getGameInfo().currGameType&&e.TableData.panNo>0?t.getLang("chat_win_gold",e.TableData.panNo,this._winnerNickNameDic[E],d,r,t.DealMoneyUtil.getStrByComma(p)):t.getLang("chat_win_gold_match",this._winnerNickNameDic[E],d,r,t.DealMoneyUtil.getStrByComma(p)),o.hasSClass_Name){1==o.nPayType?t.getLang("out_table"):t.getLang("in_table");b="",y+=t.getLang("excellent_poker",o.sClass_Name+o.sXing_Name,b)}this.tableContorl.chatMeditor.addChat(y,g)}else{var C;if(o.hasSClass_Name)for(c=0,u=i.length;u>c;c++){C=i[c];var f=t.readMultiByte(C.rolename,"GBK");1==C.nPayType?t.getLang("out_table"):t.getLang("in_table");y="normal"==e.TableData.gameinfo.getGameInfo().currGameType&&e.TableData.panNo>0?t.getLang("chat_win_gold",e.TableData.panNo,this._winnerNickNameDic[f],d,r,t.DealMoneyUtil.getStrByComma(p)):t.getLang("chat_win_gold_match",this._winnerNickNameDic[f],d,r,t.DealMoneyUtil.getStrByComma(p)),b="",y+=t.getLang("excellent_poker",C.sClass_Name+C.sXing_Name,b),this.tableContorl.chatMeditor.addChat(y,g)}else{var S="";for(c=0,u=i.length;u>c;c++){C=i[c];var f=t.readMultiByte(C.rolename,"GBK"),v="";0!=c&&(v="、"),c==u-1&&(v=t.getLang("and")+" "),S+=v,S+=this._winnerNickNameDic[f]}y="normal"==e.TableData.gameinfo.getGameInfo().currGameType&&e.TableData.panNo>0?t.getLang("chat_avg_gold",e.TableData.panNo,S,d,r,t.DealMoneyUtil.getStrByComma(u*p),t.DealMoneyUtil.getStrByComma(p)):t.getLang("chat_avg_gold_match",S,d,r,t.DealMoneyUtil.getStrByComma(u*p),t.DealMoneyUtil.getStrByComma(p)),this.tableContorl.chatMeditor.addChat(y,g)}}}},a.prototype.showTypeDisplay=function(t,e){void 0===e&&(e=!0),this.displayLayer.parent||this.displayLayer.init(this.tableContorl.tableView.effectLayer),this.displayLayer.addDisplay(t,e)},a.prototype.showTypeDisplayOver=function(){this.displayLayer.addDisplayOver()},a.prototype.hideTypeDisplay=function(){this.displayLayer.clearDisplay(),t.DisplayUtil.remove(this.displayLayer)},a.prototype.chickHasMasker=function(){return this.displayLayer.parent?!0:!1},a}();e.GameResultEffect=a,__reflect(a.prototype,"wpt.play.table.GameResultEffect");var i=function(){function t(t,e,a,i,n,o){this.zhanB=1e3*t,this.zhanE=1e3*e,this.fenB=1e3*a,this.fenE=1e3*i,this.zhuanB=1e3*n,this.zhuanE=1e3*o}return t}();__reflect(i.prototype,"showTimeObj");var n=function(a){function i(){var e=a.call(this)||this;if(!e._background){e._background=new egret.Shape;var i=t.Screen.WIN_WIDTH,n=t.Screen.WIN_HEIGHT;e._background.graphics.beginFill(0,0),e._background.graphics.drawRect(0,0,i,n),e._background.graphics.endFill(),t.DisplayUtil.addBottom(e,e._background)}return e._displayAry=[],e}return __extends(i,a),i.prototype.init=function(e){t.DisplayUtil.addTop(e,this)},i.prototype.getClassName=function(e){var a="";return a+=t.getClassName(e),e.parent&&(a+=" parent="+t.getClassName(e.parent)),a},i.prototype.addDisplay=function(t,e){if(void 0===e&&(e=!0),!this.chickHasDis(t)){var a=new o;a.display=t,a.father=t.parent,a.disIndex=t.parent?t.parent.getChildIndex(t):0,a.defaultX=t.x,a.defaultY=t.y,a.isTop=e,this._displayAry.push(a)}},i.prototype.addDisplayOver=function(){for(var e=this._displayAry.length,a=0;e>a;a++)if(!this._displayAry[a].isAdded&&!this._displayAry[a].display.parent){var i=this._displayAry[a].display.localToGlobal(0,0);this._displayAry[a].display.x=i.x+.6*this._displayAry[a].display.anchorOffsetX,this._displayAry[a].display.y=i.y,this._displayAry[a].isTop?t.DisplayUtil.addTop(this,this._displayAry[a].display):t.DisplayUtil.addBottom(this,this._displayAry[a].display),this._displayAry[a].isAdded=!0}},i.prototype.clearDisplay=function(){for(var a=this._displayAry.length,i=0;a>i;i++){var n=this._displayAry[i];n.display.x=n.defaultX,n.display.y=n.defaultY,n.father?(t.DisplayUtil.addChildAt(n.father,n.display,n.disIndex),n.display instanceof e.Player&&n.display.setMasker(!1)):t.DisplayUtil.remove(n.display),n.clear()}this._displayAry=[]},i.prototype.chickHasDis=function(t){for(var a=this._displayAry.length,i=t instanceof e.Poker,n=!1,o=0;a>o;o++){if(this._displayAry[o].display==t){n=!0;break}if(this._displayAry[o].display instanceof e.Poker&&i){var r=e.CardUtil.mergeCard(this._displayAry[o].display.cardVO.value,this._displayAry[o].display.cardVO.color),s=e.CardUtil.mergeCard(t.cardVO.value,t.cardVO.color);if(r==s){n=!0;break}}}return n},i}(egret.Sprite);__reflect(n.prototype,"GameResultLayer");var o=function(){function t(){}return t.prototype.clear=function(){this.display=null,this.father=null,this.disIndex=void 0},t}();__reflect(o.prototype,"LayerObj")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(t){var e=a.call(this)||this;return e.tableContorl=t,e.tableContorl.tableView.addChild(e),e.init(),e}return __extends(i,a),i.prototype.init=function(){this.movePool=new e.ChipPool,this.addChild(this.movePool)},i.prototype.clear=function(){this.tableContorl=null,t.DisplayUtil.remove(this)},i.prototype.setdata=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];var i=t.fromX,n=t.fromY;this.x=i,this.y=n;var o=t.xx,r=t.yy,s=t.time,l=t.gold;this.movePool.setChips(l),egret.Tween.get(this).to({x:o,y:r},s).call(this.finishComplete,this)},i.prototype.finishComplete=function(){this.clear()},i.prototype.start=function(){},i.prototype.reset=function(){},i.prototype.stop=function(){this.clear()},i}(e.BaseEffect);e.GoldMintionEffect=a,__reflect(a.prototype,"wpt.play.table.GoldMintionEffect")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(t){var e=a.call(this)||this;return e.tableContorl=t,e.tableContorl.tableView.addChild(e),e.init(),e}return __extends(i,a),i.prototype.init=function(){this.movePool=new e.ChipPool,this.addChild(this.movePool)},i.prototype.setdata=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];var i=t.fromX,n=t.fromY;this.x=i,this.y=n,this.mainPool=this.tableContorl.tableView.mainPool;var o=this.mainPool.x+this.mainPool.width/2,r=this.mainPool.y;this.chipGold=t.gold,this.movePool.setChips(this.chipGold);var s=Math.abs(o-i),l=Math.abs(r-n),h=Math.floor(Math.sqrt(Math.pow(s,2)+Math.pow(l,2)));egret.Tween.get(this).to({x:o,y:r,alpha:.2},h).call(this.clear,this)},i.prototype.clear=function(){egret.Tween.removeTweens(this),t.DisplayUtil.remove(this),t.isempty(this.tableContorl)||this.tableContorl.tableView.mainPool.movieShow(),this.tableContorl=null},i.prototype.start=function(){},i.prototype.reset=function(){},i.prototype.stop=function(){this.clear()},i}(e.BaseEffect);e.GoldToCenterEffect=a,__reflect(a.prototype,"wpt.play.table.GoldToCenterEffect")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.isLoaded=!1,t.isSet=!1,t}return __extends(a,e),a.prototype.init=function(){this.light=new t.DragonBonesPlayer,this.pPlayer=new t.ParticlePlayer,this.lightSeat=new eui.Image("table_seat_LampHolder_png"),t.DisplayUtil.addChild(this,this.light),t.DisplayUtil.addChild(this,this.pPlayer),t.DisplayUtil.addChild(this,this.lightSeat),this.light.setDataSimple("xingyundiguang_ske","xingyundiguang_tex","Armature"),this.light.playTimes=0,this.light.loadData(!1,this.onLightLoaded.bind(this)),this.setMask()},a.prototype.setMask=function(){this.spMask=new egret.Shape,this.spMask.graphics.clear(),this.spMask.graphics.beginFill(0,1),this.spMask.graphics.drawRect(0,10,120,300),this.spMask.graphics.endFill(),this.addChild(this.spMask),this.pPlayer.mask=this.spMask},a.prototype.onLightLoaded=function(e){this.isLoaded=!0,this.light.removeEventListener(t.UIEvent.DragonBonesDataLoadComplete,this.onLightLoaded,this),this.isSet&&this.setSeat(this._uiSeat,this._type,this._url)},a.prototype.setdata=function(t){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];e.prototype.setdata.call(this,t),this._tableMain=t,this.init()},a.prototype.start=function(){},a.prototype.reset=function(){},a.prototype.stop=function(){},a.prototype.enterframe=function(){},a.prototype.setSeat=function(e,a,i){this.isSet=!0,this._uiSeat=e,this._type=a,this._url=i,this.isLoaded&&void 0!=this.light.armature&&(t.getAsset("light_"+a+"_json",this.onResLoaded,this),"0"==this._type?t.isempty(this.pPlayer)||t.isempty(this.pPlayer.parent)||(this.pPlayer.stop(),this.pPlayer.visible=!1):(this.pPlayer.setURL("lizi_"+a+"_png","lizi_"+a+"_json"),this.pPlayer.play(),this.pPlayer.visible=!0))},a.prototype.onResLoaded=function(e,a){var i=this.light.armature.getSlot("pao_di1"),n=this.light.armature.getSlot("pao_di2"),o=new eui.Image(RES.getRes(a+".light1")),r=new eui.Image(RES.getRes(a+".light2"));o.anchorOffsetX=62.5,o.anchorOffsetY=190,r.anchorOffsetX=104,r.anchorOffsetY=191,i.display=o,n.display=r;var s=this.getShowPos(this._uiSeat);0==this._uiSeat?(t.DisplayUtil.addChildAt(this._tableMain.tableView.tablePlayerBar,this,0),this.light.x=s.x+20,this.light.y=210,this.lightSeat.y=0,this.lightSeat.x=86,this.pPlayer.y=0):(t.DisplayUtil.addChildAt(this._tableMain.tableView.tableSeat,this,0),this.light.x=s.x,this.light.y=365,this.lightSeat.y=155,this.lightSeat.x=s.x-44,this.pPlayer.y=155),this.light.gotoAndPlay(),t.isempty(this.pPlayer)||(this.pPlayer.x=this.light.x),this.spMask.y=this.pPlayer.y,this.spMask.x=this.lightSeat.x-10,this.setLuckyImg(s)},a.prototype.setLuckyImg=function(e){return"0"==this._type?void(this.luckyImg&&t.DisplayUtil.remove(this.luckyImg)):void(t.isempty(this._url)||(this.luckyImg||(this.luckyImg=new eui.Image),this.luckyImg.source=this._url,this.luckyImg.scaleX=this.luckyImg.scaleY=.25,0==this._uiSeat?(this.luckyImg.x=95,this.luckyImg.y=100):(this.luckyImg.x=this.light.x-30,this.luckyImg.y=e.y-110,this.luckyImg.y<=this.lightSeat.y+this.lightSeat.height&&(this.luckyImg.y=this.lightSeat.y+this.lightSeat.height)),t.DisplayUtil.addChild(this,this.luckyImg)))},a.prototype.getliziImg=function(t){var e=new eui.Image(RES.getRes("light_"+t+"_json.lizi"));return e.anchorOffsetX=15,e.anchorOffsetY=15,e},a.prototype.clearShow=function(){this.isSet=!1,t.isempty(this.pPlayer)||this.pPlayer.stop(),t.DisplayUtil.remove(this)},a.prototype.getShowPos=function(t){var e;return e=this._tableMain.seatMeditor.getPlayerPos(t),0==t?e.x-=605:e.x+=80,e},a}(e.BaseEffect);e.PlayerLight=a,__reflect(a.prototype,"wpt.play.table.PlayerLight")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.state=0,t.isLoaded=!1,t.isSet=!1,t}return __extends(i,a),i.prototype.init=function(){this.typePlayer=new t.DragonBonesPlayer,t.DisplayUtil.addChild(this,this.typePlayer),this.typePlayer.setDataSimple("paixing_ske_ske","paixing_ske_tex","Armature"),this.typePlayer.playTimes=1,this.typePlayer.loadData(!1,this.onLightLoaded.bind(this))},i.prototype.onLightLoaded=function(t){this.isLoaded=!0,this.isSet&&this.setValue(this._type,this._seat)},i.prototype.start=function(){return this.state=0,e.TableData.WinnerUISeat==this._seat&&this.startWinnerEffect(),e.TableData.WinnerUISeat==this._seat&&100==this._type?void t.DisplayUtil.remove(this.typePlayer):(this.winnerEffect&&0==this._seat&&(this.winnerEffect.y-=100),void this.typePlayer.gotoAndPlay())},i.prototype.startWinnerEffect=function(){this.winnerEffect=e.TableData.winnerEffect,void 0==this.winnerEffect?(this.winnerEffect=new t.DragonBonesPlayer,this.winnerEffect.setDataSimple("winner_you_ske","winner_you_tex","Armature"),this.winnerEffect.playTimes=1,e.TableData.winnerEffect=this.winnerEffect,this.winnerEffect.loadData(!1,this.winnerEffectLoadComplete.bind(this))):this.winnerEffectLoadComplete()},i.prototype.winnerEffectLoadComplete=function(){if(t.DisplayUtil.addChild(this,this.winnerEffect),0==this._seat)this.winnerEffect.scaleX=this.winnerEffect.scaleY=1,this.winnerEffect.x=.5*t.Screen.WIN_WIDTH,this.winnerEffect.y=.5*t.Screen.WIN_HEIGHT-10,this.winnerEffect.gotoAndPlay("youwinner"),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_WIN);else{this.winnerEffect.scaleX=this.winnerEffect.scaleY=.42;var e=this.tableContorl.seatMeditor.getPlayerPos(this._seat);this.winnerEffect.x=e.x+75,this.winnerEffect.y=e.y-10,this.winnerEffect.gotoAndPlay("winner"),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_YOU_WIN)}},i.prototype.reset=function(){a.prototype.reset.call(this)},i.prototype.stop=function(){},i.prototype.enterframe=function(){a.prototype.enterframe.call(this)},i.prototype.setdata=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.prototype.setdata.call(this,t),this.tableContorl=t,this._type=e[0],this._seat=e[1],this.init(),this.setValue(this._type,this._seat)},i.prototype.setValue=function(e,a){if(this.tableContorl&&this.tableContorl.seatMeditor&&(this.isSet=!0,this.isLoaded)){var i=new eui.Image(this.getSourceByType(e));i.anchorOffsetX=361.5,i.anchorOffsetY=33.5;var n=this.typePlayer.armature.getSlot("FLUSH");if(n.display=i,0==a)this.typePlayer.scaleX=this.typePlayer.scaleY=1,this.typePlayer.x=.5*t.Screen.WIN_WIDTH,this.typePlayer.y=.5*t.Screen.WIN_HEIGHT-10;else{this.typePlayer.scaleX=this.typePlayer.scaleY=.45;var o=this.tableContorl.seatMeditor.getPlayerPos(a);this.typePlayer.x=o.x+95,this.typePlayer.y=o.y+255}this.start()}},i.prototype.clear=function(){this.stop(),this.tableContorl=null,this.typePlayer.destory(),t.DisplayUtil.remove(this),this.winnerEffect&&(t.DisplayUtil.remove(this.winnerEffect),this.winnerEffect=null)},i.prototype.getSourceByType=function(t){var e;switch(t){case 0:e="win_highcard_png";break;case 1:e="win_onepairs_png";break;case 2:e="win_twopairs_png";break;case 3:e="win_three_png";break;case 4:e="win_straight_png";break;case 5:e="win_flush_png";break;case 6:e="win_fullhouse_png";break;case 7:e="win_four_png";break;case 8:e="win_straightflush_png";break;case 9:e="win_royalflush_png";break;case 100:e="win_png"}return e},i}(e.BaseEffect);e.PokerTypeEffect=a,__reflect(a.prototype,"wpt.play.table.PokerTypeEffect")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(t){var e=a.call(this)||this;return e.tableContorl=t,e.tableContorl.tableView.addChild(e),e.init(),e}return __extends(i,a),i.prototype.init=function(){this.movePool=new e.ChipPool,this.addChild(this.movePool)},i.prototype.setdata=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];var i=t.toX,n=t.toY,o=t.time;this.mainPool=this.tableContorl.tableView.mainPool,this.mainPool.setChips(0),this.mainPool.movieHide();var r=this.mainPool.x+this.mainPool.width/2,s=this.mainPool.y;this.x=r,this.y=s,this.chipGold=t.gold,this.movePool.setChips(this.chipGold),egret.Tween.get(this).to({x:i,y:n},o).call(this.clear,this)},i.prototype.clear=function(){this.tableContorl=null,t.DisplayUtil.remove(this)},i.prototype.start=function(){},i.prototype.reset=function(){},i.prototype.stop=function(){this.clear()},i}(e.BaseEffect);e.PoolToPlayerEffect=a,__reflect(a.prototype,"wpt.play.table.PoolToPlayerEffect")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function n(){var t=a.call(this)||this;return t.DEAL_MOVE_TIME=90,t.cardHeap=[],t.preFlipCardTime=0,t.runCards=[],t.publicCardTweens=[],t.settimeOutHandle=[],t}return __extends(n,a),n.prototype.start=function(){},n.prototype.reset=function(){},n.prototype.stop=function(){this.removeAllTween();for(var t=0;t<this.settimeOutHandle.length;t++)clearTimeout(this.settimeOutHandle[t]);for(this.settimeOutHandle=[],this.pokerFanPai&&this.pokerFanPai.stopFlip(),t=0;t<this.runCards.length;t++)this.runCards[t].x=this.runCards[t]._tx,this.runCards[t].y=this.runCards[t]._ty,this.runCards[t].alpha=1;this.runCards=[],this.pokerFanPai=null,this.cardHeap=[]},n.prototype.setdata=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];this.stop(),this.callBack=t[4],this.cardData=t[3],this.cardHeap.push(t),t[0]&&(t[0].visible=!1),this.playFlipCard()},n.prototype.playFlipCard=function(){var a=this,n=egret.getTimer();if(n-this.preFlipCardTime<100)return void this.settimeOutHandle.push(setTimeout(this.playFlipCard.bind(this),n-this.preFlipCardTime));if(0!=this.cardHeap.length){this.preFlipCardTime=egret.getTimer(),this.settimeOutHandle.push(setTimeout(this.playFlipCard.bind(this),100));var o=this.cardHeap.shift(),r=o.shift(),s=this;if(r){this.checkTween(r),this.runCards.push(r),r.visible=!0,r.alpha=0,r.setBackCard(),r._tx=r.x,r._ty=r.y,s.pokerFanPai=new i(r);var l=r.x;r.x=l-200-o[0]*e.CardUtil.CARD_WIDTH,egret.Tween.get(r,{}).to({x:l,alpha:1},this.DEAL_MOVE_TIME*(o[0]+1)).call(function(){a.removeTween(r),s.pokerFanPai.startFlip(!1);var e=a.runCards.indexOf(r);-1!=e&&a.runCards.splice(e,1),t.isempty(a.callBack)||a.callBack.call(a,a.cardData)},this),this.publicCardTweens.push(r)}}},n.prototype.removeTween=function(t){var e=this.publicCardTweens.indexOf(t);-1!=e&&egret.Tween.removeTweens(t)},n.prototype.checkTween=function(t){var e=this.publicCardTweens.indexOf(t);-1!=e&&(egret.Tween.removeTweens(t),this.publicCardTweens.splice(e,1))},n.prototype.removeAllTween=function(){for(var t=this.publicCardTweens.length-1;t>=0;t--)egret.Tween.removeTweens(this.publicCardTweens[t]),this.publicCardTweens.splice(t,1)},n}(e.BaseEffect);e.ShowPublicPokersEffect=a,__reflect(a.prototype,"wpt.play.table.ShowPublicPokersEffect");var i=function(e){function a(t){var a=e.call(this)||this;return a.isFlipping=!1,a.targetPoker=t,a}return __extends(a,e),a.prototype.startFlip=function(e){void 0===e&&(e=!0),this.isFlip=e,this.isFlipping=!0,this.flipStep=24,this.preX=this.targetPoker.x,this.preY=this.targetPoker.y,this.updateCardBmp(e),t.Context.getInstance().gameManager.registerEnterFrame(this.flip,this)},a.prototype.flip=function(){this.flipStep--,this.flipStep>16?this.targetPoker.scaleX=Math.min(.2*(this.flipStep-17),.6):this.targetPoker.scaleX=Math.min(.2*(13-this.flipStep),.6),16==this.flipStep&&(this.updateCardBmp(!this.isFlip),this.targetPoker.scaleX=.6),0==this.flipStep&&(t.Context.getInstance().gameManager.unRegisterEnterFrame(this.flip,this),this.isFlipping=!1,this.targetPoker.x=this.preX,this.targetPoker.y=this.preY)},a.prototype.stopFlip=function(){t.Context.getInstance().gameManager.unRegisterEnterFrame(this.flip,this),this.targetPoker.scaleX=.6,this.updateCardBmp(!0)},a.prototype.updateCardBmp=function(t){t?this.targetPoker.setCardData(this.targetPoker.cardVO.value,this.targetPoker.cardVO.color):this.targetPoker.setBackCard(),this.targetPoker.x=this.preX,this.targetPoker.y=this.preY},a}(e.Poker);e.PokerFanPai=i,__reflect(i.prototype,"wpt.play.table.PokerFanPai")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t._angle=0,t._stepR=0,t._startAngle=0,t._endAngle=360,t.preTime=0,t.init(),t}return __extends(i,a),i.prototype.init=function(){this._timeImgLayout=new egret.Sprite,t.DisplayUtil.addChild(this,this._timeImgLayout),this._timeImgList=[];for(var e=0;4>e;e++){var a=new eui.Image("myTimer"+(e+1)+"_png");t.DisplayUtil.addBottom(this._timeImgLayout,a),a.x=-1.5,a.y=-2.5,this._timeImgList.push(a)}this._maskBg=new egret.Sprite,t.DisplayUtil.addChild(this,this._maskBg),this._timeImgLayout.mask=this._maskBg,this._dotlight=new eui.Image("myTimerStar_png"),t.DisplayUtil.addChild(this,this._dotlight),this._dotlight.anchorOffsetX=20,this._dotlight.anchorOffsetY=20,this._dotlight.visible=!1},i.prototype.setdata=function(a){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this._stepR=360/a,void 0!=i[0]&&i[0]>0?this._startAngle=i[0]*this._stepR+270:this._startAngle=270,this._endAngle=630,e.log.debug("stepR = "+this._stepR,a,t.Context.getInstance().screen.stage.frameRate)},i.prototype.setCallback=function(t){this._callback=t},i.prototype.start=function(){this.reset(),a.prototype.start.call(this),this.preTime=egret.getTimer(),this._dotlight.visible=!0,this._dotlight.rotation=0,this.t_preangle=this._startAngle;for(var e=0;e<this._timeImgList.length;e++)this._timeImgList[e].alpha=1;if(this._startAngle>0)for(var i=270;i<=this._startAngle;)this.drawCircle(this._maskBg,77.5,77.5,77.5,i*Math.PI/180),this.t_imgIndex=(i-270)/90,this._timeImgList.length-1>this.t_imgIndex&&(this._timeImgList[Math.floor(this.t_imgIndex)].alpha=1-(this.t_imgIndex-Math.floor(this.t_imgIndex))),i+=this._stepR/t.Context.getInstance().screen.stage.frameRate},i.prototype.reset=function(){this._maskBg.graphics.clear(),this._angle=0},i.prototype.stop=function(){a.prototype.stop.call(this),this._dotlight.visible=!1,this._callback&&this._callback(),e.log.debug("TimeCircleEffect end : "+(egret.getTimer()-this.preTime))},i.prototype.enterframe=function(){for(this._dotlight.rotation+=5,this._dotlight.rotation>360&&(this._dotlight.rotation=0),this._angle=(egret.getTimer()-this.preTime)/1e3*this._stepR+this._startAngle;this.t_preangle<=this._angle;)this.t_imgIndex=(this.t_preangle-270)/90,this.t_imgIndex=Math.max(0,this.t_imgIndex),this._timeImgList.length-1>this.t_imgIndex&&(this._timeImgList[Math.floor(this.t_imgIndex)].alpha=1-(this.t_imgIndex-Math.floor(this.t_imgIndex))),this.drawCircle(this._maskBg,79.5,80,76.5,this.t_preangle*Math.PI/180),this.t_preangle+=.3;this.t_preangle=this._angle,this._angle>=this._endAngle&&this.stop()},i.prototype.drawCircle=function(t,e,a,i,n,o){void 0===o&&(o=16711680),t.graphics.beginFill(o,.3),t.graphics.lineStyle(10,o,.3),t.graphics.moveTo(e,a);var r=e+Math.cos(n)*i,s=a+Math.sin(n)*i;t.graphics.lineTo(r,s),t.graphics.endFill(),this._dotlight.x=r,this._dotlight.y=s
},i}(e.BaseEffect);e.TimeCircleEffect=a,__reflect(a.prototype,"wpt.play.table.TimeCircleEffect")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.W=143,t.H=40,t.rate=1,t.curIndex=0,t.thickness=4,t.dots=[],t.isDraw=!1,t._startIndex=0,t.preTime=0,t.touchEnabled=t.touchChildren=!1,t.init(),t}return __extends(i,a),i.prototype.init=function(){this._timeImgLayout=new egret.Sprite,t.DisplayUtil.addChild(this,this._timeImgLayout),this._timeImgList=[];for(var e=0;4>e;e++){var a=new eui.Image("exp_other"+(e+1)+"_png");t.DisplayUtil.addBottom(this._timeImgLayout,a),a.x=0,a.y=0,this._timeImgList.push(a)}this._maskBg=new egret.Sprite,t.DisplayUtil.addChild(this,this._maskBg),this.isDraw&&(this.t_bg=new egret.Sprite,this.addChild(this.t_bg)),this._dotlight=new eui.Image("myTimerStar_png"),t.DisplayUtil.addChild(this,this._dotlight),this._dotlight.anchorOffsetX=20,this._dotlight.anchorOffsetY=20,this._dotlight.visible=!1},i.prototype.computeDots=function(){this.dots=[];var t=2,e=this.H-t,a=17,i=17,n=0,o=4,r=65280;for(this.drawLine(this.t_bg,this.W/2,t,this.W-a,t,this.thickness,r),n=-90;;)if(n+=o,this.drawCircle(this.t_bg,this.W-a,this.H/2,i,n*Math.PI/180,270,255),n>=85)break;for(this.drawLine(this.t_bg,this.W-a,e,a,e,this.thickness,r),n=90;;)if(n+=o,this.drawCircle(this.t_bg,a,this.H/2,i,n*Math.PI/180,270,255),n>=265)break;this.drawLine(this.t_bg,a,t,this.W/2,t,this.thickness,r)},i.prototype.setdata=function(t){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];this.computeDots(),this.rate=this.dots.length/t,e.log.debug("rate = "+this.rate,t),this._startIndex=0,void 0!=a[0]&&a[0]>0&&(this._startIndex=Math.ceil(a[0]*this.rate),this._startIndex=Math.min(this._startIndex,this.dots.length))},i.prototype.setCallback=function(t){this._callback=t},i.prototype.start=function(){a.prototype.start.call(this),this._maskBg.graphics.clear(),this.curIndex=0,this._timeImgLayout.mask=this._maskBg,this.preTime=egret.getTimer(),this._dotlight.rotation=0,this._dotlight.visible=!0;for(var t=0;t<this._timeImgList.length;t++)this._timeImgList[t].alpha=1;if(this._startIndex>0){for(this._maskBg.graphics.beginFill(16711680,this.thickness);this.curIndex<this._startIndex;)this._maskBg.graphics.drawCircle(this.dots[this.curIndex][0],this.dots[this.curIndex][1],this.thickness),this.t_imgIndex=this.curIndex/(this.dots.length/4),this._timeImgList.length-1>this.t_imgIndex&&(this._timeImgList[Math.floor(this.t_imgIndex)].alpha=1-(this.t_imgIndex-Math.floor(this.t_imgIndex))),this.curIndex++;this._maskBg.graphics.endFill()}},i.prototype.reset=function(){this._maskBg.graphics.clear(),this._timeImgLayout.mask=null,this.curIndex=0,this._callback=null},i.prototype.stop=function(){a.prototype.stop.call(this),this._dotlight.visible=!1,this._callback&&this._callback(),this._callback=null,this.reset()},i.prototype.enterframe=function(){if(this._dotlight.rotation+=5,this._dotlight.rotation>360&&(this._dotlight.rotation=0),this.curIndex<=this.dots.length){for(this.t_end=Math.ceil((egret.getTimer()-this.preTime)/1e3*this.rate)+this._startIndex,this._maskBg.graphics.beginFill(16711680,this.thickness);this.curIndex<this.t_end;){if(!(this.curIndex<this.dots.length)){this.stop();break}this._maskBg.graphics.drawCircle(this.dots[this.curIndex][0],this.dots[this.curIndex][1],this.thickness),this._dotlight.x=this.dots[this.curIndex][0],this._dotlight.y=this.dots[this.curIndex][1],this.t_imgIndex=this.curIndex/(this.dots.length/4),this._timeImgList.length-1>this.t_imgIndex&&(this._timeImgList[Math.floor(this.t_imgIndex)].alpha=1-(this.t_imgIndex-Math.floor(this.t_imgIndex))),this.curIndex++}this._maskBg.graphics.endFill()}else this.stop()},i.prototype.drawLine=function(t,e,a,i,n,o,r){if(void 0===r&&(r=65280),i>e)for(var s=e;i>s;s+=o)this.isDraw&&(this.t_bg.graphics.beginFill(r,1),this.t_bg.graphics.drawCircle(s,n,o),this.t_bg.graphics.endFill()),this.dots.push([s,n]);else for(var s=e;s>=i;s-=o)this.isDraw&&(this.t_bg.graphics.beginFill(r,1),this.t_bg.graphics.drawCircle(s,n,o),this.t_bg.graphics.endFill()),this.dots.push([s,n])},i.prototype.drawCircle=function(t,e,a,i,n,o,r){void 0===o&&(o=270),void 0===r&&(r=65280);var s=e+Math.cos(n)*i,l=a+Math.sin(n)*i;this.dots.push([s,l]),this.isDraw&&(t.graphics.beginFill(r,.2),t.graphics.lineStyle(this.thickness,r,.2),t.graphics.moveTo(e,a),t.graphics.lineTo(s,l),t.graphics.endFill())},i}(e.BaseEffect);e.TimeEllipseEffect=a,__reflect(a.prototype,"wpt.play.table.TimeEllipseEffect")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var e=i.call(this)||this;return t.addCommand(t.SocketEvent.RECIVED(a.TableSocketService,t.OGTableProtocol.OGID_BROADCAST_FACE),e.OGID_BROADCAST_FACE,e),t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.PLAYEREXPRESSION),e.PLAYEREXPRESSION,e),t.addCommand(a.EmojiEvent.CHOOSE_EMOJI,e.onChooseEmoji,e),t.addCommand(a.EmojiEvent.BUY_EMOJI,e.BUY_EMOJI,e),t.addCommand(a.TableEvent.POPUP_EMOJI,e.POPUP_EMOJI,e),t.addCommand(a.TableEvent.POPUP_RECORD,e.POPUP_RECORD,e),t.addCommand(a.TableEvent.POPUP_TABLEGIFT,e.showTableGiftPanel,e),t.addCommand(a.TableEvent.POPUP_SHOW_VIDEO,e.POPUP_SHOW_VIDEO,e),e}return __extends(n,i),n.prototype.BUY_EMOJI=function(){a.log.debug("打开商店，购买表情"),e.js.askOpenStore(e.js.SHOW_STORE_TAB_EMOJIS)},n.prototype.OGID_BROADCAST_FACE=function(e){if(a.log.debug("接收表情"),!this.commonData.hideEmoji){var i=e.data,n=i.seat,o=i.roleName,r=0,s=0,l=this.starter.tableView.tablePlayerBar;if(o==a.TableData.userData.currentName)r=l.x+l.icon.x-22,s=l.y+l.icon.y-10;else{var h=a.TableData.userData.getUserByName(a.TableData.userData.currentName).serverSeat,c=this.starter.seatMeditor.serverSeatTouiSeat(n,h,a.TableData.maxSeat),u=this.tableView.tableSeat.getPlayer(c);r=u.x-20,s=u.y-20}var p=new a.ChatEmotion(i,r,s,.6*l.icon.width,.6*l.icon.height);t.DisplayUtil.addChild(t.Context.getInstance().screen.uiLayout,p)}},n.prototype.onChooseEmoji=function(t){var i=t.data,n=i.isNeedPay;if(n&&this.commonData.currentUser.sfItem.length<1)return void e.js.askOpenStore(e.js.SHOW_STORE_TAB_EMOJIS);var o=i.emoji;a.log.debug("obj.code:",o.code),this.jssProcessor.REQ_SEND_FACE(o.code)},n.prototype.PLAYEREXPRESSION=function(e){a.log.debug("ChatMeditor:更新购买表情显示",t.CommonData.getInstance().currentUser.sfItem,t.CommonData.getInstance().currentUser.sfItem.length),this.emojiView.updatePlayerExpression()},n.prototype.init=function(){i.prototype.init.call(this),this.sysMsg.append("",!1)},n.prototype.clear=function(){this.sysMsg.clear(),this.sysMsg.visible=!1,this.emojiView.visible=!1;for(var e=0;e<a.ChatEmotion.SHOWING.length;e++){var i=a.ChatEmotion.SHOWING[e];t.isempty(i)||t.isempty(i.parent)||i instanceof a.ChatEmotion&&i.remove()}},n.prototype.POPUP_RECORD=function(){this.sysMsg.visible=!this.sysMsg.visible,this.emojiView.visible=!1,this.sysMsg.visible&&e.js.closevideo(),a.TableData.isShowVideo&&!this.sysMsg.visible&&t.dispatch(new t.WPTEvent("table_show_video"))},n.prototype.POPUP_EMOJI=function(){this.emojiView.visible=!this.emojiView.visible,this.sysMsg.visible=!1,this.emojiView.visible&&e.js.closevideo(),a.TableData.isShowVideo&&!this.emojiView.visible&&t.dispatch(new t.WPTEvent("table_show_video"))},n.prototype.showTableGiftPanel=function(t){this.emojiView.visible=!1,this.sysMsg.visible=!1,e.js.closevideo()},n.prototype.POPUP_SHOW_VIDEO=function(t){this.emojiView.visible=!1,this.sysMsg.visible=!1},Object.defineProperty(n.prototype,"sysMsg",{get:function(){return this.tableView.tablePlayerBar.sysMsgView},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"emojiView",{get:function(){return this.tableView.tablePlayerBar.emojiView},enumerable:!0,configurable:!0}),n.prototype.addChat=function(e,a){void 0===a&&(a=!1),this.sysMsg.append(t.getLang("chat_dealer",e),a)},Object.defineProperty(n.prototype,"starter",{get:function(){return this.moduleStarter},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tableView",{get:function(){return this.starter.view},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"jssProcessor",{get:function(){return this.jssService.jssProcessor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"jssService",{get:function(){return this.commonData.jssService},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),n}(t.Meditor);a.ChatMeditor=i,__reflect(i.prototype,"wpt.play.table.ChatMeditor")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.borderPoolCnt=0,t.potNum=0,t}return __extends(i,a),Object.defineProperty(i.prototype,"starter",{get:function(){return this.moduleStarter},enumerable:!0,configurable:!0}),i.prototype.init=function(){a.prototype.init.call(this),this.view=this.starter.view},i.prototype.clear=function(){a.prototype.clear.call(this)},i.prototype.initView=function(){this.initPublicCards(),this.setMark(-1),this.deletePoolGold(),this.removePoolView()},i.prototype.readyNewGame=function(){this.view.preChips.visible=!1},i.prototype.goldTocenter=function(){e.EffectManager.getInstance().goldTocenter(),this.view.mainPool.visible||(this.view.mainPool.visible=!0)},i.prototype.setMark=function(t){if(-1==t)return void this.view.setD(!1);if(0==t||this.view.tableSeat.checkHasPlayer(t)){var a=e.TableConst.getPosByAry(e.TableConst.POS_D,t,e.TableData.maxSeat);this.view.setD(!0,a)}else this.view.setD(!1)},i.prototype.setPool=function(e){this.potNum=e,this.view.mainPool.setChips(e),this.view.mainPool.setChipsTxt("Pot: "+t.DealMoneyUtil.getStrByComma(e))},i.prototype.setTotalPot=function(t){},i.prototype.setSecondPool=function(e){if(null!=e&&void 0!=e){e.length>0&&(this.borderPoolCnt=e.length-1,this.setTotalPot(t.int64To32(e[0])));var a=e.length;if(a>1)for(var i=1;a>i;i++)if(t.int64To32(e[i])>0){var n=t.int64To32(e[i]);this.view.updateBorderPool(i-1,n)}}},i.prototype.setPreCoinl=function(a){t.dispatch(new t.BaseEvent(e.TableEvent.RECIVE_DEALER_MSG,t.getLang("match_every_preblind",a)))},i.prototype.initPublicCards=function(){this.view.publicPokers.init(),this.borderPoolCnt=0},i.prototype.deletePoolGold=function(){this.view.hideAllSidPot()},i.prototype.visbPublicTablecard=function(t,a,i){if(53!=t){this.view.publicPokers.setCardValue(t,a,i);var n=e.TableData.userData.getUserByName(e.TableData.userData.currentName);if(n){var o=e.TableData.gameinfo;if(o.getGameInfo().publicCard.length+o.getGameInfo().myHandCard.length>=5){for(var r=o.getGameInfo().publicCard,s=0;s<r.length;s++);var l=e.CardUtil.getMaxCardAndCardType(o.getGameInfo().myHandCard,o.getGameInfo().publicCard);this.starter.seatMeditor.setMyCardTypeTips(l[0])}}}},i.prototype.poolMintionToPlayer=function(t,a,i,n,o){void 0===n&&(n=-1),void 0===o&&(o=2),e.log.debug("游戏结束后，玩家获得筹码动画",t),e.EffectManager.getInstance().poolMintionToPlayer(t,a,i,o)},i.prototype.getPublicTablecard=function(t){return this.view.publicPokers.getCard(t)},i.prototype.removePoolView=function(){this.view.preChips.visible=!1,0==this.view.mainPool.chips.curGold&&(this.view.mainPool.visible=!1),this.borderPoolCnt=0},i}(t.Meditor);e.DealerMeditor=a,__reflect(a.prototype,"wpt.play.table.DealerMeditor")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return a.call(this)||this}return __extends(i,a),Object.defineProperty(i.prototype,"starter",{get:function(){return this.moduleStarter},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tableView",{get:function(){return this.starter.view},enumerable:!0,configurable:!0}),i.prototype.init=function(){a.prototype.init.call(this),this.view=this.tableView.tablePlayerBar.tableOper,this.viewAdd=this.tableView.tablePlayerBar.addOper,this.view.muckBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMuckClick,this),this.view.showBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowCLick,this),this.view.bb25Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBb25kClick,this),this.view.pot34Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPot34Click,this),this.view.pot12Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPot12Click,this),this.view.bb3Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBb3Click,this),this.view.potBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPotClick,this),this.view.allinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAllinClick,this),this.view.subtractBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSubtractClick,this),this.view.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddClick,this),this.view.foldBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFoldClick,this),this.view.callBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCallClick,this),this.view.checkBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCheckClick,this),this.view.raiseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRaiseClick,this),this.view.betBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBetClick,this),this.view.dealMeInBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDealMeInClick,this),this.view.joinSimilarTableBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJSTClick,this),this.view.foldCK.addEventListener(egret.Event.CHANGE,this.onFoldCKChange,this),this.view.callCK.addEventListener(egret.Event.CHANGE,this.onCallCKChange,this),this.view.anyCK.addEventListener(egret.Event.CHANGE,this.onAnyCKChange,this),this.view.flod.addEventListener(egret.Event.CHANGE,this.onFlodChange,this),this.view.check.addEventListener(egret.Event.CHANGE,this.onCheckChange,this),this.view.callany.addEventListener(egret.Event.CHANGE,this.onCallanyChange,this),this.view.waitBigBlindsCK.addEventListener(egret.Event.CHANGE,this.onWBBCKChange,this),this.view.slider.addEventListener(egret.Event.CHANGE,this.onSliderChange,this),this.viewAdd.addonBuyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onaddonBuyClick,this),this.viewAdd.rebuyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onrebuyClick,this),this.viewAdd.autoAddCK.addEventListener(egret.Event.CHANGE,this.onautoAddCKChange,this),this.viewAdd.reBuyCK.addEventListener(egret.Event.CHANGE,this.onreBuyCKChange,this),this.viewAdd.switchTableNextHandCk.addEventListener(egret.Event.CHANGE,this.onSTNHChange,this),this.viewAdd.autoReEnterCK.addEventListener(egret.Event.CHANGE,this.onautoReEnterCKChange,this),this.view.tourBuyinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTourBuyin,this),this.view.tourPlayNowBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTourPlaynow,this)},i.prototype.clear=function(){a.prototype.clear.call(this)},i.prototype.onWBBCKChange=function(a){t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_WAIT_BIGBLIND_CLICK,this.view.waitBigBlindsCK.selected))},i.prototype.onCallanyChange=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.view.callany.selected?(e.TableData.setPreCkSelected(e.TableConst.All_GENZHUANY,!0),e.TableData.setPreCkSelected(e.TableConst.All_RANGPAI,!1),e.TableData.setPreCkSelected(e.TableConst.All_QORR,!1),this.view.check.selected=!1,this.view.flod.selected=!1):e.TableData.setPreCkSelected(e.TableConst.All_GENZHUANY,!1)},i.prototype.onCheckChange=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.view.check.selected?(e.TableData.setPreCkSelected(e.TableConst.All_RANGPAI,!0),e.TableData.setPreCkSelected(e.TableConst.All_GENZHUANY,!1),e.TableData.setPreCkSelected(e.TableConst.All_QORR,!1),this.view.callany.selected=!1,this.view.flod.selected=!1):e.TableData.setPreCkSelected(e.TableConst.All_RANGPAI,!1)},i.prototype.onFlodChange=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.view.flod.selected?(e.TableData.setPreCkSelected(e.TableConst.All_QORR,!0),e.TableData.setPreCkSelected(e.TableConst.All_GENZHUANY,!1),e.TableData.setPreCkSelected(e.TableConst.All_RANGPAI,!1),this.view.check.selected=!1,this.view.callany.selected=!1):e.TableData.setPreCkSelected(e.TableConst.All_QORR,!1)},i.prototype.onAnyCKChange=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.view.anyCK.selected?(e.TableData.setPreCkSelected(e.TableConst.All_QIPAI,!1),e.TableData.setPreCkSelected(e.TableConst.All_GENZHUDAO,!1),e.TableData.setPreCkSelected(e.TableConst.All_GENZHUANY,!0),this.view.foldCK.selected=!1,this.view.callCK.selected=!1):e.TableData.setPreCkSelected(e.TableConst.All_GENZHUANY,!1)},i.prototype.onCallCKChange=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.view.callCK.selected?(e.TableData.setPreCkSelected(e.TableConst.All_QIPAI,!1),e.TableData.setPreCkSelected(e.TableConst.All_GENZHUDAO,!0),e.TableData.setPreCkSelected(e.TableConst.All_GENZHUANY,!1),this.view.foldCK.selected=!1,this.view.anyCK.selected=!1):e.TableData.setPreCkSelected(e.TableConst.All_GENZHUDAO,!1)},i.prototype.onFoldCKChange=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),this.view.foldCK.selected?(e.TableData.setPreCkSelected(e.TableConst.All_QIPAI,!0),e.TableData.setPreCkSelected(e.TableConst.All_GENZHUDAO,!1),e.TableData.setPreCkSelected(e.TableConst.All_GENZHUANY,!1),this.view.callCK.selected=!1,this.view.anyCK.selected=!1):e.TableData.setPreCkSelected(e.TableConst.All_QIPAI,!1)},i.prototype.onJSTClick=function(a){t.dispatch(new t.BaseEvent(e.TableEvent.JOIN_SIMILAR_TABLE))},i.prototype.onDealMeInClick=function(a){t.dispatch(new t.BaseEvent(e.TableEvent.BTN_BACKSEAT))},i.prototype.onBetClick=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_BET_CLICK))},i.prototype.onRaiseClick=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_RAISE_CLICK))},i.prototype.onCheckClick=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_CHECK_CLICK))},i.prototype.onCallClick=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_CALL_CLICK))},i.prototype.onFoldClick=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_FOLD_CLICK))},i.prototype.onAddClick=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_POTBAR_MOVE,this.view.addSlider()))},i.prototype.onSubtractClick=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_POTBAR_MOVE,this.view.subSlider()))},i.prototype.onAllinClick=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_POTBTN_CLICK,"quanya"))},i.prototype.onPotClick=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_POTBTN_CLICK,"dici"))},i.prototype.onBb3Click=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_POTBTN_CLICK,"double"))},i.prototype.onPot12Click=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_POTBTN_CLICK,"zuixiao"))},i.prototype.onPot34Click=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_POTBTN_CLICK,"double"))},i.prototype.onBb25kClick=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_POTBTN_CLICK,"zuixiao"))},i.prototype.onShowCLick=function(a){t.dispatch(new t.BaseEvent(e.TableEvent.BTN_ISSHOWCARD,[null,"1"]))},i.prototype.onMuckClick=function(a){t.dispatch(new t.BaseEvent(e.TableEvent.BTN_ISSHOWCARD,[null,"0"]))},i.prototype.onautoReEnterCKChange=function(t){e.TableData.autoReEnter=this.viewAdd.autoReEnterCK.selected},i.prototype.onresetBuyInCKChange=function(t){},i.prototype.onreBuyCKChange=function(t){this.viewAdd.rebuyBtn.enabled&&(e.TableData.autoReBuy=this.viewAdd.reBuyCK.selected)},i.prototype.onautoAddCKChange=function(t){e.TableData.autoAddon=this.viewAdd.autoAddCK.selected},i.prototype.onrebuyClick=function(a){t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_REBUY_CLICK))},i.prototype.onaddonBuyClick=function(a){t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_ADDONBUY_CLICK))},i.prototype.onSTNHChange=function(t){e.TableData.switchTableNextHandle=this.viewAdd.switchTableNextHandCk.selected},i.prototype.onSliderChange=function(a){var i=this.view.slider.value;this.view.setCoinText(i),t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_POTBAR_MOVE,i))},i.prototype.updateOperaView=function(){0==e.TableData.curMatchProcess?(this.view.bb25Btn.visible=this.view.bb3Btn.visible=!0,this.view.pot12Btn.visible=this.view.pot34Btn.visible=!1):(this.view.bb25Btn.visible=this.view.bb3Btn.visible=!1,this.view.pot12Btn.visible=this.view.pot34Btn.visible=!0)},i.prototype.updateFlopBetShortCut=function(){this.view.curViewState==e.TABLE_OPER_STATE.VIEWSTATE_POTINFO&&this.updateBBDisableState(!0,!1,!1)},i.prototype.updateRebuyAddonState=function(){var t=e.TableData.gameinfo,a=e.TableData.matchInfo,i=e.TableData.userData.getCurPlayerVO();"match"==t.getGameInfo().currGameType&&i&&!i.isObserver?a.getMatch().ReBuy&&a.getMatch().ReBuycount>0&&a.getMatch().ReBuyBlindClass>=t.getGameInfo().blindClassLevel?this.visReBuyBtn(!0):(this.visReBuyBtn(!1),e.TableData.autoReBuy=!1):(this.disableAddOnButton(!1),this.visReBuyBtn(!1),this.visAddonBuyBtn(!1),e.TableData.autoReBuy=!1)},i.prototype.updateFinalAddonView=function(){var t=e.TableData.gameinfo.getGameInfo(),a=e.TableData.matchInfo.getMatch();a.FinalAddOn?a.FinalAddOnTime<=t.restIndex||a.FinalAddOnCount>0?this.visAddonBuyBtn(!1):this.visAddonBuyBtn(!0):this.visAddonBuyBtn(!1)},i.prototype.visShowCard=function(t){this.view.curViewState!=e.TABLE_OPER_STATE.VIEWSTATE_DEALMEIN&&this.view.curViewState!=e.TABLE_OPER_STATE.VIEWSTATE_TOURMODEBUY&&this.setViewState(t?e.TABLE_OPER_STATE.VIEWSTATE_SHOW_MUCK:e.TABLE_OPER_STATE.VIEWSTATE_NULL)},i.prototype.visBackSeat=function(t){t?this.view.curViewState=e.TABLE_OPER_STATE.VIEWSTATE_DEALMEIN:this.view.curViewState!=e.TABLE_OPER_STATE.VIEWSTATE_TOURMODEBUY&&(this.view.curViewState=e.TABLE_OPER_STATE.VIEWSTATE_NULL)},i.prototype.showPreBtnByType=function(t,a){void 0===a&&(a="show_rangpai"),t?"show_rangpai"==a?this.setViewState(e.TABLE_OPER_STATE.VIEWSTATE_CHECK_FOLD_ANY):"show_genzhu"==a?this.setViewState(e.TABLE_OPER_STATE.VIEWSTATE_FOLD_CALL_ANY):"show_allin"==a&&this.setViewState(e.TABLE_OPER_STATE.VIEWSTATE_CHECK_FOLD_ANY):this.setViewState(e.TABLE_OPER_STATE.VIEWSTATE_NULL)},i.prototype.setPreCallNum=function(t){this.view.setCall(t)},i.prototype.disableQRX=function(a,i){e.log.debug("显示(弃牌，让牌，下注):"+a,i),e.TableData.genzhuNum=0,e.TableData.xiazhuNum=a,this.initScrollbar(i,a),this.view.setBet(a),this.view.visBtn(!0,!0,!1,!0,!1),this.setViewState(e.TABLE_OPER_STATE.VIEWSTATE_POTINFO),this.updateBBDisableState(!0,!1,!1),t.dispatch(new t.BaseEvent(e.TableEvent.CLEAR_SELF_OPERASTATE))},i.prototype.initScrollbar=function(t,a){a>t&&(a=t),e.TableData.xiazhuNum=a,e.TableData.jiazhuNum=a,this.view.setBet(a),this.view.setRaise(a),this.view.setBet(a),this.view.setRaise(a);var i=e.TableData.gameinfo;e.log.debug("大盲注："+i.getGameInfo().maxBlind),this.view.initScroll(t,a,i.getGameInfo().maxBlind)},i.prototype.disableQRJ=function(a,i){this.view.setRaise(a),e.TableData.genzhuNum=0,e.TableData.jiazhuNum=a,this.initScrollbar(i,a),this.view.visBtn(!0,!0,!1,!1,!0),this.setViewState(e.TABLE_OPER_STATE.VIEWSTATE_POTINFO),this.updateBBDisableState(!1,!0,!1),t.dispatch(new t.BaseEvent(e.TableEvent.CLEAR_SELF_OPERASTATE))},i.prototype.disableQGJ=function(a,i,n){e.log.debug("(弃牌，跟注，加注到):"+a,i,n),e.TableData.genzhuNum=i,e.TableData.jiazhuNum=a,this.setViewState(e.TABLE_OPER_STATE.VIEWSTATE_POTINFO),this.view.setCall(i),this.view.setRaise(a),this.view.visBtn(!0,!1,!0,!1,!0),this.initScrollbar(n,a),this.updateBBDisableState(!1,!0,!0),t.dispatch(new t.BaseEvent(e.TableEvent.CLEAR_SELF_OPERASTATE))},i.prototype.disableQG=function(a){e.log.debug("(操作区域显示弃牌，跟注):"+a),e.TableData.genzhuNum=a,this.setViewState(e.TABLE_OPER_STATE.VIEWSTATE_POTINFO),this.view.setCall(a),this.view.visBtn(!0,!1,!0,!1,!1),this.initScrollbar(a,a),this.updateBBDisableState(!1,!1,!0),t.dispatch(new t.BaseEvent(e.TableEvent.CLEAR_SELF_OPERASTATE))},i.prototype.showAllinBtnGroup=function(t){void 0===t&&(t=!1)},i.prototype.getBackSeatState=function(){return this.view.curViewState==e.TABLE_OPER_STATE.VIEWSTATE_DEALMEIN},i.prototype.clearJoinSimilarState=function(){this.view.curViewState==e.TABLE_OPER_STATE.VIEWSTATE_JOINSIMILARTABLE&&(this.view.curViewState=e.TABLE_OPER_STATE.VIEWSTATE_NULL)},i.prototype.setStateNull=function(){this.view.curViewState=e.TABLE_OPER_STATE.VIEWSTATE_NULL},i.prototype.setViewState=function(t){e.log.debug("###设置 操作区域类别:",t);var a=e.TableData.userData;if(a.getCurPlayerVO()&&a.getCurPlayerVO().isObserver)return void(t==e.TABLE_OPER_STATE.VIEWSTATE_JOINSIMILARTABLE&&e.TableData.matchInfo.getMatch().displaySimilarTable?this.view.curViewState=t:a.getPlayerCountInSeat()>=e.TableData.gameinfo.getGameInfo().maxPlayer&&e.TableData.matchInfo.getMatch().displaySimilarTable?this.view.curViewState=e.TABLE_OPER_STATE.VIEWSTATE_JOINSIMILARTABLE:this.view.curViewState!=e.TABLE_OPER_STATE.VIEWSTATE_TOURMODEBUY&&(t==e.TABLE_OPER_STATE.VIEWSTATE_TOURMODEBUY?(this.view.curViewState=t,e.log.debug("###设置 操作区域tourMODE:",t)):(this.view.curViewState=e.TABLE_OPER_STATE.VIEWSTATE_NULL,e.log.debug("###设置 操作区域null:",t))));if(this.view.curViewState!=e.TABLE_OPER_STATE.VIEWSTATE_DEALMEIN){a.getUserByName(a.currentName);this.view.curViewState!=e.TABLE_OPER_STATE.VIEWSTATE_TOURMODEBUY&&(this.view.curViewState=t,e.log.debug("###设置 操作区域viewState:",t))}},i.prototype.updateBBDisableState=function(t,a,i){var n=e.TableData.userData.getCurPlayerVO(),o=e.TableData.gameinfo.getGameInfo().currRaise-n.showGold,r=(e.TableData.gameinfo.getGameInfo(),e.TableData.gameinfo.getGameInfo().pool),s=0,l=0;t?l=e.TableData.xiazhuNum:a?l=e.TableData.jiazhuNum:i&&(l=e.TableData.genzhuNum);var h,c,u;0==e.TableData.curMatchProcess?(s=2.5*e.TableData.gameinfo.getGameInfo().maxBlind,h=l<e.TableData.userData.getCurPlayerVO().goldNum&&s>=l&&s<e.TableData.userData.getCurPlayerVO().goldNum,s=3*e.TableData.gameinfo.getGameInfo().maxBlind,c=l<e.TableData.userData.getCurPlayerVO().goldNum&&s>=l&&s<e.TableData.userData.getCurPlayerVO().goldNum,s=n.showGold+o+(r+o),u=l<e.TableData.userData.getCurPlayerVO().goldNum&&s>=l&&s<e.TableData.userData.getCurPlayerVO().goldNum,this.view.updateBBBtn(h,c,u)):(s=n.showGold+o+(r+o)/2,h=l<e.TableData.userData.getCurPlayerVO().goldNum&&s>=l&&s<e.TableData.userData.getCurPlayerVO().goldNum,s=n.showGold+o+(r+o)/4*3,c=l<e.TableData.userData.getCurPlayerVO().goldNum&&s>=l&&s<e.TableData.userData.getCurPlayerVO().goldNum,s=n.showGold+o+(r+o),u=l<e.TableData.userData.getCurPlayerVO().goldNum&&s>=l&&s<e.TableData.userData.getCurPlayerVO().goldNum,this.view.updatePotBtnDisable(h,c,u))},i.prototype.judgePreBtnVisible=function(){var t=e.TableData.userData,a=t.getUserByName(t.currentName);if(this.view.curViewState!=e.TABLE_OPER_STATE.VIEWSTATE_WAITBIGBLINDS){if(!a||a.isObserver||a.isSqueezedOut||a.isOperate||a.isFload||this.getBackSeatState()||"card"!=a.handCardStatus)return void this.showPreBtnByType(!1);var i=e.TableData.gameinfo;if(1==i.getGameInfo().allInFlag)return void this.showPreBtnByType(!0,"show_allin");var n=i.getGameInfo().currRaise-a.showGold;n>0?(this.showPreBtnByType(!0,"show_genzhu"),this.view.setCall(a.goldNum>=n?n:a.goldNum)):this.showPreBtnByType(!0,"show_rangpai")}},i.prototype.visWaitBig=function(t){void 0===t&&(t=!1),this.setViewState(e.TABLE_OPER_STATE.VIEWSTATE_WAITBIGBLINDS),this.view.setWaitBigBlindsCKSel(t)},i.prototype.getPreOperationName=function(){var t="",a=e.TableData.preCkSelectedDict;if(a)for(var i in a)if(1==a[i]){t=i;break}return t},i.prototype.preBtnPreOperation=function(){var t=e.TableData.gameinfo,a=e.TableData.userData,i=a.getUserByName(a.currentName),n=this.getPreOperationName();if(""==n||!i)return this.clearPreBtnSelectedState(),this.showPreBtnByType(!1),!1;var o=t.getGameInfo().currRaise-i.showGold;switch(n){case e.TableConst.All_QORR:0==o&&t.getGameInfo().bigBlindSeat==i.serverSeat?this.checkbet(i.serverSeat):(this.checkbet(i.serverSeat),this.flodbet(i.serverSeat,"true"));break;case e.TableConst.All_GENZHUDAO:this.fllowbet(i.serverSeat);break;case e.TableConst.All_RANGPAI:if(0!=o)return this.clearPreBtnSelectedState(),this.showPreBtnByType(!1),!1;this.checkbet(i.serverSeat);break;case e.TableConst.All_GENZHUANY:o>0?this.fllowbet(i.serverSeat):this.checkbet(i.serverSeat);break;case e.TableConst.All_QIPAI:this.flodbet(i.serverSeat,"true");break;case e.TableConst.All_ALLIN:e.TableData.allinIsFollow=i.goldNum<=o,this.sendAllInCommand();break;default:return this.clearPreBtnSelectedState(),this.showPreBtnByType(!1),!1}return this.clearPreBtnSelectedState(),this.showPreBtnByType(!1),i.isOperate=!0,!0},i.prototype.clearPreBtnSelectedState=function(){this.view.clearPreBtnSelectedState(),e.TableData.setPreCkSelected(e.TableConst.All_QIPAI,!1),e.TableData.setPreCkSelected(e.TableConst.All_GENZHUDAO,!1),e.TableData.setPreCkSelected(e.TableConst.All_QORR,!1),e.TableData.setPreCkSelected(e.TableConst.All_GENZHUANY,!1),e.TableData.setPreCkSelected(e.TableConst.All_RANGPAI,!1)},i.prototype.clearCallCK=function(){this.view.callCK.selected=!1,e.TableData.setPreCkSelected(e.TableConst.All_GENZHUDAO,!1)},i.prototype.clearCheckCK=function(){this.view.check.selected=!1,e.TableData.setPreCkSelected(e.TableConst.All_RANGPAI,!1)},i.prototype.sendAllInCommand=function(){e.TableData.allinIsFollow?t.dispatch(new t.BaseEvent(e.TableEvent.SENDSFLLOWBET)):t.dispatch(new t.BaseEvent(e.TableEvent.SENDSRISEBET,[{coin:-1},"全下"]))},i.prototype.fllowbet=function(a){t.dispatch(new t.BaseEvent(e.TableEvent.SENDSFLLOWBET))},i.prototype.checkbet=function(a){t.dispatch(new t.BaseEvent(e.TableEvent.SENDSCHECKBET))},i.prototype.flodbet=function(a,i){t.dispatch(new t.BaseEvent(e.TableEvent.SENDSFLODBET,[null,i]))},i.prototype.addResetBuyIn=function(t){this.viewAdd.addResetBuyIn(t)},i.prototype.disableAddOnButton=function(t){void 0===t&&(t=!0),this.viewAdd.enableAddonBuyBtn(t)},i.prototype.showMatchPreInfo=function(t){this.viewAdd.showMatchPreInfo(t)},i.prototype.visAddonBuyBtn=function(t){this.viewAdd.visAddonBuyBtn(t)},i.prototype.visReBuyBtn=function(t){this.viewAdd.visReBuyBtn(t)},i.prototype.visAutoBuAndDai=function(t){t&&1==e.TableData.gameinfo.getGameInfo().nCGZBeInitBuyChip?this.viewAdd.addResetBuyIn(t):this.viewAdd.addResetBuyIn(!1)},i.prototype.updateRenterState=function(){var t=e.TableData.matchInfo.getMatch(),a=e.TableData.gameinfo,i=e.TableData.userData.getCurPlayerVO();i&&!i.isObserver&&t.nMatchReentryCount>0&&t.nMatchMaxSignLaterBlindClass>0&&t.nMatchMaxSignLaterBlindClass>=a.getGameInfo().blindClassLevel?this.viewAdd.visAutoReEnterCK(!0):this.viewAdd.visAutoReEnterCK(!1)
},i.prototype.updateFinalAddonCount=function(){var t=e.TableData.matchInfo.getMatch();t.FinalAddOn&&1!=t.FinalAddOnCount?this.viewAdd.visAddonBuyBtn(!0):(this.viewAdd.visAddonBuyBtn(!1),this.viewAdd.enableAddonBuyBtn(!1))},i.prototype.onTourBuyin=function(e){t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_END_TO_BUYIN,this.view.tourClickParam))},i.prototype.onTourPlaynow=function(e){t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_END_TO_PLAY,this.view.tourClickParam))},i}(t.Meditor);e.OperMeditor=a,__reflect(a.prototype,"wpt.play.table.OperMeditor")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.currentTimeViewUISeat=-1,t}return __extends(i,a),Object.defineProperty(i.prototype,"starter",{get:function(){return this.moduleStarter},enumerable:!0,configurable:!0}),i.prototype.init=function(){a.prototype.init.call(this),this.tableView=this.starter.view,this.view=this.starter.view.tableSeat,this.myView=this.starter.view.tablePlayerBar},i.prototype.clear=function(){a.prototype.clear.call(this);for(var t=this.starter.tableView.numChildren-1;t>=0;t--){var i=this.starter.tableView.getChildAt(t);i instanceof e.TableGiftAnimation&&i.parent.removeChild(i)}},i.prototype.test=function(){},i.prototype.initView=function(){this.stopTime(),this.removeTime(),this.hideAllPlayer(),this.initHandCard()},i.prototype.hidePlayer=function(t){0!=t&&this.view.resetPlayer(t)},i.prototype.hideAllPlayer=function(){this.view.resetAll()},i.prototype.setSeatMax=function(t){this.view.setSeatMax(t)},i.prototype.setGameArea=function(t){var e="";e=t>=1&&5>=t?"tableIMG"+t.toString()+"_png":"tableIMG3_png",this.view.setTableImg(e),this.tableView.setAntTxtColor(t)},i.prototype.switchDealer=function(t){this.view.setDealerState(t),t?(this.myView.mySeat.setState(e.MySeat.STATE_OB),this.myView.changGold(-2),this.myView.setShowName(e.TableData.userData.getUserByName(e.TableData.userData.currentName).roleName)):this.myView.mySeat.setState(e.MySeat.STATE_PLAYER)},i.prototype.clearAllPlayerGold=function(){this.myView.mySeat.setChips(0);for(var t=1;9>t;t++){var e=this.view.getPlayer(t);e&&e.setChips(0)}},i.prototype.turnOverClearState=function(){for(var t=0;9>t;t++)this.changState(t,"")},i.prototype.gameOverClearState=function(){for(var t=0;9>t;t++)this.changState(t,"",!0,!1)},i.prototype.changState=function(t,a,i,n){if(void 0===i&&(i=!0),void 0===n&&(n=!0),this.view){var o;if(o=0==t?this.myView:this.view.getPlayer(t)){if(o.state==e.TableConst.STATE_SETTINGOUT&&i)return;if(o.state==e.TableConst.STATE_FOLD&&n)return;if(o.state==e.TableConst.STATE_ALLIN&&n)return;o.setOperationState(a)}}},i.prototype.initHandCard=function(){for(var t,a=0;a<e.TableData.maxSeat;a++)0==a?(this.myView.foldCard(!1),this.myView.mySeat.visHandCard(!1),this.myView.mySeat.initHandCard()):(t=this.view.getPlayer(a),t&&(t.foldCard(!1),t.visHandCard(!1),t.initHandCard()))},i.prototype.serverSeatTouiSeat=function(t,a,i){if(t>=i)return-1;i=Math.min(9,e.TableData.checkSeatCnt(i));var n;if(0>a)var n=t;else var n=(t-a+i)%i;return(!e.TableData.userData.getCurPlayerVO()||e.TableData.userData.getCurPlayerVO().isObserver)&&(n==Math.floor(e.TableData.maxSeat/2)?n=e.TableData.maxSeat:n<Math.floor(e.TableData.maxSeat/2)&&(n+=1)),n},i.prototype.showSeatOnNoPlayer=function(t){void 0===t&&(t=9)},i.prototype.updateHeaderImage=function(a,i,n,o,r){void 0===o&&(o=null),void 0===r&&(r=null);for(var s=e.TableData.userData,l=e.TableData.gameinfo,h=0;h<a.length;h++){var c=a[h],u=s.getUserByServerseat(c),p=s.getUserByName(s.currentName);if(u&&u.roleName==i[h]){var d=this.view.getPlayer(this.serverSeatTouiSeat(u.serverSeat,p.serverSeat,l.getGameInfo().maxPlayer));t.isempty(d)?this.starter.tableView.tablePlayerBar.setIcon(n[h]+"_json."):d.setIcon(n[h])}}},i.prototype.addPlayerHeader=function(t,a,i){void 0===i&&(i="");var n=e.TableData.userData,o=n.getUserByName(t),r=null!=o&&null!=o.nickName&&""!=o.nickName?o.nickName:t;if(e.TableData.chickLeaveAry(a),0==a){if(t!=e.TableData.userData.currentName)return void e.log.warn("错误：增加的新玩家UI坐位号与名字冲突！一个是自己一个不是自己");this.myView.setShowName(r),this.myView.roleName=t}else{this.view.updateSeatViewBySeat(a);var s=this.view.getPlayer(a);s.roleName=t,s.setShowName(r)}},i.prototype.changGold=function(t,e){if(0==t)this.myView.changGold(e);else{var a=this.view.getPlayer(t);a&&a.changGold(e)}},i.prototype.setHandCard=function(t,e,a,i,n,o){if(void 0===n&&(n=!0),void 0===o&&(o=!0),0==a){if(53==t)return void this.myView.mySeat.visHandCard(!1);this.myView.mySeat.visHandCard(!0),this.myView.mySeat.setHandData(i,t,e,n)}else{var r=this.view.getPlayer(a);if(53==t)return void r.visHandCard(!1);r.setHandData(i,t,e,n,o)}},i.prototype.visHandCard=function(t,e){if(0==t)this.myView.mySeat.visHandCard(e);else{var a=this.view.getPlayer(t);if(!a)return!1;a.visCardBack(e)}return!0},i.prototype.setMyCardTypeTips=function(t){this.myView.mySeat.updatePokerType(t)},i.prototype.setFoldCard=function(t,e){void 0===e&&(e=!1);var a;a=0==t?this.myView:this.view.getPlayer(t),a&&a.foldCard(!0)},i.prototype.cardIsCardBack=function(t,e){if(0==t){if(this.myView.mySeat.poker1.visible&&this.myView.mySeat.poker1.isBack)return!0}else{var a=this.view.getPlayer(t);if(a&&a.poker1.visible&&a.poker1.isBack)return!0}return!1},i.prototype.getCardByUISeat=function(t,e){if(0==t)return this.myView.mySeat.getCard(e);var a=this.view.getPlayer(t);return a?a.getCard(e):null},i.prototype.getCardBackByUISeat=function(t,e){if(0==t)return this.myView.mySeat.getCard(e);var a=this.view.getPlayer(t);return a?a.getCardBack(e):null},i.prototype.getPlayerPos=function(t){return 0==t?new egret.Point(this.myView.mySeat.x+this.myView.x,this.myView.mySeat.y+this.myView.y):this.view.getPlayerPos(t)},i.prototype.setPlayGold=function(t,e){if(0!=e)if(0==t)this.myView.mySeat.setChips(e);else{var a=this.view.getPlayer(t);a&&a.setChips(e)}},i.prototype.setOverTime=function(t,e,a,i){void 0===a&&(a=0),void 0===i&&(i=!1),this.currentTimeViewUISeat=t,0==t?this.myView.startTime(e,a,i):this.view.startTime(t,e,a,i),this.addLuckyImg(t),this.changState(t,"")},i.prototype.stopTime=function(){0==this.currentTimeViewUISeat?this.myView.stopTime():this.view.stopTime(),this.clearLuckImg()},i.prototype.removeTime=function(){0==this.currentTimeViewUISeat?this.myView.removeTime():this.view.removeTime()},i.prototype.reciveTableGift=function(t,a,i){void 0===i&&(i="0");var n=e.TableData.getTableGiftById(i);if(null!=n){var o=new eui.Image("gift_"+n.code+"_png");if(o){var r=this.myView.x+this.myView.mySeat.x+this.myView.mySeat.poker1.x+this.myView.mySeat.poker1.width,s=this.myView.y+this.myView.mySeat.y+this.myView.mySeat.poker1.y+this.myView.mySeat.poker1.height/2,l=this.myView.x+this.myView.icon.x+this.myView.icon.width/2,h=this.myView.y+this.myView.icon.y,c=a.uiSeat;if(t!=e.TableData.userData.currentName){var u=e.TableData.userData.getUserByName(t);if(null!=u&&void 0!=u){var p=this.view.getPlayer(-1==u.uiSeat||u.uiSeat>=9?c:u.uiSeat);null!=p&&void 0!=p&&(r=p.x,s=p.y)}}if(0!=a.uiSeat){var d=this.view.getPlayer(a.uiSeat);l=d.x+d.width/2,h=d.y+d.height/2}var m=new e.TableGiftAnimation;this.starter.tableView.addChild(m),m.setData(o,r,s,l,h,c)}}},i.prototype.addLuckyImg=function(t){var a=e.TableData.userData.getUserByUIseat(t);if(a){var i=a.luckyID;e.log.debug("显示幸运物ID："+i),"0"!=i&&""!=i?e.EffectManager.getInstance().showLight(t,i,"luck_"+i+"_png"):e.EffectManager.getInstance().showLight(t,"0")}},i.prototype.clearLuckImg=function(){e.EffectManager.getInstance().clearLight()},i}(t.Meditor);e.SeatMeditor=a,__reflect(a.prototype,"wpt.play.table.SeatMeditor")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.sngResultFailPanel.show(),t.sngResultFailPanel.hide(),t.sngResultWinPanel.show(),t.sngResultWinPanel.hide(),t}return __extends(a,e),Object.defineProperty(a.prototype,"sngResultWinPanel",{get:function(){return null==this._sngResultWinPanel&&(this._sngResultWinPanel=new t.play.table.SngResultView,this._sngResultWinPanel.init()),this._sngResultWinPanel},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sngResultFailPanel",{get:function(){return null==this._sngResultFailPanel&&(this._sngResultFailPanel=new t.play.table.SngFailResultView,this._sngResultFailPanel.init()),this._sngResultFailPanel},enumerable:!0,configurable:!0}),a.prototype.showResultWinPanel=function(t){this.sngResultWinPanel.show(),this.sngResultWinPanel.setData(t),this.sngResultWinPanel.show2()},a.prototype.showResultFailPanel=function(t){this.sngResultFailPanel.show(),this.sngResultFailPanel.setData(t),this.sngResultFailPanel.show2()},a}(t.Meditor);e.SngResultMeditor=a,__reflect(a.prototype,"wpt.play.table.SngResultMeditor")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var i=a.call(this)||this;return t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.ACK_ENTERTABLE_QUERYPLAYERGIFT),i.ACK_ENTERTABLE_QUERYPLAYERGIFT,i),t.addCommand(t.SocketEvent.RECIVED(t.net.JSSService,t.OGJSSProtocol.Req_Ack_GiveTableGift),i.Req_Ack_GiveTableGift,i),t.addCommand(t.SocketEvent.RECIVED(e.TableSocketService,t.OGTableProtocol.OGID_TEXASPOKER_GIVETABLEGIFT),i.ON_GIVE_TABLEGIFT,i),t.addCommand(t.SocketEvent.RECIVED(e.TableSocketService,t.OGTableProtocol.OGID_BROADCAST_PLAYER_GIFT_STATUS),i.ON_BROADCAST_PLAYER_GIFT,i),t.addCommand(e.TableEvent.BUY_TABLEGIFT,i.BUY_TABLEGIFT,i),t.addCommand(e.TableEvent.POPUP_TABLEGIFT,i.showTableGiftPanel,i),t.addCommand(e.TableEvent.UPDATE_TABLEGIFT_DATA,i.updateGiftData,i),t.addCommand(e.TableEvent.POPUP_EMOJI,i.POPUP_EMOJI_RECORD,i),t.addCommand(e.TableEvent.POPUP_RECORD,i.POPUP_EMOJI_RECORD,i),i}return __extends(i,a),i.prototype.showTableGiftPanel=function(e){var a=e.data;return t.isempty(a)&&this.tableGiftPanel.isShow?void this.tableGiftPanel.hide():(this.tableGiftPanel.show(),void this.tableGiftPanel.giveLabelName(a))},i.prototype.POPUP_EMOJI_RECORD=function(){this.tableGiftPanel.hide()},i.prototype.updateGiftData=function(){this.tableGiftPanel.isCreated&&this.tableGiftPanel.updateListData()},i.prototype.ACK_ENTERTABLE_QUERYPLAYERGIFT=function(a){var i=a.data;if(e.TableData.userData.currentName==t.readMultiByte(i.roleName,t.CoreData.Encode)){e.TableData.tableGiftList.length<1&&t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_TABLEGIFTLIST)),e.TableData.imgUrlList.length<1&&t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_IMGLIST));for(var n=i.playInfoArr,o=0;o<n.length;o++){var r=n[o],s=e.TableData.userData.getUserByName(t.readMultiByte(r.roleName,t.CoreData.Encode));null!=s&&null!=r.charm&&""!=r.charm&&(s.luckyID=r.charm)}}},i.prototype.ON_BROADCAST_PLAYER_GIFT=function(a){var i=a.data;e.log.debug("玩家坐下广播礼物信息",i,i.roleName,t.readMultiByte(i.charm)),e.TableData.tableGiftList.length<1&&t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_TABLEGIFTLIST)),e.TableData.imgUrlList.length<1&&t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_IMGLIST));var n=i.roleName,o=e.TableData.userData.getUserByName(n),r="";i.hasTableGift&&(r=i.tableGift),null!=o&&this.starter&&i.charm&&(o.luckyID=t.readMultiByte(i.charm,t.CoreData.Encode))},i.prototype.ON_GIVE_TABLEGIFT=function(a){var i=a.data,n=t.readMultiByte(i.customerName),o=t.readMultiByte(i.giftId),r=i.receivers,s=t.readMultiByte(i.matchid);if(e.TableData.gameinfo.getGameInfo().mathId==s){e.log.debug("接收到牌桌礼物广播",i);for(var l=r.length,h=0;l>h;h++){var c=t.readMultiByte(r[h],t.CoreData.Encode);if(c!=n||e.TableData.userData.currentName==c){var u=e.TableData.userData.getUserByName(c);null!=u&&void 0!=u&&this.starter.seatMeditor.reciveTableGift(n,u,o)}}}},i.prototype.BUY_TABLEGIFT=function(a){var i=a.data,n=[],o=i[1],r=new TextEncoding.TextEncoder(t.CoreData.Encode);if(null==o||void 0==o)for(var s=e.TableData.userData.getPlayerInSeat(),l=0;l<s.length;l++){var h=s[l],c=r.encode(h.roleName).buffer;n.push(c)}else{var c=r.encode(o).buffer;n.push(c)}this.jssProcessor.reqGiveTableGift(i[0],n)},i.prototype.Req_Ack_GiveTableGift=function(e){var a=e.data;switch(a.result){case 0:t.dispatch(new t.WPTEvent(t.WPTEvent.UPDATE_COINS_DATA,null));break;case 1:t.MessageDialog.showMsg(t.MessageDialog.STATE_STORE,t.getLang("gift_table_no_golds"))}},Object.defineProperty(i.prototype,"tableGiftPanel",{get:function(){return(null==this._tableGiftPanel||void 0==this._tableGiftPanel)&&(this._tableGiftPanel=new e.TableGiftPanel),this._tableGiftPanel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"starter",{get:function(){return this.moduleStarter},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tableView",{get:function(){return this.starter.view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"jssProcessor",{get:function(){return t.CommonData.getInstance().jssService.jssProcessor},enumerable:!0,configurable:!0}),i.prototype.clear=function(){null!=this.tableGiftPanel.parent&&void 0!=this.tableGiftPanel.parent&&this.tableGiftPanel.hide()},i}(t.Meditor);e.TableGiftMeditor=a,__reflect(a.prototype,"wpt.play.table.TableGiftMeditor")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return a.call(this)||this}return __extends(i,a),Object.defineProperty(i.prototype,"starter",{get:function(){return this.moduleStarter},enumerable:!0,configurable:!0}),i.prototype.init=function(){a.prototype.init.call(this),this.view=this.starter.view,this.view.matchInfoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.matchInfoBtnClick,this),this.view.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.leaveBtnClick,this),this.view.sitOutBtn.addEventListener(egret.Event.CHANGE,this.sitOutChange,this),t.addCommand(e.TableEvent.POPUP_BUYIN,this.popupBuyin,this),this.initTableView()},i.prototype.test=function(){this.view.mainPool.visible=!0,this.view.mainPool.setChipsTxt("MainPot: 999,999,111"),this.view.tablePlayerBar.mySeat.setChips(100),this.view.tablePlayerBar.mySeat.setHandData(0,1,1,!0),this.view.tablePlayerBar.mySeat.setHandData(1,1,1,!0),this.view.tablePlayerBar.mySeat.visHandCard(!0),this.view.tablePlayerBar.mySeat.handGroup.y=-2,this.view.showMatchTxtNotice(!0),this.view.matchTxtNotice.setText("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")},i.prototype.clear=function(){a.prototype.clear.call(this)},i.prototype.sitOutChange=function(t){e.TableData.sitout_handCur=this.view.sitOutBtn.selected},i.prototype.matchInfoBtnClick=function(t){var e,a=this,i=0,n=1;this.view.matchInfoUI.parent?(i=1,n=0,e=!1,this.view.matchInfoUI.alpha=.4):(this.view.matchInfoUI.show(),this.view.matchInfoUI.alpha=0,i=0,n=1,e=!0),this.view.matchInfoUI.scaleX=i,this.view.matchInfoUI.scaleY=i,egret.Tween.get(this.view.matchInfoUI,{}).to({scaleX:n,scaleY:n,alpha:n},200).call(function(){e?a.view.matchInfoUI.updatePos():a.view.matchInfoUI.hide()},this)},i.prototype.leaveBtnClick=function(a){t.CommonData.playerStatus=3,e.TableData.leaveToLobbyMatchInfo=!1,t.dispatch(new t.BaseEvent(e.TableEvent.EXITGAME,"false"))},i.prototype.popupBuyin=function(a){var i=e.TableData.gameinfo,n=(e.TableData.matchInfo,e.TableData.systemInfo,e.TableData.userData),o=n.getUserByName(n.currentName);if(o){var r=i.getGameInfo(),s=o.goldNum,l=r.maxChip-s;return 0>=l?void t.MessageDialog.showConfirmNotice(t.getLang("drayin_noneed")):void this.starter.showBuyIn()}},i.prototype.initTableView=function(){this.view.visInitView(),this.view.matchInfoUI.init(),this.view.city.source=""},i.prototype.setOBstate=function(t){this.view.setObState(t)},i.prototype.visMatchNotice=function(a){e.TableData.isInMatchRest=a,this.view.showMatchTxtNotice(a),!a&&this._waitTimer>0&&(t.Context.getInstance().gameManager.unRegisterTimer(this.onTimer,this),this._waitTimer=0)},i.prototype.setMatchNotice=function(t){this.view&&(this.view.matchTxtNotice.setText(t),""==t&&this.visMatchNotice(!1))},i.prototype.setMatchReadyTime=function(e,a,i,n,o,r){void 0===i&&(i=""),void 0===n&&(n=""),void 0===o&&(o=null),void 0===r&&(r=""),this._desc=e,this._waitTimer=a,this._tourModeName=r,this._des=i,this._des2=n,this._readyCallback=o,this._waitTimer>0?(this.visMatchNotice(!0),this._waitTimer=Math.max(0,this._waitTimer-1),""!=r?this.setMatchNotice(t.getLang(this._desc,this._tourModeName,this._waitTimer)):this.setMatchNotice(t.getLang(this._desc,this._waitTimer)),t.Context.getInstance().gameManager.registerTimer(1e3,this.onTimer,this)):this.visMatchNotice(!1)},i.prototype.onComplete=function(){t.Context.getInstance().gameManager.unRegisterTimer(this.onTimer,this),this._readyCallback&&this._readyCallback(),this._readyCallback=null},i.prototype.onTimer=function(){this._waitTimer=Math.max(0,this._waitTimer-1),this._waitTimer>=1?""!=this._tourModeName?this._waitTimer>1?this.setMatchNotice(t.getLang(this._desc,this._tourModeName,this._waitTimer)):this.setMatchNotice(t.getLang(this._des,this._tourModeName,this._waitTimer)):this.setMatchNotice(t.getLang(this._desc,this._waitTimer)):""!=this._tourModeName?this.setMatchNotice(t.getLang(this._des2,this._tourModeName,this._waitTimer)):this.setMatchNotice(t.getLang(this._des,this._waitTimer)),this._waitTimer<=0&&this.onComplete()},i.prototype.updateBlindAnteInfo=function(){var t=e.TableData.gameinfo;this.updateMatchNameBlindsTxt(),this.view.matchInfoUI.updateBlinds(t.getGameInfo().curLevelMaxBlind,t.getGameInfo().curLevelMinBlind),this.view.matchInfoUI.updateAnt(t.getGameInfo().preBlind),this.updateNextAnte()},i.prototype.updateNextAnte=function(){var t=0,a=e.TableData.matchInfo.getMatch().preBlindList;if(a){for(var i=0;i<a.length;i++)if(a[i].lv==e.TableData.gameinfo.getGameInfo().blindClassLevel+1){t=a[i].preBlind,this.view.matchInfoUI.updateNextAnte(t);break}i==a.length&&a[i-1].lv==e.TableData.gameinfo.getGameInfo().blindClassLevel&&(e.log.debug("前注已到最高等级:"+a[i-1].lv,a[i-1].preBlind),this.view.matchInfoUI.updateNextAnte(a[i-1].preBlind))}},i.prototype.updateMatchInfoChips=function(t,e,a){this.view.matchInfoUI.updateChips(t,e,a)},i.prototype.updateMatchInfoeNextBlindsTimes=function(t,e,a){this.view.matchInfoUI.updateNextBlindsTimes(t,e,a)},i.prototype.updateMatchInfoRestTime=function(t){this.view.matchInfoUI.updateRestTime(t)},i.prototype.updateMatchInfoRank=function(t,e){this.view.matchInfoUI.updateRank(t,e)},i.prototype.setMatchIDTxt=function(t){e.TableData.gameinfo;e.TableData.panNo=t,this.view.antTxt.visible=!0,this.updateMatchNameBlindsTxt()},i.prototype.updateMatchNameBlindsTxt=function(){var a=e.TableData.gameinfo;this.view.antTxt.text=a.getGameInfo().gameName,this.view.antTxt.text+=" - Blinds "+t.DealMoneyUtil.getMinFormatStr(a.getGameInfo().curLevelMinBlind,a.getGameInfo().curLevelMaxBlind," / "),a.getGameInfo().preBlind>0&&(this.view.antTxt.text+=" "+t.getLang("ante_num",t.DealMoneyUtil.getStrByWptRule(a.getGameInfo().preBlind)))},i.prototype.autoTable=function(){if(e.TableData.canAutoJoinTable){var a=e.TableData.gameinfo;t.dispatch(new t.BaseEvent(e.TableEvent.CLICK_SEAT,{seat:a.getGameInfo().noviceSeat,autoChip:!0})),e.TableData.canAutoJoinTable=!1}},i.prototype.changeStateByGameType=function(){this.view.antTxt.text="",this.setMatchIDTxt(0);var t=e.TableData.gameinfo;"match"==t.getGameInfo().currGameType?(this.starter.operMeditor.showMatchPreInfo(!0),this.starter.operMeditor.visAddonBuyBtn(!1),this.starter.operMeditor.visReBuyBtn(!1),this.starter.operMeditor.visReBuyBtn(!1),this.starter.operMeditor.disableAddOnButton(!1),this.starter.seatMeditor.myView.addChipBtn.visible=!1,this.view.matchInfoBtn.visible=!0,this.view.visSitOut(!1),this.updateBlindAnteInfo(),this.view.matchInfoUI.init(),this.isShowTourModeName()):(this.starter.seatMeditor.myView.addChipBtn.visible=!0,this.view.matchInfoBtn.visible=!1,this.view.visSitOut(!1),this.starter.operMeditor.showMatchPreInfo(!1),this.starter.operMeditor.visAddonBuyBtn(!1),this.starter.operMeditor.visReBuyBtn(!1),this.starter.operMeditor.visReBuyBtn(!1)),this.updateBlindAnteInfo()},Object.defineProperty(i.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),i.prototype.isShowTourModeName=function(){if(0==e.TableData.matchInfo.getMatch().mathType){var t=this.commonData.lobby.getTourDataByID(this.commonData.lobby.curSelectTourDataID),a="table_city"+t.imageCode+"_png";this.view.city.source=a,this.view.table_city.visible=!0}},i.prototype.setRebuyAddonRenterData=function(a,i,n,o){void 0===o&&(o=!1),1==a?t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_REBUY_CLICK,o)):2==a?t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_ADDONBUY_CLICK)):3==a?t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_ADDONBUY_CLICK,o)):4==a&&t.dispatch(new t.BaseEvent(e.TableEvent.VIEW_REENTER_CLICK))},i.prototype.setSitOutBtnVis=function(t){"match"!=e.TableData.gameinfo.getGameInfo().currGameType&&this.view.visSitOut(t)},i.prototype.updateSitoutState=function(t){this.view.updateSitoutState(t),e.TableData.sitout_handCur=t},i}(t.Meditor);e.TableMeditor=a,__reflect(a.prototype,"wpt.play.table.TableMeditor")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(t,e,n,o,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0);var s=a.call(this)||this;return s.w=0,s.h=0,s.isRemove=!1,s.x=e,s.y=n,s.w=o,s.h=r,null==i.mistBonesLayout&&s.initMist(),s.initEmoji(t),s}return __extends(i,a),i.prototype.initMist=function(){i.mistBonesLayout=new t.DragonBonesPlayer,i.mistBonesLayout.setDataSimple(e.EmojiConst.EMOJI_YAN,e.EmojiConst.EMOJI_YAN+t.ResConst.EFFECT_SUFFIX),i.mistBonesLayout.playTimes=1,i.mistBonesLayout.addEventListener(t.UIEvent.DragonBonesCOMPLETE,this.mistBonesComplete,this),i.mistBonesLayout.loadData()},i.prototype.initEmoji=function(a){var n=a.seat;this.index=n;var o=e.EmojiConst.getEmotion(a.faceContent);t.isempty(o)||(this.bonesLayout=new t.DragonBonesPlayer,this.bonesLayout.setDataSimple(o.name,o.name+t.ResConst.EFFECT_SUFFIX),this.bonesLayout.playTimes=1,this.bonesLayout.addEventListener(t.UIEvent.DragonBonesCOMPLETE,this.bonesComplete,this),this.bonesLayout.addEventListener(t.UIEvent.DragonBonesDataLoadComplete,this.loadComplete,this),this.bonesLayout.loadData(),this.addChild(this.bonesLayout),null!=i.SHOWING[this.index]&&i.SHOWING[this.index].remove(),i.SHOWING[this.index]=this)},i.prototype.loadComplete=function(){e.log.debug("loadComplete:"+this.index,"     ",i.SHOWING[this.index]);var t=this.bonesLayout.armature.display.width,a=this.bonesLayout.armature.display.height;this.x=this.x+t/2+(this.w-t)/2,this.y=this.y+a/2+(this.h-a)/2},i.prototype.isNull=function(t){return void 0!=t&&null!=t},i.prototype.bonesComplete=function(a){e.log.debug("bonesComplete"),t.isempty(this.bonesLayout.parent)||this.bonesLayout.parent.removeChild(this.bonesLayout),i.mistBonesLayout.gotoAndPlay(),this.addChild(i.mistBonesLayout)},i.prototype.mistBonesComplete=function(t){e.log.debug("mistBonesComplete"),this.remove()},i.prototype.remove=function(){t.isempty(i.mistBonesLayout)||t.isempty(i.mistBonesLayout.parent)||i.mistBonesLayout.parent.removeChild(i.mistBonesLayout),t.isempty(this.parent)||(this.parent.removeChild(this),e.log.debug("remove",this.bonesLayout.name)),this.isRemove||(i.SHOWING[this.index]=null,this.isRemove=!0)},i}(egret.Sprite);a.SHOWING=[],a.mistBonesLayout=null,e.ChatEmotion=a,__reflect(a.prototype,"wpt.play.table.ChatEmotion")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.skinName="play.table.EmojiListItemRender",t.height=75,t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){for(var e=this.numChildren-1;e>=0;e--)this.removeChildAt(e);for(var a=(t.CommonData.getInstance().currentUser.sfItem,this.data),e=0;e<a.length;e++){var i=new t.DragonBonesPlayer;i.scaleX=.4,i.scaleY=.4,i.setTouchEnabled(!0),i.setDataSimple(a[e].name,a[e].name+t.ResConst.EFFECT_SUFFIX),i.playTimes=0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),i.loadData(),i.name=e+"",i.x=40+90*e,i.y=40,this.addChild(i)}},i.prototype.onClick=function(a){var i=a.currentTarget,n=i.name,o=this.data[n];t.dispatch(new e.EmojiEvent(e.EmojiEvent.CHOOSE_EMOJI,{emoji:o,isNeedPay:!1}))},i}(eui.ItemRenderer);e.EmojiItemRender=a,__reflect(a.prototype,"wpt.play.table.EmojiItemRender")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.skinName="play.table.EmojiListItemRender",t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){for(var e=this.numChildren-1;e>=0;e--)this.removeChildAt(e);for(var a=t.CommonData.getInstance().currentUser.sfItem,i=this.data,e=0;e<i.length;e++){var n=new t.DragonBonesPlayer;n.scaleX=.4,n.scaleY=.4,n.setTouchEnabled(!0),n.setDataSimple(i[e].name,i[e].name+t.ResConst.EFFECT_SUFFIX),n.playTimes=0,n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),n.loadData(),n.name=e+"",n.x=40+90*e,n.y=50,this.addChild(n);var o=null!=i[e].isNeedPay&&void 0!=i[e].isNeedPay?i[e].isNeedPay:!1;o&&a.length<1?n.filters=[new egret.ColorMatrixFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])]:n.filters=null}},i.prototype.onClick=function(a){var i=a.currentTarget,n=i.name,o=this.data[n];t.dispatch(new e.EmojiEvent(e.EmojiEvent.CHOOSE_EMOJI,{emoji:o,isNeedPay:!0}))},i}(eui.ItemRenderer);e.EmojiSFItemRender=a,__reflect(a.prototype,"wpt.play.table.EmojiSFItemRender")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.catData=new eui.ArrayCollection,t.defData=new eui.ArrayCollection,t.skinName="play.table.EmojiSkin",t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.initTab(),this.initEmoji(),this.initBtn()},i.prototype.initBtn=function(){this.hideEmojiCK.selected=t.CommonData.getInstance().hideEmoji,this.hideEmojiCK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHideEmojiCK,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyEmoji,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.closeBtnClick=function(a){this.visible=!1,t.dispatch(new t.BaseEvent("table_func_close","emoji")),e.TableData.isShowVideo&&!this.visible&&t.dispatch(new t.WPTEvent("table_show_video"))},i.prototype.onHideEmojiCK=function(a){t.CommonData.getInstance().hideEmoji=this.hideEmojiCK.selected,e.log.debug("***********************:",this.hideEmojiCK.selected)},i.prototype.buyEmoji=function(){t.dispatch(new e.EmojiEvent(e.EmojiEvent.BUY_EMOJI))},i.prototype.initTab=function(){this.viewStack.selectedIndex=0,this.scrollCat.DIS=2,this.scrollDef.DIS=2,this.scrollCat.SCROLL_DIS=220,this.scrollDef.SCROLL_DIS=225,this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this)},i.prototype.initEmoji=function(){this.catData.replaceAll(this.getListArray(e.EmojiConst.SF_CAT_EMOTIONS)),this.list_cat.itemRenderer=e.EmojiSFItemRender,this.list_cat.dataProvider=this.catData,this.list_cat.height=110*this.catData.length,this.defData.replaceAll(this.getListArray(e.EmojiConst.EMOTIONS)),this.list_def.itemRenderer=e.EmojiItemRender,this.list_def.dataProvider=this.defData,this.list_def.height=75*this.defData.length},i.prototype.updatePlayerExpression=function(){this.catData.replaceAll(this.getListArray(e.EmojiConst.SF_CAT_EMOTIONS)),this.list_cat.dataProvider=this.catData,this.list_cat.height=110*this.catData.length},i.prototype.getListArray=function(t,e){void 0===e&&(e=4);for(var a=[],i=t.length,n=0;i>n;n+=e)n>=i-e?a.push(t.slice(n,i)):a.push(t.slice(n,n+e));return a},i.prototype.onBarItemTap=function(t){switch(t.itemIndex){case 1:break;case 2:this.scrollCat.reSize()}},i}(t.View);e.EmojiView=a,__reflect(a.prototype,"wpt.play.table.EmojiView")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.messages=[],t.skinName="play.table.SysMessageSkin",t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.l_msg.text="",this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.closeBtnClick=function(a){this.visible=!1,t.dispatch(new t.BaseEvent("table_func_close","record")),e.TableData.isShowVideo&&!this.visible&&t.dispatch(new t.WPTEvent("table_show_video"))},i.prototype.append=function(t,e){for(void 0===e&&(e=!1),this.messages.push({txt:t,isSelf:e});this.messages.length>25;)this.messages.shift();this.update(!0)},i.prototype.update=function(t){void 0===t&&(t=!1);for(var e=[],a=0;a<this.messages.length;a++){var i=this.messages[a],n=i.isSelf;n?e.push({text:""==i.txt?"":i.txt+"\n",style:{textColor:16770847}}):e.push({text:""==i.txt?"":i.txt+"\n",style:{textColor:11187181}})}this.l_msg.textFlow=e,this.scroll.reSize(),t&&this.l_msg.height>this.scroll.height&&this.scroll.setPosToBottom()},i.prototype.clear=function(){this.messages=[],this.l_msg.textFlow=[],this.l_msg.text="",this.scroll.reSize(),this.scroll.resetPos()},i}(t.View);e.SysMessageView=a,__reflect(a.prototype,"wpt.play.table.SysMessageView")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.dir=1,t.chips=[],t._w=0,t._curGold=0,t.MAX_CHIPPLAYER_HEAPCOL=1,t.MAX_CHIP_HEAPCOL=16,t}return __extends(i,a),i.prototype.removeChips=function(){for(var e=0;e<this.chips.length;e++)t.DisplayUtil.remove(this.chips[e])},i.prototype.init=function(t,e){this.MAX_CHIPPLAYER_HEAPCOL=t,this.MAX_CHIP_HEAPCOL=e},i.prototype.setChips=function(a,i){if(void 0===i&&(i=!1),this._curGold=a,this._w=0,this.removeChips(),!(0>=a))for(var n,o=e.ChipUtil.getChipHeap(a,this.MAX_CHIPPLAYER_HEAPCOL,this.MAX_CHIP_HEAPCOL,i),r=0,s=0,l=0;l<o.length;l++)if(o[l]&&0!=o[l].length){for(var h=0;h<o[l].length;h++)this.chips[l*this.MAX_CHIP_HEAPCOL+h]||(n=new eui.Image,this.chips[l*this.MAX_CHIP_HEAPCOL+h]=n),n=this.chips[l*this.MAX_CHIP_HEAPCOL+h],n.source=e.ChipUtil.geteChipRes(o[l][h]),t.DisplayUtil.addChild(this,n),n.x=0,n.y=0,this.dir==e.TableConst.DIR_LEFT?(n.x=r,n.y=s):(n.x-=r,n.y=s),s-=3;r+=35,this._w=Math.abs(r),s=0}},Object.defineProperty(i.prototype,"width",{get:function(){return this._w},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"curGold",{get:function(){return this._curGold},enumerable:!0,configurable:!0}),i.prototype.printHeaps=function(t){for(var a=0;a<t.length;a++){for(var i="",n=0;n<t[a].length;n++)i+=t[a][n]+",";e.log.debug(i)}},i}(t.View);e.ChipPool=a,__reflect(a.prototype,"wpt.play.table.ChipPool")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){return a.call(this)||this}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.chips.dir=e.TableConst.DIR_LEFT,this.chips.init(5,e.TableConst.MAX_CHIP_HEAPCOL)},i.prototype.setChips=function(e,a){void 0===a&&(a=!1),this.chips.setChips(e,a),this.poolCntView.poolCntTxt.text=t.DealMoneyUtil.getStrByComma(e),this.chips.x=(200-this.chips.width)/2,this.updateBgSize()},i.prototype.setChipsTxt=function(t){this.poolCntView.poolCntTxt.text=t,this.updateBgSize()
},i.prototype.updateBgSize=function(){this.poolCntView.bg.width=Math.max(9.5*this.poolCntView.poolCntTxt.text.length,150),this.poolCntView.poolCntTxt.width=this.poolCntView.bg.width},i.prototype.movieShow=function(){this.visible=!0,this.alpha=0,egret.Tween.get(this).to({alpha:1},400)},i.prototype.movieHide=function(){var t=this;this.visible=!0,this.alpha=0,egret.Tween.get(this).to({alpha:0},300).call(function(){t.visible=!1},this)},i}(t.View);e.MainPool=a,__reflect(a.prototype,"wpt.play.table.MainPool");var i=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.View);e.MainPoolCnt=i,__reflect(i.prototype,"wpt.play.table.MainPoolCnt")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){var e=t.call(this)||this;return e.pokers=[],e.pokersPos=[],e}return __extends(a,t),a.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);for(var e=1;5>=e;e++)this.pokers.push(this["poker"+e]),this["poker"+e].name="card"+e,this.pokersPos.push([this["poker"+e].x,this["poker"+e].y]);this.defaultY=this.poker1.y},a.prototype.init=function(){for(var t=0;t<this.pokers.length;t++)this.pokers[t].setBackCard(),this.pokers[t].visible=!1,this.pokers[t].type=e.Poker.TYPE_PUBLIC,this.pokers[t].alpha=1,this.pokers[t].filters=null,this.pokers[t].x=this.pokersPos[t][0],this.pokers[t].y=this.pokersPos[t][1]},a.prototype.setCardVisible=function(t,e){this.pokers[t].visible=e},a.prototype.setCardValue=function(t,e,a){this.setCardVisible(a,!0),this.pokers[a].setCardData(t,e),this.pokers[a].y=this.defaultY},a.prototype.setAllCardVis=function(t){for(var e in this.pokers)this.pokers[e].visible=t},a.prototype.getCard=function(t){return this.pokers[t]},a.prototype.getAllCard=function(){return this.pokers},a}(t.View);e.PublicPokers=a,__reflect(a.prototype,"wpt.play.table.PublicPokers")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t._spName="",t}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),t.isempty(this._spName)||(this.spTxt.text=this._spName)},Object.defineProperty(a.prototype,"spName",{get:function(){return this._spName},set:function(t){this._spName=t,void 0!=this.spTxt&&(this.spTxt.text=this._spName)},enumerable:!0,configurable:!0}),a}(t.View);e.SidePot=a,__reflect(a.prototype,"wpt.play.table.SidePot")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.max=0,t.min=0,t.cur=0,t.myChips=0,t.preX=0,t.SLIDER_WIDTH=297,t.BAR_WIDTH=85,t.skinName="play.skin.table.BuyinPanelSkin",t}return __extends(n,i),n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.slider.addEventListener(egret.Event.CHANGE,this.sliderChange,this),this.maxBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.maxBtnClick,this),this.minBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.minBtnClick,this),this.storeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.storeBtnClick,this),this.okBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.okBtnClick,this),this.storeBtn.isOverMusic=this.okBtn.isOverMusic=!0,this.autoRebuyCK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRebuyHandle,this),this.autoRefillCK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRefillHandle,this),this.slider.slideDuration=.1},n.prototype.show=function(){i.prototype.show.call(this),this.autoRebuyCK.selected=a.TableData.autoDairu,this.autoRefillCK.selected=a.TableData.autoBuqi,this.setIntoChipData()},n.prototype.autoRebuyHandle=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),a.TableData.autoDairu=this.autoRebuyCK.selected},n.prototype.autoRefillHandle=function(){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CHECK,t.SoundManager.SOUND_OTHER),a.TableData.autoBuqi=this.autoRefillCK.selected},n.prototype.sliderChange=function(){this.cur=this.slider.value,this.setTip(this.cur)},n.prototype.setTip=function(e){this.slider.thumb.tip.setTxt("$"+t.DealMoneyUtil.getStrByComma(e))},n.prototype.okBtnClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER);var i=a.TableData.gameinfo,n=a.TableData.userData;n.getUserByName(n.currentName);t.dispatch(new a.TableEvent(a.TableEvent.SENDSBUYCHIP,{coin:this.cur,auto:!1,tiyan:i.isTiYan_CGZ})),this.remove()},n.prototype.storeBtnClick=function(a){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),e.js.askOpenStore()},n.prototype.minBtnClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.cur=this.min,this.updateView()},n.prototype.maxBtnClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.cur=this.max,this.updateView()},n.prototype.setCoinData=function(e,i,n,o){a.log.debug("DragBuyIn.setCoinData : "+e,i,n,o),this.max=e,this.min=i,this.cur=n,this.myChips=o,this.slider.maximum=e,this.slider.minimum=i,this.slider.value=n,this.max=Math.max(this.max,this.min),this.everNum=Math.ceil((this.max-i)/100),this.maxTxt.text="$"+t.DealMoneyUtil.getStrByComma(this.max),this.minTxt.text="$"+t.DealMoneyUtil.getStrByComma(this.min),this.balanceTxt.text="$"+t.DealMoneyUtil.getStrByComma(this.myChips),this.updateView()},n.prototype.updateView=function(){this.slider.value=this.cur,this.setTip(this.cur)},n.prototype.add=function(t){this.cur=Math.min(this.cur+t,this.max),this.cur=Math.max(this.min,this.cur),this.updateView()},n.prototype.setIntoChipData=function(){var e=a.TableData.gameinfo,i=(a.TableData.matchInfo,a.TableData.systemInfo),n=a.TableData.userData,o=n.getUserByName(n.currentName);if(!o)return this.remove(),void t.MessageDialog.showConfirmNotice("没有入座不能加买的，少年!");var r=e.getGameInfo(),s=o.goldNum,l=Math.floor(r.myCoin/i.getsystemInfo().present_ChipToCoin),h=r.maxChip-s;h=Math.min(h,l);var c=s>=r.minChip?1:r.minChip-s;r.isForce&&(c=r.forceMinChip),this.setCoinData(h,c,Math.max(h,c),l)},n}(t.BasePanel);a.DragBuyinPanel=i,__reflect(i.prototype,"wpt.play.table.DragBuyinPanel")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.seat=0,t}return __extends(a,e),a.prototype.setData=function(t,e,i,n,o,r){new egret.Bitmap;this.seat=r,this.image=t,this.addChild(this.image),this.image.x=-(this.image.width>0?this.image.width:a.GIFT_WIDTH)/2,this.image.y=-(this.image.height>0?this.image.height:a.GIFT_HEIGHT)/2,this.x=e,this.y=i,egret.Tween.get(this).to({x:n,y:o},1200).call(this.onFinishTween,this)},a.prototype.onFinishTween=function(){var e=a.tableGiftArr[this.seat];t.isempty(e)||t.isempty(e.parent)||e.parent.removeChild(e),a.tableGiftArr[this.seat]=this,this.bonesLayout=new t.DragonBonesPlayer,this.bonesLayout.setDataSimple(a.ANIMATION_NAME,a.ANIMATION_NAME+t.ResConst.EFFECT_SUFFIX),this.bonesLayout.playTimes=0,this.bonesLayout.loadData(),this.bonesLayout.y=-10,this.addChild(this.bonesLayout),this.bonesComplete()},a.prototype.bonesComplete=function(){egret.setTimeout(function(){t.isempty(this.parent)||this.parent.removeChild(this)},this,3e3)},a}(egret.Sprite);a.tableGiftArr=[],a.GIFT_WIDTH=208,a.GIFT_HEIGHT=245,a.ANIMATION_NAME="liwuguang",e.TableGiftAnimation=a,__reflect(a.prototype,"wpt.play.table.TableGiftAnimation")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.skinName="play.table.TableGiftListItemSkin",t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.initImg()},i.prototype.init=function(){},i.prototype.clear=function(){},i.prototype.initImg=function(){this.g_default.visible=!0,this.g_checked.visible=!1,this.g_default.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.onClick=function(t){this.g_default.visible=!1,this.g_checked.visible=!0},i.prototype.dataChanged=function(){e.log.debug("-----------------:"+this.data),this.p_name.text=t.readMultiByte(this.data.name,t.CoreData.Encode),this.p_desc.text=t.readMultiByte(this.data.description,t.CoreData.Encode),this.p_price.text=t.DealMoneyUtil.getStrByComma(t.int64To32(this.data.price));var a=new eui.Image;a.source="gift_"+this.data.code+"_png";var i=new eui.Image;i.source="gift_"+this.data.code+"_down_png";for(var n=this.giftImg.numChildren-1;n>=0;n--)this.giftImg.removeChildAt(n);this.giftImg.addChild(a);for(var n=this.giftImg_checked.numChildren-1;n>=0;n--)this.giftImg_checked.removeChildAt(n);this.giftImg_checked.addChild(i)},i.prototype.unSelected=function(){this.g_default.visible=!0,this.g_checked.visible=!1},i}(t.ItemRenderView);e.TableGiftListItem=a,__reflect(a.prototype,"wpt.play.table.TableGiftListItem")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.player=null,t.isCreated=!1,t.isShow=!1,t.skinName="play.table.TableGiftSkin",t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.isCreated=!0,this.init()},i.prototype.init=function(){this.initList(),this.giveLabelName(),this.giveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendBtnClick,this,!1)},i.prototype.giveLabelName=function(a){void 0===a&&(a=null);var i=t.getLang("gift_table_give");this.player=a,(null==a||void 0==a)&&(i=t.getLang("gift_table_giveAll"),a="("+e.TableData.userData.getPlayerCountBuyInSuccess()+")"),this.l_give_name.textFlow=[{text:i},{text:a,style:{textColor:15520316}}]},i.prototype.initList=function(){this.listData=new eui.ArrayCollection,this.list.itemRenderer=e.TableGiftListItem,this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listChangeHandler,this),this.updateListData()},i.prototype.updateListData=function(){var t=e.TableData.tableGiftList;this.listData.replaceAll(t),this.list.dataProvider=this.listData,this.list.width=223*this.listData.length-7,this.hscroller.SCROLL_DIS=223},i.prototype.sendBtnClick=function(a){null!=this.curSelectedItem&&void 0!=this.curSelectedItem&&(t.dispatch(new e.TableEvent(e.TableEvent.BUY_TABLEGIFT,[this.curSelectedItem.data.code,this.player])),this.hide())},i.prototype.listChangeHandler=function(t){var e=t.itemRenderer;null!=this.curSelectedItem&&void 0!=this.curSelectedItem&&e.itemIndex!=this.curSelectedItem.itemIndex&&this.curSelectedItem.unSelected(),this.curSelectedItem=e},i.prototype.show=function(){a.prototype.show.call(this),this.isShow=!0,e.TableData.tableGiftList.length<1?t.dispatch(new t.ToLobbyEvent(t.ToLobbyEvent.REQ_TABLEGIFTLIST)):i.TABLE_GIFT_IMG_ISCOMPLETE||(i.TABLE_GIFT_IMG_ISCOMPLETE=!0,this.updateListData())},i.prototype.hide=function(){this.isShow&&e.TableData.isShowVideo&&t.dispatch(new t.WPTEvent("table_show_video")),a.prototype.hide.call(this),this.isShow=!1,null!=this.curSelectedItem&&void 0!=this.curSelectedItem&&this.curSelectedItem.unSelected(),t.dispatch(new t.BaseEvent("table_func_close","gift"))},i}(t.BasePanel);a.TABLE_GIFT_IMG_ISCOMPLETE=!0,e.TableGiftPanel=a,__reflect(a.prototype,"wpt.play.table.TableGiftPanel")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.skinName="resource/play/skins/table/MatchInfoPanelSkin.exml",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(i,a),i.prototype.measure=function(){a.prototype.measure.call(this)},i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.init()},i.prototype.onAdd=function(){a.prototype.onAdd.call(this)},i.prototype.onRemove=function(){a.prototype.onRemove.call(this)},i.prototype.init=function(){this.updateRank(0,0),this.updateChips(0,0,0),this.updateBlinds(0,0),this.updateAnt(0),this.updateNextBlindsTimes(0,0,0),this.updateNextAnte(0),this.updateRestTime("")},i.prototype.updateRank=function(e,a){var i=e.toString();switch(e){case 1:i=t.getLang("one_st",i);break;case 2:i=t.getLang("two_nd",i);break;case 3:i=e+"rd";break;case 4:case 5:case 6:case 7:case 8:case 9:i=e+"th";break;default:i=0==a?" ":e.toString()}this.rank1.text=i,this.rank2.text=0==a?" ":a.toString(),this.updatePos()},i.prototype.updatePos=function(){this.rankline.x=this.rank1.x+this.rank1.width+4,this.rank2.x=this.rankline.x+this.rankline.width},i.prototype.updateChips=function(t,e,a){this.largest.text=0==t?" ":t.toString(),this.smallest.text=0==e?" ":e.toString(),this.average.text=0==a?" ":a.toString()},i.prototype.updateBlinds=function(e,a){this.curblinds.text=t.getLang("CurrentBlinds")+": "+a.toString()+"/"+e.toString()},i.prototype.updateAnt=function(e){this.aunt.text=t.getLang("Ante")+": "+e.toString()},i.prototype.updateNextBlindsTimes=function(e,a,i){this.intime.textFlow=(new egret.HtmlTextParser).parser(t.getLang("table_matchinfo_nextblindstime",e,i,a))},i.prototype.updateNextAnte=function(e){this.aunt2.text=t.getLang("Ante")+": "+e.toString()},i.prototype.updateRestTime=function(t){this.intime2.text=t},i.prototype.visRank=function(t){this.posLbl.visible=t,this.rankline.visible=t,this.rank1.visible=t,this.rank2.visible=t},i.prototype.onAddedToStage=function(){var t=e.TableData.userData.getCurPlayerVO();t&&this.visRank(!t.isObserver)},i.prototype.onRemovedFromStage=function(){},i.prototype.show=function(){t.DisplayUtil.addChild(t.Context.getInstance().screen.popupLayout,this)},i}(t.BasePanel);e.MatchInfoPanel=a,__reflect(a.prototype,"wpt.play.table.MatchInfoPanel")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e=function(t){function e(e,a){return void 0===a&&(a=null),t.call(this,e,a)||this}return __extends(e,t),e}(t.BaseEvent);e.DragonBonesDataLoadComplete="DragonBonesDataLoadComplete",e.DragonBonesCOMPLETE="DragonBonesCOMPLETE",e.DragonBonesLOOP_COMPLETE="DragonBonesLOOP_COMPLETE",e.DragonBonesFrame="DragonBonesFrame",e.MovieClipDataLoadComplete="MovieClipDataLoadComplete",e.ShowBlackBra="ShowBlackBra",e.RESIZE="_RESIZE",t.UIEvent=e,__reflect(e.prototype,"wpt.UIEvent")}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.skinName="resource/play/skins/table/AddOperSkin.exml",t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),t.isDebug&&this.test()},i.prototype.measure=function(){a.prototype.measure.call(this)},i.prototype.test=function(){},i.prototype.onAdd=function(){a.prototype.onAdd.call(this)},i.prototype.onRemove=function(){a.prototype.onRemove.call(this)},i.prototype.resetAll=function(){t.DisplayUtil.removeAllChild(this.groupRight),t.DisplayUtil.removeAllChild(this.groupLeft)},i.prototype.visAutoReEnterCK=function(a){a&&e.TableData.userData.getCurPlayerVO()&&e.TableData.userData.getCurPlayerVO().isObserver||(a?t.DisplayUtil.addBottom(this.groupRight,this.autoReEnterCK):t.DisplayUtil.remove(this.autoReEnterCK))},i.prototype.visAddonBuyBtn=function(a){a&&e.TableData.userData.getCurPlayerVO()&&e.TableData.userData.getCurPlayerVO().isObserver||(a?(t.DisplayUtil.addTop(this.groupRight,this.autoAddCK),t.DisplayUtil.addTop(this.groupLeft,this.addonBuyBtn)):(t.DisplayUtil.remove(this.addonBuyBtn),t.DisplayUtil.remove(this.autoAddCK)))},i.prototype.enableAddonBuyBtn=function(t){t&&e.TableData.userData.getCurPlayerVO()&&e.TableData.userData.getCurPlayerVO().isObserver||(this.addonBuyBtn.enabled=t)},i.prototype.visReBuyBtn=function(a){a&&e.TableData.userData.getCurPlayerVO()&&e.TableData.userData.getCurPlayerVO().isObserver||(a?(t.DisplayUtil.addTop(this.groupRight,this.reBuyCK),t.DisplayUtil.addTop(this.groupLeft,this.rebuyBtn)):(t.DisplayUtil.remove(this.rebuyBtn),t.DisplayUtil.remove(this.reBuyCK),this.reBuyCK.selected=!1))},i.prototype.addResetBuyIn=function(t){t&&e.TableData.userData.getCurPlayerVO()&&e.TableData.userData.getCurPlayerVO().isObserver},i.prototype.showMatchPreInfo=function(a){a&&e.TableData.userData.getCurPlayerVO()&&e.TableData.userData.getCurPlayerVO().isObserver||(a?(t.DisplayUtil.addBottom(this.groupRight,this.reBuyCK),t.DisplayUtil.addBottom(this.groupRight,this.autoAddCK)):(t.DisplayUtil.remove(this.reBuyCK),t.DisplayUtil.remove(this.autoAddCK)))},i}(t.View);e.AddOper=a,__reflect(a.prototype,"wpt.play.table.AddOper")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.skinName="resource/play/skins/table/MySeatSkin.exml",t.pokerTypeTxt.touchEnabled=!1,t.chipNumTxt.touchEnabled=!1,t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),t.isDebug&&this.test(),this.setState(i.STATE_PLAYER),this.poker1.type=e.Poker.TYPE_MY,this.poker2.type=e.Poker.TYPE_MY,this.defaultY1=this.poker1.y,this.defaultY2=this.poker2.y},i.prototype.measure=function(){a.prototype.measure.call(this)},i.prototype.test=function(){},i.prototype.onAdd=function(){a.prototype.onAdd.call(this)},i.prototype.onRemove=function(){a.prototype.onRemove.call(this)},i.prototype.reset=function(){this.initHandCard(),this.setChips(0)},i.prototype.setState=function(t){this.currentState=t},i.prototype.setHandData=function(t,a,n,o){this.currentState==i.STATE_PLAYER&&(e.TableData.userData.getCurPlayerVO()&&e.TableData.userData.getCurPlayerVO().isFload||(e.log.debug("设置了我自己的手牌:index",t,"value",a,"color",n),52!=a&&o?0==t?this.poker1.setCardData(a,n):this.poker2.setCardData(a,n):(this.poker1.setBackCard(),this.poker2.setBackCard())))},i.prototype.visHandCard=function(t){this.poker1.visible=t,this.poker2.visible=t,this.handImg.visible=t,this.fingerImg.visible=t},i.prototype.visCard=function(t){this.poker1.visible=t,this.poker2.visible=t},i.prototype.setChips=function(e){this.currentState==i.STATE_PLAYER&&(0>=e?(this.chipNumTxtBG.visible=!1,this.chipNumTxt.visible=!1,this.chipPool.visible=!1,this.arrow.visible=!1):(this.chipNumTxtBG.visible=!0,this.chipNumTxt.visible=!0,this.chipPool.visible=!0,this.arrow.visible=!0,this.chipPool.setChips(e),this.chipNumTxt.text=t.DealMoneyUtil.getStrByComma(e),this.chipNumTxtBG.width=this.chipNumTxt.width+20,this.chipNumTxt.x=this.chipNumTxtBG.x+(this.chipNumTxtBG.width-this.chipNumTxt.width)/2,this.chipNumTxt.y=this.chipNumTxtBG.y+(this.chipNumTxtBG.height-this.chipNumTxt.height)/2))},i.prototype.updatePokerType=function(t){""==t?(this.pokerTypeBG.visible=!1,this.pokerTypeTxt.visible=!1,this.pokerTypeTxt.text=""):this.poker1.visible&&(this.pokerTypeBG.visible=!0,this.pokerTypeTxt.visible=!0,this.pokerTypeTxt.text=t)},i.prototype.updateHandView=function(t,e){this.handImg.source=t,this.fingerImg.source=e},i.prototype.initHandCard=function(){this.poker1.filters=null,this.poker2.filters=null,this.resetHandPos(),this.visHandCard(!1),this.updatePokerType("")},i.prototype.getCard=function(t){return 0==t?this.poker1:this.poker2},i.prototype.resetHandPos=function(){this.poker1.y=this.defaultY1,this.poker2.y=this.defaultY2},i}(t.View);a.STATE_OB="state_ob",a.STATE_PLAYER="state_player",e.MySeat=a,__reflect(a.prototype,"wpt.play.table.MySeat")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a;!function(t){t[t.VIEWSTATE_SHOW_MUCK=0]="VIEWSTATE_SHOW_MUCK",t[t.VIEWSTATE_POTINFO=1]="VIEWSTATE_POTINFO",t[t.VIEWSTATE_FOLD_CALL_ANY=2]="VIEWSTATE_FOLD_CALL_ANY",t[t.VIEWSTATE_CHECK_FOLD_ANY=3]="VIEWSTATE_CHECK_FOLD_ANY",t[t.VIEWSTATE_WAITBIGBLINDS=4]="VIEWSTATE_WAITBIGBLINDS",t[t.VIEWSTATE_DEALMEIN=5]="VIEWSTATE_DEALMEIN",t[t.VIEWSTATE_JOINSIMILARTABLE=6]="VIEWSTATE_JOINSIMILARTABLE",t[t.VIEWSTATE_TOURMODEBUY=7]="VIEWSTATE_TOURMODEBUY",t[t.VIEWSTATE_NULL=8]="VIEWSTATE_NULL"}(a=e.TABLE_OPER_STATE||(e.TABLE_OPER_STATE={}));var i=function(e){function i(){var t=e.call(this)||this;return t.everNum=1,t.tourClickParam="",t.skinName="play.skin.table.TableOperSkin",t}return __extends(i,e),i.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),t.isDebug&&this.test(),this.callBtnTxt.touchEnabled=!1,this.raiseBtnTxt.touchEnabled=!1,this.betBtnTxt.touchEnabled=!1,this.callTxt.touchEnabled=!1,this.foldBtn.isOverMusic=this.callBtn.isOverMusic=this.checkBtn.isOverMusic=this.raiseBtn.isOverMusic=this.betBtn.isOverMusic=!0,this.goldGroup.touchEnabled=!1,this.goldGroup.touchChildren=!1,this.coinTxt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCoinTxtTouch,this)},i.prototype.measure=function(){e.prototype.measure.call(this)},i.prototype.test=function(){},i.prototype.onAdd=function(){e.prototype.onAdd.call(this)},i.prototype.onRemove=function(){e.prototype.onRemove.call(this)},i.prototype.onCoinTxtTouch=function(t){this.coinTxt.textDisplay.addEventListener(egret.Event.FOCUS_OUT,this.coinFocusOut,this),document.addEventListener("keydown",this.coinKeyEnter.bind(this))},i.prototype.coinFocusOut=function(e){this.setGold(t.DealMoneyUtil.getNumberByString(this.coinTxt.text)),this.coinTxt.textDisplay.removeEventListener(egret.Event.FOCUS_OUT,this.coinFocusOut,this),document.removeEventListener("keydown",this.coinKeyEnter.bind(this))},i.prototype.coinKeyEnter=function(e){13==e.keyCode&&this.setGold(t.DealMoneyUtil.getNumberByString(this.coinTxt.text))},Object.defineProperty(i.prototype,"curViewState",{get:function(){return this.viewStack.selectedIndex},set:function(t){this.viewStack.selectedIndex!=t&&(this.viewStack.selectedIndex=t,t==a.VIEWSTATE_TOURMODEBUY?this.startTourMovie():this.stopTourMovie())},enumerable:!0,configurable:!0}),i.prototype.clearPreBtnSelectedState=function(){this.flod.selected=!1,this.check.selected=!1,this.callany.selected=!1,this.foldCK.selected=!1,this.callCK.selected=!1,this.anyCK.selected=!1,this.waitBigBlindsCK.selected=!1},i.prototype.setWaitBigBlindsCKSel=function(t){this.waitBigBlindsCK.selected=t},i.prototype.setCall=function(e){this.callBtnTxt.text=t.DealMoneyUtil.getStrByComma(e),this.callTxt.text=t.DealMoneyUtil.getStrByComma(e)},i.prototype.setBet=function(e){this.betBtnTxt.text=t.DealMoneyUtil.getStrByComma(e)},i.prototype.setRaise=function(e){this.raiseBtnTxt.text=t.DealMoneyUtil.getStrByComma(e)},i.prototype.visBtn=function(t,e,a,i,n){this.foldBtn.visible=t,this.checkBtn.visible=e,this.callBtn.visible=this.callBtnTxt.visible=a,this.betBtn.visible=this.betBtnTxt.visible=i,this.raiseBtn.visible=this.raiseBtnTxt.visible=n},i.prototype.updateBBBtn=function(e,a,i){this.bb25Btn.enabled=e,this.bb3Btn.enabled=a,this.potBtn.enabled=i,t.ColorUtil.setbwBitmap(this.bb25Btn,!e),t.ColorUtil.setbwBitmap(this.bb3Btn,!a),t.ColorUtil.setbwBitmap(this.potBtn,!i)},i.prototype.updatePotBtnDisable=function(e,a,i){this.pot12Btn.enabled=e,this.pot34Btn.enabled=a,this.potBtn.enabled=i,t.ColorUtil.setbwBitmap(this.pot12Btn,!e),t.ColorUtil.setbwBitmap(this.pot34Btn,!a),t.ColorUtil.setbwBitmap(this.potBtn,!i)},i.prototype.initScroll=function(t,e,a){void 0===a&&(a=0),this.everNum=a,this.setCoinData(t,e,e)},i.prototype.addSlider=function(){return this.onSliderBtnClick(this.everNum)},i.prototype.subSlider=function(){return this.onSliderBtnClick(-this.everNum)},i.prototype.onSliderBtnClick=function(t){var e=this.slider.value;return 0==t?e:(e=t>0?e%t==0?e+t:Math.ceil(e/t)*t:e%t==0?e+t:Math.ceil(e/t)*t,this.setGold(e))},i.prototype.setCoinData=function(t,e,a){return this.maxNum=t,this.minNum=e,this.slider.maximum=t,this.slider.minimum=e,this.setGold(a)},i.prototype.setGold=function(t){return t=Math.max(t,this.minNum),t=Math.min(t,this.maxNum),t==this.minNum&&this.minNum==this.maxNum?(this.slider.minimum=this.minNum-1,this.subtractBtn.enabled=!1,this.addBtn.enabled=!1,this.slider.enabled=!1,this.coinTxt.enabled=!1):(this.subtractBtn.enabled=!0,this.addBtn.enabled=!0,this.slider.enabled=!0,this.coinTxt.enabled=!0),this.slider.value=t,this.setCoinText(t),t},i.prototype.setCoinText=function(e){this.coinTxt.text=t.DealMoneyUtil.getStrByComma(e)},i.prototype.startTourMovie=function(){egret.Tween.get(this.tourArrowMovie,{loop:!0}).to({x:440},500).wait(100).to({x:422},100).wait(100)},i.prototype.stopTourMovie=function(){egret.Tween.removeTweens(this.tourArrowMovie),this.tourArrowMovie.x=422},i.prototype.setTourBuyinNum=function(e){this.tourGoldNum||(this.tourGoldNum=new t.NumberImg,this.tourGoldNum.numSkin="number_golden30x62_",this.tourGoldNum.scaleX=this.tourGoldNum.scaleY=.76,t.DisplayUtil.addChild(this.goldGroup,this.tourGoldNum)),this.tourGoldNum.num=e},i.prototype.setTourBuyinView=function(t,e,a){this.tourClickParam=a,t?(this.tourBuyinBtn.visible=!0,this.tourPlayNowBtn.visible=!1,this.goldGroup.visible=!0,this.tourTxt.text=e):(this.tourBuyinBtn.visible=!1,this.tourPlayNowBtn.visible=!0,this.goldGroup.visible=!1,this.tourTxt.text=e)},i}(t.View);e.TableOper=i,__reflect(i.prototype,"wpt.play.table.TableOper")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.funBtns=[],t}return __extends(n,i),n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.moneyTxt.touchEnabled=!1,this.nameTxt.touchEnabled=!1,this.nameTxtTip=new t.TextFieldTips,this.nameTxtTip.setTextField(this.nameTxt,16);var e=new egret.Shape;this.addChild(e),e.x=this.headbg.x+3,e.y=this.headbg.y,e.graphics.beginFill(16711680,1),e.graphics.drawCircle(79,83,70),e.graphics.endFill(),this.icon.mask=e,this.timerEffect.touchEnabled=this.timerEffect.touchChildren=!1,this.headbg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickPlayer,this),this.icon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickPlayer,this),this.addChipBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addChipBtnClick,this),this.recordBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.recordBtnClick,this),this.giftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.giftBtnClick,this),this.emojiBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.emojiBtnClick,this),this.videoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.videoBtnClick,this),this.reset(),this.funBtns=[this.recordBtn,this.giftBtn,this.emojiBtn,this.videoBtn],t.addCommand("table_func_close",this.table_func_closeHandle,this),t.addCommand("table_show_video",this.table_show_videoHandle,this)},n.prototype.configUI=function(){},n.prototype.measure=function(){i.prototype.measure.call(this)},n.prototype.onAdd=function(){i.prototype.onAdd.call(this)},n.prototype.onRemove=function(){i.prototype.onRemove.call(this)},n.prototype.reset=function(){this.mySeat.reset(),this.tableOper.curViewState=a.TABLE_OPER_STATE.VIEWSTATE_NULL,this.addOper.resetAll(),this.setShowName(""),this.changGold(-1),this.setOperationState(""),a.TableData.isShowVideo=!1,this.videoBtn.selected=!1,e.js.closevideo()},n.prototype.clickPlayer=function(){e.js.openInventory()},n.prototype.addChipBtnClick=function(){t.dispatch(new a.TableEvent(a.TableEvent.POPUP_BUYIN))},n.prototype.setIcon=function(t){this.icon.source=t+a.Player.ROLE_FRONT,this.mySeat.updateHandView(t+a.Player.ROLE_FINGER_1,t+a.Player.ROLE_FINGER_2)},n.prototype.setShowName=function(t){this.nameTxt.text=t,this.nameTxtTip.setTxt(t)},Object.defineProperty(n.prototype,"roleName",{get:function(){return this._roleName},set:function(t){this._roleName=t},enumerable:!0,configurable:!0}),n.prototype.changGold=function(e){-2==e?this.moneyTxt.text=t.getLang("table_observer"):this.moneyTxt.text=-1==e?"":t.DealMoneyUtil.getStrCommonByCnt(e,9)},n.prototype.setOperationState=function(t){this.state=t,""==t?(this.stateWord.source="",this.stateBG.visible=!1):(this.stateWord.source="table_seat_state_"+t+"_png",this.stateBG.visible=!0)},n.prototype.foldCard=function(e){e||t.ColorUtil.setColorState(this.mySeat.handGroup,t.ColorUtil.DEFAULT)},n.prototype.startTime=function(t,e,a){void 0===e&&(e=0),void 0===a&&(a=!1),0==this.timerEffect.visible&&(this.timerEffect.visible=!0),this.timerEffect.setdata(t,e),this.timerEffect.setCallback(this.removeTime.bind(this)),this.timerEffect.start()},n.prototype.stopTime=function(){this.timerEffect.stop()},n.prototype.removeTime=function(){this.timerEffect.visible=!1,this.timerEffect.isPlaying&&(this.timerEffect.reset(),this.timerEffect.stop())},n.prototype.funBtnClick=function(t){a.log.debug(t);for(var e=0;e<this.funBtns.length;e++)this.funBtns[e]!=t&&(this.funBtns[e].selected=!1)},n.prototype.recordBtnClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.funBtnClick(e.target),t.dispatch(new a.TableEvent(a.TableEvent.POPUP_RECORD))},n.prototype.giftBtnClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.funBtnClick(e.target),t.dispatch(new a.TableEvent(a.TableEvent.POPUP_TABLEGIFT))},n.prototype.emojiBtnClick=function(e){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.funBtnClick(e.target),t.dispatch(new a.TableEvent(a.TableEvent.POPUP_EMOJI))},n.prototype.videoBtnClick=function(i){t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),this.funBtnClick(i.target),t.dispatch(new a.TableEvent(a.TableEvent.POPUP_SHOW_VIDEO)),a.TableData.isShowVideo=this.videoBtn.selected,this.videoBtn.selected?e.js.showvideo():e.js.closevideo()},n.prototype.table_show_videoHandle=function(t){this.videoBtn.selected=!0,a.TableData.isShowVideo=this.videoBtn.selected,e.js.showvideo()},n.prototype.table_func_closeHandle=function(t){"emoji"==t.data?this.emojiBtn.selected=!1:"record"==t.data?this.recordBtn.selected=!1:"gift"==t.data?this.giftBtn.selected=!1:"video"==t.data&&(this.videoBtn.selected=!1)},n}(a.Player);a.TablePlayerBar=i,__reflect(i.prototype,"wpt.play.table.TablePlayerBar",["wpt.IView"])}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.chipNumTxt.dir=this._dir},a.prototype.setChip=function(e){this.chipPool.setChips(e),this.chipNumTxt.setTxt(t.DealMoneyUtil.getStrByComma(e)),"right"==this.dir&&(this.chipNumTxt.x=this.chipPool.x-this.chipNumTxt.width-5)},Object.defineProperty(a.prototype,"dir",{get:function(){return this._dir},set:function(t){this._dir=t},enumerable:!0,configurable:!0}),a}(t.View);e.PlayerChip=a,__reflect(a.prototype,"wpt.play.table.PlayerChip")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(eui.Component);t.PlayerHand=e,__reflect(e.prototype,"wpt.play.table.PlayerHand")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t._armatureName="",t._skeletonJsonName="",t._textureJsonName="",t._texturePngName="",t._armature=null,t._animationName=void 0,t._playTimes=-1,t._lastTime=void 0,t._mcHorizontalCenter=0/0,t._mcVerticalCenter=0/0,t.touchChildren=!1,t.touchEnabled=!1,t}return __extends(a,e),a.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.onCreate()},a.prototype.onCreate=function(){},a.prototype.setTouchEnabled=function(t){this.touchChildren=t,this.touchEnabled=t
},a.prototype.clear=function(){this._armature&&dragonBones.WorldClock.clock.contains(this._armature)&&dragonBones.WorldClock.clock.remove(this._armature)},a.prototype.destory=function(){this.clear(),this._armature=null},Object.defineProperty(a.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),a.prototype.centerArmature=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._mcHorizontalCenter=t,this._mcVerticalCenter=e,this._armature&&(this._armature.display.x=this.width/2+t,this._armature.display.y=this.height/2+e)},a.prototype.setData=function(t,e,a,i){void 0===i&&(i="armatureName"),this._armatureName=i,this._skeletonJsonName=t,this._textureJsonName=e,this._texturePngName=a},a.prototype.setDataSimple=function(t,e,a){void 0===a&&(a="armatureName"),this._armatureName=a,this._skeletonJsonName=t+"_json",this._textureJsonName=e+"_json",this._texturePngName=e+"_png"},a.prototype.loadData=function(e,a){void 0===e&&(e=!0),void 0===a&&(a=null);var i=null,n=null,o=null,r=this,s=function(t,e){i=t,c()},l=function(t,e){n=t,c()},h=function(t,e){o=t,c()},c=function(){if(i&&n&&o){var s=new dragonBones.EgretFactory;s.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(i)),s.addTextureAtlas(new dragonBones.EgretTextureAtlas(o,n)),r._armature&&(r._armature.display&&r._armature.display.parent&&r.removeChild(r._armature.display),dragonBones.WorldClock.clock.contains(r._armature)&&dragonBones.WorldClock.clock.remove(r._armature)),r._armature=s.buildArmature(r._armatureName),r.addChild(r._armature.display),isNaN(r._mcHorizontalCenter)||isNaN(r._mcVerticalCenter)||r.centerArmature(r._mcHorizontalCenter,r._mcVerticalCenter),r._armature.addEventListener(dragonBones.AnimationEvent.COMPLETE,function(e){r.dispatchEvent(new t.UIEvent(t.UIEvent.DragonBonesCOMPLETE))},r),r._armature.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,function(e){r.dispatchEvent(new t.UIEvent(t.UIEvent.DragonBonesLOOP_COMPLETE))},r),r._armature.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,function(e){r.dispatchEvent(new t.UIEvent(t.UIEvent.DragonBonesFrame,e.frameLabel))},r),e?r._armature.animation.play(r._animationName,r._playTimes):r._armature.animation.stop(),dragonBones.WorldClock.clock.add(r._armature),a&&a(),r.dispatchEvent(new t.UIEvent(t.UIEvent.DragonBonesDataLoadComplete))}};t.getAsset(this._skeletonJsonName,s,this,RES.ResourceItem.TYPE_JSON),t.getAsset(this._textureJsonName,l,this,RES.ResourceItem.TYPE_JSON),t.getAsset(this._texturePngName,h,this,RES.ResourceItem.TYPE_IMAGE)},Object.defineProperty(a.prototype,"playTimes",{get:function(){return this._playTimes},set:function(t){this._playTimes=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"animationName",{get:function(){return this._animationName},set:function(t){this._animationName=t},enumerable:!0,configurable:!0}),a.prototype.gotoAndPlay=function(t){this.armature&&(void 0!=t?this.armature.animation.play(t,this._playTimes):this.armature.animation.play(this.armature.animation.animationList[0],this._playTimes))},a.prototype.stop=function(t){this.armature&&(void 0!=t?this.armature.animation.stop(t):this.armature.animation.stop())},a.prototype.reset=function(){this.armature&&this.armature.animation.reset()},a}(t.View);t.DragonBonesPlayer=e,__reflect(e.prototype,"wpt.DragonBonesPlayer")}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.box1_prex=0,t.box1_centerx=-35,t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this)},i.prototype.init=function(){this.width=t.Screen.WIN_WIDTH,this.height=t.Screen.WIN_HEIGHT,e.log.debug(t.Screen.WIN_WIDTH,t.Screen.WIN_HEIGHT);var a=new egret.Sprite;a.graphics.beginFill(0,.8),a.graphics.drawRect(0,0,t.Screen.WIN_WIDTH,t.Screen.WIN_HEIGHT),a.graphics.endFill(),this.addChild(a),a.touchEnabled=!0,this.content=new eui.Group,this.addChild(this.content),this.boxawards=new e.SngResultAwards,this.rankItem=new e.SngResultRankItem,this.closeBtnBox=new e.SngResultCloseBtn,this.closeBtnBox.currentState="fail",this.titleView=new t.View,this.titleView.skinName="play.skin.table.Sng_Result_Title",this.titleView.anchorOffsetX=215,this.titleView.anchorOffsetY=30,this.title=this.titleView.skin.title,this.btnBox=new e.SngResultFuncBtns,this.btnBox.validateNow(),this.addChild(this.btnBox)},i.prototype.test=function(){},i.prototype.show2=function(){function e(){this.resultEffect.removeEventListener("DragonBonesDataLoadComplete",e,this,!1),this.resultEffect.armature.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event,this),this.resultEffect.gotoAndPlay();var t=this.resultEffect.armature.getSlot("js_a2"),a=this.resultEffect.armature.getSlot("js_a21"),i=this.resultEffect.armature.getSlot("js_a5"),n=this.resultEffect.armature.getSlot("js_a1"),o=this.resultEffect.armature.getSlot("js_a211"),r=this.resultEffect.armature.getSlot("js_a4");r.display.visible=!this.isKnockOut,this.slot_getdisplay=r.display,this.rankItem.anchorOffsetX=143,this.rankItem.anchorOffsetY=424,o.setDisplay(this.rankItem),this.closeBtnBox.anchorOffsetX=-277,this.closeBtnBox.anchorOffsetY=333,a.setDisplay(this.closeBtnBox),i.setDisplay(this.titleView),this.boxawards.anchorOffsetX=250,this.boxawards.anchorOffsetY=55,t.setDisplay(this.boxawards),this.btnBox.anchorOffsetX=288,n.setDisplay(this.btnBox)}this.closeBtnBox.failCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.failCloseBtnClick,this),this.btnBox.playnowBox.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playnowGoPreCity,this),this.btnBox.buyinBox.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyinGoCurCity,this),this.btnBox.playnowBox2.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playnowGoCurCity,this),this.btnBox.buyinBox2.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyinGoCurCity,this),null==this.resultEffect?(t.DisplayUtil.remove(this.btnBox),this.resultEffect=new t.DragonBonesPlayer,this.resultEffect.addEventListener("DragonBonesDataLoadComplete",e,this,!1),this.resultEffect.setDataSimple("bisaijiesuan_ske","bisaijiesuan_tex","Armature"),this.resultEffect.playTimes=1,this.resultEffect.loadData(!1),this.addChild(this.resultEffect),this.resultEffect.touchChildren=!0,this.resultEffect.x=this.width/2,this.resultEffect.y=this.height/2+75):this.resultEffect.gotoAndPlay()},i.prototype.frame_event=function(t){"shibaiguang"==t.frameLabel&&this.playLight()},i.prototype.playLight=function(){null==this.lightEffect?(this.lightEffect=new t.DragonBonesPlayer,this.lightEffect.setDataSimple("bisaijiesuanguang_ske","bisaijiesuanguang_tex","Armature"),this.lightEffect.playTimes=0,this.lightEffect.loadData(!0),this.lightEffect.x=this.width/2-10,this.lightEffect.y=this.height/2-310+75):this.lightEffect.gotoAndPlay(),this.content.addChildAt(this.lightEffect,0)},i.prototype.stopLight=function(){this.lightEffect&&this.lightEffect.stop()},i.prototype.hide=function(){a.prototype.hide.call(this),this.closeBtnBox.winCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.failCloseBtnClick,this),this.btnBox.playnowBox.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playnowGoPreCity,this),this.btnBox.buyinBox.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buyinGoPreCity,this),this.btnBox.playnowBox2.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playnowGoCurCity,this),this.btnBox.buyinBox2.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buyinGoCurCity,this),this.btnBox.playnowBox.stop(),this.btnBox.buyinBox.stop(),this.btnBox.playnowBox2.stop(),this.btnBox.buyinBox2.stop(),this.stopLight()},i.prototype.playnowGoPreCity=function(){this.isKnockOut?this.playnowGoCurCity():(t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_END_TO_PLAY,"pre")),this.hide())},i.prototype.buyinGoPreCity=function(){this.isKnockOut?this.buyinGoCurCity():this.awardVO.preCity.tagData.nSignFee+this.awardVO.preCity.tagData.nCharge<=t.CommonData.getInstance().currentUser.coins?(t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_END_TO_BUYIN,"pre")),this.hide()):t.MessageDialog.showMsg(t.MessageDialog.STATE_STORE,t.getLang("no_enough_balance"))},i.prototype.playnowGoCurCity=function(){t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_END_TO_PLAY,"cur")),this.hide()},i.prototype.buyinGoCurCity=function(){this.awardVO.buyinNum<=t.CommonData.getInstance().currentUser.coins?(t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_END_TO_BUYIN,"cur")),this.hide()):t.MessageDialog.showMsg(t.MessageDialog.STATE_STORE,t.getLang("no_enough_balance"))},i.prototype.failCloseBtnClick=function(){t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_GAME_REWARD_CLOSE,this.awardVO.rank)),this.hide()},i.prototype.setData=function(a){if(this.awardVO=a,a){if(this.rankItem.rankimg.source="sng_result_rank"+a.rank+"_png",a.curCityName?this.title.text=t.getLang("tour_sng_result_rank"+a.rank):this.title.text="",this.isKnockOut=null==a.preCity,this.slot_getdisplay&&(this.slot_getdisplay.visible=!this.isKnockOut),null==a.curCity)return e.log.error("SngFailResultView awardVO.curCity=null"),t.MessageDialog.showNotice("tourmode error"),void this.hide();null==a.preCity?(this.boxawards.setData(t.getLang("tour_sng_result_nevergiveup")),e.log.debug("SngFailResultView 无上一关卡")):this.boxawards.setData(a.awards),t.CommonData.getInstance().getTicketNumById(a.curCity.tagData.ticketMatchItemId)>0?(this.btnBox.setState("playnow"),a.curCityName?this.btnBox.playnowBox.totxt.text=t.getLang("tour_sng_result_btntxt_tryagin"):this.btnBox.playnowBox.totxt.text="",this.btnBox.playnowBox.play()):(this.btnBox.setState("buyin"),a.curCityName?this.btnBox.buyinBox.totxt.text=t.getLang("tour_sng_result_btntxt_tryagin"):this.btnBox.buyinBox.totxt.text="",this.btnBox.buyinBox.setNum(a.buyinNum),this.btnBox.buyinBox.play())}},i}(t.BasePanel);e.SngFailResultView=a,__reflect(a.prototype,"wpt.play.table.SngFailResultView")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},a.prototype.setTxtImg=function(e){this.imgNum||(this.imgNum=new t.NumberImg,this.imgNum.numSkin="number_golden30x62_",this.imgNum.scaleX=this.imgNum.scaleY=.5952,this.txtGroup.addChild(this.imgNum)),t.DisplayUtil.remove(this.txt),this.imgNum.num=e},a.prototype.setTxt=function(t){this.txt.visible=!0,this.imgNum&&(this.imgNum.visible=!1),this.txt.text=t},a}(t.View);e.SngResultAwardItem=a,__reflect(a.prototype,"wpt.play.table.SngResultAwardItem")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function a(){var e=t.call(this)||this;return e.skinName="play.skin.table.Sng_Result_Awards",e}return __extends(a,t),a.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},a.prototype.setData=function(t){e.log.debug(typeof t),"string"==typeof t?this.setTxt(t):1==t.length?(this.setCurrentState("single"),this.setItemData(this.item1,t[0])):t.length>1&&(this.setCurrentState("double"),this.setItemData(this.item1,t[0]),this.setItemData(this.item2,t[1]))},a.prototype.setCurrentState=function(t){this.currentState!=t&&(this.currentState=t)},a.prototype.setTxt=function(t){this.setCurrentState("txt"),this.txt.text=t},a.prototype.setItemData=function(t,e){1==e.type?(t.img.source="tour_reg_ticket_png",t.img.scaleX=t.img.scaleY=1,t.img.verticalCenter=10,t.setTxt(e.name)):3==e.type?(t.img.source="tour_golds_png",t.img.scaleX=t.img.scaleY=.75,t.img.verticalCenter=0,t.setTxtImg(e.cnt)):-1==e.type?(t.img.source="luck_"+e.skin+"_png",t.img.scaleX=t.img.scaleY=.7,t.img.verticalCenter=8,t.setTxt("Charm")):(t.img.source="",t.img.scaleX=t.img.scaleY=1,t.setTxt(e.name))},a}(t.View);e.SngResultAwards=a,__reflect(a.prototype,"wpt.play.table.SngResultAwards")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(e){function a(){var t=e.call(this)||this;return t.isInit=!1,t.isPlaying=!1,t.skinName="play.skin.table.Sng_Result_Buyin",t}return __extends(a,e),a.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isInit=!0,this.arrow_Y=this.arrowImg.y,this.buyinNum=new t.NumberImg,this.buyinNum.numSkin="number_golden30x62_",this.buyinNum.scaleX=this.buyinNum.scaleY=.7619,this.coinGroup.addChild(this.buyinNum),this.t_num>0&&(this.buyinNum.num=this.t_num),this.t_num=-1,this.isPlaying&&this.runPlay()},a.prototype.play=function(){this.isPlaying=!0,this.runPlay()},a.prototype.runPlay=function(){this.isInit&&(egret.Tween.removeTweens(this.arrowImg),this.arrowImg.y=this.arrow_Y,egret.Tween.get(this.arrowImg,{loop:!0}).to({y:this.arrow_Y+10},500).wait(100).to({y:this.arrow_Y},500).wait(100))},a.prototype.stop=function(){this.isPlaying=!1,this.arrowImg&&egret.Tween.removeTweens(this.arrowImg)},a.prototype.setNum=function(t){this.buyinNum?(this.buyinNum.num=t,this.t_num=-1):this.t_num=t},a}(t.View);e.SngResultBuyinBtn=a,__reflect(a.prototype,"wpt.play.table.SngResultBuyinBtn")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){var e=t.call(this)||this;return e.skinName="play.skin.table.Sng_Result_CloseBtn",e}return __extends(e,t),e}(t.View);e.SngResultCloseBtn=a,__reflect(a.prototype,"wpt.play.table.SngResultCloseBtn")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){var e=t.call(this)||this;return e.isInit=!1,e.skinName="play.skin.table.Sng_Result_FuncBtns",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.playnowBox.validateNow(),this.buyinBox.validateNow(),this.playnowBox2.validateNow(),this.buyinBox2.validateNow(),this.isInit=!0,this.temp_curstate&&this.updateState(this.temp_curstate)},e.prototype.setState=function(t){this.isInit?this.updateState(t):this.temp_curstate=t},e.prototype.updateState=function(t){"playnow"==t?(this.buyinBox2.visible=!1,this.playnowBox2.visible=!1,this.buyinBox.visible=!1,this.playnowBox.visible=!0,this.playnowBox.x=154):"buyin"==t?(this.playnowBox.visible=!1,this.buyinBox.visible=!0,this.buyinBox.x=154,this.buyinBox2.visible=!1,this.playnowBox2.visible=!1):"all"==t?(this.playnowBox.visible=!0,this.buyinBox.visible=!0,this.buyinBox2.visible=!0,this.playnowBox2.visible=!0,this.playnowBox.x=0,this.buyinBox.x=0,this.playnowBox2.x=308,this.buyinBox2.x=308):(this.playnowBox.visible=!1,this.buyinBox.visible=!1,this.buyinBox2.visible=!1,this.playnowBox2.visible=!1)},e}(t.View);e.SngResultFuncBtns=a,__reflect(a.prototype,"wpt.play.table.SngResultFuncBtns")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){var e=t.call(this)||this;return e.isInit=!1,e.isPlaying=!1,e.skinName="play.skin.table.Sng_Result_PlayNow",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isInit=!0,this.arrow_Y=this.arrowImg.y,this.isPlaying&&this.runPlay()},e.prototype.play=function(){this.isPlaying=!0,this.runPlay()},e.prototype.runPlay=function(){this.isInit&&(egret.Tween.removeTweens(this.arrowImg),this.arrowImg.y=this.arrow_Y,egret.Tween.get(this.arrowImg,{loop:!0}).to({y:this.arrow_Y+10},500).wait(100).to({y:this.arrow_Y},500).wait(100))},e.prototype.stop=function(){this.isPlaying=!1,this.arrowImg&&egret.Tween.removeTweens(this.arrowImg)},e}(t.View);e.SngResultPlayNowBtn=a,__reflect(a.prototype,"wpt.play.table.SngResultPlayNowBtn")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){var e=t.call(this)||this;return e.skinName="play.skin.table.Sng_Result_RankItem",e}return __extends(e,t),e}(t.View);e.SngResultRankItem=a,__reflect(a.prototype,"wpt.play.table.SngResultRankItem")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.box1_prex=0,t.box1_centerx=-35,t.nullSprite=new egret.Shape,t}return __extends(n,i),n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this)},n.prototype.init=function(){this.width=t.Screen.WIN_WIDTH,this.height=t.Screen.WIN_HEIGHT,a.log.debug(t.Screen.WIN_WIDTH,t.Screen.WIN_HEIGHT);var e=new egret.Sprite;e.graphics.beginFill(0,.8),e.graphics.drawRect(0,0,t.Screen.WIN_WIDTH,t.Screen.WIN_HEIGHT),e.graphics.endFill(),this.addChild(e),e.touchEnabled=!0,this.content=new eui.Group,this.addChild(this.content),this.boxawards=new a.SngResultAwards,this.closeBtnBox=new a.SngResultCloseBtn,this.closeBtnBox.currentState="win",this.titleView=new t.View,this.titleView.skinName="play.skin.table.Sng_Result_Title",this.titleView.anchorOffsetX=215,this.titleView.anchorOffsetY=30,this.title=this.titleView.skin.title,this.playnowBox=new a.SngResultPlayNowBtn,this.playnowBox.validateNow(),this.playBuyinBox=new a.SngResultBuyinBtn,this.playBuyinBox.validateNow(),this.initCongratulationsAni()},n.prototype.show2=function(){function e(){this.resultEffect.removeEventListener("DragonBonesDataLoadComplete",e,this,!1),this.resultEffect.armature.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event,this),this.resultEffect.gotoAndPlay();var t=this.resultEffect.armature.getSlot("js_a2"),a=this.resultEffect.armature.getSlot("js_a21"),i=this.resultEffect.armature.getSlot("js_a5"),n=this.resultEffect.armature.getSlot("js_a1");i.setDisplay(this.titleView),this.boxawards.anchorOffsetX=250,this.boxawards.anchorOffsetY=55,t.setDisplay(this.boxawards),this.closeBtnBox.anchorOffsetX=-277,this.closeBtnBox.anchorOffsetY=360,a.setDisplay(this.closeBtnBox),this.playnowBox.anchorOffsetX=140,this.playBuyinBox.anchorOffsetX=140,this.playBuyinBox.anchorOffsetY=n.display.anchorOffsetY-20,this.awardVO&&(this.hasTicket?n.setDisplay(this.playnowBox):n.setDisplay(this.playBuyinBox)),this.slot_downbox=n}this.closeBtnBox.winCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.winCloseBtnClick,this),this.playnowBox.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playNowBtnClick,this),this.playBuyinBox.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyinBtnClick,this),null==this.resultEffect?(this.resultEffect=new t.DragonBonesPlayer,this.resultEffect.addEventListener("DragonBonesDataLoadComplete",e,this,!1),this.resultEffect.setDataSimple("bisaijieshu_ske","bisaijieshu_tex","Armature"),this.resultEffect.playTimes=1,this.resultEffect.loadData(!1),this.addChild(this.resultEffect),this.resultEffect.touchChildren=!0,this.resultEffect.x=this.width/2,this.resultEffect.y=this.height/2+75):this.resultEffect.gotoAndPlay(),this.isShowConGroup()},n.prototype.frame_event=function(t){"shengliguang"==t.frameLabel&&this.playLight()},n.prototype.playLight=function(){null==this.lightEffect?(this.lightEffect=new t.DragonBonesPlayer,this.lightEffect.setDataSimple("bisaijieshuguang_ske","bisaijieshuguang_tex","Armature"),this.lightEffect.playTimes=0,this.lightEffect.loadData(!0),this.lightEffect.x=this.width/2-10,this.lightEffect.y=this.height/2-310+75):this.lightEffect.gotoAndPlay(),this.content.addChild(this.lightEffect)},n.prototype.stopLight=function(){this.lightEffect&&this.lightEffect.stop()},n.prototype.hide=function(){i.prototype.hide.call(this),this.awardVO=null,this.closeBtnBox.winCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.winCloseBtnClick,this),this.playnowBox.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playNowBtnClick,this),this.playBuyinBox.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buyinBtnClick,this),this.playnowBox.stop(),this.playBuyinBox.stop(),this.stopLight(),this.stopConAni()},n.prototype.playNowBtnClick=function(){e.js.toFB_Q(e.js.STATISTICS_TOURMODE_RESULT_PLAYNOW),null==this.awardVO.nextCity?t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_END_TO_PLAY,"cur")):t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_END_TO_PLAY,"next")),this.hide()},n.prototype.buyinBtnClick=function(){e.js.toFB_Q(e.js.STATISTICS_TOURMODE_RESULT_BUYIN),null==this.awardVO.nextCity?this.awardVO.buyinNum<=t.CommonData.getInstance().currentUser.coins?(t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_END_TO_BUYIN,"cur")),this.hide()):t.MessageDialog.showMsg(t.MessageDialog.STATE_STORE,t.getLang("no_enough_balance")):this.awardVO.nextCity.tagData.nSignFee+this.awardVO.nextCity.tagData.nCharge<=t.CommonData.getInstance().currentUser.coins?(t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_END_TO_BUYIN,"next")),this.hide()):t.MessageDialog.showMsg(t.MessageDialog.STATE_STORE,t.getLang("no_enough_balance"))},n.prototype.winCloseBtnClick=function(){e.js.toFB_Q(e.js.STATISTICS_TOURMODE_RESULT_CLOSE),t.dispatch(new t.WPTEvent(t.WPTEvent.TOUR_GAME_REWARD_CLOSE,this.awardVO.rank)),this.hide()},n.prototype.setData=function(e){this.awardVO=e,e&&(e.curCityName?this.title.text=t.getLang("tour_sng_result_title_winner",e.curCityName):this.title.text="",this.boxawards.setData(e.awards),this.hasTicket=!1,null!=e.nextCity?(this.hasTicket=t.CommonData.getInstance().getTicketNumById(e.nextCity.tagData.ticketMatchItemId)>0,this.hasTicket?this.setPlayNowData(e.nextCity):this.setBuyInData(e.nextCity)):(this.hasTicket=t.CommonData.getInstance().getTicketNumById(e.curCity.tagData.ticketMatchItemId)>0,this.hasTicket?this.setPlayNowData(e.curCity):this.setBuyInData(e.curCity)))},n.prototype.setPlayNowData=function(e){e?(this.slot_downbox&&this.slot_downbox.setDisplay(this.playnowBox),this.playnowBox.play(),e.cityName&&(this.playnowBox.totxt.text=t.getLang("tour_sng_result_btntxt_continueto",e.cityName))):this.slot_downbox&&this.slot_downbox.setDisplay(this.nullSprite)},n.prototype.setBuyInData=function(e){e?(this.slot_downbox&&this.slot_downbox.setDisplay(this.playBuyinBox),this.playBuyinBox.play(),this.playBuyinBox.setNum(e.tagData.nSignFee+e.tagData.nCharge),e.cityName&&(this.playBuyinBox.totxt.text=t.getLang("tour_sng_result_btntxt_continueto",e.cityName))):this.slot_downbox&&this.slot_downbox.setDisplay(this.nullSprite)},n.prototype.initCongratulationsAni=function(){null==this.conGroup&&(this.conGroup=new eui.Group,this.conGroup.touchEnabled=this.conGroup.touchChildren=!1),null==this.fireworkEffect&&(this.fireworkEffect=new t.DragonBonesPlayer,this.fireworkEffect.setDataSimple("lundunxiaoguo_ske","lundunxiaoguo_tex","Armature"),this.fireworkEffect.playTimes=0,this.fireworkEffect.loadData(),this.fireworkEffect.x=this.width/2-10,this.fireworkEffect.y=this.height/2,this.conGroup.addChild(this.fireworkEffect)),null==this.caiParticle&&(this.caiParticle=new t.MulParticleMergePlayer,this.caiParticle.setURL("cai_tex_json","cai_json","cai"),this.caiParticle.x=this.width/2-10,this.caiParticle.y=this.height/2-210+75,this.conGroup.addChild(this.caiParticle))},n.prototype.stopConAni=function(){this.caiParticle&&this.caiParticle.stop(),this.fireworkEffect&&this.fireworkEffect.stop(),t.isempty(this.conGroup)||t.isempty(this.conGroup.parent)||this.conGroup.parent.removeChild(this.conGroup)},n.prototype.isShowConGroup=function(){!t.isempty(this.awardVO)&&this.awardVO.isShowConAni&&(this.caiParticle&&this.caiParticle.play(),this.fireworkEffect&&this.fireworkEffect.gotoAndPlay(),this.addChild(this.conGroup))},n}(t.BasePanel);a.SngResultView=i,__reflect(i.prototype,"wpt.play.table.SngResultView")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.seatAry9=[],t.seatAry6=[],t.seatAry2=[],t.t_timeUISeat=-1,t}return __extends(i,a),i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.tablebg.touchEnabled=!1,this.timerEffect=new e.TimeEllipseEffect,this.timerEffect.width=143,this.timerEffect.horizontalCenter=0;for(var t=["","1","2","3","4","5","6","7","8","0"],i=1;i<t.length;i++)this.seatAry9[i]=this["s"+t[i]],this.seatAry9[i].setChipView(this.skin["chip"+t[i]]),this.seatAry9[i].setHandView(this.skin["hand"+t[i]]);for(var n=["","1","2","3","6","8","0"],i=1;i<n.length;i++)this.seatAry6[i]=this["s"+n[i]],this.seatAry6[i].setChipView(this.skin["chip"+n[i]]),this.seatAry9[i].setHandView(this.skin["hand"+t[i]]);for(var o=["","3","0"],i=1;i<o.length;i++)this.seatAry2[i]=this["s"+o[i]],this.seatAry2[i].setChipView(this.skin["chip"+o[i]]),this.seatAry9[i].setHandView(this.skin["hand"+t[i]])},i.prototype.measure=function(){a.prototype.measure.call(this)},i.prototype.onAdd=function(){a.prototype.onAdd.call(this)},i.prototype.onRemove=function(){a.prototype.onRemove.call(this)},i.prototype.setSeatMax=function(t){this._currentMaxNum=t,this.currentState=9==t?i.MAX_SEAT_9:6==t?i.MAX_SEAT_6:i.MAX_SEAT_2},i.prototype.setTableImg=function(t){this.tablebg.source=t},i.prototype.resetAll=function(){for(var t=0;t<this.seatAry9.length;t++)this.resetPlayer(t)},i.prototype.resetDealer=function(){var t=this.getPlayer(e.TableData.maxSeat);void 0!=t&&(t.setVisible(!0),t.setState(e.Player.STATE_DEALER))},i.prototype.setDealerState=function(t){t?(this.s0.setState(e.Player.STATE_PLAYER_FRONT70),this.s0.setHandState(e.Player.STATE_PLAYER_FRONT70),this.s0.setVisible(!1),this.s0.y=259,this.s0.playerHand.y=259,this.chair5.visible=!0):(this.s0.setState(e.Player.STATE_DEALER),this.s0.setHandState(e.Player.STATE_DEALER),this.s0.setIcon(e.Player.DEFAULT_DEALER_ROLE),this.s0.setVisible(!0),this.s0.y=259,this.s0.playerHand.y=259,this.chair5.visible=!1)},Object.defineProperty(i.prototype,"currentMaxNum",{get:function(){return this._currentMaxNum},enumerable:!0,configurable:!0}),i.prototype.setPlayerHead=function(t,e){var a=this.getPlayer(t);void 0!=a&&a.setIcon(e)},i.prototype.resetPlayer=function(t){var e=this.getPlayer(t);e&&e.resite()},i.prototype.updateSeatViewBySeat=function(t){var e=this.getPlayer(t);e&&(e.setSeat(t),e.setVisible(!0))},i.prototype.getPlayer=function(t){return 2==e.TableData.maxSeat?this.seatAry2[t]:6==e.TableData.maxSeat?this.seatAry6[t]:this.seatAry9[t]},i.prototype.getPlayerPos=function(t){var e=this.getPlayer(t);return new egret.Point(e.x,e.y)},i.prototype.checkHasPlayer=function(t){var e=this.getPlayer(t);return e?e.visible:!1},i.prototype.startTime=function(e,a,i,n){void 0===i&&(i=0),void 0===n&&(n=!1);var o=this.getPlayer(e);o&&o.visible&&(this.t_timeUISeat=e,t.DisplayUtil.addChild(o.nameChipGroup,this.timerEffect),o.showTime(),this.timerEffect.setdata(a,i),this.timerEffect.setCallback(this.removeTime.bind(this)),this.timerEffect.start())},i.prototype.stopTime=function(){this.timerEffect.stop()},i.prototype.removeTime=function(){if(this.timerEffect.isPlaying&&(this.timerEffect.reset(),this.timerEffect.stop()),t.DisplayUtil.remove(this.timerEffect),-1!=this.t_timeUISeat){var e=this.getPlayer(this.t_timeUISeat);if(!e||!e.visible)return;e.hideTime(),this.t_timeUISeat=-1}},i}(t.View);a.MAX_SEAT_9="STATE_9",a.MAX_SEAT_6="STATE_6",a.MAX_SEAT_2="STATE_2",e.TableSeat=a,__reflect(a.prototype,"wpt.play.table.TableSeat")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.colorArr=["0x5fd88d","0x39c6b3","0x5a84ff","0xb260ff","0xff5f59"],t.skinName="play.skin.table.TableViewSkin",t}return __extends(i,a),i.prototype.onAdd=function(){a.prototype.onAdd.call(this)},i.prototype.onRemove=function(){a.prototype.onRemove.call(this)},i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.sidPotAry=[];for(var i=1;8>=i;i++)this.sidPotAry.push(this["sp"+i]),this["sp"+i].visible=!1;this.mainPool.visible=!1,this.preChips.visible=!1,this.markD.visible=!1,this.publicPokers.init(),this.showMatchTxtNotice(!1),this.matchInfoUI=new e.MatchInfoPanel,this.matchInfoUI.x=69,this.matchInfoUI.y=252,this.backBtn.visible=t.CoreData.isDebugData()},i.prototype.setObState=function(t){this.mainPool.y=t?704:515,this.preChips.y=t?765:267},i.prototype.setPotTxt=function(t){this.preChips.text=t},i.prototype.visInitView=function(){this.tablePlayerBar.reset(),this.tableSeat.resetAll(),this.matchInfoUI.hide(),this.table_city.visible=!1},i.prototype.setD=function(t,e){void 0===e&&(e=null),this.markD.visible=t,null!=e&&(this.markD.x=e[0],this.markD.y=e[1])},i.prototype.hideAllSidPot=function(){for(var t=0;t<this.sidPotAry.length;t++)this.sidPotAry[t].visible=!1},i.prototype.updateBorderPool=function(e,a){this.sidPotAry[e].numTxt.text=t.DealMoneyUtil.getStrByComma(a),this.sidPotAry[e].visible=!0},i.prototype.showMatchTxtNotice=function(e){e?t.DisplayUtil.addChild(this,this.matchTxtNotice):t.DisplayUtil.remove(this.matchTxtNotice)},i.prototype.updateSitoutState=function(t){this.sitOutBtn.selected=t},i.prototype.visSitOut=function(t){this.sitOutBtn.visible=t},i.prototype.setAntTxtColor=function(t){t>=1&&5>=t?this.antTxt.textColor=this.colorArr[t-1]:this.antTxt.textColor=this.colorArr[2]},i}(t.View);e.TableView=a,__reflect(a.prototype,"wpt.play.table.TableView")}(a=e.table||(e.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setText=function(t){this.text.text=t,this.resize()},e.prototype.resize=function(){this.bg.width=this.text.textWidth+100},e}(eui.Component);t.TextNotice=e,__reflect(e.prototype,"wpt.play.table.TextNotice")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.bg=new egret.Shape,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.setWin=function(t,e){this.mywin.visible=t,this.otherwin.visible=!t,this.dragbg()},e.prototype.dragbg=function(){this.bg.graphics.clear(),this.bg.graphics.beginFill(0,.5),this.bg.graphics.drawRect(0,0,this.width,this.height),this.bg.graphics.endFill()},e}(eui.Component);t.WinUI=e,__reflect(e.prototype,"wpt.play.table.WinUI")}(e=t.table||(t.table={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(e,a){return t.call(this,e,a)||this}return __extends(e,t),e}(t.BaseEvent);a.SALE_OPEN_CLICK="SALE_OPEN_CLICK",a.SPIN_OPEN_CLICK="SPIN_OPEN_CLICK",a.STORE_OPEN_CLICK="STORE_OPEN_CLICK",a.PROMO_PRIZE_ANIMATION="PROMO_PRIZE_ANIMATION",a.UPDATE_PROMOTIME="UPDATE_PROMOTIME",e.TopEvent=a,__reflect(a.prototype,"wpt.play.top.TopEvent")}(a=e.top||(e.top={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(){function i(){this.isFirst=!1,this._getPromoUrl=t.CoreData.getHttpUri(t.CoreData.GetPromoApi)}return i.prototype.getPromoTime=function(i){function n(i){t.log.debug("Load PromoAPi Complete.");var n=null;try{if(n=JSON.parse(i),t.log.debug("============="+i),1!=n.State)throw new Error(n.Message);if(null!=n.Value){for(var o=n.Value,r=null,s=null,l=0;l<o.length;l++){var h=o[l],c=t.DateUtils.parseStringToDateByZone(h.EndDt,t.CoreData.TimeZone);if(null==r&&(r=h),null==s)s=c;else{var u=s.getTime()-c.getTime();u>0&&(s=c,r=h)}}t.CommonData.getInstance().promoInfo.State=n.State,t.CommonData.getInstance().promoInfo.StartDt=n.StartDt,t.CommonData.getInstance().promoInfo.EndDt=n.EndDt,t.dispatch(new a.TopEvent(a.TopEvent.UPDATE_PROMOTIME,{isFirst:this.isFirst,result:{Value:r,State:n.State}}))}}catch(p){t.log.debug("获取促销接口返回结果解析失败"),!t.CoreData.isLoginFirst&&this.isFirst&&e.js.askOpenGoldStore()}}function o(e){t.log.debug("获取促销接口失败"),t.dispatch(new a.TopEvent(a.TopEvent.UPDATE_PROMOTIME))}this.isFirst=i;var r=this._getPromoUrl+"?platform="+(1==t.CoreData.channelType?200:300);
t.HttpService.GET(r,null,n.bind(this),o)},i}();a.PromoManager=i,__reflect(i.prototype,"wpt.play.top.PromoManager")}(a=e.top||(e.top={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(){function e(){}return e.prototype.checkStopServer=function(e,a){void 0===e&&(e=null),void 0===a&&(a=null),this._noCallBack=e,this._yesCallBack=a;var i=(t.CoreData.getHttpUri(t.CoreData.StopServicesApi),{});i.gameID=t.CoreData.GAMEID,i.language="en",t.HttpService.GET(t.CoreData.getHttpUri(t.CoreData.StopServicesApi),i,this.onStopServicesLoadComplete.bind(this),this.onStopServicesLoadError.bind(this))},e.prototype.onStopServicesLoadComplete=function(e){t.log.debug("Load Stop Services Complete."),this.result=null;try{if(this.result=JSON.parse(e),t.log.debug("============="+e),1!=this.result.State)throw new Error(this.result.Message);if(null!=this.result.Value.MaintenanceNoticeInfo){t.CommonData.getInstance().stopInfo.State=this.result.State,t.CommonData.getInstance().stopInfo.IsPush=this.result.Value.IsPush,t.CommonData.getInstance().stopInfo.title=this.result.Value.MaintenanceNoticeInfo.NoticeTitle,t.CommonData.getInstance().stopInfo.content=this.result.Value.MaintenanceNoticeInfo.NoticeContent,t.log.debug("CommonData.getInstance().stopInfo.content"+t.CommonData.getInstance().stopInfo.content),t.CommonData.getInstance().stopInfo.IsMaintenance=this.result.Value.IsMaintenance;var a=new Date(1e3*this.result.Value.MaintenanceNoticeInfo.MaintenanceStarttimeBjUnixTimeStamp),i=new Date(1e3*this.result.Value.MaintenanceNoticeInfo.MaintenanceEndtimeBjUnixTimeStamp);a.setMinutes(a.getMinutes()-480+this.result.Value.MaintenanceNoticeInfo.PushStarttimeUsEast2UtcOffset),i.setMinutes(i.getMinutes()-480+this.result.Value.MaintenanceNoticeInfo.PushEndtimeUsEast2UtcOffset);var n=t.DateUtils.convertDateStr(a.toString());t.DateUtils.convertDateStr(i.toString());t.CommonData.getInstance().stopInfo.content=t.CommonData.getInstance().stopInfo.content.split("{maintenance_starttime_bj}").join(n),t.log.debug("CommonData.getInstance().stopInfo.content"+t.CommonData.getInstance().stopInfo.content)}}catch(o){t.log.debug("获取停服公告返回结果解析失败")}this.checkStopServerSuccess()},e.prototype.onStopServicesLoadError=function(){t.log.debug("获取停服公告失败"),this.checkStopServerSuccess()},e.prototype.checkStopServerSuccess=function(){this.result&&1==this.result.State&&1==this.result.Value.IsMaintenance?(t.CommonData.getInstance().preload.showLoadStopServer(),t.isempty(this._yesCallBack)||this._yesCallBack.call(this)):t.isempty(this._noCallBack)?(t.log.debug("loadconfig"),t.CommonData.getInstance().preload.loadResConfig()):this._noCallBack.call(this)},e}();e.ServerModel=a,__reflect(a.prototype,"wpt.play.top.ServerModel")}(a=e.top||(e.top={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.Actor);e.TopModel=a,__reflect(a.prototype,"wpt.play.top.TopModel")}(a=e.top||(e.top={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.start=function(){i.prototype.start.call(this)},n.prototype.clear=function(){i.prototype.clear.call(this)},n.prototype.initOnce=function(){t.log.debug("TopStarter.initOnce()"),this.model=new a.TopModel,this.view=new a.TopView,this.addTopView(this.view),t.AlignUtil.alginScreenTC(this.view),this.view.x-=36,this.headView=new t.commonhead.HeadView,this.addTopView(this.headView);var i=new t.RightUI;t.DisplayUtil.addChild(this.screen.uiLayout,i),this.topMeditor=new a.TopViewMeditor,this.addMeditor(this.topMeditor),this.addMeditor(new e.spin.SpinMeditor),this.addMeditor(new a.PromoMeditor),this.addMeditor(new t.commonhead.HeadMeditor),this.view.y=60},n.prototype.initListeners=function(){t.log.debug("TopStarter.initListeners()")},n}(t.ModuleStarter);a.TopStarter=i,__reflect(i.prototype,"wpt.play.top.TopStarter")}(a=e.top||(e.top={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.GOLD_NAME="jinbifei",t.OTHER_NAME="touxiangfei",t}return __extends(i,a),i.prototype.init=function(){t.addCommand(e.TopEvent.PROMO_PRIZE_ANIMATION,this.PROMO_PRIZE_ANIMATION,this)},i.prototype.PROMO_PRIZE_ANIMATION=function(e){var a=(e.data,this.GOLD_NAME);a=this.OTHER_NAME,this.bonesLayout=new t.DragonBonesPlayer,this.bonesLayout.setDataSimple(a,a+t.ResConst.EFFECT_SUFFIX),this.bonesLayout.playTimes=1,this.bonesLayout.addEventListener(t.UIEvent.DragonBonesCOMPLETE,this.bonesComplete,this),this.bonesLayout.addEventListener(t.UIEvent.DragonBonesDataLoadComplete,this.loadComplete,this),this.bonesLayout.loadData(),t.DisplayUtil.addChild(t.Context.getInstance().screen.uiLayout,this.bonesLayout)},i.prototype.loadComplete=function(){var e=this.bonesLayout.armature.display.width,a=this.bonesLayout.armature.display.height;t.AlignUtil.alginScreenCenter(this.bonesLayout),t.log.debug("****************:--w:",e,"---h",a)},i.prototype.bonesComplete=function(e){t.log.debug("bonesComplete"),null!=this.bonesLayout&&null!=this.bonesLayout.parent&&void 0!=this.bonesLayout.parent&&this.bonesLayout.parent.removeChild(this.bonesLayout),this.bonesLayout=null},i}(t.Meditor);e.PromoMeditor=a,__reflect(a.prototype,"wpt.play.top.PromoMeditor")}(a=e.top||(e.top={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(a){var i=function(i){function n(){var t=i.call(this)||this;return t.isFirst=!1,t.promoTickNum=0,t.ticknum=0,t.subSpinToList=0,t.spinTickNum=0,t}return __extends(n,i),n.prototype.init=function(){t.addCommand(a.TopEvent.SALE_OPEN_CLICK,this.saleBtnClick,this),t.addCommand(a.TopEvent.STORE_OPEN_CLICK,this.storeBtnClick,this),t.addCommand(t.play.spin.SpinEvent.SPIN_TIME,this.SPIN_TIME,this),t.addCommand(a.TopEvent.UPDATE_PROMOTIME,this.UPDATE_PROMOTIME,this),eui.Binding.bindHandler(t.CommonData.getInstance().currentUser,["coins"],this.watchGoldHandler,this),eui.Binding.bindHandler(t.CommonData.getInstance().currentUser.master,["masterScore"],this.watchMasterScoreHandler,this),t.CoreData.isDebugData()&&eui.Binding.bindHandler(t.CoreData,["rolename"],this.watchRoleHandler,this),e.js.getIsFirstLogin()},n.prototype.watchRoleHandler=function(t){this.view.d_roleNameTxt.text=t},n.prototype.watchGoldHandler=function(a){t.CoreData.isDebugData()&&(this.view.d_coins.text=t.DealMoneyUtil.getStrByComma(a)),this.commonData.UpdateMaxCGZUnlockValue(),e.js.updateCoin(t.DealMoneyUtil.getStrByComma(a))},n.prototype.watchMasterScoreHandler=function(a){t.log.debug("大师分更新数据"+t.int64To32(a)),e.js.updateMasterScore(t.DealMoneyUtil.getStrByComma(t.int64To32(a)))},n.prototype.saleBtnClick=function(){var a=t.DateUtils.formatDate(this.commonData.stamp.serverTime2,"yyyy/Mm/dd hh:mm:ss");e.js.askOpenPromo(a)},n.prototype.storeBtnClick=function(){e.js.askOpenStore(),e.js.toFB_Q(e.js.STATISTICS_STORE_CLICK)},n.prototype.UPDATE_PROMOTIME=function(t){var e=t.data;if(e){this.isFirst=e.isFirst;var a=e.result;this.promoState=a.State,this.promoStartTime=a.Value.StartDt,this.promoEndTime=a.Value.EndDt,this.startPromoTick()}},n.prototype.startPromoTick=function(){var i=t.DateUtils.parseStringToDateByZone(this.promoEndTime,t.CoreData.TimeZone),n=(t.DateUtils.parseStringToDateByZone(this.promoStartTime,t.CoreData.TimeZone),t.DateUtils.switchTimeZone(this.commonData.stamp.serverTime2,t.CoreData.TimeZone)),o=i.getTime()-n.getTime();this.promoTickNum=o,t.CoreData.isLoginFirst||this.isFirst&&(this.promoTickNum>0&&1==this.promoState?t.dispatch(new a.TopEvent(a.TopEvent.SALE_OPEN_CLICK,null)):e.js.askOpenGoldStore()),t.Context.getInstance().gameManager.registerTimer(1e3,this.updatePromoTick,this)},n.prototype.stopPromoTick=function(){t.Context.getInstance().gameManager.unRegisterTimer(this.updatePromoTick,this)},n.prototype.updatePromoTick=function(){this.promoTickNum-=1e3,this.view.updateSaleTime(this.promoTickNum,this.ticknum,this.promoState)},n.prototype.SPIN_TIME=function(e){this.spintime=e.data.nextPlayTime;var a=e.data.sysDate,i=t.DateUtils.switchTimeZone(this.commonData.stamp.serverTime2,t.CoreData.TimeZone),n=t.DateUtils.parseStringToDateByZone(a,t.CoreData.TimeZone);t.log.debug("**********************:",i.getTime(),"             ",n.getTime()),this.subSpinToList=i.getTime()-n.getTime(),e.data&&this.startSpinTick()},Object.defineProperty(n.prototype,"commonData",{get:function(){return t.CommonData.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"view",{get:function(){return this.moduleStarter.view},enumerable:!0,configurable:!0}),n.prototype.startSpinTick=function(){this.stopSpinTick();var e=t.DateUtils.parseStringToDateByZone(this.spintime,t.CoreData.TimeZone),a=t.DateUtils.switchTimeZone(this.commonData.stamp.serverTime2,t.CoreData.TimeZone),i=e.getTime()-a.getTime()+this.subSpinToList;this.spinTickNum=i,t.Context.getInstance().gameManager.registerTimer(1e3,this.updateSpinTick.bind(this),this)},n.prototype.stopSpinTick=function(){t.Context.getInstance().gameManager.unRegisterTimer(this.updateSpinTick,this)},n.prototype.updateSpinTick=function(){this.spinTickNum-=1e3,this.view.updateSpinTime(this.spinTickNum)},n}(t.Meditor);a.TopViewMeditor=i,__reflect(i.prototype,"wpt.play.top.TopViewMeditor")}(a=e.top||(e.top={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(e){var a=function(a){function i(){var t=a.call(this)||this;return t.skinName="wpt.play.TopViewSkin",t}return __extends(i,a),i.prototype.partAdded=function(t,e){a.prototype.partAdded.call(this,t,e)},i.prototype.childrenCreated=function(){a.prototype.childrenCreated.call(this),this.storeMovieBtn=new t.WebMovieButton,this.storeMovieBtn.isOverMusic=!0,this.storeMovieBtn.init("anniu_ske","anniu_tex","Armature"),this.storeMovieBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.storeBtnClick,this),this.storeMovieBtn.x=849,this.storeMovieBtn.y=52,t.DisplayUtil.addChild(this,this.storeMovieBtn),this.spinMovieBtn=new t.WebMovieButton,this.spinMovieBtn.isOverMusic=!0,this.spinMovieBtn.init("zhuanpan_ske","zhuanpan_tex","Armature"),this.spinMovieBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.spinBtnClick,this),this.spinMovieBtn.x=1630,this.spinMovieBtn.y=51,t.DisplayUtil.addChild(this,this.spinMovieBtn),this.saleMovieBtn=new t.WebMovieButton,this.saleMovieBtn.isOverMusic=!0,this.saleMovieBtn.init("liwu_ske","liwu_tex","Armature"),this.saleMovieBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.saleBtnClick,this),this.saleMovieBtn.x=61,this.saleMovieBtn.y=55,t.DisplayUtil.addChild(this,this.saleMovieBtn),this.spinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.spinBtnClick,this),this.saleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.saleBtnClick,this),this.spinMovieBtn.visible=this.saleMovieBtn.visible=!1,this.spinBtn.visible=this.saleBtn.visible=!0,this.spinBtn.isOverMusic=this.saleBtn.isOverMusic=!0,this.updateDebugUI()},i.prototype.updateDebugUI=function(){this.debugGroup.visible=t.CoreData.isDebugData()},i.prototype.storeBtnClick=function(){t.log.debug("点击商店按钮"),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new e.TopEvent(e.TopEvent.STORE_OPEN_CLICK,null))},i.prototype.spinBtnClick=function(){t.log.debug("点击转盘按钮"),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new e.TopEvent(e.TopEvent.SPIN_OPEN_CLICK,null))},i.prototype.saleBtnClick=function(){t.log.debug("点击促销按钮"),t.SoundManager.getInstance().playAudio(t.ResConst.SOUND_BTN_CLICK,t.SoundManager.SOUND_OTHER),t.dispatch(new e.TopEvent(e.TopEvent.SALE_OPEN_CLICK,null))},i.prototype.updateSpinTime=function(e){e>0?(this.spinnow.visible=!1,this.spinBtn.visible=!0,this.spinMovieBtn.visible=!1,this.spinGroup.visible=!0,this.spin_colon.visible=!this.spin_colon.visible,this.spintime=t.DateUtils.getFormatHM(e),e>6e4?(this.spin_bg.source=RES.getRes(t.ResConst.YELLOW_TIME_PREFIX+"bg"+t.ResConst.RES_PNG),this.spin_colon.source=RES.getRes(t.ResConst.YELLOW_TIME_PREFIX+t.ResConst.RES_COLON+t.ResConst.RES_PNG),this.spin_numbg.source=RES.getRes(t.ResConst.YELLOW_TIME_PREFIX+"numbg"+t.ResConst.RES_PNG),this.spin_time_h1.source=RES.getRes(t.ResConst.YELLOW_TIME_PREFIX+this.spintime.hour1+t.ResConst.RES_PNG),this.spin_time_h2.source=RES.getRes(t.ResConst.YELLOW_TIME_PREFIX+this.spintime.hour2+t.ResConst.RES_PNG),this.spin_time_m1.source=RES.getRes(t.ResConst.YELLOW_TIME_PREFIX+this.spintime.minute1+t.ResConst.RES_PNG),this.spin_time_m2.source=RES.getRes(t.ResConst.YELLOW_TIME_PREFIX+this.spintime.minute2+t.ResConst.RES_PNG)):(this.spin_bg.source=RES.getRes(t.ResConst.RED_TIME_PREFIX+"bg"+t.ResConst.RES_PNG),this.spin_colon.source=RES.getRes(t.ResConst.RED_TIME_PREFIX+t.ResConst.RES_COLON+t.ResConst.RES_PNG),this.spin_numbg.source=RES.getRes(t.ResConst.RED_TIME_PREFIX+"numbg"+t.ResConst.RES_PNG),this.spin_time_h1.source=RES.getRes(t.ResConst.RED_TIME_PREFIX+"0"+t.ResConst.RES_PNG),this.spin_time_h2.source=RES.getRes(t.ResConst.RED_TIME_PREFIX+"0"+t.ResConst.RES_PNG),this.spin_time_m1.source=RES.getRes(t.ResConst.RED_TIME_PREFIX+this.spintime.minute1+t.ResConst.RES_PNG),this.spin_time_m2.source=RES.getRes(t.ResConst.RED_TIME_PREFIX+this.spintime.minute2+t.ResConst.RES_PNG))):(this.spin_bg.source=RES.getRes(t.ResConst.GREEN_TIME_PREFIX+"bg"+t.ResConst.RES_PNG),this.spinGroup.visible=!1,this.spinnow.visible=!0,this.spinBtn.visible=!1,this.spinMovieBtn.visible=!0)},i.prototype.updateSaleTime=function(e,a,i){1!=i||a>0?(this.sale_bg.source=RES.getRes(t.ResConst.YELLOW_TIME_PREFIX+"bg"+t.ResConst.RES_PNG),this.sale_sommingsoon.visible=!0,this.saleGroup.visible=!1,this.sale_days.visible=!1,this.saleMovieBtn.visible=!1,this.saleBtn.visible=!0):e>0?(this.sale_sommingsoon.visible=!1,this.saleGroup.visible=!0,this.sale_numbg.visible=!1,this.saleMovieBtn.visible=!0,this.saleBtn.visible=!1,e>3564e5?(this.saletime=t.DateUtils.getFormatDH(e),this.sale_days.visible=!0,this.sale_bg.source=RES.getRes(t.ResConst.GREEN_TIME_PREFIX+"bg"+t.ResConst.RES_PNG),this.sale_hour1.source=t.ResConst.GREEN_TIME_PREFIX+this.saletime.d1+t.ResConst.RES_PNG,this.sale_hour2.source=t.ResConst.GREEN_TIME_PREFIX+this.saletime.d2+t.ResConst.RES_PNG,this.sale_colon.visible=!1,this.sale_min1.visible=!1,this.sale_min2.visible=!1,0!=this.saletime.d1?(this.sale_days.x=151,this.sale_hour1.x=14,this.sale_hour2.x=28):(this.sale_hour1.visible=!1,this.saletime.d2<2?(this.sale_days.x=141,this.sale_hour1.x=6,this.sale_hour2.x=20,this.sale_days.source=RES.getRes(t.ResConst.GREEN_TIME_PREFIX+"day"+t.ResConst.RES_PNG)):(this.sale_days.x=146,this.sale_hour1.x=8,this.sale_hour2.x=22,this.sale_days.source=RES.getRes(t.ResConst.GREEN_TIME_PREFIX+"days"+t.ResConst.RES_PNG)))):e>6e4?(this.saleGroup.visible=!0,this.sale_days.visible=!1,this.sale_colon.visible=!this.sale_colon.visible,this.sale_hour1.x=28,this.sale_hour2.x=42,this.saletime=t.DateUtils.getFormatHM(e),this.sale_bg.source=RES.getRes(t.ResConst.GREEN_TIME_PREFIX+"bg"+t.ResConst.RES_PNG),this.sale_hour1.source=t.ResConst.GREEN_TIME_PREFIX+this.saletime.hour1+t.ResConst.RES_PNG,this.sale_hour2.source=t.ResConst.GREEN_TIME_PREFIX+this.saletime.hour2+t.ResConst.RES_PNG,this.sale_colon.source=t.ResConst.GREEN_TIME_PREFIX+t.ResConst.RES_COLON+t.ResConst.RES_PNG,this.sale_min1.source=t.ResConst.GREEN_TIME_PREFIX+this.saletime.minute1+t.ResConst.RES_PNG,this.sale_min2.source=t.ResConst.GREEN_TIME_PREFIX+this.saletime.minute2+t.ResConst.RES_PNG):(this.saleGroup.visible=!0,this.sale_days.visible=!1,this.sale_colon.visible=!this.sale_colon.visible,this.sale_hour1.x=28,this.sale_hour2.x=42,this.saletime=t.DateUtils.getFormatHM(e),this.sale_bg.source=RES.getRes(t.ResConst.RED_TIME_PREFIX+"bg"+t.ResConst.RES_PNG),this.sale_hour1.source=t.ResConst.RED_TIME_PREFIX+this.saletime.hour1+t.ResConst.RES_PNG,this.sale_hour2.source=t.ResConst.RED_TIME_PREFIX+this.saletime.hour2+t.ResConst.RES_PNG,this.sale_colon.source=t.ResConst.RED_TIME_PREFIX+t.ResConst.RES_COLON+t.ResConst.RES_PNG,this.sale_min1.source=t.ResConst.RED_TIME_PREFIX+this.saletime.minute1+t.ResConst.RES_PNG,this.sale_min2.source=t.ResConst.RED_TIME_PREFIX+this.saletime.minute2+t.ResConst.RES_PNG)):(this.sale_bg.source=RES.getRes(t.ResConst.YELLOW_TIME_PREFIX+"bg"+t.ResConst.RES_PNG),this.sale_sommingsoon.visible=!0,this.saleGroup.visible=!1,this.sale_days.visible=!1,this.saleMovieBtn.visible=!1,this.saleBtn.visible=!0)},i.prototype.onAdd=function(){},i.prototype.onRemove=function(){},i}(t.View);e.TopView=a,__reflect(a.prototype,"wpt.play.top.TopView")}(a=e.top||(e.top={}))}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a;!function(t){t[t.TOP=0]="TOP",t[t.LOBBY=1]="LOBBY",t[t.TABLE=2]="TABLE",t[t.DETAILSPOPUP=3]="DETAILSPOPUP",t[t.CONN_MATCHLIST=4]="CONN_MATCHLIST",t[t.POKERTOOL=5]="POKERTOOL",t[t.SPIN=6]="SPIN",t[t.GLOBAL_SERVICE=7]="GLOBAL_SERVICE"}(a=e.ModuleName||(e.ModuleName={}));var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.init=function(e){t.log.info("renderMode:"+egret.Capabilities.renderMode),t.CoreData.Version=(new Date).getTime().toString(),RES.web.Html5VersionController.prototype.getVirtualUrl=function(e){return e+="?v="+t.CoreData.Version},mouse.enable(e),egret.TextField.default_fontFamily="Microsoft Sans Serif",t.Context.getInstance().gameManager.init(e),this.configModule()},n.prototype.configModule=function(){this.registerModule(a.GLOBAL_SERVICE,999,["wpt.GlobalServiceController"],!0),this.registerModule(a.TOP,0,["wpt.play.top.TopStarter","wpt.play.detailspopup.DetailspopupStarter"],!0),this.registerModule(a.CONN_MATCHLIST,1,["wpt.play.lobby.ConnectMatchListServerStart"],!0),this.registerModule(a.LOBBY,1,["wpt.play.lobby.MatchListStarter"],!1),this.registerModule(a.TABLE,1,["wpt.play.table.TableMain"],!1),this.registerModule(a.SPIN,101,["wpt.play.spin.SpinStarter"],!1),this.registerModule(a.POKERTOOL,102,["wpt.play.pokerTool.PokerToolStarter"],!1)},n.prototype.registerModule=function(e,a,i,n){void 0===n&&(n=!1),t.Context.getInstance().moudleManager.registerModule(e,a,i,n)},n.prototype.start=function(){t.log.info("启动PlayWpt.start , "+document.domain),t.CommonData.getInstance().preload.init(),t.addCommand(t.WPTEvent.LOAD_ALL_COMPLETE,this.preLoadCompleteHandle,this),t.CommonData.getInstance().preload.loadConfig(this.loadConfigComplete.bind(this))},n.prototype.preLoadCompleteHandle=function(e){t.removeCommand(t.WPTEvent.LOAD_ALL_COMPLETE,this.preLoadCompleteHandle,this),t.MessagePrase.Instance.init(),t.Context.getInstance().moudleManager.start()},n.prototype.loadConfigComplete=function(){this.serverModel=new e.top.ServerModel,this.serverModel.checkStopServer(),t.CommonData.getInstance().serverModel=this.serverModel},n}(t.IPlatform);e.PlayWpt=i,__reflect(i.prototype,"wpt.play.PlayWpt");var n=function(){function a(){this.pokerType=0}return a.prototype.doit=function(){var e=new t.play.table.SngResultMeditor;new t.SngResultAwardVO;e.showResultWinPanel(null)},a.prototype.tanchu=function(){function e(){var t=a.armature.getSlot("jinbi"),e=new eui.Image;e.source="gold-02_png",e.anchorOffsetX=e.anchorOffsetY=78.5,t.display=e,a.gotoAndPlay()}var a=new t.DragonBonesPlayer;a.setDataSimple("tanchu","tanchu_texture"),a.playTimes=50,a.loadData(!1),a.x=300,a.y=300,t.DisplayUtil.addChild(t.Context.getInstance().screen.popupLayout,a),a.addEventListener("DragonBonesDataLoadComplete",e,this,!1)},a.prototype.testTimeProcess=function(){var a=30,i=20,n=new e.table.TimeCircleEffect;n.setdata(a,i),n.x=600,n.y=300,t.DisplayUtil.addChild(t.Context.getInstance().screen.popupLayout,n),n.start()},a.prototype.testParticle=function(){},a}();e.TestMain=n,__reflect(n.prototype,"wpt.play.TestMain")}(e=t.play||(t.play={}))}(wpt||(wpt={}));var wpt;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t.loadwaitlist=[],t.assetAdapterDict={preconfig:t.praseConfig},t}return __extends(a,e),a.prototype.init=function(){this.showLoadUI(),this.loadConfig()},Object.defineProperty(a.prototype,"commonView",{get:function(){return t.CommonView.getInstance()},enumerable:!0,configurable:!0}),a.prototype.showLoadUI=function(){t.DisplayUtil.addChild(this.screen.stage,this.commonView.loadUI),t.AlignUtil.alginScreenCenter(this.commonView.loadUI)},a.prototype.showLoadStopServer=function(){t.DisplayUtil.addChild(this.screen.stage,this.commonView.loadStopServerImg),t.AlignUtil.alginScreenCenter(this.commonView.loadStopServerImg)},a.prototype.hideLoadUI=function(){t.DisplayUtil.remove(this.commonView.loadUI)},a.prototype.loadConfig=function(e){void 0===e&&(e=null),t.log.debug("loadconfig");var a=this;t.getResByUrl(t.ResConst.Config_Path,function(i){t.log.debug("config load complete"),a.praseConfig(i),e&&e()},this)},a.prototype.loadDefaultSkinConfig=function(){t.log.info("loadDefaultSkinConfig");var e=new eui.Theme(t.ResConst.getDefaultThm(),this.screen.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this);var a=this;t.loadGroups(this.loadwaitlist,this,this.onResourceLoadComplete,function(){a.isResourceLoadEnd=!0,a.loadAllComplete()},null,a.onResourceProgress)},a.prototype.onThemeLoadComplete=function(t){t.target.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),this.isThemeLoadEnd=!0,this.loadAllComplete()},a.prototype.loadResConfig=function(){t.log.info("load default.res.json"),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.loadResConfigComplete,this),RES.addEventListener(RES.ResourceEvent.CONFIG_LOAD_ERROR,this.loadResConfigError,this),RES.loadConfig(t.ResConst.getDefaultRes(),t.ResConst.getRootPath())},a.prototype.loadResConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.loadResConfigComplete,this),RES.removeEventListener(RES.ResourceEvent.CONFIG_LOAD_ERROR,this.loadResConfigError,this),t.log.info("load res complete ",e.target),this.loadDefaultSkinConfig()},a.prototype.loadResConfigError=function(e){t.log.info("load res error ")},a.prototype.praseConfig=function(e){if(e){t.CoreData.setConfig(e);var a=t.CoreData.skinGroups.preload;this.loadwaitlist=this.loadwaitlist.concat(a.split(","))}},a.prototype.onResourceLoadComplete=function(e){t.log.info(e.groupName+" load complete"),this.assetAdapterDict[e.groupName]&&this.assetAdapterDict[e.groupName]()},a.prototype.onItemLoadError=function(e){t.log.warn("Url:"+e.resItem.url+" has failed to load")},a.prototype.onResourceLoadError=function(e){t.log.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},a.prototype.onResourceProgress=function(t){this.commonView.loadUI.setProgress(t.itemsLoaded,t.itemsTotal)},a.prototype.loadAllComplete=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&(this.hideLoadUI(),t.dispatch(new t.WPTEvent(t.WPTEvent.LOAD_ALL_COMPLETE)))},a}(t.Actor);t.PreLoad=e,__reflect(e.prototype,"wpt.PreLoad")}(wpt||(wpt={}));var wpt;!function(t){var e;!function(e){var a=function(){function e(){if(this.isCustomHead=!1,this._channelID=-1,this._headerImageDic=new t.Dictionary,!e._canCreate)throw new Error("Singler！");e._canCreate=!1,this._tempObjArr=[],this._getMulHeadUrl=t.CoreData.getHttpUri(t.CoreData.GetPersonalAvatar+t.NetInterfaceConst.GET_AVATAR_MULTI),this._getHeadUrl=t.CoreData.getHttpUri(t.CoreData.GetPersonalAvatar+t.NetInterfaceConst.GET_AVATAR),this.startWSDL()}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._canCreate=!0,e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.clearCacheData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var a=t.length;if(0==a)for(var i in this._headerImageDic)delete this._headerImageDic[i];else for(var n=0;a>n;n++)delete this._headerImageDic[t[n]]},Object.defineProperty(e.prototype,"channelID",{set:function(t){this._channelID=t},enumerable:!0,configurable:!0}),e.prototype.startWSDL=function(){this._getMulHeadRequest=new egret.URLRequest(this._getMulHeadUrl),this._getMulHeadRequest.method=egret.URLRequestMethod.POST,this._getHeadRequest=new egret.URLRequest(this._getHeadUrl),this._getHeadRequest.method=egret.URLRequestMethod.POST},e.prototype.hasHeaderImage=function(t){var e=this._headerImageDic[t];return null!=e},e.prototype.getHeaderImages=function(e,a,n,o,r){void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=!0);var s=a.slice(),l=e.slice(),h=new i(null,e,a,n,o);if(!r){for(var c=0,u=s.length;u>c;c++)this.hasHeaderImage(s[c])&&(s.splice(c,1),l.splice(c,1),c--,u--);if(0==s.length)return void this.callback(h)}h.roleNameArrTmp=l,h.ourgameIdArrTmp=s;var p;this._getMulHeadRequest.data=new egret.URLVariables("lzAccounts="+this.getUrlRData(s)),p=new egret.URLLoader,p.dataFormat=egret.URLLoaderDataFormat.TEXT,p.addEventListener(egret.Event.COMPLETE,this.onLoaderResult,this),p.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onFault,this),p.load(this._getMulHeadRequest),h.token=p,this._tempObjArr.push(h),t.log.debug("准备获取头像:"+this.getUrlRData(s))},e.prototype.getHeaderImagesByRoleName=function(t,e,a,n,o){void 0===a&&(a=null),void 0===n&&(n=null),void 0===o&&(o=!0);var r=e.slice(),s=t.slice(),l=new i(null,t,e,a,n);if(!o){for(var h=0,c=s.length;c>h;h++)this.hasHeaderImage(s[h])&&(r.splice(h,1),s.splice(h,1),h--,c--);if(0==r.length)return void this.callback(l)}l.roleNameArrTmp=s,l.ourgameIdArrTmp=r;var u;this._getMulHeadRequest.data=new egret.URLVariables("roleNames="+this.getUrlRData(s)),u=new egret.URLLoader,u.dataFormat=egret.URLLoaderDataFormat.TEXT,u.addEventListener(egret.Event.COMPLETE,this.onLoaderResultByRolename,this),u.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onFault2,this),u.load(this._getMulHeadRequest),l.token=u,this._tempObjArr.push(l)},e.prototype.getUrlRData=function(t){for(var e="",a=0;a<t.length;a++)e+="'"+t[a]+"'",a!=t.length-1&&(e+=",");return"["+e+"]"},e.prototype.onFault=function(e){var a=e.currentTarget,i=this.takeOffTempObj(a);t.log.debug("获取头像失败:",e.type),i&&this.callback(i)},e.prototype.onFault2=function(e){var a=e.currentTarget,i=this.takeOffTempObj(a);t.log.debug("获取头像失败:",e.type),i&&this.callbackByRoleName(i)},e.prototype.onLoaderResult=function(e){var a=e.currentTarget;a.removeEventListener(egret.Event.COMPLETE,this.onLoaderResult,this),a.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onFault,this);var i=this.takeOffTempObj(a);if(t.log.debug("获取上传头像Result:"+a.data),i)try{var o=JSON.parse(a.data);if(1==o.State&&o.Value){var r;r=o.Value instanceof Array?o.Value:[o.Value];for(var s=i.ourgameIdArr.slice(),l=i.roleNameArr.slice(),h=0,c=r.length;c>h;h++){var u=r[h],p=u.LzAccount;if(p){var d=s.indexOf(p);-1!=d&&(this._headerImageDic[p]=new n(u.AvatarCode,l[d],p),s.splice(d,1),l.splice(d,1))}}for(var m=0,_=s.length;_>m;m++)this.hasHeaderImage(s[m])||(this._headerImageDic[s[m]]=new n("",l[m],s[m]))}else t.log.debug("获取上传头像失败：",o.Message);this.callback(i)}catch(T){t.log.error(T.message)}},e.prototype.onLoaderResultByRolename=function(e){var a=e.currentTarget;a.removeEventListener(egret.Event.COMPLETE,this.onLoaderResultByRolename,this),a.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onFault,this);var i=this.takeOffTempObj(a);if(t.log.debug("获取上传头像Result:"+a.data),i)try{var o=JSON.parse(a.data);if(1==o.State&&o.Value){var r;r=o.Value instanceof Array?o.Value:[o.Value];for(var s=i.ourgameIdArr.slice(),l=i.roleNameArr.slice(),h=0,c=r.length;c>h;h++){var u=r[h],p=u.RoleName;if(p){var d=l.indexOf(p);-1!=d&&(this._headerImageDic[p]=new n(u.AvatarCode,l[d],u.LzAccount),l.splice(d,1),s.splice(d,1))}}for(var m=0,_=l.length;_>m;m++)this.hasHeaderImage(l[m])||(this._headerImageDic[l[m]]=new n("",l[m],s[m]))}else t.log.debug("获取上传头像失败：",o.Message);this.callbackByRoleName(i)}catch(T){t.log.error(T.message)}},e.prototype.takeOffTempObj=function(t){for(var e=0,a=this._tempObjArr.length;a>e;e++){var i=this._tempObjArr[e];if(i.token==t)return this._tempObjArr.splice(e,1),i}return null},e.prototype.callback=function(t){if(t){for(var e=[],a=0,i=t.ourgameIdArr.length;i>a;a++)this.hasHeaderImage(t.ourgameIdArr[a])?e.push(this._headerImageDic[t.ourgameIdArr[a]]):e.push(new n("",t.roleNameArr[a],t.ourgameIdArr[a]));if(null!=t.resultFunc){var o=[e];null!=t.resultParams&&(o=o.concat(t.resultParams)),t.resultFunc.apply(null,o)}}},e.prototype.callbackByRoleName=function(t){if(t){for(var e=[],a=0,i=t.roleNameArr.length;i>a;a++)this.hasHeaderImage(t.roleNameArr[a])?e.push(this._headerImageDic[t.roleNameArr[a]]):e.push(new n("",t.roleNameArr[a],t.ourgameIdArr[a]));if(null!=t.resultFunc){var o=[e];null!=t.resultParams&&(o=o.concat(t.resultParams)),t.resultFunc.apply(null,o)}}},e}();a._canCreate=!1,e.HeaderImageManager=a,__reflect(a.prototype,"wpt.play.HeaderImageManager");var i=function(){function t(t,e,a,i,n){void 0===i&&(i=null),void 0===n&&(n=null),this.token=t,this.roleNameArr=e,this.ourgameIdArr=a,this.resultFunc=i,this.resultParams=n}return t}();__reflect(i.prototype,"TempObj");var n=function(){function t(t,e,a,i){void 0===i&&(i=null),this.image=t,this.roleName=e,this.ourgameId=a,this.other=i}return t}();__reflect(n.prototype,"DictObj")}(e=t.play||(t.play={}))}(wpt||(wpt={}));var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);var a=new wpt.play.PlayWpt;a.init(this.stage),a.start()},e}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,a,i){function n(t){e.call(i,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),a.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);